(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();function H0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vd={exports:{}},Gs={};var $h;function Bw(){if($h)return Gs;$h=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(i,u,d){var m=null;if(d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),"key"in u){d={};for(var f in u)f!=="key"&&(d[f]=u[f])}else d=u;return u=d.ref,{$$typeof:t,type:i,key:m,ref:u!==void 0?u:null,props:d}}return Gs.Fragment=r,Gs.jsx=n,Gs.jsxs=n,Gs}var Yh;function zw(){return Yh||(Yh=1,Vd.exports=Bw()),Vd.exports}var l=zw(),Fd={exports:{}},Vs={},qd={exports:{}},$d={};var Wh;function Gw(){return Wh||(Wh=1,(function(t){function r(S,_){var U=S.length;S.push(_);e:for(;0<U;){var W=U-1>>>1,X=S[W];if(0<u(X,_))S[W]=_,S[U]=X,U=W;else break e}}function n(S){return S.length===0?null:S[0]}function i(S){if(S.length===0)return null;var _=S[0],U=S.pop();if(U!==_){S[0]=U;e:for(var W=0,X=S.length,D=X>>>1;W<D;){var $=2*(W+1)-1,ee=S[$],A=$+1,Z=S[A];if(0>u(ee,U))A<X&&0>u(Z,ee)?(S[W]=Z,S[A]=U,W=A):(S[W]=ee,S[$]=U,W=$);else if(A<X&&0>u(Z,U))S[W]=Z,S[A]=U,W=A;else break e}}return _}function u(S,_){var U=S.sortIndex-_.sortIndex;return U!==0?U:S.id-_.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var m=Date,f=m.now();t.unstable_now=function(){return m.now()-f}}var g=[],x=[],y=1,b=null,w=3,v=!1,k=!1,M=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function j(S){for(var _=n(x);_!==null;){if(_.callback===null)i(x);else if(_.startTime<=S)i(x),_.sortIndex=_.expirationTime,r(g,_);else break;_=n(x)}}function I(S){if(M=!1,j(S),!k)if(n(g)!==null)k=!0,P||(P=!0,Y());else{var _=n(x);_!==null&&V(I,_.startTime-S)}}var P=!1,O=-1,H=5,q=-1;function G(){return T?!0:!(t.unstable_now()-q<H)}function F(){if(T=!1,P){var S=t.unstable_now();q=S;var _=!0;try{e:{k=!1,M&&(M=!1,R(O),O=-1),v=!0;var U=w;try{t:{for(j(S),b=n(g);b!==null&&!(b.expirationTime>S&&G());){var W=b.callback;if(typeof W=="function"){b.callback=null,w=b.priorityLevel;var X=W(b.expirationTime<=S);if(S=t.unstable_now(),typeof X=="function"){b.callback=X,j(S),_=!0;break t}b===n(g)&&i(g),j(S)}else i(g);b=n(g)}if(b!==null)_=!0;else{var D=n(x);D!==null&&V(I,D.startTime-S),_=!1}}break e}finally{b=null,w=U,v=!1}_=void 0}}finally{_?Y():P=!1}}}var Y;if(typeof N=="function")Y=function(){N(F)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,z=J.port2;J.port1.onmessage=F,Y=function(){z.postMessage(null)}}else Y=function(){E(F,0)};function V(S,_){O=E(function(){S(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(S){S.callback=null},t.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<S?Math.floor(1e3/S):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(S){switch(w){case 1:case 2:case 3:var _=3;break;default:_=w}var U=w;w=_;try{return S()}finally{w=U}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(S,_){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var U=w;w=S;try{return _()}finally{w=U}},t.unstable_scheduleCallback=function(S,_,U){var W=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,S){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=U+X,S={id:y++,callback:_,priorityLevel:S,startTime:U,expirationTime:X,sortIndex:-1},U>W?(S.sortIndex=U,r(x,S),n(g)===null&&S===n(x)&&(M?(R(O),O=-1):M=!0,V(I,U-W))):(S.sortIndex=X,r(g,S),k||v||(k=!0,P||(P=!0,Y()))),S},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(S){var _=w;return function(){var U=w;w=_;try{return S.apply(this,arguments)}finally{w=U}}}})($d)),$d}var Kh;function Vw(){return Kh||(Kh=1,qd.exports=Gw()),qd.exports}var Yd={exports:{}},De={};var Qh;function Fw(){if(Qh)return De;Qh=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),w=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,T={};function E(D,$,ee){this.props=D,this.context=$,this.refs=T,this.updater=ee||k}E.prototype.isReactComponent={},E.prototype.setState=function(D,$){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,$,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function R(){}R.prototype=E.prototype;function N(D,$,ee){this.props=D,this.context=$,this.refs=T,this.updater=ee||k}var j=N.prototype=new R;j.constructor=N,M(j,E.prototype),j.isPureReactComponent=!0;var I=Array.isArray;function P(){}var O={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function q(D,$,ee){var A=ee.ref;return{$$typeof:t,type:D,key:$,ref:A!==void 0?A:null,props:ee}}function G(D,$){return q(D.type,$,D.props)}function F(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function Y(D){var $={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ee){return $[ee]})}var J=/\/+/g;function z(D,$){return typeof D=="object"&&D!==null&&D.key!=null?Y(""+D.key):$.toString(36)}function V(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(P,P):(D.status="pending",D.then(function($){D.status==="pending"&&(D.status="fulfilled",D.value=$)},function($){D.status==="pending"&&(D.status="rejected",D.reason=$)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function S(D,$,ee,A,Z){var se=typeof D;(se==="undefined"||se==="boolean")&&(D=null);var ue=!1;if(D===null)ue=!0;else switch(se){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(D.$$typeof){case t:case r:ue=!0;break;case y:return ue=D._init,S(ue(D._payload),$,ee,A,Z)}}if(ue)return Z=Z(D),ue=A===""?"."+z(D,0):A,I(Z)?(ee="",ue!=null&&(ee=ue.replace(J,"$&/")+"/"),S(Z,$,ee,"",function(be){return be})):Z!=null&&(F(Z)&&(Z=G(Z,ee+(Z.key==null||D&&D.key===Z.key?"":(""+Z.key).replace(J,"$&/")+"/")+ue)),$.push(Z)),1;ue=0;var ie=A===""?".":A+":";if(I(D))for(var pe=0;pe<D.length;pe++)A=D[pe],se=ie+z(A,pe),ue+=S(A,$,ee,se,Z);else if(pe=v(D),typeof pe=="function")for(D=pe.call(D),pe=0;!(A=D.next()).done;)A=A.value,se=ie+z(A,pe++),ue+=S(A,$,ee,se,Z);else if(se==="object"){if(typeof D.then=="function")return S(V(D),$,ee,A,Z);throw $=String(D),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ue}function _(D,$,ee){if(D==null)return D;var A=[],Z=0;return S(D,A,"","",function(se){return $.call(ee,se,Z++)}),A}function U(D){if(D._status===-1){var $=D._result;$=$(),$.then(function(ee){(D._status===0||D._status===-1)&&(D._status=1,D._result=ee)},function(ee){(D._status===0||D._status===-1)&&(D._status=2,D._result=ee)}),D._status===-1&&(D._status=0,D._result=$)}if(D._status===1)return D._result.default;throw D._result}var W=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},X={map:_,forEach:function(D,$,ee){_(D,function(){$.apply(this,arguments)},ee)},count:function(D){var $=0;return _(D,function(){$++}),$},toArray:function(D){return _(D,function($){return $})||[]},only:function(D){if(!F(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return De.Activity=b,De.Children=X,De.Component=E,De.Fragment=n,De.Profiler=u,De.PureComponent=N,De.StrictMode=i,De.Suspense=g,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,De.__COMPILER_RUNTIME={__proto__:null,c:function(D){return O.H.useMemoCache(D)}},De.cache=function(D){return function(){return D.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(D,$,ee){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var A=M({},D.props),Z=D.key;if($!=null)for(se in $.key!==void 0&&(Z=""+$.key),$)!H.call($,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&$.ref===void 0||(A[se]=$[se]);var se=arguments.length-2;if(se===1)A.children=ee;else if(1<se){for(var ue=Array(se),ie=0;ie<se;ie++)ue[ie]=arguments[ie+2];A.children=ue}return q(D.type,Z,A)},De.createContext=function(D){return D={$$typeof:m,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:d,_context:D},D},De.createElement=function(D,$,ee){var A,Z={},se=null;if($!=null)for(A in $.key!==void 0&&(se=""+$.key),$)H.call($,A)&&A!=="key"&&A!=="__self"&&A!=="__source"&&(Z[A]=$[A]);var ue=arguments.length-2;if(ue===1)Z.children=ee;else if(1<ue){for(var ie=Array(ue),pe=0;pe<ue;pe++)ie[pe]=arguments[pe+2];Z.children=ie}if(D&&D.defaultProps)for(A in ue=D.defaultProps,ue)Z[A]===void 0&&(Z[A]=ue[A]);return q(D,se,Z)},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:f,render:D}},De.isValidElement=F,De.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:U}},De.memo=function(D,$){return{$$typeof:x,type:D,compare:$===void 0?null:$}},De.startTransition=function(D){var $=O.T,ee={};O.T=ee;try{var A=D(),Z=O.S;Z!==null&&Z(ee,A),typeof A=="object"&&A!==null&&typeof A.then=="function"&&A.then(P,W)}catch(se){W(se)}finally{$!==null&&ee.types!==null&&($.types=ee.types),O.T=$}},De.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},De.use=function(D){return O.H.use(D)},De.useActionState=function(D,$,ee){return O.H.useActionState(D,$,ee)},De.useCallback=function(D,$){return O.H.useCallback(D,$)},De.useContext=function(D){return O.H.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D,$){return O.H.useDeferredValue(D,$)},De.useEffect=function(D,$){return O.H.useEffect(D,$)},De.useEffectEvent=function(D){return O.H.useEffectEvent(D)},De.useId=function(){return O.H.useId()},De.useImperativeHandle=function(D,$,ee){return O.H.useImperativeHandle(D,$,ee)},De.useInsertionEffect=function(D,$){return O.H.useInsertionEffect(D,$)},De.useLayoutEffect=function(D,$){return O.H.useLayoutEffect(D,$)},De.useMemo=function(D,$){return O.H.useMemo(D,$)},De.useOptimistic=function(D,$){return O.H.useOptimistic(D,$)},De.useReducer=function(D,$,ee){return O.H.useReducer(D,$,ee)},De.useRef=function(D){return O.H.useRef(D)},De.useState=function(D){return O.H.useState(D)},De.useSyncExternalStore=function(D,$,ee){return O.H.useSyncExternalStore(D,$,ee)},De.useTransition=function(){return O.H.useTransition()},De.version="19.2.4",De}var Xh;function ii(){return Xh||(Xh=1,Yd.exports=Fw()),Yd.exports}var Wd={exports:{}},$t={};var Zh;function qw(){if(Zh)return $t;Zh=1;var t=ii();function r(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(g,x,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:g,containerInfo:x,implementation:y}}var m=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$t.createPortal=function(g,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(r(299));return d(g,x,null,y)},$t.flushSync=function(g){var x=m.T,y=i.p;try{if(m.T=null,i.p=2,g)return g()}finally{m.T=x,i.p=y,i.d.f()}},$t.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},$t.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},$t.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var y=x.as,b=f(y,x.crossOrigin),w=typeof x.integrity=="string"?x.integrity:void 0,v=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:v}):y==="script"&&i.d.X(g,{crossOrigin:b,integrity:w,fetchPriority:v,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},$t.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=f(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},$t.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,b=f(y,x.crossOrigin);i.d.L(g,y,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},$t.preloadModule=function(g,x){if(typeof g=="string")if(x){var y=f(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},$t.requestFormReset=function(g){i.d.r(g)},$t.unstable_batchedUpdates=function(g,x){return g(x)},$t.useFormState=function(g,x,y){return m.H.useFormState(g,x,y)},$t.useFormStatus=function(){return m.H.useHostTransitionStatus()},$t.version="19.2.4",$t}var Jh;function Rx(){if(Jh)return Wd.exports;Jh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Wd.exports=qw(),Wd.exports}var eg;function $w(){if(eg)return Vs;eg=1;var t=Vw(),r=ii(),n=Rx();function i(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function m(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function f(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function g(e){if(d(e)!==e)throw Error(i(188))}function x(e){var a=e.alternate;if(!a){if(a=d(e),a===null)throw Error(i(188));return a!==e?null:e}for(var s=e,c=a;;){var p=s.return;if(p===null)break;var h=p.alternate;if(h===null){if(c=p.return,c!==null){s=c;continue}break}if(p.child===h.child){for(h=p.child;h;){if(h===s)return g(p),e;if(h===c)return g(p),a;h=h.sibling}throw Error(i(188))}if(s.return!==c.return)s=p,c=h;else{for(var C=!1,L=p.child;L;){if(L===s){C=!0,s=p,c=h;break}if(L===c){C=!0,c=p,s=h;break}L=L.sibling}if(!C){for(L=h.child;L;){if(L===s){C=!0,s=h,c=p;break}if(L===c){C=!0,c=h,s=p;break}L=L.sibling}if(!C)throw Error(i(189))}}if(s.alternate!==c)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:a}function y(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=y(e),a!==null)return a;e=e.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var J=Symbol.for("react.client.reference");function z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case N:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case j:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return a=e.displayName||null,a!==null?a:z(e.type)||"Memo";case H:a=e._payload,e=e._init;try{return z(e(a))}catch{}}return null}var V=Array.isArray,S=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},W=[],X=-1;function D(e){return{current:e}}function $(e){0>X||(e.current=W[X],W[X]=null,X--)}function ee(e,a){X++,W[X]=e.current,e.current=a}var A=D(null),Z=D(null),se=D(null),ue=D(null);function ie(e,a){switch(ee(se,a),ee(Z,e),ee(A,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?hh(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=hh(a),e=gh(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(A),ee(A,e)}function pe(){$(A),$(Z),$(se)}function be(e){e.memoizedState!==null&&ee(ue,e);var a=A.current,s=gh(a,e.type);a!==s&&(ee(Z,e),ee(A,s))}function we(e){Z.current===e&&($(A),$(Z)),ue.current===e&&($(ue),Hs._currentValue=U)}var ye,ke;function Ce(e){if(ye===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);ye=a&&a[1]||"",ke=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+e+ke}var Ae=!1;function Le(e,a){if(!e||Ae)return"";Ae=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(oe){var re=oe}Reflect.construct(e,[],me)}else{try{me.call()}catch(oe){re=oe}e.call(me.prototype)}}else{try{throw Error()}catch(oe){re=oe}(me=e())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=c.DetermineComponentFrameRoot(),C=h[0],L=h[1];if(C&&L){var K=C.split(`
`),ne=L.split(`
`);for(p=c=0;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;for(;p<ne.length&&!ne[p].includes("DetermineComponentFrameRoot");)p++;if(c===K.length||p===ne.length)for(c=K.length-1,p=ne.length-1;1<=c&&0<=p&&K[c]!==ne[p];)p--;for(;1<=c&&0<=p;c--,p--)if(K[c]!==ne[p]){if(c!==1||p!==1)do if(c--,p--,0>p||K[c]!==ne[p]){var ce=`
`+K[c].replace(" at new "," at ");return e.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",e.displayName)),ce}while(1<=c&&0<=p);break}}}finally{Ae=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ce(s):""}function st(e,a){switch(e.tag){case 26:case 27:case 5:return Ce(e.type);case 16:return Ce("Lazy");case 13:return e.child!==a&&a!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Le(e.type,!1);case 11:return Le(e.type.render,!1);case 1:return Le(e.type,!0);case 31:return Ce("Activity");default:return""}}function yt(e){try{var a="",s=null;do a+=st(e,s),s=e,e=e.return;while(e);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rt=Object.prototype.hasOwnProperty,vt=t.unstable_scheduleCallback,Lt=t.unstable_cancelCallback,Dt=t.unstable_shouldYield,de=t.unstable_requestPaint,Ee=t.unstable_now,Ge=t.unstable_getCurrentPriorityLevel,Ye=t.unstable_ImmediatePriority,Te=t.unstable_UserBlockingPriority,je=t.unstable_NormalPriority,He=t.unstable_LowPriority,ct=t.unstable_IdlePriority,Ct=t.log,Re=t.unstable_setDisableYieldValue,St=null,bt=null;function Vt(e){if(typeof Ct=="function"&&Re(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(St,e)}catch{}}var lt=Math.clz32?Math.clz32:Gr,Ft=Math.log,ya=Math.LN2;function Gr(e){return e>>>=0,e===0?32:31-(Ft(e)/ya|0)|0}var Ua=256,Ba=262144,Vr=4194304;function Ja(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fr(e,a,s){var c=e.pendingLanes;if(c===0)return 0;var p=0,h=e.suspendedLanes,C=e.pingedLanes;e=e.warmLanes;var L=c&134217727;return L!==0?(c=L&~h,c!==0?p=Ja(c):(C&=L,C!==0?p=Ja(C):s||(s=L&~e,s!==0&&(p=Ja(s))))):(L=c&~h,L!==0?p=Ja(L):C!==0?p=Ja(C):s||(s=c&~e,s!==0&&(p=Ja(s)))),p===0?0:a!==0&&a!==p&&(a&h)===0&&(h=p&-p,s=a&-a,h>=s||h===32&&(s&4194048)!==0)?a:p}function lr(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Rc(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xi(){var e=Vr;return Vr<<=1,(Vr&62914560)===0&&(Vr=4194304),e}function Ko(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function cr(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lc(e,a,s,c,p,h){var C=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var L=e.entanglements,K=e.expirationTimes,ne=e.hiddenUpdates;for(s=C&~s;0<s;){var ce=31-lt(s),me=1<<ce;L[ce]=0,K[ce]=-1;var re=ne[ce];if(re!==null)for(ne[ce]=null,ce=0;ce<re.length;ce++){var oe=re[ce];oe!==null&&(oe.lane&=-536870913)}s&=~me}c!==0&&yi(e,c,0),h!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=h&~(C&~a))}function yi(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var c=31-lt(a);e.entangledLanes|=a,e.entanglements[c]=e.entanglements[c]|1073741824|s&261930}function bi(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var c=31-lt(s),p=1<<c;p&a|e[c]&a&&(e[c]|=a),s&=~p}}function wi(e,a){var s=a&-a;return s=(s&42)!==0?1:Qo(s),(s&(e.suspendedLanes|a))!==0?0:s}function Qo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ki(){var e=_.p;return e!==0?e:(e=window.event,e===void 0?32:Uh(e.type))}function vi(e,a){var s=_.p;try{return _.p=e,a()}finally{_.p=s}}var za=Math.random().toString(36).slice(2),Ot="__reactFiber$"+za,qt="__reactProps$"+za,en="__reactContainer$"+za,qr="__reactEvents$"+za,Ci="__reactListeners$"+za,Dc="__reactHandles$"+za,Si="__reactResources$"+za,ur="__reactMarker$"+za;function Zo(e){delete e[Ot],delete e[qt],delete e[qr],delete e[Ci],delete e[Dc]}function Mn(e){var a=e[Ot];if(a)return a;for(var s=e.parentNode;s;){if(a=s[en]||s[Ot]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=Ch(e);e!==null;){if(s=e[Ot])return s;e=Ch(e)}return a}e=s,s=e.parentNode}return null}function _n(e){if(e=e[Ot]||e[en]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function An(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(i(33))}function jn(e){var a=e[Si];return a||(a=e[Si]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Nt(e){e[ur]=!0}var Ni=new Set,Ei={};function tn(e,a){Rn(e,a),Rn(e+"Capture",a)}function Rn(e,a){for(Ei[e]=a,e=0;e<a.length;e++)Ni.add(a[e])}var Oc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jo={},Ti={};function Pc(e){return Rt.call(Ti,e)?!0:Rt.call(Jo,e)?!1:Oc.test(e)?Ti[e]=!0:(Jo[e]=!0,!1)}function $r(e,a,s){if(Pc(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function Yr(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function Ma(e,a,s,c){if(c===null)e.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+c)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mi(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ic(e,a,s){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,h=c.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return p.call(this)},set:function(C){s=""+C,h.call(this,C)}}),Object.defineProperty(e,a,{enumerable:c.enumerable}),{getValue:function(){return s},setValue:function(C){s=""+C},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Wr(e){if(!e._valueTracker){var a=Mi(e)?"checked":"value";e._valueTracker=Ic(e,a,""+e[a])}}function _i(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),c="";return e&&(c=Mi(e)?e.checked?"true":"false":e.value),e=c,e!==s?(a.setValue(e),!0):!1}function dr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hc=/[\n"\\]/g;function Xt(e){return e.replace(Hc,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function fr(e,a,s,c,p,h,C,L){e.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.type=C:e.removeAttribute("type"),a!=null?C==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Qt(a)):e.value!==""+Qt(a)&&(e.value=""+Qt(a)):C!=="submit"&&C!=="reset"||e.removeAttribute("value"),a!=null?es(e,C,Qt(a)):s!=null?es(e,C,Qt(s)):c!=null&&e.removeAttribute("value"),p==null&&h!=null&&(e.defaultChecked=!!h),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?e.name=""+Qt(L):e.removeAttribute("name")}function Ai(e,a,s,c,p,h,C,L){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),a!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||a!=null)){Wr(e);return}s=s!=null?""+Qt(s):"",a=a!=null?""+Qt(a):s,L||a===e.value||(e.value=a),e.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=L?e.checked:!!c,e.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.name=C),Wr(e)}function es(e,a,s){a==="number"&&dr(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function an(e,a,s,c){if(e=e.options,a){a={};for(var p=0;p<s.length;p++)a["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=a.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&c&&(e[s].defaultSelected=!0)}else{for(s=""+Qt(s),a=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}a!==null||e[p].disabled||(a=e[p])}a!==null&&(a.selected=!0)}}function uf(e,a,s){if(a!=null&&(a=""+Qt(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+Qt(s):""}function df(e,a,s,c){if(a==null){if(c!=null){if(s!=null)throw Error(i(92));if(V(c)){if(1<c.length)throw Error(i(93));c=c[0]}s=c}s==null&&(s=""),a=s}s=Qt(a),e.defaultValue=s,c=e.textContent,c===s&&c!==""&&c!==null&&(e.value=c),Wr(e)}function Kr(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var Ob=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ff(e,a,s){var c=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?c?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":c?e.setProperty(a,s):typeof s!="number"||s===0||Ob.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function mf(e,a,s){if(a!=null&&typeof a!="object")throw Error(i(62));if(e=e.style,s!=null){for(var c in s)!s.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&s[p]!==c&&ff(e,p,c)}else for(var h in a)a.hasOwnProperty(h)&&ff(e,h,a[h])}function Uc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ji(e){return Ib.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function nn(){}var Bc=null;function zc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qr=null,Xr=null;function pf(e){var a=_n(e);if(a&&(e=a.stateNode)){var s=e[qt]||null;e:switch(e=a.stateNode,a.type){case"input":if(fr(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Xt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var c=s[a];if(c!==e&&c.form===e.form){var p=c[qt]||null;if(!p)throw Error(i(90));fr(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<s.length;a++)c=s[a],c.form===e.form&&_i(c)}break e;case"textarea":uf(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&an(e,!!s.multiple,a,!1)}}}var Gc=!1;function hf(e,a,s){if(Gc)return e(a,s);Gc=!0;try{var c=e(a);return c}finally{if(Gc=!1,(Qr!==null||Xr!==null)&&(yl(),Qr&&(a=Qr,e=Xr,Xr=Qr=null,pf(a),e)))for(a=0;a<e.length;a++)pf(e[a])}}function ts(e,a){var s=e.stateNode;if(s===null)return null;var c=s[qt]||null;if(c===null)return null;s=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,a,typeof s));return s}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vc=!1;if(rn)try{var as={};Object.defineProperty(as,"passive",{get:function(){Vc=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{Vc=!1}var Ln=null,Fc=null,Ri=null;function gf(){if(Ri)return Ri;var e,a=Fc,s=a.length,c,p="value"in Ln?Ln.value:Ln.textContent,h=p.length;for(e=0;e<s&&a[e]===p[e];e++);var C=s-e;for(c=1;c<=C&&a[s-c]===p[h-c];c++);return Ri=p.slice(e,1<c?1-c:void 0)}function Li(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Di(){return!0}function xf(){return!1}function Zt(e){function a(s,c,p,h,C){this._reactName=s,this._targetInst=p,this.type=c,this.nativeEvent=h,this.target=C,this.currentTarget=null;for(var L in e)e.hasOwnProperty(L)&&(s=e[L],this[L]=s?s(h):h[L]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Di:xf,this.isPropagationStopped=xf,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),a}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Zt(mr),ns=b({},mr,{view:0,detail:0}),Hb=Zt(ns),qc,$c,rs,Pi=b({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rs&&(rs&&e.type==="mousemove"?(qc=e.screenX-rs.screenX,$c=e.screenY-rs.screenY):$c=qc=0,rs=e),qc)},movementY:function(e){return"movementY"in e?e.movementY:$c}}),yf=Zt(Pi),Ub=b({},Pi,{dataTransfer:0}),Bb=Zt(Ub),zb=b({},ns,{relatedTarget:0}),Yc=Zt(zb),Gb=b({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vb=Zt(Gb),Fb=b({},mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qb=Zt(Fb),$b=b({},mr,{data:0}),bf=Zt($b),Yb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qb(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Kb[e])?!!a[e]:!1}function Wc(){return Qb}var Xb=b({},ns,{key:function(e){if(e.key){var a=Yb[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wc,charCode:function(e){return e.type==="keypress"?Li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zb=Zt(Xb),Jb=b({},Pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=Zt(Jb),e1=b({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wc}),t1=Zt(e1),a1=b({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),n1=Zt(a1),r1=b({},Pi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=Zt(r1),s1=b({},mr,{newState:0,oldState:0}),i1=Zt(s1),l1=[9,13,27,32],Kc=rn&&"CompositionEvent"in window,os=null;rn&&"documentMode"in document&&(os=document.documentMode);var c1=rn&&"TextEvent"in window&&!os,kf=rn&&(!Kc||os&&8<os&&11>=os),vf=" ",Cf=!1;function Sf(e,a){switch(e){case"keyup":return l1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function u1(e,a){switch(e){case"compositionend":return Nf(a);case"keypress":return a.which!==32?null:(Cf=!0,vf);case"textInput":return e=a.data,e===vf&&Cf?null:e;default:return null}}function d1(e,a){if(Zr)return e==="compositionend"||!Kc&&Sf(e,a)?(e=gf(),Ri=Fc=Ln=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return kf&&a.locale!=="ko"?null:a.data;default:return null}}var f1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!f1[e.type]:a==="textarea"}function Tf(e,a,s,c){Qr?Xr?Xr.push(c):Xr=[c]:Qr=c,a=Nl(a,"onChange"),0<a.length&&(s=new Oi("onChange","change",null,s,c),e.push({event:s,listeners:a}))}var ss=null,is=null;function m1(e){ch(e,0)}function Ii(e){var a=An(e);if(_i(a))return e}function Mf(e,a){if(e==="change")return a}var _f=!1;if(rn){var Qc;if(rn){var Xc="oninput"in document;if(!Xc){var Af=document.createElement("div");Af.setAttribute("oninput","return;"),Xc=typeof Af.oninput=="function"}Qc=Xc}else Qc=!1;_f=Qc&&(!document.documentMode||9<document.documentMode)}function jf(){ss&&(ss.detachEvent("onpropertychange",Rf),is=ss=null)}function Rf(e){if(e.propertyName==="value"&&Ii(is)){var a=[];Tf(a,is,e,zc(e)),hf(m1,a)}}function p1(e,a,s){e==="focusin"?(jf(),ss=a,is=s,ss.attachEvent("onpropertychange",Rf)):e==="focusout"&&jf()}function h1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ii(is)}function g1(e,a){if(e==="click")return Ii(a)}function x1(e,a){if(e==="input"||e==="change")return Ii(a)}function y1(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var ia=typeof Object.is=="function"?Object.is:y1;function ls(e,a){if(ia(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),c=Object.keys(a);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var p=s[c];if(!Rt.call(a,p)||!ia(e[p],a[p]))return!1}return!0}function Lf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Df(e,a){var s=Lf(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=a&&c>=a)return{node:s,offset:a-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Lf(s)}}function Of(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Of(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Pf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=dr(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=dr(e.document)}return a}function Zc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var b1=rn&&"documentMode"in document&&11>=document.documentMode,Jr=null,Jc=null,cs=null,eu=!1;function If(e,a,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;eu||Jr==null||Jr!==dr(c)||(c=Jr,"selectionStart"in c&&Zc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),cs&&ls(cs,c)||(cs=c,c=Nl(Jc,"onSelect"),0<c.length&&(a=new Oi("onSelect","select",null,a,s),e.push({event:a,listeners:c}),a.target=Jr)))}function pr(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var eo={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionrun:pr("Transition","TransitionRun"),transitionstart:pr("Transition","TransitionStart"),transitioncancel:pr("Transition","TransitionCancel"),transitionend:pr("Transition","TransitionEnd")},tu={},Hf={};rn&&(Hf=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function hr(e){if(tu[e])return tu[e];if(!eo[e])return e;var a=eo[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Hf)return tu[e]=a[s];return e}var Uf=hr("animationend"),Bf=hr("animationiteration"),zf=hr("animationstart"),w1=hr("transitionrun"),k1=hr("transitionstart"),v1=hr("transitioncancel"),Gf=hr("transitionend"),Vf=new Map,au="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");au.push("scrollEnd");function _a(e,a){Vf.set(e,a),tn(a,[e])}var Hi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ba=[],to=0,nu=0;function Ui(){for(var e=to,a=nu=to=0;a<e;){var s=ba[a];ba[a++]=null;var c=ba[a];ba[a++]=null;var p=ba[a];ba[a++]=null;var h=ba[a];if(ba[a++]=null,c!==null&&p!==null){var C=c.pending;C===null?p.next=p:(p.next=C.next,C.next=p),c.pending=p}h!==0&&Ff(s,p,h)}}function Bi(e,a,s,c){ba[to++]=e,ba[to++]=a,ba[to++]=s,ba[to++]=c,nu|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function ru(e,a,s,c){return Bi(e,a,s,c),zi(e)}function gr(e,a){return Bi(e,null,null,a),zi(e)}function Ff(e,a,s){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s);for(var p=!1,h=e.return;h!==null;)h.childLanes|=s,c=h.alternate,c!==null&&(c.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(p=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,p&&a!==null&&(p=31-lt(s),e=h.hiddenUpdates,c=e[p],c===null?e[p]=[a]:c.push(a),a.lane=s|536870912),h):null}function zi(e){if(50<js)throw js=0,md=null,Error(i(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var ao={};function C1(e,a,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(e,a,s,c){return new C1(e,a,s,c)}function ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function on(e,a){var s=e.alternate;return s===null?(s=la(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function qf(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Gi(e,a,s,c,p,h){var C=0;if(c=e,typeof e=="function")ou(e)&&(C=1);else if(typeof e=="string")C=Mw(e,s,A.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case q:return e=la(31,s,a,p),e.elementType=q,e.lanes=h,e;case M:return xr(s.children,p,h,a);case T:C=8,p|=24;break;case E:return e=la(12,s,a,p|2),e.elementType=E,e.lanes=h,e;case I:return e=la(13,s,a,p),e.elementType=I,e.lanes=h,e;case P:return e=la(19,s,a,p),e.elementType=P,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:C=10;break e;case R:C=9;break e;case j:C=11;break e;case O:C=14;break e;case H:C=16,c=null;break e}C=29,s=Error(i(130,e===null?"null":typeof e,"")),c=null}return a=la(C,s,a,p),a.elementType=e,a.type=c,a.lanes=h,a}function xr(e,a,s,c){return e=la(7,e,c,a),e.lanes=s,e}function su(e,a,s){return e=la(6,e,null,a),e.lanes=s,e}function $f(e){var a=la(18,null,null,0);return a.stateNode=e,a}function iu(e,a,s){return a=la(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Yf=new WeakMap;function wa(e,a){if(typeof e=="object"&&e!==null){var s=Yf.get(e);return s!==void 0?s:(a={value:e,source:a,stack:yt(a)},Yf.set(e,a),a)}return{value:e,source:a,stack:yt(a)}}var no=[],ro=0,Vi=null,us=0,ka=[],va=0,Dn=null,Ga=1,Va="";function sn(e,a){no[ro++]=us,no[ro++]=Vi,Vi=e,us=a}function Wf(e,a,s){ka[va++]=Ga,ka[va++]=Va,ka[va++]=Dn,Dn=e;var c=Ga;e=Va;var p=32-lt(c)-1;c&=~(1<<p),s+=1;var h=32-lt(a)+p;if(30<h){var C=p-p%5;h=(c&(1<<C)-1).toString(32),c>>=C,p-=C,Ga=1<<32-lt(a)+p|s<<p|c,Va=h+e}else Ga=1<<h|s<<p|c,Va=e}function lu(e){e.return!==null&&(sn(e,1),Wf(e,1,0))}function cu(e){for(;e===Vi;)Vi=no[--ro],no[ro]=null,us=no[--ro],no[ro]=null;for(;e===Dn;)Dn=ka[--va],ka[va]=null,Va=ka[--va],ka[va]=null,Ga=ka[--va],ka[va]=null}function Kf(e,a){ka[va++]=Ga,ka[va++]=Va,ka[va++]=Dn,Ga=a.id,Va=a.overflow,Dn=e}var Ut=null,ut=null,qe=!1,On=null,Ca=!1,uu=Error(i(519));function Pn(e){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ds(wa(a,e)),uu}function Qf(e){var a=e.stateNode,s=e.type,c=e.memoizedProps;switch(a[Ot]=e,a[qt]=c,s){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(s=0;s<Ls.length;s++)ze(Ls[s],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":ze("invalid",a),Ai(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ze("invalid",a);break;case"textarea":ze("invalid",a),df(a,c.value,c.defaultValue,c.children)}s=c.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||c.suppressHydrationWarning===!0||mh(a.textContent,s)?(c.popover!=null&&(ze("beforetoggle",a),ze("toggle",a)),c.onScroll!=null&&ze("scroll",a),c.onScrollEnd!=null&&ze("scrollend",a),c.onClick!=null&&(a.onclick=nn),a=!0):a=!1,a||Pn(e,!0)}function Xf(e){for(Ut=e.return;Ut;)switch(Ut.tag){case 5:case 31:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:Ut=Ut.return}}function oo(e){if(e!==Ut)return!1;if(!qe)return Xf(e),qe=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Md(e.type,e.memoizedProps)),s=!s),s&&ut&&Pn(e),Xf(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));ut=vh(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));ut=vh(e)}else a===27?(a=ut,Qn(e.type)?(e=Ld,Ld=null,ut=e):ut=a):ut=Ut?Na(e.stateNode.nextSibling):null;return!0}function yr(){ut=Ut=null,qe=!1}function du(){var e=On;return e!==null&&(aa===null?aa=e:aa.push.apply(aa,e),On=null),e}function ds(e){On===null?On=[e]:On.push(e)}var fu=D(null),br=null,ln=null;function In(e,a,s){ee(fu,a._currentValue),a._currentValue=s}function cn(e){e._currentValue=fu.current,$(fu)}function mu(e,a,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),e===s)break;e=e.return}}function pu(e,a,s,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var h=p.dependencies;if(h!==null){var C=p.child;h=h.firstContext;e:for(;h!==null;){var L=h;h=p;for(var K=0;K<a.length;K++)if(L.context===a[K]){h.lanes|=s,L=h.alternate,L!==null&&(L.lanes|=s),mu(h.return,s,e),c||(C=null);break e}h=L.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(i(341));C.lanes|=s,h=C.alternate,h!==null&&(h.lanes|=s),mu(C,s,e),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===e){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function so(e,a,s,c){e=null;for(var p=a,h=!1;p!==null;){if(!h){if((p.flags&524288)!==0)h=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var L=p.type;ia(p.pendingProps.value,C.value)||(e!==null?e.push(L):e=[L])}}else if(p===ue.current){if(C=p.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Hs):e=[Hs])}p=p.return}e!==null&&pu(a,e,s,c),a.flags|=262144}function Fi(e){for(e=e.firstContext;e!==null;){if(!ia(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function wr(e){br=e,ln=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bt(e){return Zf(br,e)}function qi(e,a){return br===null&&wr(e),Zf(e,a)}function Zf(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},ln===null){if(e===null)throw Error(i(308));ln=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else ln=ln.next=a;return s}var S1=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,c){e.push(c)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},N1=t.unstable_scheduleCallback,E1=t.unstable_NormalPriority,Et={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hu(){return{controller:new S1,data:new Map,refCount:0}}function fs(e){e.refCount--,e.refCount===0&&N1(E1,function(){e.controller.abort()})}var ms=null,gu=0,io=0,lo=null;function T1(e,a){if(ms===null){var s=ms=[];gu=0,io=bd(),lo={status:"pending",value:void 0,then:function(c){s.push(c)}}}return gu++,a.then(Jf,Jf),a}function Jf(){if(--gu===0&&ms!==null){lo!==null&&(lo.status="fulfilled");var e=ms;ms=null,io=0,lo=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function M1(e,a){var s=[],c={status:"pending",value:null,reason:null,then:function(p){s.push(p)}};return e.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<s.length;p++)(0,s[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<s.length;p++)(0,s[p])(void 0)}),c}var em=S.S;S.S=function(e,a){Ip=Ee(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&T1(e,a),em!==null&&em(e,a)};var kr=D(null);function xu(){var e=kr.current;return e!==null?e:it.pooledCache}function $i(e,a){a===null?ee(kr,kr.current):ee(kr,a.pool)}function tm(){var e=xu();return e===null?null:{parent:Et._currentValue,pool:e}}var co=Error(i(460)),yu=Error(i(474)),Yi=Error(i(542)),Wi={then:function(){}};function am(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nm(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(nn,nn),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,om(e),e;default:if(typeof a.status=="string")a.then(nn,nn);else{if(e=it,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=a,e.status="pending",e.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,om(e),e}throw Cr=a,co}}function vr(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Cr=s,co):s}}var Cr=null;function rm(){if(Cr===null)throw Error(i(459));var e=Cr;return Cr=null,e}function om(e){if(e===co||e===Yi)throw Error(i(483))}var uo=null,ps=0;function Ki(e){var a=ps;return ps+=1,uo===null&&(uo=[]),nm(uo,e,a)}function hs(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Qi(e,a){throw a.$$typeof===w?Error(i(525)):(e=Object.prototype.toString.call(a),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function sm(e){function a(te,Q){if(e){var ae=te.deletions;ae===null?(te.deletions=[Q],te.flags|=16):ae.push(Q)}}function s(te,Q){if(!e)return null;for(;Q!==null;)a(te,Q),Q=Q.sibling;return null}function c(te){for(var Q=new Map;te!==null;)te.key!==null?Q.set(te.key,te):Q.set(te.index,te),te=te.sibling;return Q}function p(te,Q){return te=on(te,Q),te.index=0,te.sibling=null,te}function h(te,Q,ae){return te.index=ae,e?(ae=te.alternate,ae!==null?(ae=ae.index,ae<Q?(te.flags|=67108866,Q):ae):(te.flags|=67108866,Q)):(te.flags|=1048576,Q)}function C(te){return e&&te.alternate===null&&(te.flags|=67108866),te}function L(te,Q,ae,fe){return Q===null||Q.tag!==6?(Q=su(ae,te.mode,fe),Q.return=te,Q):(Q=p(Q,ae),Q.return=te,Q)}function K(te,Q,ae,fe){var Ne=ae.type;return Ne===M?ce(te,Q,ae.props.children,fe,ae.key):Q!==null&&(Q.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===H&&vr(Ne)===Q.type)?(Q=p(Q,ae.props),hs(Q,ae),Q.return=te,Q):(Q=Gi(ae.type,ae.key,ae.props,null,te.mode,fe),hs(Q,ae),Q.return=te,Q)}function ne(te,Q,ae,fe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ae.containerInfo||Q.stateNode.implementation!==ae.implementation?(Q=iu(ae,te.mode,fe),Q.return=te,Q):(Q=p(Q,ae.children||[]),Q.return=te,Q)}function ce(te,Q,ae,fe,Ne){return Q===null||Q.tag!==7?(Q=xr(ae,te.mode,fe,Ne),Q.return=te,Q):(Q=p(Q,ae),Q.return=te,Q)}function me(te,Q,ae){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=su(""+Q,te.mode,ae),Q.return=te,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:return ae=Gi(Q.type,Q.key,Q.props,null,te.mode,ae),hs(ae,Q),ae.return=te,ae;case k:return Q=iu(Q,te.mode,ae),Q.return=te,Q;case H:return Q=vr(Q),me(te,Q,ae)}if(V(Q)||Y(Q))return Q=xr(Q,te.mode,ae,null),Q.return=te,Q;if(typeof Q.then=="function")return me(te,Ki(Q),ae);if(Q.$$typeof===N)return me(te,qi(te,Q),ae);Qi(te,Q)}return null}function re(te,Q,ae,fe){var Ne=Q!==null?Q.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ne!==null?null:L(te,Q,""+ae,fe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:return ae.key===Ne?K(te,Q,ae,fe):null;case k:return ae.key===Ne?ne(te,Q,ae,fe):null;case H:return ae=vr(ae),re(te,Q,ae,fe)}if(V(ae)||Y(ae))return Ne!==null?null:ce(te,Q,ae,fe,null);if(typeof ae.then=="function")return re(te,Q,Ki(ae),fe);if(ae.$$typeof===N)return re(te,Q,qi(te,ae),fe);Qi(te,ae)}return null}function oe(te,Q,ae,fe,Ne){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return te=te.get(ae)||null,L(Q,te,""+fe,Ne);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case v:return te=te.get(fe.key===null?ae:fe.key)||null,K(Q,te,fe,Ne);case k:return te=te.get(fe.key===null?ae:fe.key)||null,ne(Q,te,fe,Ne);case H:return fe=vr(fe),oe(te,Q,ae,fe,Ne)}if(V(fe)||Y(fe))return te=te.get(ae)||null,ce(Q,te,fe,Ne,null);if(typeof fe.then=="function")return oe(te,Q,ae,Ki(fe),Ne);if(fe.$$typeof===N)return oe(te,Q,ae,qi(Q,fe),Ne);Qi(Q,fe)}return null}function ve(te,Q,ae,fe){for(var Ne=null,We=null,Se=Q,Ie=Q=0,Fe=null;Se!==null&&Ie<ae.length;Ie++){Se.index>Ie?(Fe=Se,Se=null):Fe=Se.sibling;var Ke=re(te,Se,ae[Ie],fe);if(Ke===null){Se===null&&(Se=Fe);break}e&&Se&&Ke.alternate===null&&a(te,Se),Q=h(Ke,Q,Ie),We===null?Ne=Ke:We.sibling=Ke,We=Ke,Se=Fe}if(Ie===ae.length)return s(te,Se),qe&&sn(te,Ie),Ne;if(Se===null){for(;Ie<ae.length;Ie++)Se=me(te,ae[Ie],fe),Se!==null&&(Q=h(Se,Q,Ie),We===null?Ne=Se:We.sibling=Se,We=Se);return qe&&sn(te,Ie),Ne}for(Se=c(Se);Ie<ae.length;Ie++)Fe=oe(Se,te,Ie,ae[Ie],fe),Fe!==null&&(e&&Fe.alternate!==null&&Se.delete(Fe.key===null?Ie:Fe.key),Q=h(Fe,Q,Ie),We===null?Ne=Fe:We.sibling=Fe,We=Fe);return e&&Se.forEach(function(tr){return a(te,tr)}),qe&&sn(te,Ie),Ne}function _e(te,Q,ae,fe){if(ae==null)throw Error(i(151));for(var Ne=null,We=null,Se=Q,Ie=Q=0,Fe=null,Ke=ae.next();Se!==null&&!Ke.done;Ie++,Ke=ae.next()){Se.index>Ie?(Fe=Se,Se=null):Fe=Se.sibling;var tr=re(te,Se,Ke.value,fe);if(tr===null){Se===null&&(Se=Fe);break}e&&Se&&tr.alternate===null&&a(te,Se),Q=h(tr,Q,Ie),We===null?Ne=tr:We.sibling=tr,We=tr,Se=Fe}if(Ke.done)return s(te,Se),qe&&sn(te,Ie),Ne;if(Se===null){for(;!Ke.done;Ie++,Ke=ae.next())Ke=me(te,Ke.value,fe),Ke!==null&&(Q=h(Ke,Q,Ie),We===null?Ne=Ke:We.sibling=Ke,We=Ke);return qe&&sn(te,Ie),Ne}for(Se=c(Se);!Ke.done;Ie++,Ke=ae.next())Ke=oe(Se,te,Ie,Ke.value,fe),Ke!==null&&(e&&Ke.alternate!==null&&Se.delete(Ke.key===null?Ie:Ke.key),Q=h(Ke,Q,Ie),We===null?Ne=Ke:We.sibling=Ke,We=Ke);return e&&Se.forEach(function(Uw){return a(te,Uw)}),qe&&sn(te,Ie),Ne}function nt(te,Q,ae,fe){if(typeof ae=="object"&&ae!==null&&ae.type===M&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:e:{for(var Ne=ae.key;Q!==null;){if(Q.key===Ne){if(Ne=ae.type,Ne===M){if(Q.tag===7){s(te,Q.sibling),fe=p(Q,ae.props.children),fe.return=te,te=fe;break e}}else if(Q.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===H&&vr(Ne)===Q.type){s(te,Q.sibling),fe=p(Q,ae.props),hs(fe,ae),fe.return=te,te=fe;break e}s(te,Q);break}else a(te,Q);Q=Q.sibling}ae.type===M?(fe=xr(ae.props.children,te.mode,fe,ae.key),fe.return=te,te=fe):(fe=Gi(ae.type,ae.key,ae.props,null,te.mode,fe),hs(fe,ae),fe.return=te,te=fe)}return C(te);case k:e:{for(Ne=ae.key;Q!==null;){if(Q.key===Ne)if(Q.tag===4&&Q.stateNode.containerInfo===ae.containerInfo&&Q.stateNode.implementation===ae.implementation){s(te,Q.sibling),fe=p(Q,ae.children||[]),fe.return=te,te=fe;break e}else{s(te,Q);break}else a(te,Q);Q=Q.sibling}fe=iu(ae,te.mode,fe),fe.return=te,te=fe}return C(te);case H:return ae=vr(ae),nt(te,Q,ae,fe)}if(V(ae))return ve(te,Q,ae,fe);if(Y(ae)){if(Ne=Y(ae),typeof Ne!="function")throw Error(i(150));return ae=Ne.call(ae),_e(te,Q,ae,fe)}if(typeof ae.then=="function")return nt(te,Q,Ki(ae),fe);if(ae.$$typeof===N)return nt(te,Q,qi(te,ae),fe);Qi(te,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Q!==null&&Q.tag===6?(s(te,Q.sibling),fe=p(Q,ae),fe.return=te,te=fe):(s(te,Q),fe=su(ae,te.mode,fe),fe.return=te,te=fe),C(te)):s(te,Q)}return function(te,Q,ae,fe){try{ps=0;var Ne=nt(te,Q,ae,fe);return uo=null,Ne}catch(Se){if(Se===co||Se===Yi)throw Se;var We=la(29,Se,null,te.mode);return We.lanes=fe,We.return=te,We}}}var Sr=sm(!0),im=sm(!1),Hn=!1;function bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wu(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Un(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(e,a,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Qe&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=zi(e),Ff(e,null,s),a}return Bi(e,c,a,s),zi(e)}function gs(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var c=a.lanes;c&=e.pendingLanes,s|=c,a.lanes=s,bi(e,s)}}function ku(e,a){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var p=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var C={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?p=h=C:h=h.next=C,s=s.next}while(s!==null);h===null?p=h=a:h=h.next=a}else p=h=a;s={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:h,shared:c.shared,callbacks:c.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var vu=!1;function xs(){if(vu){var e=lo;if(e!==null)throw e}}function ys(e,a,s,c){vu=!1;var p=e.updateQueue;Hn=!1;var h=p.firstBaseUpdate,C=p.lastBaseUpdate,L=p.shared.pending;if(L!==null){p.shared.pending=null;var K=L,ne=K.next;K.next=null,C===null?h=ne:C.next=ne,C=K;var ce=e.alternate;ce!==null&&(ce=ce.updateQueue,L=ce.lastBaseUpdate,L!==C&&(L===null?ce.firstBaseUpdate=ne:L.next=ne,ce.lastBaseUpdate=K))}if(h!==null){var me=p.baseState;C=0,ce=ne=K=null,L=h;do{var re=L.lane&-536870913,oe=re!==L.lane;if(oe?(Ve&re)===re:(c&re)===re){re!==0&&re===io&&(vu=!0),ce!==null&&(ce=ce.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var ve=e,_e=L;re=a;var nt=s;switch(_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){me=ve.call(nt,me,re);break e}me=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,re=typeof ve=="function"?ve.call(nt,me,re):ve,re==null)break e;me=b({},me,re);break e;case 2:Hn=!0}}re=L.callback,re!==null&&(e.flags|=64,oe&&(e.flags|=8192),oe=p.callbacks,oe===null?p.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ce===null?(ne=ce=oe,K=me):ce=ce.next=oe,C|=re;if(L=L.next,L===null){if(L=p.shared.pending,L===null)break;oe=L,L=oe.next,oe.next=null,p.lastBaseUpdate=oe,p.shared.pending=null}}while(!0);ce===null&&(K=me),p.baseState=K,p.firstBaseUpdate=ne,p.lastBaseUpdate=ce,h===null&&(p.shared.lanes=0),qn|=C,e.lanes=C,e.memoizedState=me}}function lm(e,a){if(typeof e!="function")throw Error(i(191,e));e.call(a)}function cm(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)lm(s[e],a)}var fo=D(null),Xi=D(0);function um(e,a){e=yn,ee(Xi,e),ee(fo,a),yn=e|a.baseLanes}function Cu(){ee(Xi,yn),ee(fo,fo.current)}function Su(){yn=Xi.current,$(fo),$(Xi)}var ca=D(null),Sa=null;function zn(e){var a=e.alternate;ee(wt,wt.current&1),ee(ca,e),Sa===null&&(a===null||fo.current!==null||a.memoizedState!==null)&&(Sa=e)}function Nu(e){ee(wt,wt.current),ee(ca,e),Sa===null&&(Sa=e)}function dm(e){e.tag===22?(ee(wt,wt.current),ee(ca,e),Sa===null&&(Sa=e)):Gn()}function Gn(){ee(wt,wt.current),ee(ca,ca.current)}function ua(e){$(ca),Sa===e&&(Sa=null),$(wt)}var wt=D(0);function Zi(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||jd(s)||Rd(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var un=0,Pe=null,tt=null,Tt=null,Ji=!1,mo=!1,Nr=!1,el=0,bs=0,po=null,_1=0;function gt(){throw Error(i(321))}function Eu(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!ia(e[s],a[s]))return!1;return!0}function Tu(e,a,s,c,p,h){return un=h,Pe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=e===null||e.memoizedState===null?Wm:Gu,Nr=!1,h=s(c,p),Nr=!1,mo&&(h=mm(a,s,c,p)),fm(e),h}function fm(e){S.H=vs;var a=tt!==null&&tt.next!==null;if(un=0,Tt=tt=Pe=null,Ji=!1,bs=0,po=null,a)throw Error(i(300));e===null||Mt||(e=e.dependencies,e!==null&&Fi(e)&&(Mt=!0))}function mm(e,a,s,c){Pe=e;var p=0;do{if(mo&&(po=null),bs=0,mo=!1,25<=p)throw Error(i(301));if(p+=1,Tt=tt=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}S.H=Km,h=a(s,c)}while(mo);return h}function A1(){var e=S.H,a=e.useState()[0];return a=typeof a.then=="function"?ws(a):a,e=e.useState()[0],(tt!==null?tt.memoizedState:null)!==e&&(Pe.flags|=1024),a}function Mu(){var e=el!==0;return el=0,e}function _u(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function Au(e){if(Ji){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Ji=!1}un=0,Tt=tt=Pe=null,mo=!1,bs=el=0,po=null}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Pe.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function kt(){if(tt===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var a=Tt===null?Pe.memoizedState:Tt.next;if(a!==null)Tt=a,tt=e;else{if(e===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Tt===null?Pe.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function tl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ws(e){var a=bs;return bs+=1,po===null&&(po=[]),e=nm(po,e,a),a=Pe,(Tt===null?a.memoizedState:Tt.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?Wm:Gu),e}function al(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ws(e);if(e.$$typeof===N)return Bt(e)}throw Error(i(438,String(e)))}function ju(e){var a=null,s=Pe.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=tl(),Pe.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),c=0;c<e;c++)s[c]=G;return a.index++,s}function dn(e,a){return typeof a=="function"?a(e):a}function nl(e){var a=kt();return Ru(a,tt,e)}function Ru(e,a,s){var c=e.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var p=e.baseQueue,h=c.pending;if(h!==null){if(p!==null){var C=p.next;p.next=h.next,h.next=C}a.baseQueue=p=h,c.pending=null}if(h=e.baseState,p===null)e.memoizedState=h;else{a=p.next;var L=C=null,K=null,ne=a,ce=!1;do{var me=ne.lane&-536870913;if(me!==ne.lane?(Ve&me)===me:(un&me)===me){var re=ne.revertLane;if(re===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),me===io&&(ce=!0);else if((un&re)===re){ne=ne.next,re===io&&(ce=!0);continue}else me={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},K===null?(L=K=me,C=h):K=K.next=me,Pe.lanes|=re,qn|=re;me=ne.action,Nr&&s(h,me),h=ne.hasEagerState?ne.eagerState:s(h,me)}else re={lane:me,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},K===null?(L=K=re,C=h):K=K.next=re,Pe.lanes|=me,qn|=me;ne=ne.next}while(ne!==null&&ne!==a);if(K===null?C=h:K.next=L,!ia(h,e.memoizedState)&&(Mt=!0,ce&&(s=lo,s!==null)))throw s;e.memoizedState=h,e.baseState=C,e.baseQueue=K,c.lastRenderedState=h}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Lu(e){var a=kt(),s=a.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var c=s.dispatch,p=s.pending,h=a.memoizedState;if(p!==null){s.pending=null;var C=p=p.next;do h=e(h,C.action),C=C.next;while(C!==p);ia(h,a.memoizedState)||(Mt=!0),a.memoizedState=h,a.baseQueue===null&&(a.baseState=h),s.lastRenderedState=h}return[h,c]}function pm(e,a,s){var c=Pe,p=kt(),h=qe;if(h){if(s===void 0)throw Error(i(407));s=s()}else s=a();var C=!ia((tt||p).memoizedState,s);if(C&&(p.memoizedState=s,Mt=!0),p=p.queue,Pu(xm.bind(null,c,p,e),[e]),p.getSnapshot!==a||C||Tt!==null&&Tt.memoizedState.tag&1){if(c.flags|=2048,ho(9,{destroy:void 0},gm.bind(null,c,p,s,a),null),it===null)throw Error(i(349));h||(un&127)!==0||hm(c,a,s)}return s}function hm(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=Pe.updateQueue,a===null?(a=tl(),Pe.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function gm(e,a,s,c){a.value=s,a.getSnapshot=c,ym(a)&&bm(e)}function xm(e,a,s){return s(function(){ym(a)&&bm(e)})}function ym(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!ia(e,s)}catch{return!0}}function bm(e){var a=gr(e,2);a!==null&&na(a,e,2)}function Du(e){var a=Wt();if(typeof e=="function"){var s=e;if(e=s(),Nr){Vt(!0);try{s()}finally{Vt(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:e},a}function wm(e,a,s,c){return e.baseState=s,Ru(e,tt,typeof c=="function"?c:dn)}function j1(e,a,s,c,p){if(sl(e))throw Error(i(485));if(e=a.action,e!==null){var h={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){h.listeners.push(C)}};S.T!==null?s(!0):h.isTransition=!1,c(h),s=a.pending,s===null?(h.next=a.pending=h,km(a,h)):(h.next=s.next,a.pending=s.next=h)}}function km(e,a){var s=a.action,c=a.payload,p=e.state;if(a.isTransition){var h=S.T,C={};S.T=C;try{var L=s(p,c),K=S.S;K!==null&&K(C,L),vm(e,a,L)}catch(ne){Ou(e,a,ne)}finally{h!==null&&C.types!==null&&(h.types=C.types),S.T=h}}else try{h=s(p,c),vm(e,a,h)}catch(ne){Ou(e,a,ne)}}function vm(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(c){Cm(e,a,c)},function(c){return Ou(e,a,c)}):Cm(e,a,s)}function Cm(e,a,s){a.status="fulfilled",a.value=s,Sm(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,km(e,s)))}function Ou(e,a,s){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=s,Sm(a),a=a.next;while(a!==c)}e.action=null}function Sm(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Nm(e,a){return a}function Em(e,a){if(qe){var s=it.formState;if(s!==null){e:{var c=Pe;if(qe){if(ut){t:{for(var p=ut,h=Ca;p.nodeType!==8;){if(!h){p=null;break t}if(p=Na(p.nextSibling),p===null){p=null;break t}}h=p.data,p=h==="F!"||h==="F"?p:null}if(p){ut=Na(p.nextSibling),c=p.data==="F!";break e}}Pn(c)}c=!1}c&&(a=s[0])}}return s=Wt(),s.memoizedState=s.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nm,lastRenderedState:a},s.queue=c,s=qm.bind(null,Pe,c),c.dispatch=s,c=Du(!1),h=zu.bind(null,Pe,!1,c.queue),c=Wt(),p={state:a,dispatch:null,action:e,pending:null},c.queue=p,s=j1.bind(null,Pe,p,h,s),p.dispatch=s,c.memoizedState=e,[a,s,!1]}function Tm(e){var a=kt();return Mm(a,tt,e)}function Mm(e,a,s){if(a=Ru(e,a,Nm)[0],e=nl(dn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=ws(a)}catch(C){throw C===co?Yi:C}else c=a;a=kt();var p=a.queue,h=p.dispatch;return s!==a.memoizedState&&(Pe.flags|=2048,ho(9,{destroy:void 0},R1.bind(null,p,s),null)),[c,h,e]}function R1(e,a){e.action=a}function _m(e){var a=kt(),s=tt;if(s!==null)return Mm(a,s,e);kt(),a=a.memoizedState,s=kt();var c=s.queue.dispatch;return s.memoizedState=e,[a,c,!1]}function ho(e,a,s,c){return e={tag:e,create:s,deps:c,inst:a,next:null},a=Pe.updateQueue,a===null&&(a=tl(),Pe.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,a.lastEffect=e),e}function Am(){return kt().memoizedState}function rl(e,a,s,c){var p=Wt();Pe.flags|=e,p.memoizedState=ho(1|a,{destroy:void 0},s,c===void 0?null:c)}function ol(e,a,s,c){var p=kt();c=c===void 0?null:c;var h=p.memoizedState.inst;tt!==null&&c!==null&&Eu(c,tt.memoizedState.deps)?p.memoizedState=ho(a,h,s,c):(Pe.flags|=e,p.memoizedState=ho(1|a,h,s,c))}function jm(e,a){rl(8390656,8,e,a)}function Pu(e,a){ol(2048,8,e,a)}function L1(e){Pe.flags|=4;var a=Pe.updateQueue;if(a===null)a=tl(),Pe.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function Rm(e){var a=kt().memoizedState;return L1({ref:a,nextImpl:e}),function(){if((Qe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Lm(e,a){return ol(4,2,e,a)}function Dm(e,a){return ol(4,4,e,a)}function Om(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Pm(e,a,s){s=s!=null?s.concat([e]):null,ol(4,4,Om.bind(null,a,e),s)}function Iu(){}function Im(e,a){var s=kt();a=a===void 0?null:a;var c=s.memoizedState;return a!==null&&Eu(a,c[1])?c[0]:(s.memoizedState=[e,a],e)}function Hm(e,a){var s=kt();a=a===void 0?null:a;var c=s.memoizedState;if(a!==null&&Eu(a,c[1]))return c[0];if(c=e(),Nr){Vt(!0);try{e()}finally{Vt(!1)}}return s.memoizedState=[c,a],c}function Hu(e,a,s){return s===void 0||(un&1073741824)!==0&&(Ve&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=Up(),Pe.lanes|=e,qn|=e,s)}function Um(e,a,s,c){return ia(s,a)?s:fo.current!==null?(e=Hu(e,s,c),ia(e,a)||(Mt=!0),e):(un&42)===0||(un&1073741824)!==0&&(Ve&261930)===0?(Mt=!0,e.memoizedState=s):(e=Up(),Pe.lanes|=e,qn|=e,a)}function Bm(e,a,s,c,p){var h=_.p;_.p=h!==0&&8>h?h:8;var C=S.T,L={};S.T=L,zu(e,!1,a,s);try{var K=p(),ne=S.S;if(ne!==null&&ne(L,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ce=M1(K,c);ks(e,a,ce,ma(e))}else ks(e,a,c,ma(e))}catch(me){ks(e,a,{then:function(){},status:"rejected",reason:me},ma())}finally{_.p=h,C!==null&&L.types!==null&&(C.types=L.types),S.T=C}}function D1(){}function Uu(e,a,s,c){if(e.tag!==5)throw Error(i(476));var p=zm(e).queue;Bm(e,p,a,U,s===null?D1:function(){return Gm(e),s(c)})}function zm(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:U},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Gm(e){var a=zm(e);a.next===null&&(a=e.alternate.memoizedState),ks(e,a.next.queue,{},ma())}function Bu(){return Bt(Hs)}function Vm(){return kt().memoizedState}function Fm(){return kt().memoizedState}function O1(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=ma();e=Un(s);var c=Bn(a,e,s);c!==null&&(na(c,a,s),gs(c,a,s)),a={cache:hu()},e.payload=a;return}a=a.return}}function P1(e,a,s){var c=ma();s={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},sl(e)?$m(a,s):(s=ru(e,a,s,c),s!==null&&(na(s,e,c),Ym(s,a,c)))}function qm(e,a,s){var c=ma();ks(e,a,s,c)}function ks(e,a,s,c){var p={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(sl(e))$m(a,p);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=a.lastRenderedReducer,h!==null))try{var C=a.lastRenderedState,L=h(C,s);if(p.hasEagerState=!0,p.eagerState=L,ia(L,C))return Bi(e,a,p,0),it===null&&Ui(),!1}catch{}if(s=ru(e,a,p,c),s!==null)return na(s,e,c),Ym(s,a,c),!0}return!1}function zu(e,a,s,c){if(c={lane:2,revertLane:bd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sl(e)){if(a)throw Error(i(479))}else a=ru(e,s,c,2),a!==null&&na(a,e,2)}function sl(e){var a=e.alternate;return e===Pe||a!==null&&a===Pe}function $m(e,a){mo=Ji=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Ym(e,a,s){if((s&4194048)!==0){var c=a.lanes;c&=e.pendingLanes,s|=c,a.lanes=s,bi(e,s)}}var vs={readContext:Bt,use:al,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};vs.useEffectEvent=gt;var Wm={readContext:Bt,use:al,useCallback:function(e,a){return Wt().memoizedState=[e,a===void 0?null:a],e},useContext:Bt,useEffect:jm,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,rl(4194308,4,Om.bind(null,a,e),s)},useLayoutEffect:function(e,a){return rl(4194308,4,e,a)},useInsertionEffect:function(e,a){rl(4,2,e,a)},useMemo:function(e,a){var s=Wt();a=a===void 0?null:a;var c=e();if(Nr){Vt(!0);try{e()}finally{Vt(!1)}}return s.memoizedState=[c,a],c},useReducer:function(e,a,s){var c=Wt();if(s!==void 0){var p=s(a);if(Nr){Vt(!0);try{s(a)}finally{Vt(!1)}}}else p=a;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=P1.bind(null,Pe,e),[c.memoizedState,e]},useRef:function(e){var a=Wt();return e={current:e},a.memoizedState=e},useState:function(e){e=Du(e);var a=e.queue,s=qm.bind(null,Pe,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:Iu,useDeferredValue:function(e,a){var s=Wt();return Hu(s,e,a)},useTransition:function(){var e=Du(!1);return e=Bm.bind(null,Pe,e.queue,!0,!1),Wt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var c=Pe,p=Wt();if(qe){if(s===void 0)throw Error(i(407));s=s()}else{if(s=a(),it===null)throw Error(i(349));(Ve&127)!==0||hm(c,a,s)}p.memoizedState=s;var h={value:s,getSnapshot:a};return p.queue=h,jm(xm.bind(null,c,h,e),[e]),c.flags|=2048,ho(9,{destroy:void 0},gm.bind(null,c,h,s,a),null),s},useId:function(){var e=Wt(),a=it.identifierPrefix;if(qe){var s=Va,c=Ga;s=(c&~(1<<32-lt(c)-1)).toString(32)+s,a="_"+a+"R_"+s,s=el++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=_1++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Bu,useFormState:Em,useActionState:Em,useOptimistic:function(e){var a=Wt();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=zu.bind(null,Pe,!0,s),s.dispatch=a,[e,a]},useMemoCache:ju,useCacheRefresh:function(){return Wt().memoizedState=O1.bind(null,Pe)},useEffectEvent:function(e){var a=Wt(),s={impl:e};return a.memoizedState=s,function(){if((Qe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},Gu={readContext:Bt,use:al,useCallback:Im,useContext:Bt,useEffect:Pu,useImperativeHandle:Pm,useInsertionEffect:Lm,useLayoutEffect:Dm,useMemo:Hm,useReducer:nl,useRef:Am,useState:function(){return nl(dn)},useDebugValue:Iu,useDeferredValue:function(e,a){var s=kt();return Um(s,tt.memoizedState,e,a)},useTransition:function(){var e=nl(dn)[0],a=kt().memoizedState;return[typeof e=="boolean"?e:ws(e),a]},useSyncExternalStore:pm,useId:Vm,useHostTransitionStatus:Bu,useFormState:Tm,useActionState:Tm,useOptimistic:function(e,a){var s=kt();return wm(s,tt,e,a)},useMemoCache:ju,useCacheRefresh:Fm};Gu.useEffectEvent=Rm;var Km={readContext:Bt,use:al,useCallback:Im,useContext:Bt,useEffect:Pu,useImperativeHandle:Pm,useInsertionEffect:Lm,useLayoutEffect:Dm,useMemo:Hm,useReducer:Lu,useRef:Am,useState:function(){return Lu(dn)},useDebugValue:Iu,useDeferredValue:function(e,a){var s=kt();return tt===null?Hu(s,e,a):Um(s,tt.memoizedState,e,a)},useTransition:function(){var e=Lu(dn)[0],a=kt().memoizedState;return[typeof e=="boolean"?e:ws(e),a]},useSyncExternalStore:pm,useId:Vm,useHostTransitionStatus:Bu,useFormState:_m,useActionState:_m,useOptimistic:function(e,a){var s=kt();return tt!==null?wm(s,tt,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ju,useCacheRefresh:Fm};Km.useEffectEvent=Rm;function Vu(e,a,s,c){a=e.memoizedState,s=s(c,a),s=s==null?a:b({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Fu={enqueueSetState:function(e,a,s){e=e._reactInternals;var c=ma(),p=Un(c);p.payload=a,s!=null&&(p.callback=s),a=Bn(e,p,c),a!==null&&(na(a,e,c),gs(a,e,c))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var c=ma(),p=Un(c);p.tag=1,p.payload=a,s!=null&&(p.callback=s),a=Bn(e,p,c),a!==null&&(na(a,e,c),gs(a,e,c))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=ma(),c=Un(s);c.tag=2,a!=null&&(c.callback=a),a=Bn(e,c,s),a!==null&&(na(a,e,s),gs(a,e,s))}};function Qm(e,a,s,c,p,h,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,h,C):a.prototype&&a.prototype.isPureReactComponent?!ls(s,c)||!ls(p,h):!0}function Xm(e,a,s,c){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,c),a.state!==e&&Fu.enqueueReplaceState(a,a.state,null)}function Er(e,a){var s=a;if("ref"in a){s={};for(var c in a)c!=="ref"&&(s[c]=a[c])}if(e=e.defaultProps){s===a&&(s=b({},s));for(var p in e)s[p]===void 0&&(s[p]=e[p])}return s}function Zm(e){Hi(e)}function Jm(e){console.error(e)}function ep(e){Hi(e)}function il(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function tp(e,a,s){try{var c=e.onCaughtError;c(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function qu(e,a,s){return s=Un(s),s.tag=3,s.payload={element:null},s.callback=function(){il(e,a)},s}function ap(e){return e=Un(e),e.tag=3,e}function np(e,a,s,c){var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var h=c.value;e.payload=function(){return p(h)},e.callback=function(){tp(a,s,c)}}var C=s.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(e.callback=function(){tp(a,s,c),typeof p!="function"&&($n===null?$n=new Set([this]):$n.add(this));var L=c.stack;this.componentDidCatch(c.value,{componentStack:L!==null?L:""})})}function I1(e,a,s,c,p){if(s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=s.alternate,a!==null&&so(a,s,p,!0),s=ca.current,s!==null){switch(s.tag){case 31:case 13:return Sa===null?bl():s.alternate===null&&xt===0&&(xt=3),s.flags&=-257,s.flags|=65536,s.lanes=p,c===Wi?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([c]):a.add(c),gd(e,c,p)),!1;case 22:return s.flags|=65536,c===Wi?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([c]):s.add(c)),gd(e,c,p)),!1}throw Error(i(435,s.tag))}return gd(e,c,p),bl(),!1}if(qe)return a=ca.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==uu&&(e=Error(i(422),{cause:c}),ds(wa(e,s)))):(c!==uu&&(a=Error(i(423),{cause:c}),ds(wa(a,s))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=wa(c,s),p=qu(e.stateNode,c,p),ku(e,p),xt!==4&&(xt=2)),!1;var h=Error(i(520),{cause:c});if(h=wa(h,s),As===null?As=[h]:As.push(h),xt!==4&&(xt=2),a===null)return!0;c=wa(c,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=p&-p,s.lanes|=e,e=qu(s.stateNode,c,e),ku(s,e),!1;case 1:if(a=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&($n===null||!$n.has(h))))return s.flags|=65536,p&=-p,s.lanes|=p,p=ap(p),np(p,e,s,c),ku(s,p),!1}s=s.return}while(s!==null);return!1}var $u=Error(i(461)),Mt=!1;function zt(e,a,s,c){a.child=e===null?im(a,null,s,c):Sr(a,e.child,s,c)}function rp(e,a,s,c,p){s=s.render;var h=a.ref;if("ref"in c){var C={};for(var L in c)L!=="ref"&&(C[L]=c[L])}else C=c;return wr(a),c=Tu(e,a,s,C,h,p),L=Mu(),e!==null&&!Mt?(_u(e,a,p),fn(e,a,p)):(qe&&L&&lu(a),a.flags|=1,zt(e,a,c,p),a.child)}function op(e,a,s,c,p){if(e===null){var h=s.type;return typeof h=="function"&&!ou(h)&&h.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=h,sp(e,a,h,c,p)):(e=Gi(s.type,null,c,a,a.mode,p),e.ref=a.ref,e.return=a,a.child=e)}if(h=e.child,!ed(e,p)){var C=h.memoizedProps;if(s=s.compare,s=s!==null?s:ls,s(C,c)&&e.ref===a.ref)return fn(e,a,p)}return a.flags|=1,e=on(h,c),e.ref=a.ref,e.return=a,a.child=e}function sp(e,a,s,c,p){if(e!==null){var h=e.memoizedProps;if(ls(h,c)&&e.ref===a.ref)if(Mt=!1,a.pendingProps=c=h,ed(e,p))(e.flags&131072)!==0&&(Mt=!0);else return a.lanes=e.lanes,fn(e,a,p)}return Yu(e,a,s,c,p)}function ip(e,a,s,c){var p=c.children,h=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(c=a.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~h}else c=0,a.child=null;return lp(e,a,h,s,c)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&$i(a,h!==null?h.cachePool:null),h!==null?um(a,h):Cu(),dm(a);else return c=a.lanes=536870912,lp(e,a,h!==null?h.baseLanes|s:s,s,c)}else h!==null?($i(a,h.cachePool),um(a,h),Gn(),a.memoizedState=null):(e!==null&&$i(a,null),Cu(),Gn());return zt(e,a,p,s),a.child}function Cs(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function lp(e,a,s,c,p){var h=xu();return h=h===null?null:{parent:Et._currentValue,pool:h},a.memoizedState={baseLanes:s,cachePool:h},e!==null&&$i(a,null),Cu(),dm(a),e!==null&&so(e,a,c,!0),a.childLanes=p,null}function ll(e,a){return a=ul({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function cp(e,a,s){return Sr(a,e.child,null,s),e=ll(a,a.pendingProps),e.flags|=2,ua(a),a.memoizedState=null,e}function H1(e,a,s){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(qe){if(c.mode==="hidden")return e=ll(a,c),a.lanes=536870912,Cs(null,e);if(Nu(a),(e=ut)?(e=kh(e,Ca),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Dn!==null?{id:Ga,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},s=$f(e),s.return=a,a.child=s,Ut=a,ut=null)):e=null,e===null)throw Pn(a);return a.lanes=536870912,null}return ll(a,c)}var h=e.memoizedState;if(h!==null){var C=h.dehydrated;if(Nu(a),p)if(a.flags&256)a.flags&=-257,a=cp(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(i(558));else if(Mt||so(e,a,s,!1),p=(s&e.childLanes)!==0,Mt||p){if(c=it,c!==null&&(C=wi(c,s),C!==0&&C!==h.retryLane))throw h.retryLane=C,gr(e,C),na(c,e,C),$u;bl(),a=cp(e,a,s)}else e=h.treeContext,ut=Na(C.nextSibling),Ut=a,qe=!0,On=null,Ca=!1,e!==null&&Kf(a,e),a=ll(a,c),a.flags|=4096;return a}return e=on(e.child,{mode:c.mode,children:c.children}),e.ref=a.ref,a.child=e,e.return=a,e}function cl(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function Yu(e,a,s,c,p){return wr(a),s=Tu(e,a,s,c,void 0,p),c=Mu(),e!==null&&!Mt?(_u(e,a,p),fn(e,a,p)):(qe&&c&&lu(a),a.flags|=1,zt(e,a,s,p),a.child)}function up(e,a,s,c,p,h){return wr(a),a.updateQueue=null,s=mm(a,c,s,p),fm(e),c=Mu(),e!==null&&!Mt?(_u(e,a,h),fn(e,a,h)):(qe&&c&&lu(a),a.flags|=1,zt(e,a,s,h),a.child)}function dp(e,a,s,c,p){if(wr(a),a.stateNode===null){var h=ao,C=s.contextType;typeof C=="object"&&C!==null&&(h=Bt(C)),h=new s(c,h),a.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Fu,a.stateNode=h,h._reactInternals=a,h=a.stateNode,h.props=c,h.state=a.memoizedState,h.refs={},bu(a),C=s.contextType,h.context=typeof C=="object"&&C!==null?Bt(C):ao,h.state=a.memoizedState,C=s.getDerivedStateFromProps,typeof C=="function"&&(Vu(a,s,C,c),h.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(C=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),C!==h.state&&Fu.enqueueReplaceState(h,h.state,null),ys(a,c,h,p),xs(),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(e===null){h=a.stateNode;var L=a.memoizedProps,K=Er(s,L);h.props=K;var ne=h.context,ce=s.contextType;C=ao,typeof ce=="object"&&ce!==null&&(C=Bt(ce));var me=s.getDerivedStateFromProps;ce=typeof me=="function"||typeof h.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,ce||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(L||ne!==C)&&Xm(a,h,c,C),Hn=!1;var re=a.memoizedState;h.state=re,ys(a,c,h,p),xs(),ne=a.memoizedState,L||re!==ne||Hn?(typeof me=="function"&&(Vu(a,s,me,c),ne=a.memoizedState),(K=Hn||Qm(a,s,K,c,re,ne,C))?(ce||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(a.flags|=4194308)):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=ne),h.props=c,h.state=ne,h.context=C,c=K):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{h=a.stateNode,wu(e,a),C=a.memoizedProps,ce=Er(s,C),h.props=ce,me=a.pendingProps,re=h.context,ne=s.contextType,K=ao,typeof ne=="object"&&ne!==null&&(K=Bt(ne)),L=s.getDerivedStateFromProps,(ne=typeof L=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(C!==me||re!==K)&&Xm(a,h,c,K),Hn=!1,re=a.memoizedState,h.state=re,ys(a,c,h,p),xs();var oe=a.memoizedState;C!==me||re!==oe||Hn||e!==null&&e.dependencies!==null&&Fi(e.dependencies)?(typeof L=="function"&&(Vu(a,s,L,c),oe=a.memoizedState),(ce=Hn||Qm(a,s,ce,c,re,oe,K)||e!==null&&e.dependencies!==null&&Fi(e.dependencies))?(ne||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(c,oe,K),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(c,oe,K)),typeof h.componentDidUpdate=="function"&&(a.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof h.componentDidUpdate!="function"||C===e.memoizedProps&&re===e.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&re===e.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=oe),h.props=c,h.state=oe,h.context=K,c=ce):(typeof h.componentDidUpdate!="function"||C===e.memoizedProps&&re===e.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&re===e.memoizedState||(a.flags|=1024),c=!1)}return h=c,cl(e,a),c=(a.flags&128)!==0,h||c?(h=a.stateNode,s=c&&typeof s.getDerivedStateFromError!="function"?null:h.render(),a.flags|=1,e!==null&&c?(a.child=Sr(a,e.child,null,p),a.child=Sr(a,null,s,p)):zt(e,a,s,p),a.memoizedState=h.state,e=a.child):e=fn(e,a,p),e}function fp(e,a,s,c){return yr(),a.flags|=256,zt(e,a,s,c),a.child}var Wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ku(e){return{baseLanes:e,cachePool:tm()}}function Qu(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=fa),e}function mp(e,a,s){var c=a.pendingProps,p=!1,h=(a.flags&128)!==0,C;if((C=h)||(C=e!==null&&e.memoizedState===null?!1:(wt.current&2)!==0),C&&(p=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,e===null){if(qe){if(p?zn(a):Gn(),(e=ut)?(e=kh(e,Ca),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Dn!==null?{id:Ga,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},s=$f(e),s.return=a,a.child=s,Ut=a,ut=null)):e=null,e===null)throw Pn(a);return Rd(e)?a.lanes=32:a.lanes=536870912,null}var L=c.children;return c=c.fallback,p?(Gn(),p=a.mode,L=ul({mode:"hidden",children:L},p),c=xr(c,p,s,null),L.return=a,c.return=a,L.sibling=c,a.child=L,c=a.child,c.memoizedState=Ku(s),c.childLanes=Qu(e,C,s),a.memoizedState=Wu,Cs(null,c)):(zn(a),Xu(a,L))}var K=e.memoizedState;if(K!==null&&(L=K.dehydrated,L!==null)){if(h)a.flags&256?(zn(a),a.flags&=-257,a=Zu(e,a,s)):a.memoizedState!==null?(Gn(),a.child=e.child,a.flags|=128,a=null):(Gn(),L=c.fallback,p=a.mode,c=ul({mode:"visible",children:c.children},p),L=xr(L,p,s,null),L.flags|=2,c.return=a,L.return=a,c.sibling=L,a.child=c,Sr(a,e.child,null,s),c=a.child,c.memoizedState=Ku(s),c.childLanes=Qu(e,C,s),a.memoizedState=Wu,a=Cs(null,c));else if(zn(a),Rd(L)){if(C=L.nextSibling&&L.nextSibling.dataset,C)var ne=C.dgst;C=ne,c=Error(i(419)),c.stack="",c.digest=C,ds({value:c,source:null,stack:null}),a=Zu(e,a,s)}else if(Mt||so(e,a,s,!1),C=(s&e.childLanes)!==0,Mt||C){if(C=it,C!==null&&(c=wi(C,s),c!==0&&c!==K.retryLane))throw K.retryLane=c,gr(e,c),na(C,e,c),$u;jd(L)||bl(),a=Zu(e,a,s)}else jd(L)?(a.flags|=192,a.child=e.child,a=null):(e=K.treeContext,ut=Na(L.nextSibling),Ut=a,qe=!0,On=null,Ca=!1,e!==null&&Kf(a,e),a=Xu(a,c.children),a.flags|=4096);return a}return p?(Gn(),L=c.fallback,p=a.mode,K=e.child,ne=K.sibling,c=on(K,{mode:"hidden",children:c.children}),c.subtreeFlags=K.subtreeFlags&65011712,ne!==null?L=on(ne,L):(L=xr(L,p,s,null),L.flags|=2),L.return=a,c.return=a,c.sibling=L,a.child=c,Cs(null,c),c=a.child,L=e.child.memoizedState,L===null?L=Ku(s):(p=L.cachePool,p!==null?(K=Et._currentValue,p=p.parent!==K?{parent:K,pool:K}:p):p=tm(),L={baseLanes:L.baseLanes|s,cachePool:p}),c.memoizedState=L,c.childLanes=Qu(e,C,s),a.memoizedState=Wu,Cs(e.child,c)):(zn(a),s=e.child,e=s.sibling,s=on(s,{mode:"visible",children:c.children}),s.return=a,s.sibling=null,e!==null&&(C=a.deletions,C===null?(a.deletions=[e],a.flags|=16):C.push(e)),a.child=s,a.memoizedState=null,s)}function Xu(e,a){return a=ul({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function ul(e,a){return e=la(22,e,null,a),e.lanes=0,e}function Zu(e,a,s){return Sr(a,e.child,null,s),e=Xu(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function pp(e,a,s){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a),mu(e.return,a,s)}function Ju(e,a,s,c,p,h){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:p,treeForkCount:h}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=s,C.tailMode=p,C.treeForkCount=h)}function hp(e,a,s){var c=a.pendingProps,p=c.revealOrder,h=c.tail;c=c.children;var C=wt.current,L=(C&2)!==0;if(L?(C=C&1|2,a.flags|=128):C&=1,ee(wt,C),zt(e,a,c,s),c=qe?us:0,!L&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pp(e,s,a);else if(e.tag===19)pp(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(s=a.child,p=null;s!==null;)e=s.alternate,e!==null&&Zi(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=a.child,a.child=null):(p=s.sibling,s.sibling=null),Ju(a,!1,p,s,h,c);break;case"backwards":case"unstable_legacy-backwards":for(s=null,p=a.child,a.child=null;p!==null;){if(e=p.alternate,e!==null&&Zi(e)===null){a.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}Ju(a,!0,s,null,h,c);break;case"together":Ju(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function fn(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),qn|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(so(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(i(153));if(a.child!==null){for(e=a.child,s=on(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=on(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function ed(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Fi(e)))}function U1(e,a,s){switch(a.tag){case 3:ie(a,a.stateNode.containerInfo),In(a,Et,e.memoizedState.cache),yr();break;case 27:case 5:be(a);break;case 4:ie(a,a.stateNode.containerInfo);break;case 10:In(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Nu(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(zn(a),a.flags|=128,null):(s&a.child.childLanes)!==0?mp(e,a,s):(zn(a),e=fn(e,a,s),e!==null?e.sibling:null);zn(a);break;case 19:var p=(e.flags&128)!==0;if(c=(s&a.childLanes)!==0,c||(so(e,a,s,!1),c=(s&a.childLanes)!==0),p){if(c)return hp(e,a,s);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ee(wt,wt.current),c)break;return null;case 22:return a.lanes=0,ip(e,a,s,a.pendingProps);case 24:In(a,Et,e.memoizedState.cache)}return fn(e,a,s)}function gp(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)Mt=!0;else{if(!ed(e,s)&&(a.flags&128)===0)return Mt=!1,U1(e,a,s);Mt=(e.flags&131072)!==0}else Mt=!1,qe&&(a.flags&1048576)!==0&&Wf(a,us,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(e=vr(a.elementType),a.type=e,typeof e=="function")ou(e)?(c=Er(e,c),a.tag=1,a=dp(null,a,e,c,s)):(a.tag=0,a=Yu(null,a,e,c,s));else{if(e!=null){var p=e.$$typeof;if(p===j){a.tag=11,a=rp(null,a,e,c,s);break e}else if(p===O){a.tag=14,a=op(null,a,e,c,s);break e}}throw a=z(e)||e,Error(i(306,a,""))}}return a;case 0:return Yu(e,a,a.type,a.pendingProps,s);case 1:return c=a.type,p=Er(c,a.pendingProps),dp(e,a,c,p,s);case 3:e:{if(ie(a,a.stateNode.containerInfo),e===null)throw Error(i(387));c=a.pendingProps;var h=a.memoizedState;p=h.element,wu(e,a),ys(a,c,null,s);var C=a.memoizedState;if(c=C.cache,In(a,Et,c),c!==h.cache&&pu(a,[Et],s,!0),xs(),c=C.element,h.isDehydrated)if(h={element:c,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=h,a.memoizedState=h,a.flags&256){a=fp(e,a,c,s);break e}else if(c!==p){p=wa(Error(i(424)),a),ds(p),a=fp(e,a,c,s);break e}else for(e=a.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ut=Na(e.firstChild),Ut=a,qe=!0,On=null,Ca=!0,s=im(a,null,c,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(yr(),c===p){a=fn(e,a,s);break e}zt(e,a,c,s)}a=a.child}return a;case 26:return cl(e,a),e===null?(s=Th(a.type,null,a.pendingProps,null))?a.memoizedState=s:qe||(s=a.type,e=a.pendingProps,c=El(se.current).createElement(s),c[Ot]=a,c[qt]=e,Gt(c,s,e),Nt(c),a.stateNode=c):a.memoizedState=Th(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return be(a),e===null&&qe&&(c=a.stateNode=Sh(a.type,a.pendingProps,se.current),Ut=a,Ca=!0,p=ut,Qn(a.type)?(Ld=p,ut=Na(c.firstChild)):ut=p),zt(e,a,a.pendingProps.children,s),cl(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&qe&&((p=c=ut)&&(c=hw(c,a.type,a.pendingProps,Ca),c!==null?(a.stateNode=c,Ut=a,ut=Na(c.firstChild),Ca=!1,p=!0):p=!1),p||Pn(a)),be(a),p=a.type,h=a.pendingProps,C=e!==null?e.memoizedProps:null,c=h.children,Md(p,h)?c=null:C!==null&&Md(p,C)&&(a.flags|=32),a.memoizedState!==null&&(p=Tu(e,a,A1,null,null,s),Hs._currentValue=p),cl(e,a),zt(e,a,c,s),a.child;case 6:return e===null&&qe&&((e=s=ut)&&(s=gw(s,a.pendingProps,Ca),s!==null?(a.stateNode=s,Ut=a,ut=null,e=!0):e=!1),e||Pn(a)),null;case 13:return mp(e,a,s);case 4:return ie(a,a.stateNode.containerInfo),c=a.pendingProps,e===null?a.child=Sr(a,null,c,s):zt(e,a,c,s),a.child;case 11:return rp(e,a,a.type,a.pendingProps,s);case 7:return zt(e,a,a.pendingProps,s),a.child;case 8:return zt(e,a,a.pendingProps.children,s),a.child;case 12:return zt(e,a,a.pendingProps.children,s),a.child;case 10:return c=a.pendingProps,In(a,a.type,c.value),zt(e,a,c.children,s),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,wr(a),p=Bt(p),c=c(p),a.flags|=1,zt(e,a,c,s),a.child;case 14:return op(e,a,a.type,a.pendingProps,s);case 15:return sp(e,a,a.type,a.pendingProps,s);case 19:return hp(e,a,s);case 31:return H1(e,a,s);case 22:return ip(e,a,s,a.pendingProps);case 24:return wr(a),c=Bt(Et),e===null?(p=xu(),p===null&&(p=it,h=hu(),p.pooledCache=h,h.refCount++,h!==null&&(p.pooledCacheLanes|=s),p=h),a.memoizedState={parent:c,cache:p},bu(a),In(a,Et,p)):((e.lanes&s)!==0&&(wu(e,a),ys(a,null,null,s),xs()),p=e.memoizedState,h=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),In(a,Et,c)):(c=h.cache,In(a,Et,c),c!==p.cache&&pu(a,[Et],s,!0))),zt(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function mn(e){e.flags|=4}function td(e,a,s,c,p){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(Vp())e.flags|=8192;else throw Cr=Wi,yu}else e.flags&=-16777217}function xp(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rh(a))if(Vp())e.flags|=8192;else throw Cr=Wi,yu}function dl(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?xi():536870912,e.lanes|=a,bo|=a)}function Ss(e,a){if(!qe)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function dt(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(a)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=s,a}function B1(e,a,s){var c=a.pendingProps;switch(cu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(a),null;case 1:return dt(a),null;case 3:return s=a.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),cn(Et),pe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(oo(a)?mn(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,du())),dt(a),null;case 26:var p=a.type,h=a.memoizedState;return e===null?(mn(a),h!==null?(dt(a),xp(a,h)):(dt(a),td(a,p,null,c,s))):h?h!==e.memoizedState?(mn(a),dt(a),xp(a,h)):(dt(a),a.flags&=-16777217):(e=e.memoizedProps,e!==c&&mn(a),dt(a),td(a,p,e,c,s)),null;case 27:if(we(a),s=se.current,p=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==c&&mn(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return dt(a),null}e=A.current,oo(a)?Qf(a):(e=Sh(p,c,s),a.stateNode=e,mn(a))}return dt(a),null;case 5:if(we(a),p=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==c&&mn(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return dt(a),null}if(h=A.current,oo(a))Qf(a);else{var C=El(se.current);switch(h){case 1:h=C.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:h=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":h=C.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":h=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":h=C.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?h.multiple=!0:c.size&&(h.size=c.size);break;default:h=typeof c.is=="string"?C.createElement(p,{is:c.is}):C.createElement(p)}}h[Ot]=a,h[qt]=c;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)h.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=h;e:switch(Gt(h,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&mn(a)}}return dt(a),td(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==c&&mn(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(e=se.current,oo(a)){if(e=a.stateNode,s=a.memoizedProps,c=null,p=Ut,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[Ot]=a,e=!!(e.nodeValue===s||c!==null&&c.suppressHydrationWarning===!0||mh(e.nodeValue,s)),e||Pn(a,!0)}else e=El(e).createTextNode(c),e[Ot]=a,a.stateNode=e}return dt(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(c=oo(a),s!==null){if(e===null){if(!c)throw Error(i(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Ot]=a}else yr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dt(a),e=!1}else s=du(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(ua(a),a):(ua(a),null);if((a.flags&128)!==0)throw Error(i(558))}return dt(a),null;case 13:if(c=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=oo(a),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Ot]=a}else yr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dt(a),p=!1}else p=du(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(ua(a),a):(ua(a),null)}return ua(a),(a.flags&128)!==0?(a.lanes=s,a):(s=c!==null,e=e!==null&&e.memoizedState!==null,s&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),h=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(h=c.memoizedState.cachePool.pool),h!==p&&(c.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),dl(a,a.updateQueue),dt(a),null);case 4:return pe(),e===null&&Cd(a.stateNode.containerInfo),dt(a),null;case 10:return cn(a.type),dt(a),null;case 19:if($(wt),c=a.memoizedState,c===null)return dt(a),null;if(p=(a.flags&128)!==0,h=c.rendering,h===null)if(p)Ss(c,!1);else{if(xt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(h=Zi(e),h!==null){for(a.flags|=128,Ss(c,!1),e=h.updateQueue,a.updateQueue=e,dl(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)qf(s,e),s=s.sibling;return ee(wt,wt.current&1|2),qe&&sn(a,c.treeForkCount),a.child}e=e.sibling}c.tail!==null&&Ee()>gl&&(a.flags|=128,p=!0,Ss(c,!1),a.lanes=4194304)}else{if(!p)if(e=Zi(h),e!==null){if(a.flags|=128,p=!0,e=e.updateQueue,a.updateQueue=e,dl(a,e),Ss(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!qe)return dt(a),null}else 2*Ee()-c.renderingStartTime>gl&&s!==536870912&&(a.flags|=128,p=!0,Ss(c,!1),a.lanes=4194304);c.isBackwards?(h.sibling=a.child,a.child=h):(e=c.last,e!==null?e.sibling=h:a.child=h,c.last=h)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Ee(),e.sibling=null,s=wt.current,ee(wt,p?s&1|2:s&1),qe&&sn(a,c.treeForkCount),e):(dt(a),null);case 22:case 23:return ua(a),Su(),c=a.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(s&536870912)!==0&&(a.flags&128)===0&&(dt(a),a.subtreeFlags&6&&(a.flags|=8192)):dt(a),s=a.updateQueue,s!==null&&dl(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==s&&(a.flags|=2048),e!==null&&$(kr),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),cn(Et),dt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function z1(e,a){switch(cu(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return cn(Et),pe(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return we(a),null;case 31:if(a.memoizedState!==null){if(ua(a),a.alternate===null)throw Error(i(340));yr()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(ua(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(i(340));yr()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return $(wt),null;case 4:return pe(),null;case 10:return cn(a.type),null;case 22:case 23:return ua(a),Su(),e!==null&&$(kr),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return cn(Et),null;case 25:return null;default:return null}}function yp(e,a){switch(cu(a),a.tag){case 3:cn(Et),pe();break;case 26:case 27:case 5:we(a);break;case 4:pe();break;case 31:a.memoizedState!==null&&ua(a);break;case 13:ua(a);break;case 19:$(wt);break;case 10:cn(a.type);break;case 22:case 23:ua(a),Su(),e!==null&&$(kr);break;case 24:cn(Et)}}function Ns(e,a){try{var s=a.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var p=c.next;s=p;do{if((s.tag&e)===e){c=void 0;var h=s.create,C=s.inst;c=h(),C.destroy=c}s=s.next}while(s!==p)}}catch(L){Je(a,a.return,L)}}function Vn(e,a,s){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var h=p.next;c=h;do{if((c.tag&e)===e){var C=c.inst,L=C.destroy;if(L!==void 0){C.destroy=void 0,p=a;var K=s,ne=L;try{ne()}catch(ce){Je(p,K,ce)}}}c=c.next}while(c!==h)}}catch(ce){Je(a,a.return,ce)}}function bp(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{cm(a,s)}catch(c){Je(e,e.return,c)}}}function wp(e,a,s){s.props=Er(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(c){Je(e,a,c)}}function Es(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof s=="function"?e.refCleanup=s(c):s.current=c}}catch(p){Je(e,a,p)}}function Fa(e,a){var s=e.ref,c=e.refCleanup;if(s!==null)if(typeof c=="function")try{c()}catch(p){Je(e,a,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(p){Je(e,a,p)}else s.current=null}function kp(e){var a=e.type,s=e.memoizedProps,c=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&c.focus();break e;case"img":s.src?c.src=s.src:s.srcSet&&(c.srcset=s.srcSet)}}catch(p){Je(e,e.return,p)}}function ad(e,a,s){try{var c=e.stateNode;cw(c,e.type,s,a),c[qt]=a}catch(p){Je(e,e.return,p)}}function vp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qn(e.type)||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rd(e,a,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=nn));else if(c!==4&&(c===27&&Qn(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(rd(e,a,s),e=e.sibling;e!==null;)rd(e,a,s),e=e.sibling}function fl(e,a,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(c!==4&&(c===27&&Qn(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(fl(e,a,s),e=e.sibling;e!==null;)fl(e,a,s),e=e.sibling}function Cp(e){var a=e.stateNode,s=e.memoizedProps;try{for(var c=e.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Gt(a,c,s),a[Ot]=e,a[qt]=s}catch(h){Je(e,e.return,h)}}var pn=!1,_t=!1,od=!1,Sp=typeof WeakSet=="function"?WeakSet:Set,It=null;function G1(e,a){if(e=e.containerInfo,Ed=Ll,e=Pf(e),Zc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var p=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var C=0,L=-1,K=-1,ne=0,ce=0,me=e,re=null;t:for(;;){for(var oe;me!==s||p!==0&&me.nodeType!==3||(L=C+p),me!==h||c!==0&&me.nodeType!==3||(K=C+c),me.nodeType===3&&(C+=me.nodeValue.length),(oe=me.firstChild)!==null;)re=me,me=oe;for(;;){if(me===e)break t;if(re===s&&++ne===p&&(L=C),re===h&&++ce===c&&(K=C),(oe=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=oe}s=L===-1||K===-1?null:{start:L,end:K}}else s=null}s=s||{start:0,end:0}}else s=null;for(Td={focusedElem:e,selectionRange:s},Ll=!1,It=a;It!==null;)if(a=It,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,It=e;else for(;It!==null;){switch(a=It,h=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)p=e[s],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=a,p=h.memoizedProps,h=h.memoizedState,c=s.stateNode;try{var ve=Er(s.type,p);e=c.getSnapshotBeforeUpdate(ve,h),c.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Je(s,s.return,_e)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)Ad(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ad(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=a.sibling,e!==null){e.return=a.return,It=e;break}It=a.return}}function Np(e,a,s){var c=s.flags;switch(s.tag){case 0:case 11:case 15:gn(e,s),c&4&&Ns(5,s);break;case 1:if(gn(e,s),c&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(C){Je(s,s.return,C)}else{var p=Er(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(p,a,e.__reactInternalSnapshotBeforeUpdate)}catch(C){Je(s,s.return,C)}}c&64&&bp(s),c&512&&Es(s,s.return);break;case 3:if(gn(e,s),c&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{cm(e,a)}catch(C){Je(s,s.return,C)}}break;case 27:a===null&&c&4&&Cp(s);case 26:case 5:gn(e,s),a===null&&c&4&&kp(s),c&512&&Es(s,s.return);break;case 12:gn(e,s);break;case 31:gn(e,s),c&4&&Mp(e,s);break;case 13:gn(e,s),c&4&&_p(e,s),c&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=X1.bind(null,s),xw(e,s))));break;case 22:if(c=s.memoizedState!==null||pn,!c){a=a!==null&&a.memoizedState!==null||_t,p=pn;var h=_t;pn=c,(_t=a)&&!h?xn(e,s,(s.subtreeFlags&8772)!==0):gn(e,s),pn=p,_t=h}break;case 30:break;default:gn(e,s)}}function Ep(e){var a=e.alternate;a!==null&&(e.alternate=null,Ep(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Zo(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var mt=null,Jt=!1;function hn(e,a,s){for(s=s.child;s!==null;)Tp(e,a,s),s=s.sibling}function Tp(e,a,s){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(St,s)}catch{}switch(s.tag){case 26:_t||Fa(s,a),hn(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:_t||Fa(s,a);var c=mt,p=Jt;Qn(s.type)&&(mt=s.stateNode,Jt=!1),hn(e,a,s),Os(s.stateNode),mt=c,Jt=p;break;case 5:_t||Fa(s,a);case 6:if(c=mt,p=Jt,mt=null,hn(e,a,s),mt=c,Jt=p,mt!==null)if(Jt)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(s.stateNode)}catch(h){Je(s,a,h)}else try{mt.removeChild(s.stateNode)}catch(h){Je(s,a,h)}break;case 18:mt!==null&&(Jt?(e=mt,bh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),To(e)):bh(mt,s.stateNode));break;case 4:c=mt,p=Jt,mt=s.stateNode.containerInfo,Jt=!0,hn(e,a,s),mt=c,Jt=p;break;case 0:case 11:case 14:case 15:Vn(2,s,a),_t||Vn(4,s,a),hn(e,a,s);break;case 1:_t||(Fa(s,a),c=s.stateNode,typeof c.componentWillUnmount=="function"&&wp(s,a,c)),hn(e,a,s);break;case 21:hn(e,a,s);break;case 22:_t=(c=_t)||s.memoizedState!==null,hn(e,a,s),_t=c;break;default:hn(e,a,s)}}function Mp(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{To(e)}catch(s){Je(a,a.return,s)}}}function _p(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{To(e)}catch(s){Je(a,a.return,s)}}function V1(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Sp),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Sp),a;default:throw Error(i(435,e.tag))}}function ml(e,a){var s=V1(e);a.forEach(function(c){if(!s.has(c)){s.add(c);var p=Z1.bind(null,e,c);c.then(p,p)}})}function ea(e,a){var s=a.deletions;if(s!==null)for(var c=0;c<s.length;c++){var p=s[c],h=e,C=a,L=C;e:for(;L!==null;){switch(L.tag){case 27:if(Qn(L.type)){mt=L.stateNode,Jt=!1;break e}break;case 5:mt=L.stateNode,Jt=!1;break e;case 3:case 4:mt=L.stateNode.containerInfo,Jt=!0;break e}L=L.return}if(mt===null)throw Error(i(160));Tp(h,C,p),mt=null,Jt=!1,h=p.alternate,h!==null&&(h.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ap(a,e),a=a.sibling}var Aa=null;function Ap(e,a){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ea(a,e),ta(e),c&4&&(Vn(3,e,e.return),Ns(3,e),Vn(5,e,e.return));break;case 1:ea(a,e),ta(e),c&512&&(_t||s===null||Fa(s,s.return)),c&64&&pn&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?c:s.concat(c))));break;case 26:var p=Aa;if(ea(a,e),ta(e),c&512&&(_t||s===null||Fa(s,s.return)),c&4){var h=s!==null?s.memoizedState:null;if(c=e.memoizedState,s===null)if(c===null)if(e.stateNode===null){e:{c=e.type,s=e.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":h=p.getElementsByTagName("title")[0],(!h||h[ur]||h[Ot]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=p.createElement(c),p.head.insertBefore(h,p.querySelector("head > title"))),Gt(h,c,s),h[Ot]=e,Nt(h),c=h;break e;case"link":var C=Ah("link","href",p).get(c+(s.href||""));if(C){for(var L=0;L<C.length;L++)if(h=C[L],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){C.splice(L,1);break t}}h=p.createElement(c),Gt(h,c,s),p.head.appendChild(h);break;case"meta":if(C=Ah("meta","content",p).get(c+(s.content||""))){for(L=0;L<C.length;L++)if(h=C[L],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){C.splice(L,1);break t}}h=p.createElement(c),Gt(h,c,s),p.head.appendChild(h);break;default:throw Error(i(468,c))}h[Ot]=e,Nt(h),c=h}e.stateNode=c}else jh(p,e.type,e.stateNode);else e.stateNode=_h(p,c,e.memoizedProps);else h!==c?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,c===null?jh(p,e.type,e.stateNode):_h(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&ad(e,e.memoizedProps,s.memoizedProps)}break;case 27:ea(a,e),ta(e),c&512&&(_t||s===null||Fa(s,s.return)),s!==null&&c&4&&ad(e,e.memoizedProps,s.memoizedProps);break;case 5:if(ea(a,e),ta(e),c&512&&(_t||s===null||Fa(s,s.return)),e.flags&32){p=e.stateNode;try{Kr(p,"")}catch(ve){Je(e,e.return,ve)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,ad(e,p,s!==null?s.memoizedProps:p)),c&1024&&(od=!0);break;case 6:if(ea(a,e),ta(e),c&4){if(e.stateNode===null)throw Error(i(162));c=e.memoizedProps,s=e.stateNode;try{s.nodeValue=c}catch(ve){Je(e,e.return,ve)}}break;case 3:if(_l=null,p=Aa,Aa=Tl(a.containerInfo),ea(a,e),Aa=p,ta(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{To(a.containerInfo)}catch(ve){Je(e,e.return,ve)}od&&(od=!1,jp(e));break;case 4:c=Aa,Aa=Tl(e.stateNode.containerInfo),ea(a,e),ta(e),Aa=c;break;case 12:ea(a,e),ta(e);break;case 31:ea(a,e),ta(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ml(e,c)));break;case 13:ea(a,e),ta(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(hl=Ee()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ml(e,c)));break;case 22:p=e.memoizedState!==null;var K=s!==null&&s.memoizedState!==null,ne=pn,ce=_t;if(pn=ne||p,_t=ce||K,ea(a,e),_t=ce,pn=ne,ta(e),c&8192)e:for(a=e.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(s===null||K||pn||_t||Tr(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){K=s=a;try{if(h=K.stateNode,p)C=h.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{L=K.stateNode;var me=K.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;L.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ve){Je(K,K.return,ve)}}}else if(a.tag===6){if(s===null){K=a;try{K.stateNode.nodeValue=p?"":K.memoizedProps}catch(ve){Je(K,K.return,ve)}}}else if(a.tag===18){if(s===null){K=a;try{var oe=K.stateNode;p?wh(oe,!0):wh(K.stateNode,!1)}catch(ve){Je(K,K.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=e.updateQueue,c!==null&&(s=c.retryQueue,s!==null&&(c.retryQueue=null,ml(e,s))));break;case 19:ea(a,e),ta(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ml(e,c)));break;case 30:break;case 21:break;default:ea(a,e),ta(e)}}function ta(e){var a=e.flags;if(a&2){try{for(var s,c=e.return;c!==null;){if(vp(c)){s=c;break}c=c.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var p=s.stateNode,h=nd(e);fl(e,h,p);break;case 5:var C=s.stateNode;s.flags&32&&(Kr(C,""),s.flags&=-33);var L=nd(e);fl(e,L,C);break;case 3:case 4:var K=s.stateNode.containerInfo,ne=nd(e);rd(e,ne,K);break;default:throw Error(i(161))}}catch(ce){Je(e,e.return,ce)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function jp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;jp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function gn(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Np(e,a.alternate,a),a=a.sibling}function Tr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:Vn(4,a,a.return),Tr(a);break;case 1:Fa(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&wp(a,a.return,s),Tr(a);break;case 27:Os(a.stateNode);case 26:case 5:Fa(a,a.return),Tr(a);break;case 22:a.memoizedState===null&&Tr(a);break;case 30:Tr(a);break;default:Tr(a)}e=e.sibling}}function xn(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=e,h=a,C=h.flags;switch(h.tag){case 0:case 11:case 15:xn(p,h,s),Ns(4,h);break;case 1:if(xn(p,h,s),c=h,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ne){Je(c,c.return,ne)}if(c=h,p=c.updateQueue,p!==null){var L=c.stateNode;try{var K=p.shared.hiddenCallbacks;if(K!==null)for(p.shared.hiddenCallbacks=null,p=0;p<K.length;p++)lm(K[p],L)}catch(ne){Je(c,c.return,ne)}}s&&C&64&&bp(h),Es(h,h.return);break;case 27:Cp(h);case 26:case 5:xn(p,h,s),s&&c===null&&C&4&&kp(h),Es(h,h.return);break;case 12:xn(p,h,s);break;case 31:xn(p,h,s),s&&C&4&&Mp(p,h);break;case 13:xn(p,h,s),s&&C&4&&_p(p,h);break;case 22:h.memoizedState===null&&xn(p,h,s),Es(h,h.return);break;case 30:break;default:xn(p,h,s)}a=a.sibling}}function sd(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&fs(s))}function id(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&fs(e))}function ja(e,a,s,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Rp(e,a,s,c),a=a.sibling}function Rp(e,a,s,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:ja(e,a,s,c),p&2048&&Ns(9,a);break;case 1:ja(e,a,s,c);break;case 3:ja(e,a,s,c),p&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&fs(e)));break;case 12:if(p&2048){ja(e,a,s,c),e=a.stateNode;try{var h=a.memoizedProps,C=h.id,L=h.onPostCommit;typeof L=="function"&&L(C,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(K){Je(a,a.return,K)}}else ja(e,a,s,c);break;case 31:ja(e,a,s,c);break;case 13:ja(e,a,s,c);break;case 23:break;case 22:h=a.stateNode,C=a.alternate,a.memoizedState!==null?h._visibility&2?ja(e,a,s,c):Ts(e,a):h._visibility&2?ja(e,a,s,c):(h._visibility|=2,go(e,a,s,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&sd(C,a);break;case 24:ja(e,a,s,c),p&2048&&id(a.alternate,a);break;default:ja(e,a,s,c)}}function go(e,a,s,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var h=e,C=a,L=s,K=c,ne=C.flags;switch(C.tag){case 0:case 11:case 15:go(h,C,L,K,p),Ns(8,C);break;case 23:break;case 22:var ce=C.stateNode;C.memoizedState!==null?ce._visibility&2?go(h,C,L,K,p):Ts(h,C):(ce._visibility|=2,go(h,C,L,K,p)),p&&ne&2048&&sd(C.alternate,C);break;case 24:go(h,C,L,K,p),p&&ne&2048&&id(C.alternate,C);break;default:go(h,C,L,K,p)}a=a.sibling}}function Ts(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,c=a,p=c.flags;switch(c.tag){case 22:Ts(s,c),p&2048&&sd(c.alternate,c);break;case 24:Ts(s,c),p&2048&&id(c.alternate,c);break;default:Ts(s,c)}a=a.sibling}}var Ms=8192;function xo(e,a,s){if(e.subtreeFlags&Ms)for(e=e.child;e!==null;)Lp(e,a,s),e=e.sibling}function Lp(e,a,s){switch(e.tag){case 26:xo(e,a,s),e.flags&Ms&&e.memoizedState!==null&&_w(s,Aa,e.memoizedState,e.memoizedProps);break;case 5:xo(e,a,s);break;case 3:case 4:var c=Aa;Aa=Tl(e.stateNode.containerInfo),xo(e,a,s),Aa=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Ms,Ms=16777216,xo(e,a,s),Ms=c):xo(e,a,s));break;default:xo(e,a,s)}}function Dp(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function _s(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var c=a[s];It=c,Pp(c,e)}Dp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Op(e),e=e.sibling}function Op(e){switch(e.tag){case 0:case 11:case 15:_s(e),e.flags&2048&&Vn(9,e,e.return);break;case 3:_s(e);break;case 12:_s(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,pl(e)):_s(e);break;default:_s(e)}}function pl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var c=a[s];It=c,Pp(c,e)}Dp(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:Vn(8,a,a.return),pl(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,pl(a));break;default:pl(a)}e=e.sibling}}function Pp(e,a){for(;It!==null;){var s=It;switch(s.tag){case 0:case 11:case 15:Vn(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var c=s.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:fs(s.memoizedState.cache)}if(c=s.child,c!==null)c.return=s,It=c;else e:for(s=e;It!==null;){c=It;var p=c.sibling,h=c.return;if(Ep(c),c===s){It=null;break e}if(p!==null){p.return=h,It=p;break e}It=h}}}var F1={getCacheForType:function(e){var a=Bt(Et),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return Bt(Et).controller.signal}},q1=typeof WeakMap=="function"?WeakMap:Map,Qe=0,it=null,Be=null,Ve=0,Ze=0,da=null,Fn=!1,yo=!1,ld=!1,yn=0,xt=0,qn=0,Mr=0,cd=0,fa=0,bo=0,As=null,aa=null,ud=!1,hl=0,Ip=0,gl=1/0,xl=null,$n=null,Pt=0,Yn=null,wo=null,bn=0,dd=0,fd=null,Hp=null,js=0,md=null;function ma(){return(Qe&2)!==0&&Ve!==0?Ve&-Ve:S.T!==null?bd():ki()}function Up(){if(fa===0)if((Ve&536870912)===0||qe){var e=Ba;Ba<<=1,(Ba&3932160)===0&&(Ba=262144),fa=e}else fa=536870912;return e=ca.current,e!==null&&(e.flags|=32),fa}function na(e,a,s){(e===it&&(Ze===2||Ze===9)||e.cancelPendingCommit!==null)&&(ko(e,0),Wn(e,Ve,fa,!1)),cr(e,s),((Qe&2)===0||e!==it)&&(e===it&&((Qe&2)===0&&(Mr|=s),xt===4&&Wn(e,Ve,fa,!1)),qa(e))}function Bp(e,a,s){if((Qe&6)!==0)throw Error(i(327));var c=!s&&(a&127)===0&&(a&e.expiredLanes)===0||lr(e,a),p=c?W1(e,a):hd(e,a,!0),h=c;do{if(p===0){yo&&!c&&Wn(e,a,0,!1);break}else{if(s=e.current.alternate,h&&!$1(s)){p=hd(e,a,!1),h=!1;continue}if(p===2){if(h=a,e.errorRecoveryDisabledLanes&h)var C=0;else C=e.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var L=e;p=As;var K=L.current.memoizedState.isDehydrated;if(K&&(ko(L,C).flags|=256),C=hd(L,C,!1),C!==2){if(ld&&!K){L.errorRecoveryDisabledLanes|=h,Mr|=h,p=4;break e}h=aa,aa=p,h!==null&&(aa===null?aa=h:aa.push.apply(aa,h))}p=C}if(h=!1,p!==2)continue}}if(p===1){ko(e,0),Wn(e,a,0,!0);break}e:{switch(c=e,h=p,h){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Wn(c,a,fa,!Fn);break e;case 2:aa=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=hl+300-Ee(),10<p)){if(Wn(c,a,fa,!Fn),Fr(c,0,!0)!==0)break e;bn=a,c.timeoutHandle=xh(zp.bind(null,c,s,aa,xl,ud,a,fa,Mr,bo,Fn,h,"Throttled",-0,0),p);break e}zp(c,s,aa,xl,ud,a,fa,Mr,bo,Fn,h,null,-0,0)}}break}while(!0);qa(e)}function zp(e,a,s,c,p,h,C,L,K,ne,ce,me,re,oe){if(e.timeoutHandle=-1,me=a.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nn},Lp(a,h,me);var ve=(h&62914560)===h?hl-Ee():(h&4194048)===h?Ip-Ee():0;if(ve=Aw(me,ve),ve!==null){bn=h,e.cancelPendingCommit=ve(Kp.bind(null,e,a,h,s,c,p,C,L,K,ce,me,null,re,oe)),Wn(e,h,C,!ne);return}}Kp(e,a,h,s,c,p,C,L,K)}function $1(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var c=0;c<s.length;c++){var p=s[c],h=p.getSnapshot;p=p.value;try{if(!ia(h(),p))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wn(e,a,s,c){a&=~cd,a&=~Mr,e.suspendedLanes|=a,e.pingedLanes&=~a,c&&(e.warmLanes|=a),c=e.expirationTimes;for(var p=a;0<p;){var h=31-lt(p),C=1<<h;c[h]=-1,p&=~C}s!==0&&yi(e,s,a)}function yl(){return(Qe&6)===0?(Rs(0),!1):!0}function pd(){if(Be!==null){if(Ze===0)var e=Be.return;else e=Be,ln=br=null,Au(e),uo=null,ps=0,e=Be;for(;e!==null;)yp(e.alternate,e),e=e.return;Be=null}}function ko(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,fw(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),bn=0,pd(),it=e,Be=s=on(e.current,null),Ve=a,Ze=0,da=null,Fn=!1,yo=lr(e,a),ld=!1,bo=fa=cd=Mr=qn=xt=0,aa=As=null,ud=!1,(a&8)!==0&&(a|=a&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=a;0<c;){var p=31-lt(c),h=1<<p;a|=e[p],c&=~h}return yn=a,Ui(),s}function Gp(e,a){Pe=null,S.H=vs,a===co||a===Yi?(a=rm(),Ze=3):a===yu?(a=rm(),Ze=4):Ze=a===$u?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,da=a,Be===null&&(xt=1,il(e,wa(a,e.current)))}function Vp(){var e=ca.current;return e===null?!0:(Ve&4194048)===Ve?Sa===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?e===Sa:!1}function Fp(){var e=S.H;return S.H=vs,e===null?vs:e}function qp(){var e=S.A;return S.A=F1,e}function bl(){xt=4,Fn||(Ve&4194048)!==Ve&&ca.current!==null||(yo=!0),(qn&134217727)===0&&(Mr&134217727)===0||it===null||Wn(it,Ve,fa,!1)}function hd(e,a,s){var c=Qe;Qe|=2;var p=Fp(),h=qp();(it!==e||Ve!==a)&&(xl=null,ko(e,a)),a=!1;var C=xt;e:do try{if(Ze!==0&&Be!==null){var L=Be,K=da;switch(Ze){case 8:pd(),C=6;break e;case 3:case 2:case 9:case 6:ca.current===null&&(a=!0);var ne=Ze;if(Ze=0,da=null,vo(e,L,K,ne),s&&yo){C=0;break e}break;default:ne=Ze,Ze=0,da=null,vo(e,L,K,ne)}}Y1(),C=xt;break}catch(ce){Gp(e,ce)}while(!0);return a&&e.shellSuspendCounter++,ln=br=null,Qe=c,S.H=p,S.A=h,Be===null&&(it=null,Ve=0,Ui()),C}function Y1(){for(;Be!==null;)$p(Be)}function W1(e,a){var s=Qe;Qe|=2;var c=Fp(),p=qp();it!==e||Ve!==a?(xl=null,gl=Ee()+500,ko(e,a)):yo=lr(e,a);e:do try{if(Ze!==0&&Be!==null){a=Be;var h=da;t:switch(Ze){case 1:Ze=0,da=null,vo(e,a,h,1);break;case 2:case 9:if(am(h)){Ze=0,da=null,Yp(a);break}a=function(){Ze!==2&&Ze!==9||it!==e||(Ze=7),qa(e)},h.then(a,a);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:am(h)?(Ze=0,da=null,Yp(a)):(Ze=0,da=null,vo(e,a,h,7));break;case 5:var C=null;switch(Be.tag){case 26:C=Be.memoizedState;case 5:case 27:var L=Be;if(C?Rh(C):L.stateNode.complete){Ze=0,da=null;var K=L.sibling;if(K!==null)Be=K;else{var ne=L.return;ne!==null?(Be=ne,wl(ne)):Be=null}break t}}Ze=0,da=null,vo(e,a,h,5);break;case 6:Ze=0,da=null,vo(e,a,h,6);break;case 8:pd(),xt=6;break e;default:throw Error(i(462))}}K1();break}catch(ce){Gp(e,ce)}while(!0);return ln=br=null,S.H=c,S.A=p,Qe=s,Be!==null?0:(it=null,Ve=0,Ui(),xt)}function K1(){for(;Be!==null&&!Dt();)$p(Be)}function $p(e){var a=gp(e.alternate,e,yn);e.memoizedProps=e.pendingProps,a===null?wl(e):Be=a}function Yp(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=up(s,a,a.pendingProps,a.type,void 0,Ve);break;case 11:a=up(s,a,a.pendingProps,a.type.render,a.ref,Ve);break;case 5:Au(a);default:yp(s,a),a=Be=qf(a,yn),a=gp(s,a,yn)}e.memoizedProps=e.pendingProps,a===null?wl(e):Be=a}function vo(e,a,s,c){ln=br=null,Au(a),uo=null,ps=0;var p=a.return;try{if(I1(e,p,a,s,Ve)){xt=1,il(e,wa(s,e.current)),Be=null;return}}catch(h){if(p!==null)throw Be=p,h;xt=1,il(e,wa(s,e.current)),Be=null;return}a.flags&32768?(qe||c===1?e=!0:yo||(Ve&536870912)!==0?e=!1:(Fn=e=!0,(c===2||c===9||c===3||c===6)&&(c=ca.current,c!==null&&c.tag===13&&(c.flags|=16384))),Wp(a,e)):wl(a)}function wl(e){var a=e;do{if((a.flags&32768)!==0){Wp(a,Fn);return}e=a.return;var s=B1(a.alternate,a,yn);if(s!==null){Be=s;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=e}while(a!==null);xt===0&&(xt=5)}function Wp(e,a){do{var s=z1(e.alternate,e);if(s!==null){s.flags&=32767,Be=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){Be=e;return}Be=e=s}while(e!==null);xt=6,Be=null}function Kp(e,a,s,c,p,h,C,L,K){e.cancelPendingCommit=null;do kl();while(Pt!==0);if((Qe&6)!==0)throw Error(i(327));if(a!==null){if(a===e.current)throw Error(i(177));if(h=a.lanes|a.childLanes,h|=nu,Lc(e,s,h,C,L,K),e===it&&(Be=it=null,Ve=0),wo=a,Yn=e,bn=s,dd=h,fd=p,Hp=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,J1(je,function(){return eh(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=S.T,S.T=null,p=_.p,_.p=2,C=Qe,Qe|=4;try{G1(e,a,s)}finally{Qe=C,_.p=p,S.T=c}}Pt=1,Qp(),Xp(),Zp()}}function Qp(){if(Pt===1){Pt=0;var e=Yn,a=wo,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=S.T,S.T=null;var c=_.p;_.p=2;var p=Qe;Qe|=4;try{Ap(a,e);var h=Td,C=Pf(e.containerInfo),L=h.focusedElem,K=h.selectionRange;if(C!==L&&L&&L.ownerDocument&&Of(L.ownerDocument.documentElement,L)){if(K!==null&&Zc(L)){var ne=K.start,ce=K.end;if(ce===void 0&&(ce=ne),"selectionStart"in L)L.selectionStart=ne,L.selectionEnd=Math.min(ce,L.value.length);else{var me=L.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var oe=re.getSelection(),ve=L.textContent.length,_e=Math.min(K.start,ve),nt=K.end===void 0?_e:Math.min(K.end,ve);!oe.extend&&_e>nt&&(C=nt,nt=_e,_e=C);var te=Df(L,_e),Q=Df(L,nt);if(te&&Q&&(oe.rangeCount!==1||oe.anchorNode!==te.node||oe.anchorOffset!==te.offset||oe.focusNode!==Q.node||oe.focusOffset!==Q.offset)){var ae=me.createRange();ae.setStart(te.node,te.offset),oe.removeAllRanges(),_e>nt?(oe.addRange(ae),oe.extend(Q.node,Q.offset)):(ae.setEnd(Q.node,Q.offset),oe.addRange(ae))}}}}for(me=[],oe=L;oe=oe.parentNode;)oe.nodeType===1&&me.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<me.length;L++){var fe=me[L];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Ll=!!Ed,Td=Ed=null}finally{Qe=p,_.p=c,S.T=s}}e.current=a,Pt=2}}function Xp(){if(Pt===2){Pt=0;var e=Yn,a=wo,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=S.T,S.T=null;var c=_.p;_.p=2;var p=Qe;Qe|=4;try{Np(e,a.alternate,a)}finally{Qe=p,_.p=c,S.T=s}}Pt=3}}function Zp(){if(Pt===4||Pt===3){Pt=0,de();var e=Yn,a=wo,s=bn,c=Hp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Pt=5:(Pt=0,wo=Yn=null,Jp(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&($n=null),Xo(s),a=a.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(St,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=S.T,p=_.p,_.p=2,S.T=null;try{for(var h=e.onRecoverableError,C=0;C<c.length;C++){var L=c[C];h(L.value,{componentStack:L.stack})}}finally{S.T=a,_.p=p}}(bn&3)!==0&&kl(),qa(e),p=e.pendingLanes,(s&261930)!==0&&(p&42)!==0?e===md?js++:(js=0,md=e):js=0,Rs(0)}}function Jp(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,fs(a)))}function kl(){return Qp(),Xp(),Zp(),eh()}function eh(){if(Pt!==5)return!1;var e=Yn,a=dd;dd=0;var s=Xo(bn),c=S.T,p=_.p;try{_.p=32>s?32:s,S.T=null,s=fd,fd=null;var h=Yn,C=bn;if(Pt=0,wo=Yn=null,bn=0,(Qe&6)!==0)throw Error(i(331));var L=Qe;if(Qe|=4,Op(h.current),Rp(h,h.current,C,s),Qe=L,Rs(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(St,h)}catch{}return!0}finally{_.p=p,S.T=c,Jp(e,a)}}function th(e,a,s){a=wa(s,a),a=qu(e.stateNode,a,2),e=Bn(e,a,2),e!==null&&(cr(e,2),qa(e))}function Je(e,a,s){if(e.tag===3)th(e,e,s);else for(;a!==null;){if(a.tag===3){th(a,e,s);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&($n===null||!$n.has(c))){e=wa(s,e),s=ap(2),c=Bn(a,s,2),c!==null&&(np(s,c,a,e),cr(c,2),qa(c));break}}a=a.return}}function gd(e,a,s){var c=e.pingCache;if(c===null){c=e.pingCache=new q1;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(s)||(ld=!0,p.add(s),e=Q1.bind(null,e,a,s),a.then(e,e))}function Q1(e,a,s){var c=e.pingCache;c!==null&&c.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,it===e&&(Ve&s)===s&&(xt===4||xt===3&&(Ve&62914560)===Ve&&300>Ee()-hl?(Qe&2)===0&&ko(e,0):cd|=s,bo===Ve&&(bo=0)),qa(e)}function ah(e,a){a===0&&(a=xi()),e=gr(e,a),e!==null&&(cr(e,a),qa(e))}function X1(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),ah(e,s)}function Z1(e,a){var s=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),ah(e,s)}function J1(e,a){return vt(e,a)}var vl=null,Co=null,xd=!1,Cl=!1,yd=!1,Kn=0;function qa(e){e!==Co&&e.next===null&&(Co===null?vl=Co=e:Co=Co.next=e),Cl=!0,xd||(xd=!0,tw())}function Rs(e,a){if(!yd&&Cl){yd=!0;do for(var s=!1,c=vl;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var h=0;else{var C=c.suspendedLanes,L=c.pingedLanes;h=(1<<31-lt(42|e)+1)-1,h&=p&~(C&~L),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,sh(c,h))}else h=Ve,h=Fr(c,c===it?h:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(h&3)===0||lr(c,h)||(s=!0,sh(c,h));c=c.next}while(s);yd=!1}}function ew(){nh()}function nh(){Cl=xd=!1;var e=0;Kn!==0&&dw()&&(e=Kn);for(var a=Ee(),s=null,c=vl;c!==null;){var p=c.next,h=rh(c,a);h===0?(c.next=null,s===null?vl=p:s.next=p,p===null&&(Co=s)):(s=c,(e!==0||(h&3)!==0)&&(Cl=!0)),c=p}Pt!==0&&Pt!==5||Rs(e),Kn!==0&&(Kn=0)}function rh(e,a){for(var s=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var C=31-lt(h),L=1<<C,K=p[C];K===-1?((L&s)===0||(L&c)!==0)&&(p[C]=Rc(L,a)):K<=a&&(e.expiredLanes|=L),h&=~L}if(a=it,s=Ve,s=Fr(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,s===0||e===a&&(Ze===2||Ze===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Lt(c),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||lr(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(c!==null&&Lt(c),Xo(s)){case 2:case 8:s=Te;break;case 32:s=je;break;case 268435456:s=ct;break;default:s=je}return c=oh.bind(null,e),s=vt(s,c),e.callbackPriority=a,e.callbackNode=s,a}return c!==null&&c!==null&&Lt(c),e.callbackPriority=2,e.callbackNode=null,2}function oh(e,a){if(Pt!==0&&Pt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(kl()&&e.callbackNode!==s)return null;var c=Ve;return c=Fr(e,e===it?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Bp(e,c,a),rh(e,Ee()),e.callbackNode!=null&&e.callbackNode===s?oh.bind(null,e):null)}function sh(e,a){if(kl())return null;Bp(e,a,!0)}function tw(){mw(function(){(Qe&6)!==0?vt(Ye,ew):nh()})}function bd(){if(Kn===0){var e=io;e===0&&(e=Ua,Ua<<=1,(Ua&261888)===0&&(Ua=256)),Kn=e}return Kn}function ih(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ji(""+e)}function lh(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function aw(e,a,s,c,p){if(a==="submit"&&s&&s.stateNode===p){var h=ih((p[qt]||null).action),C=c.submitter;C&&(a=(a=C[qt]||null)?ih(a.formAction):C.getAttribute("formAction"),a!==null&&(h=a,C=null));var L=new Oi("action","action",null,c,p);e.push({event:L,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Kn!==0){var K=C?lh(p,C):new FormData(p);Uu(s,{pending:!0,data:K,method:p.method,action:h},null,K)}}else typeof h=="function"&&(L.preventDefault(),K=C?lh(p,C):new FormData(p),Uu(s,{pending:!0,data:K,method:p.method,action:h},h,K))},currentTarget:p}]})}}for(var wd=0;wd<au.length;wd++){var kd=au[wd],nw=kd.toLowerCase(),rw=kd[0].toUpperCase()+kd.slice(1);_a(nw,"on"+rw)}_a(Uf,"onAnimationEnd"),_a(Bf,"onAnimationIteration"),_a(zf,"onAnimationStart"),_a("dblclick","onDoubleClick"),_a("focusin","onFocus"),_a("focusout","onBlur"),_a(w1,"onTransitionRun"),_a(k1,"onTransitionStart"),_a(v1,"onTransitionCancel"),_a(Gf,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ow=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ls));function ch(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],p=c.event;c=c.listeners;e:{var h=void 0;if(a)for(var C=c.length-1;0<=C;C--){var L=c[C],K=L.instance,ne=L.currentTarget;if(L=L.listener,K!==h&&p.isPropagationStopped())break e;h=L,p.currentTarget=ne;try{h(p)}catch(ce){Hi(ce)}p.currentTarget=null,h=K}else for(C=0;C<c.length;C++){if(L=c[C],K=L.instance,ne=L.currentTarget,L=L.listener,K!==h&&p.isPropagationStopped())break e;h=L,p.currentTarget=ne;try{h(p)}catch(ce){Hi(ce)}p.currentTarget=null,h=K}}}}function ze(e,a){var s=a[qr];s===void 0&&(s=a[qr]=new Set);var c=e+"__bubble";s.has(c)||(uh(a,e,2,!1),s.add(c))}function vd(e,a,s){var c=0;a&&(c|=4),uh(s,e,c,a)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[Sl]){e[Sl]=!0,Ni.forEach(function(s){s!=="selectionchange"&&(ow.has(s)||vd(s,!1,e),vd(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Sl]||(a[Sl]=!0,vd("selectionchange",!1,a))}}function uh(e,a,s,c){switch(Uh(a)){case 2:var p=Lw;break;case 8:p=Dw;break;default:p=Hd}s=p.bind(null,a,s,e),p=void 0,!Vc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(a,s,{capture:!0,passive:p}):e.addEventListener(a,s,!0):p!==void 0?e.addEventListener(a,s,{passive:p}):e.addEventListener(a,s,!1)}function Sd(e,a,s,c,p){var h=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var L=c.stateNode.containerInfo;if(L===p)break;if(C===4)for(C=c.return;C!==null;){var K=C.tag;if((K===3||K===4)&&C.stateNode.containerInfo===p)return;C=C.return}for(;L!==null;){if(C=Mn(L),C===null)return;if(K=C.tag,K===5||K===6||K===26||K===27){c=h=C;continue e}L=L.parentNode}}c=c.return}hf(function(){var ne=h,ce=zc(s),me=[];e:{var re=Vf.get(e);if(re!==void 0){var oe=Oi,ve=e;switch(e){case"keypress":if(Li(s)===0)break e;case"keydown":case"keyup":oe=Zb;break;case"focusin":ve="focus",oe=Yc;break;case"focusout":ve="blur",oe=Yc;break;case"beforeblur":case"afterblur":oe=Yc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Bb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=t1;break;case Uf:case Bf:case zf:oe=Vb;break;case Gf:oe=n1;break;case"scroll":case"scrollend":oe=Hb;break;case"wheel":oe=o1;break;case"copy":case"cut":case"paste":oe=qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=wf;break;case"toggle":case"beforetoggle":oe=i1}var _e=(a&4)!==0,nt=!_e&&(e==="scroll"||e==="scrollend"),te=_e?re!==null?re+"Capture":null:re;_e=[];for(var Q=ne,ae;Q!==null;){var fe=Q;if(ae=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ae===null||te===null||(fe=ts(Q,te),fe!=null&&_e.push(Ds(Q,fe,ae))),nt)break;Q=Q.return}0<_e.length&&(re=new oe(re,ve,null,s,ce),me.push({event:re,listeners:_e}))}}if((a&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",oe=e==="mouseout"||e==="pointerout",re&&s!==Bc&&(ve=s.relatedTarget||s.fromElement)&&(Mn(ve)||ve[en]))break e;if((oe||re)&&(re=ce.window===ce?ce:(re=ce.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(ve=s.relatedTarget||s.toElement,oe=ne,ve=ve?Mn(ve):null,ve!==null&&(nt=d(ve),_e=ve.tag,ve!==nt||_e!==5&&_e!==27&&_e!==6)&&(ve=null)):(oe=null,ve=ne),oe!==ve)){if(_e=yf,fe="onMouseLeave",te="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(_e=wf,fe="onPointerLeave",te="onPointerEnter",Q="pointer"),nt=oe==null?re:An(oe),ae=ve==null?re:An(ve),re=new _e(fe,Q+"leave",oe,s,ce),re.target=nt,re.relatedTarget=ae,fe=null,Mn(ce)===ne&&(_e=new _e(te,Q+"enter",ve,s,ce),_e.target=ae,_e.relatedTarget=nt,fe=_e),nt=fe,oe&&ve)t:{for(_e=sw,te=oe,Q=ve,ae=0,fe=te;fe;fe=_e(fe))ae++;fe=0;for(var Ne=Q;Ne;Ne=_e(Ne))fe++;for(;0<ae-fe;)te=_e(te),ae--;for(;0<fe-ae;)Q=_e(Q),fe--;for(;ae--;){if(te===Q||Q!==null&&te===Q.alternate){_e=te;break t}te=_e(te),Q=_e(Q)}_e=null}else _e=null;oe!==null&&dh(me,re,oe,_e,!1),ve!==null&&nt!==null&&dh(me,nt,ve,_e,!0)}}e:{if(re=ne?An(ne):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var We=Mf;else if(Ef(re))if(_f)We=x1;else{We=h1;var Se=p1}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&Uc(ne.elementType)&&(We=Mf):We=g1;if(We&&(We=We(e,ne))){Tf(me,We,s,ce);break e}Se&&Se(e,re,ne),e==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&es(re,"number",re.value)}switch(Se=ne?An(ne):window,e){case"focusin":(Ef(Se)||Se.contentEditable==="true")&&(Jr=Se,Jc=ne,cs=null);break;case"focusout":cs=Jc=Jr=null;break;case"mousedown":eu=!0;break;case"contextmenu":case"mouseup":case"dragend":eu=!1,If(me,s,ce);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":If(me,s,ce)}var Ie;if(Kc)e:{switch(e){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Zr?Sf(e,s)&&(Fe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Fe="onCompositionStart");Fe&&(kf&&s.locale!=="ko"&&(Zr||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Zr&&(Ie=gf()):(Ln=ce,Fc="value"in Ln?Ln.value:Ln.textContent,Zr=!0)),Se=Nl(ne,Fe),0<Se.length&&(Fe=new bf(Fe,e,null,s,ce),me.push({event:Fe,listeners:Se}),Ie?Fe.data=Ie:(Ie=Nf(s),Ie!==null&&(Fe.data=Ie)))),(Ie=c1?u1(e,s):d1(e,s))&&(Fe=Nl(ne,"onBeforeInput"),0<Fe.length&&(Se=new bf("onBeforeInput","beforeinput",null,s,ce),me.push({event:Se,listeners:Fe}),Se.data=Ie)),aw(me,e,ne,s,ce)}ch(me,a)})}function Ds(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Nl(e,a){for(var s=a+"Capture",c=[];e!==null;){var p=e,h=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||h===null||(p=ts(e,s),p!=null&&c.unshift(Ds(e,p,h)),p=ts(e,a),p!=null&&c.push(Ds(e,p,h))),e.tag===3)return c;e=e.return}return[]}function sw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dh(e,a,s,c,p){for(var h=a._reactName,C=[];s!==null&&s!==c;){var L=s,K=L.alternate,ne=L.stateNode;if(L=L.tag,K!==null&&K===c)break;L!==5&&L!==26&&L!==27||ne===null||(K=ne,p?(ne=ts(s,h),ne!=null&&C.unshift(Ds(s,ne,K))):p||(ne=ts(s,h),ne!=null&&C.push(Ds(s,ne,K)))),s=s.return}C.length!==0&&e.push({event:a,listeners:C})}var iw=/\r\n?/g,lw=/\u0000|\uFFFD/g;function fh(e){return(typeof e=="string"?e:""+e).replace(iw,`
`).replace(lw,"")}function mh(e,a){return a=fh(a),fh(e)===a}function at(e,a,s,c,p,h){switch(s){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Kr(e,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Kr(e,""+c);break;case"className":Yr(e,"class",c);break;case"tabIndex":Yr(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Yr(e,s,c);break;case"style":mf(e,c,h);break;case"data":if(a!=="object"){Yr(e,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=ji(""+c),e.setAttribute(s,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(a!=="input"&&at(e,a,"name",p.name,p,null),at(e,a,"formEncType",p.formEncType,p,null),at(e,a,"formMethod",p.formMethod,p,null),at(e,a,"formTarget",p.formTarget,p,null)):(at(e,a,"encType",p.encType,p,null),at(e,a,"method",p.method,p,null),at(e,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=ji(""+c),e.setAttribute(s,c);break;case"onClick":c!=null&&(e.onclick=nn);break;case"onScroll":c!=null&&ze("scroll",e);break;case"onScrollEnd":c!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(s=c.__html,s!=null){if(p.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}s=ji(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""+c):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":c===!0?e.setAttribute(s,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,c):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(s,c):e.removeAttribute(s);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(s):e.setAttribute(s,c);break;case"popover":ze("beforetoggle",e),ze("toggle",e),$r(e,"popover",c);break;case"xlinkActuate":Ma(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ma(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ma(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ma(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ma(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ma(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$r(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Pb.get(s)||s,$r(e,s,c))}}function Nd(e,a,s,c,p,h){switch(s){case"style":mf(e,c,h);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(s=c.__html,s!=null){if(p.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof c=="string"?Kr(e,c):(typeof c=="number"||typeof c=="bigint")&&Kr(e,""+c);break;case"onScroll":c!=null&&ze("scroll",e);break;case"onScrollEnd":c!=null&&ze("scrollend",e);break;case"onClick":c!=null&&(e.onclick=nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ei.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(p=s.endsWith("Capture"),a=s.slice(2,p?s.length-7:void 0),h=e[qt]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(a,h,p),typeof c=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,c,p);break e}s in e?e[s]=c:c===!0?e.setAttribute(s,""):$r(e,s,c)}}}function Gt(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var c=!1,p=!1,h;for(h in s)if(s.hasOwnProperty(h)){var C=s[h];if(C!=null)switch(h){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:at(e,a,h,C,s,null)}}p&&at(e,a,"srcSet",s.srcSet,s,null),c&&at(e,a,"src",s.src,s,null);return;case"input":ze("invalid",e);var L=h=C=p=null,K=null,ne=null;for(c in s)if(s.hasOwnProperty(c)){var ce=s[c];if(ce!=null)switch(c){case"name":p=ce;break;case"type":C=ce;break;case"checked":K=ce;break;case"defaultChecked":ne=ce;break;case"value":h=ce;break;case"defaultValue":L=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,a));break;default:at(e,a,c,ce,s,null)}}Ai(e,h,L,K,ne,C,p,!1);return;case"select":ze("invalid",e),c=C=h=null;for(p in s)if(s.hasOwnProperty(p)&&(L=s[p],L!=null))switch(p){case"value":h=L;break;case"defaultValue":C=L;break;case"multiple":c=L;default:at(e,a,p,L,s,null)}a=h,s=C,e.multiple=!!c,a!=null?an(e,!!c,a,!1):s!=null&&an(e,!!c,s,!0);return;case"textarea":ze("invalid",e),h=p=c=null;for(C in s)if(s.hasOwnProperty(C)&&(L=s[C],L!=null))switch(C){case"value":c=L;break;case"defaultValue":p=L;break;case"children":h=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:at(e,a,C,L,s,null)}df(e,c,p,h);return;case"option":for(K in s)s.hasOwnProperty(K)&&(c=s[K],c!=null)&&(K==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":at(e,a,K,c,s,null));return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(c=0;c<Ls.length;c++)ze(Ls[c],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in s)if(s.hasOwnProperty(ne)&&(c=s[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:at(e,a,ne,c,s,null)}return;default:if(Uc(a)){for(ce in s)s.hasOwnProperty(ce)&&(c=s[ce],c!==void 0&&Nd(e,a,ce,c,s,void 0));return}}for(L in s)s.hasOwnProperty(L)&&(c=s[L],c!=null&&at(e,a,L,c,s,null))}function cw(e,a,s,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,h=null,C=null,L=null,K=null,ne=null,ce=null;for(oe in s){var me=s[oe];if(s.hasOwnProperty(oe)&&me!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":K=me;default:c.hasOwnProperty(oe)||at(e,a,oe,null,c,me)}}for(var re in c){var oe=c[re];if(me=s[re],c.hasOwnProperty(re)&&(oe!=null||me!=null))switch(re){case"type":h=oe;break;case"name":p=oe;break;case"checked":ne=oe;break;case"defaultChecked":ce=oe;break;case"value":C=oe;break;case"defaultValue":L=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:oe!==me&&at(e,a,re,oe,c,me)}}fr(e,C,L,K,ne,ce,h,p);return;case"select":oe=C=L=re=null;for(h in s)if(K=s[h],s.hasOwnProperty(h)&&K!=null)switch(h){case"value":break;case"multiple":oe=K;default:c.hasOwnProperty(h)||at(e,a,h,null,c,K)}for(p in c)if(h=c[p],K=s[p],c.hasOwnProperty(p)&&(h!=null||K!=null))switch(p){case"value":re=h;break;case"defaultValue":L=h;break;case"multiple":C=h;default:h!==K&&at(e,a,p,h,c,K)}a=L,s=C,c=oe,re!=null?an(e,!!s,re,!1):!!c!=!!s&&(a!=null?an(e,!!s,a,!0):an(e,!!s,s?[]:"",!1));return;case"textarea":oe=re=null;for(L in s)if(p=s[L],s.hasOwnProperty(L)&&p!=null&&!c.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:at(e,a,L,null,c,p)}for(C in c)if(p=c[C],h=s[C],c.hasOwnProperty(C)&&(p!=null||h!=null))switch(C){case"value":re=p;break;case"defaultValue":oe=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==h&&at(e,a,C,p,c,h)}uf(e,re,oe);return;case"option":for(var ve in s)re=s[ve],s.hasOwnProperty(ve)&&re!=null&&!c.hasOwnProperty(ve)&&(ve==="selected"?e.selected=!1:at(e,a,ve,null,c,re));for(K in c)re=c[K],oe=s[K],c.hasOwnProperty(K)&&re!==oe&&(re!=null||oe!=null)&&(K==="selected"?e.selected=re&&typeof re!="function"&&typeof re!="symbol":at(e,a,K,re,c,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in s)re=s[_e],s.hasOwnProperty(_e)&&re!=null&&!c.hasOwnProperty(_e)&&at(e,a,_e,null,c,re);for(ne in c)if(re=c[ne],oe=s[ne],c.hasOwnProperty(ne)&&re!==oe&&(re!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,a));break;default:at(e,a,ne,re,c,oe)}return;default:if(Uc(a)){for(var nt in s)re=s[nt],s.hasOwnProperty(nt)&&re!==void 0&&!c.hasOwnProperty(nt)&&Nd(e,a,nt,void 0,c,re);for(ce in c)re=c[ce],oe=s[ce],!c.hasOwnProperty(ce)||re===oe||re===void 0&&oe===void 0||Nd(e,a,ce,re,c,oe);return}}for(var te in s)re=s[te],s.hasOwnProperty(te)&&re!=null&&!c.hasOwnProperty(te)&&at(e,a,te,null,c,re);for(me in c)re=c[me],oe=s[me],!c.hasOwnProperty(me)||re===oe||re==null&&oe==null||at(e,a,me,re,c,oe)}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),c=0;c<s.length;c++){var p=s[c],h=p.transferSize,C=p.initiatorType,L=p.duration;if(h&&L&&ph(C)){for(C=0,L=p.responseEnd,c+=1;c<s.length;c++){var K=s[c],ne=K.startTime;if(ne>L)break;var ce=K.transferSize,me=K.initiatorType;ce&&ph(me)&&(K=K.responseEnd,C+=ce*(K<L?1:(L-ne)/(K-ne)))}if(--c,a+=8*(h+C)/(p.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ed=null,Td=null;function El(e){return e.nodeType===9?e:e.ownerDocument}function hh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gh(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Md(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _d=null;function dw(){var e=window.event;return e&&e.type==="popstate"?e===_d?!1:(_d=e,!0):(_d=null,!1)}var xh=typeof setTimeout=="function"?setTimeout:void 0,fw=typeof clearTimeout=="function"?clearTimeout:void 0,yh=typeof Promise=="function"?Promise:void 0,mw=typeof queueMicrotask=="function"?queueMicrotask:typeof yh<"u"?function(e){return yh.resolve(null).then(e).catch(pw)}:xh;function pw(e){setTimeout(function(){throw e})}function Qn(e){return e==="head"}function bh(e,a){var s=a,c=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"||s==="/&"){if(c===0){e.removeChild(p),To(a);return}c--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")c++;else if(s==="html")Os(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Os(s);for(var h=s.firstChild;h;){var C=h.nextSibling,L=h.nodeName;h[ur]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=C}}else s==="body"&&Os(e.ownerDocument.body);s=p}while(s);To(a)}function wh(e,a){var s=e;e=0;do{var c=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=c}while(s)}function Ad(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Ad(s),Zo(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function hw(e,a,s,c){for(;e.nodeType===1;){var p=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ur])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var h=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Na(e.nextSibling),e===null)break}return null}function gw(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Na(e.nextSibling),e===null))return null;return e}function kh(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Na(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xw(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var c=function(){a(),s.removeEventListener("DOMContentLoaded",c)};s.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Na(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var Ld=null;function vh(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return Na(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function Ch(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function Sh(e,a,s){switch(a=El(s),e){case"html":if(e=a.documentElement,!e)throw Error(i(452));return e;case"head":if(e=a.head,!e)throw Error(i(453));return e;case"body":if(e=a.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Os(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Zo(e)}var Ea=new Map,Nh=new Set;function Tl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var wn=_.d;_.d={f:yw,r:bw,D:ww,C:kw,L:vw,m:Cw,X:Nw,S:Sw,M:Ew};function yw(){var e=wn.f(),a=yl();return e||a}function bw(e){var a=_n(e);a!==null&&a.tag===5&&a.type==="form"?Gm(a):wn.r(e)}var So=typeof document>"u"?null:document;function Eh(e,a,s){var c=So;if(c&&typeof a=="string"&&a){var p=Xt(a);p='link[rel="'+e+'"][href="'+p+'"]',typeof s=="string"&&(p+='[crossorigin="'+s+'"]'),Nh.has(p)||(Nh.add(p),e={rel:e,crossOrigin:s,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),Gt(a,"link",e),Nt(a),c.head.appendChild(a)))}}function ww(e){wn.D(e),Eh("dns-prefetch",e,null)}function kw(e,a){wn.C(e,a),Eh("preconnect",e,a)}function vw(e,a,s){wn.L(e,a,s);var c=So;if(c&&e&&a){var p='link[rel="preload"][as="'+Xt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(p+='[imagesrcset="'+Xt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(p+='[imagesizes="'+Xt(s.imageSizes)+'"]')):p+='[href="'+Xt(e)+'"]';var h=p;switch(a){case"style":h=No(e);break;case"script":h=Eo(e)}Ea.has(h)||(e=b({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),Ea.set(h,e),c.querySelector(p)!==null||a==="style"&&c.querySelector(Ps(h))||a==="script"&&c.querySelector(Is(h))||(a=c.createElement("link"),Gt(a,"link",e),Nt(a),c.head.appendChild(a)))}}function Cw(e,a){wn.m(e,a);var s=So;if(s&&e){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Xt(c)+'"][href="'+Xt(e)+'"]',h=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Eo(e)}if(!Ea.has(h)&&(e=b({rel:"modulepreload",href:e},a),Ea.set(h,e),s.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Is(h)))return}c=s.createElement("link"),Gt(c,"link",e),Nt(c),s.head.appendChild(c)}}}function Sw(e,a,s){wn.S(e,a,s);var c=So;if(c&&e){var p=jn(c).hoistableStyles,h=No(e);a=a||"default";var C=p.get(h);if(!C){var L={loading:0,preload:null};if(C=c.querySelector(Ps(h)))L.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":a},s),(s=Ea.get(h))&&Dd(e,s);var K=C=c.createElement("link");Nt(K),Gt(K,"link",e),K._p=new Promise(function(ne,ce){K.onload=ne,K.onerror=ce}),K.addEventListener("load",function(){L.loading|=1}),K.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Ml(C,a,c)}C={type:"stylesheet",instance:C,count:1,state:L},p.set(h,C)}}}function Nw(e,a){wn.X(e,a);var s=So;if(s&&e){var c=jn(s).hoistableScripts,p=Eo(e),h=c.get(p);h||(h=s.querySelector(Is(p)),h||(e=b({src:e,async:!0},a),(a=Ea.get(p))&&Od(e,a),h=s.createElement("script"),Nt(h),Gt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},c.set(p,h))}}function Ew(e,a){wn.M(e,a);var s=So;if(s&&e){var c=jn(s).hoistableScripts,p=Eo(e),h=c.get(p);h||(h=s.querySelector(Is(p)),h||(e=b({src:e,async:!0,type:"module"},a),(a=Ea.get(p))&&Od(e,a),h=s.createElement("script"),Nt(h),Gt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},c.set(p,h))}}function Th(e,a,s,c){var p=(p=se.current)?Tl(p):null;if(!p)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=No(s.href),s=jn(p).hoistableStyles,c=s.get(a),c||(c={type:"style",instance:null,count:0,state:null},s.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=No(s.href);var h=jn(p).hoistableStyles,C=h.get(e);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,C),(h=p.querySelector(Ps(e)))&&!h._p&&(C.instance=h,C.state.loading=5),Ea.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Ea.set(e,s),h||Tw(p,e,s,C.state))),a&&c===null)throw Error(i(528,""));return C}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Eo(s),s=jn(p).hoistableScripts,c=s.get(a),c||(c={type:"script",instance:null,count:0,state:null},s.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function No(e){return'href="'+Xt(e)+'"'}function Ps(e){return'link[rel="stylesheet"]['+e+"]"}function Mh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Tw(e,a,s,c){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=e.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Gt(a,"link",s),Nt(a),e.head.appendChild(a))}function Eo(e){return'[src="'+Xt(e)+'"]'}function Is(e){return"script[async]"+e}function _h(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var c=e.querySelector('style[data-href~="'+Xt(s.href)+'"]');if(c)return a.instance=c,Nt(c),c;var p=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Nt(c),Gt(c,"style",p),Ml(c,s.precedence,e),a.instance=c;case"stylesheet":p=No(s.href);var h=e.querySelector(Ps(p));if(h)return a.state.loading|=4,a.instance=h,Nt(h),h;c=Mh(s),(p=Ea.get(p))&&Dd(c,p),h=(e.ownerDocument||e).createElement("link"),Nt(h);var C=h;return C._p=new Promise(function(L,K){C.onload=L,C.onerror=K}),Gt(h,"link",c),a.state.loading|=4,Ml(h,s.precedence,e),a.instance=h;case"script":return h=Eo(s.src),(p=e.querySelector(Is(h)))?(a.instance=p,Nt(p),p):(c=s,(p=Ea.get(h))&&(c=b({},s),Od(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),Nt(p),Gt(p,"link",c),e.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Ml(c,s.precedence,e));return a.instance}function Ml(e,a,s){for(var c=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,h=p,C=0;C<c.length;C++){var L=c[C];if(L.dataset.precedence===a)h=L;else if(h!==p)break}h?h.parentNode.insertBefore(e,h.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function Dd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function Od(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var _l=null;function Ah(e,a,s){if(_l===null){var c=new Map,p=_l=new Map;p.set(s,c)}else p=_l,c=p.get(s),c||(c=new Map,p.set(s,c));if(c.has(e))return c;for(c.set(e,null),s=s.getElementsByTagName(e),p=0;p<s.length;p++){var h=s[p];if(!(h[ur]||h[Ot]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var C=h.getAttribute(a)||"";C=e+C;var L=c.get(C);L?L.push(h):c.set(C,[h])}}return c}function jh(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function Mw(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(e=a.disabled,typeof a.precedence=="string"&&e==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Rh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _w(e,a,s,c){if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=No(c.href),h=a.querySelector(Ps(p));if(h){a=h._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=Al.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=h,Nt(h);return}h=a.ownerDocument||a,c=Mh(c),(p=Ea.get(p))&&Dd(c,p),h=h.createElement("link"),Nt(h);var C=h;C._p=new Promise(function(L,K){C.onload=L,C.onerror=K}),Gt(h,"link",c),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Al.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var Pd=0;function Aw(e,a){return e.stylesheets&&e.count===0&&Rl(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var c=setTimeout(function(){if(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+a);0<e.imgBytes&&Pd===0&&(Pd=62500*uw());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Pd?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Al(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jl=null;function Rl(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jl=new Map,a.forEach(jw,e),jl=null,Al.call(e))}function jw(e,a){if(!(a.state.loading&4)){var s=jl.get(e);if(s)var c=s.get(null);else{s=new Map,jl.set(e,s);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<p.length;h++){var C=p[h];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(s.set(C.dataset.precedence,C),c=C)}c&&s.set(null,c)}p=a.instance,C=p.getAttribute("data-precedence"),h=s.get(C)||c,h===c&&s.set(null,p),s.set(C,p),this.count++,c=Al.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),h?h.parentNode.insertBefore(p,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),a.state.loading|=4}}var Hs={$$typeof:N,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Rw(e,a,s,c,p,h,C,L,K){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ko(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.hiddenUpdates=Ko(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=h,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Lh(e,a,s,c,p,h,C,L,K,ne,ce,me){return e=new Rw(e,a,s,C,K,ne,ce,me,L),a=1,h===!0&&(a|=24),h=la(3,null,null,a),e.current=h,h.stateNode=e,a=hu(),a.refCount++,e.pooledCache=a,a.refCount++,h.memoizedState={element:c,isDehydrated:s,cache:a},bu(h),e}function Dh(e){return e?(e=ao,e):ao}function Oh(e,a,s,c,p,h){p=Dh(p),c.context===null?c.context=p:c.pendingContext=p,c=Un(a),c.payload={element:s},h=h===void 0?null:h,h!==null&&(c.callback=h),s=Bn(e,c,a),s!==null&&(na(s,e,a),gs(s,e,a))}function Ph(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function Id(e,a){Ph(e,a),(e=e.alternate)&&Ph(e,a)}function Ih(e){if(e.tag===13||e.tag===31){var a=gr(e,67108864);a!==null&&na(a,e,67108864),Id(e,67108864)}}function Hh(e){if(e.tag===13||e.tag===31){var a=ma();a=Qo(a);var s=gr(e,a);s!==null&&na(s,e,a),Id(e,a)}}var Ll=!0;function Lw(e,a,s,c){var p=S.T;S.T=null;var h=_.p;try{_.p=2,Hd(e,a,s,c)}finally{_.p=h,S.T=p}}function Dw(e,a,s,c){var p=S.T;S.T=null;var h=_.p;try{_.p=8,Hd(e,a,s,c)}finally{_.p=h,S.T=p}}function Hd(e,a,s,c){if(Ll){var p=Ud(c);if(p===null)Sd(e,a,c,Dl,s),Bh(e,c);else if(Pw(p,e,a,s,c))c.stopPropagation();else if(Bh(e,c),a&4&&-1<Ow.indexOf(e)){for(;p!==null;){var h=_n(p);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var C=Ja(h.pendingLanes);if(C!==0){var L=h;for(L.pendingLanes|=2,L.entangledLanes|=2;C;){var K=1<<31-lt(C);L.entanglements[1]|=K,C&=~K}qa(h),(Qe&6)===0&&(gl=Ee()+500,Rs(0))}}break;case 31:case 13:L=gr(h,2),L!==null&&na(L,h,2),yl(),Id(h,2)}if(h=Ud(c),h===null&&Sd(e,a,c,Dl,s),h===p)break;p=h}p!==null&&c.stopPropagation()}else Sd(e,a,c,null,s)}}function Ud(e){return e=zc(e),Bd(e)}var Dl=null;function Bd(e){if(Dl=null,e=Mn(e),e!==null){var a=d(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=m(a),e!==null)return e;e=null}else if(s===31){if(e=f(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Dl=e,null}function Uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case Ye:return 2;case Te:return 8;case je:case He:return 32;case ct:return 268435456;default:return 32}default:return 32}}var zd=!1,Xn=null,Zn=null,Jn=null,Us=new Map,Bs=new Map,er=[],Ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bh(e,a){switch(e){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Us.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bs.delete(a.pointerId)}}function zs(e,a,s,c,p,h){return e===null||e.nativeEvent!==h?(e={blockedOn:a,domEventName:s,eventSystemFlags:c,nativeEvent:h,targetContainers:[p]},a!==null&&(a=_n(a),a!==null&&Ih(a)),e):(e.eventSystemFlags|=c,a=e.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),e)}function Pw(e,a,s,c,p){switch(a){case"focusin":return Xn=zs(Xn,e,a,s,c,p),!0;case"dragenter":return Zn=zs(Zn,e,a,s,c,p),!0;case"mouseover":return Jn=zs(Jn,e,a,s,c,p),!0;case"pointerover":var h=p.pointerId;return Us.set(h,zs(Us.get(h)||null,e,a,s,c,p)),!0;case"gotpointercapture":return h=p.pointerId,Bs.set(h,zs(Bs.get(h)||null,e,a,s,c,p)),!0}return!1}function zh(e){var a=Mn(e.target);if(a!==null){var s=d(a);if(s!==null){if(a=s.tag,a===13){if(a=m(s),a!==null){e.blockedOn=a,vi(e.priority,function(){Hh(s)});return}}else if(a===31){if(a=f(s),a!==null){e.blockedOn=a,vi(e.priority,function(){Hh(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ol(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Ud(e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);Bc=c,s.target.dispatchEvent(c),Bc=null}else return a=_n(s),a!==null&&Ih(a),e.blockedOn=s,!1;a.shift()}return!0}function Gh(e,a,s){Ol(e)&&s.delete(a)}function Iw(){zd=!1,Xn!==null&&Ol(Xn)&&(Xn=null),Zn!==null&&Ol(Zn)&&(Zn=null),Jn!==null&&Ol(Jn)&&(Jn=null),Us.forEach(Gh),Bs.forEach(Gh)}function Pl(e,a){e.blockedOn===a&&(e.blockedOn=null,zd||(zd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Iw)))}var Il=null;function Vh(e){Il!==e&&(Il=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Il===e&&(Il=null);for(var a=0;a<e.length;a+=3){var s=e[a],c=e[a+1],p=e[a+2];if(typeof c!="function"){if(Bd(c||s)===null)continue;break}var h=_n(s);h!==null&&(e.splice(a,3),a-=3,Uu(h,{pending:!0,data:p,method:s.method,action:c},c,p))}}))}function To(e){function a(K){return Pl(K,e)}Xn!==null&&Pl(Xn,e),Zn!==null&&Pl(Zn,e),Jn!==null&&Pl(Jn,e),Us.forEach(a),Bs.forEach(a);for(var s=0;s<er.length;s++){var c=er[s];c.blockedOn===e&&(c.blockedOn=null)}for(;0<er.length&&(s=er[0],s.blockedOn===null);)zh(s),s.blockedOn===null&&er.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(c=0;c<s.length;c+=3){var p=s[c],h=s[c+1],C=p[qt]||null;if(typeof h=="function")C||Vh(s);else if(C){var L=null;if(h&&h.hasAttribute("formAction")){if(p=h,C=h[qt]||null)L=C.formAction;else if(Bd(p)!==null)continue}else L=C.action;typeof L=="function"?s[c+1]=L:(s.splice(c,3),c-=3),Vh(s)}}}function Fh(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(C){return p=C})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(s,20)}function s(){if(!c&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Gd(e){this._internalRoot=e}Hl.prototype.render=Gd.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(i(409));var s=a.current,c=ma();Oh(s,c,e,a,null,null)},Hl.prototype.unmount=Gd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Oh(e.current,2,null,e,null,null),yl(),a[en]=null}};function Hl(e){this._internalRoot=e}Hl.prototype.unstable_scheduleHydration=function(e){if(e){var a=ki();e={blockedOn:null,target:e,priority:a};for(var s=0;s<er.length&&a!==0&&a<er[s].priority;s++);er.splice(s,0,e),s===0&&zh(e)}};var qh=r.version;if(qh!=="19.2.4")throw Error(i(527,qh,"19.2.4"));_.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=x(a),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Hw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{St=Ul.inject(Hw),bt=Ul}catch{}}return Vs.createRoot=function(e,a){if(!u(e))throw Error(i(299));var s=!1,c="",p=Zm,h=Jm,C=ep;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=Lh(e,1,!1,null,null,s,c,null,p,h,C,Fh),e[en]=a.current,Cd(e),new Gd(a)},Vs.hydrateRoot=function(e,a,s){if(!u(e))throw Error(i(299));var c=!1,p="",h=Zm,C=Jm,L=ep,K=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(C=s.onCaughtError),s.onRecoverableError!==void 0&&(L=s.onRecoverableError),s.formState!==void 0&&(K=s.formState)),a=Lh(e,1,!0,a,s??null,c,p,K,h,C,L,Fh),a.context=Dh(null),s=a.current,c=ma(),c=Qo(c),p=Un(c),p.callback=null,Bn(s,p,c),s=c,a.current.lanes=s,cr(a,s),qa(a),e[en]=a.current,Cd(e),new Hl(a)},Vs.version="19.2.4",Vs}var tg;function Yw(){if(tg)return Fd.exports;tg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Fd.exports=$w(),Fd.exports}var Ww=Yw();const Kw="modulepreload",Qw=function(t){return"/rejected_draft/"+t},ag={},ng=function(r,n,i){let u=Promise.resolve();if(n&&n.length>0){let x=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var m=x;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");u=x(n.map(y=>{if(y=Qw(y),y in ag)return;ag[y]=!0;const b=y.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const v=document.createElement("link");if(v.rel=b?"stylesheet":Kw,b||(v.as="script"),v.crossOrigin="",v.href=y,g&&v.setAttribute("nonce",g),document.head.appendChild(v),b)return new Promise((k,M)=>{v.addEventListener("load",k),v.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${y}`)))})}))}function d(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return u.then(f=>{for(const g of f||[])g.status==="rejected"&&d(g.reason);return r().catch(d)})};var B=ii();const ga=H0(B);var Kd,rg;function Xw(){return rg||(rg=1,Kd=function(t,r,n){if(t==null||r==null)return t;var i=String(t),u=typeof r=="number"?r:parseInt(r,10);if(isNaN(u)||!isFinite(u))return i;var d=i.length;if(d>=u)return i;var m=n==null?"":String(n);m===""&&(m=" ");for(var f=u-d;m.length<f;)m+=m;var g=m.length>f?m.substr(0,f):m;return i+g}),Kd}var Zw=Xw();const Qd=H0(Zw);var $a=9e15,Bl=(function(){for(var t=[],r=-323;r<=308;r++)t.push(+("1e"+r));return function(n){return t[n+323]}})(),he=function(t){return t instanceof o?t:new o(t)},ra=function(t,r){return new o().fromMantissaExponent(t,r)},Ar=function(t,r){return new o().fromMantissaExponent_noNormalize(t,r)};function Jw(t,r,n,i){var u=r.mul(n.pow(i));return o.floor(t.div(u).mul(n.sub(1)).add(1).log10()/n.log10())}function ek(t,r,n,i){return r.mul(n.pow(i)).mul(o.sub(1,n.pow(t))).div(o.sub(1,n))}var o=(function(){function t(r){this.mantissa=NaN,this.exponent=NaN,r===void 0?(this.m=0,this.e=0):r instanceof t?this.fromDecimal(r):typeof r=="number"?this.fromNumber(r):this.fromString(r)}return Object.defineProperty(t.prototype,"m",{get:function(){return this.mantissa},set:function(r){this.mantissa=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"e",{get:function(){return this.exponent},set:function(r){this.exponent=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s",{get:function(){return this.sign()},set:function(r){if(r===0)return this.e=0,void(this.m=0);this.sgn()!==r&&(this.m=-this.m)},enumerable:!1,configurable:!0}),t.fromMantissaExponent=function(r,n){return new t().fromMantissaExponent(r,n)},t.fromMantissaExponent_noNormalize=function(r,n){return new t().fromMantissaExponent_noNormalize(r,n)},t.fromDecimal=function(r){return new t().fromDecimal(r)},t.fromNumber=function(r){return new t().fromNumber(r)},t.fromString=function(r){return new t().fromString(r)},t.fromValue=function(r){return new t().fromValue(r)},t.fromValue_noAlloc=function(r){return r instanceof t?r:new t(r)},t.abs=function(r){return he(r).abs()},t.neg=function(r){return he(r).neg()},t.negate=function(r){return he(r).neg()},t.negated=function(r){return he(r).neg()},t.sign=function(r){return he(r).sign()},t.sgn=function(r){return he(r).sign()},t.round=function(r){return he(r).round()},t.floor=function(r){return he(r).floor()},t.ceil=function(r){return he(r).ceil()},t.trunc=function(r){return he(r).trunc()},t.add=function(r,n){return he(r).add(n)},t.plus=function(r,n){return he(r).add(n)},t.sub=function(r,n){return he(r).sub(n)},t.subtract=function(r,n){return he(r).sub(n)},t.minus=function(r,n){return he(r).sub(n)},t.mul=function(r,n){return he(r).mul(n)},t.multiply=function(r,n){return he(r).mul(n)},t.times=function(r,n){return he(r).mul(n)},t.div=function(r,n){return he(r).div(n)},t.divide=function(r,n){return he(r).div(n)},t.recip=function(r){return he(r).recip()},t.reciprocal=function(r){return he(r).recip()},t.reciprocate=function(r){return he(r).reciprocate()},t.cmp=function(r,n){return he(r).cmp(n)},t.compare=function(r,n){return he(r).cmp(n)},t.eq=function(r,n){return he(r).eq(n)},t.equals=function(r,n){return he(r).eq(n)},t.neq=function(r,n){return he(r).neq(n)},t.notEquals=function(r,n){return he(r).notEquals(n)},t.lt=function(r,n){return he(r).lt(n)},t.lte=function(r,n){return he(r).lte(n)},t.gt=function(r,n){return he(r).gt(n)},t.gte=function(r,n){return he(r).gte(n)},t.max=function(r,n){return he(r).max(n)},t.min=function(r,n){return he(r).min(n)},t.clamp=function(r,n,i){return he(r).clamp(n,i)},t.clampMin=function(r,n){return he(r).clampMin(n)},t.clampMax=function(r,n){return he(r).clampMax(n)},t.cmp_tolerance=function(r,n,i){return he(r).cmp_tolerance(n,i)},t.compare_tolerance=function(r,n,i){return he(r).cmp_tolerance(n,i)},t.eq_tolerance=function(r,n,i){return he(r).eq_tolerance(n,i)},t.equals_tolerance=function(r,n,i){return he(r).eq_tolerance(n,i)},t.neq_tolerance=function(r,n,i){return he(r).neq_tolerance(n,i)},t.notEquals_tolerance=function(r,n,i){return he(r).notEquals_tolerance(n,i)},t.lt_tolerance=function(r,n,i){return he(r).lt_tolerance(n,i)},t.lte_tolerance=function(r,n,i){return he(r).lte_tolerance(n,i)},t.gt_tolerance=function(r,n,i){return he(r).gt_tolerance(n,i)},t.gte_tolerance=function(r,n,i){return he(r).gte_tolerance(n,i)},t.log10=function(r){return he(r).log10()},t.absLog10=function(r){return he(r).absLog10()},t.pLog10=function(r){return he(r).pLog10()},t.log=function(r,n){return he(r).log(n)},t.log2=function(r){return he(r).log2()},t.ln=function(r){return he(r).ln()},t.logarithm=function(r,n){return he(r).logarithm(n)},t.pow10=function(r){return Number.isInteger(r)?Ar(1,r):ra(Math.pow(10,r%1),Math.trunc(r))},t.pow=function(r,n){return typeof r=="number"&&r===10&&typeof n=="number"&&Number.isInteger(n)?Ar(1,n):he(r).pow(n)},t.exp=function(r){return he(r).exp()},t.sqr=function(r){return he(r).sqr()},t.sqrt=function(r){return he(r).sqrt()},t.cube=function(r){return he(r).cube()},t.cbrt=function(r){return he(r).cbrt()},t.dp=function(r){return he(r).dp()},t.decimalPlaces=function(r){return he(r).dp()},t.affordGeometricSeries=function(r,n,i,u){return Jw(he(r),he(n),he(i),u)},t.sumGeometricSeries=function(r,n,i,u){return ek(r,he(n),he(i),u)},t.affordArithmeticSeries=function(r,n,i,u){return(function(d,m,f,g){var x=m.add(g.mul(f)).sub(f.div(2)),y=x.pow(2);return x.neg().add(y.add(f.mul(d).mul(2)).sqrt()).div(f).floor()})(he(r),he(n),he(i),he(u))},t.sumArithmeticSeries=function(r,n,i,u){return(function(d,m,f,g){var x=m.add(g.mul(f));return d.div(2).mul(x.mul(2).plus(d.sub(1).mul(f)))})(he(r),he(n),he(i),he(u))},t.efficiencyOfPurchase=function(r,n,i){return(function(u,d,m){return u.div(d).add(u.div(m))})(he(r),he(n),he(i))},t.randomDecimalForTesting=function(r){if(20*Math.random()<1)return Ar(0,0);var n=10*Math.random();10*Math.random()<1&&(n=Math.round(n)),n*=Math.sign(2*Math.random()-1);var i=Math.floor(Math.random()*r*2)-r;return ra(n,i)},t.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var r=Math.floor(Math.log10(Math.abs(this.m)));return this.m=r===-324?10*this.m/1e-323:this.m/Bl(r),this.e+=r,this},t.prototype.fromMantissaExponent=function(r,n){return isFinite(r)&&isFinite(n)?(this.m=r,this.e=n,this.normalize(),this):(r=Number.NaN,n=Number.NaN,this)},t.prototype.fromMantissaExponent_noNormalize=function(r,n){return this.m=r,this.e=n,this},t.prototype.fromDecimal=function(r){return this.m=r.m,this.e=r.e,this},t.prototype.fromNumber=function(r){return isNaN(r)?(this.m=Number.NaN,this.e=Number.NaN):r===Number.POSITIVE_INFINITY?(this.m=1,this.e=$a):r===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=$a):r===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(r))),this.m=this.e===-324?10*r/1e-323:r/Bl(this.e),this.normalize()),this},t.prototype.fromString=function(r){if(r.indexOf("e")!==-1){var n=r.split("e");this.m=parseFloat(n[0]),this.e=parseFloat(n[1]),this.normalize()}else if(r==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(r)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+r);return this},t.prototype.fromValue=function(r){return r instanceof t?this.fromDecimal(r):typeof r=="number"?this.fromNumber(r):typeof r=="string"?this.fromString(r):(this.m=0,this.e=0,this)},t.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var r=this.m*Bl(this.e);if(!isFinite(r)||this.e<0)return r;var n=Math.round(r);return Math.abs(n-r)<1e-10?n:r},t.prototype.mantissaWithDecimalPlaces=function(r){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var n=r+1,i=Math.ceil(Math.log10(Math.abs(this.m))),u=Math.round(this.m*Math.pow(10,n-i))*Math.pow(10,i-n);return parseFloat(u.toFixed(Math.max(n-i,0)))},t.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=$a?this.m>0?"Infinity":"-Infinity":this.e<=-$a||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toExponential=function(r){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=$a)return this.m>0?"Infinity":"-Infinity";if(this.e<=-$a||this.m===0)return"0"+(r>0?Qd(".",r+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(r);isFinite(r)||(r=17);var n=r+1,i=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,n-i))*Math.pow(10,i-n)).toFixed(Math.max(n-i,0))+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toFixed=function(r){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=$a?this.m>0?"Infinity":"-Infinity":this.e<=-$a||this.m===0?"0"+(r>0?Qd(".",r+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(r>0?Qd(".",r+1,"0"):""):this.toNumber().toFixed(r)},t.prototype.toPrecision=function(r){return this.e<=-7?this.toExponential(r-1):r>this.e?this.toFixed(r-this.e-1):this.toExponential(r-1)},t.prototype.valueOf=function(){return this.toString()},t.prototype.toJSON=function(){return this.toString()},t.prototype.toStringWithDecimalPlaces=function(r){return this.toExponential(r)},t.prototype.abs=function(){return Ar(Math.abs(this.m),this.e)},t.prototype.neg=function(){return Ar(-this.m,this.e)},t.prototype.negate=function(){return this.neg()},t.prototype.negated=function(){return this.neg()},t.prototype.sign=function(){return Math.sign(this.m)},t.prototype.sgn=function(){return this.sign()},t.prototype.round=function(){return this.e<-1?new t(0):this.e<17?new t(Math.round(this.toNumber())):this},t.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new t(0):new t(-1):this.e<17?new t(Math.floor(this.toNumber())):this},t.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new t(1):new t(0):this.e<17?new t(Math.ceil(this.toNumber())):this},t.prototype.trunc=function(){return this.e<0?new t(0):this.e<17?new t(Math.trunc(this.toNumber())):this},t.prototype.add=function(r){var n,i,u=he(r);if(this.m===0)return u;if(u.m===0)return this;if(this.e>=u.e?(n=this,i=u):(n=u,i=this),n.e-i.e>17)return n;var d=Math.round(1e14*n.m+1e14*i.m*Bl(i.e-n.e));return ra(d,n.e-14)},t.prototype.plus=function(r){return this.add(r)},t.prototype.sub=function(r){return this.add(he(r).neg())},t.prototype.subtract=function(r){return this.sub(r)},t.prototype.minus=function(r){return this.sub(r)},t.prototype.mul=function(r){if(typeof r=="number")return r<1e307&&r>-1e307?ra(this.m*r,this.e):ra(1e-307*this.m*r,this.e+307);var n=typeof r=="string"?new t(r):r;return ra(this.m*n.m,this.e+n.e)},t.prototype.multiply=function(r){return this.mul(r)},t.prototype.times=function(r){return this.mul(r)},t.prototype.div=function(r){return this.mul(he(r).recip())},t.prototype.divide=function(r){return this.div(r)},t.prototype.divideBy=function(r){return this.div(r)},t.prototype.dividedBy=function(r){return this.div(r)},t.prototype.recip=function(){return ra(1/this.m,-this.e)},t.prototype.reciprocal=function(){return this.recip()},t.prototype.reciprocate=function(){return this.recip()},t.prototype.cmp=function(r){var n=he(r);if(this.m===0){if(n.m===0)return 0;if(n.m<0)return 1;if(n.m>0)return-1}if(n.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return n.m<0||this.e>n.e?1:this.e<n.e?-1:this.m>n.m?1:this.m<n.m?-1:0;if(this.m<0)return n.m>0||this.e>n.e?-1:this.e<n.e||this.m>n.m?1:this.m<n.m?-1:0;throw Error("Unreachable code")},t.prototype.compare=function(r){return this.cmp(r)},t.prototype.eq=function(r){var n=he(r);return this.e===n.e&&this.m===n.m},t.prototype.equals=function(r){return this.eq(r)},t.prototype.neq=function(r){return!this.eq(r)},t.prototype.notEquals=function(r){return this.neq(r)},t.prototype.lt=function(r){var n=he(r);return this.m===0?n.m>0:n.m===0?this.m<=0:this.e===n.e?this.m<n.m:this.m>0?n.m>0&&this.e<n.e:n.m>0||this.e>n.e},t.prototype.lte=function(r){return!this.gt(r)},t.prototype.gt=function(r){var n=he(r);return this.m===0?n.m<0:n.m===0?this.m>0:this.e===n.e?this.m>n.m:this.m>0?n.m<0||this.e>n.e:n.m<0&&this.e<n.e},t.prototype.gte=function(r){return!this.lt(r)},t.prototype.max=function(r){var n=he(r);return this.lt(n)?n:this},t.prototype.min=function(r){var n=he(r);return this.gt(n)?n:this},t.prototype.clamp=function(r,n){return this.max(r).min(n)},t.prototype.clampMin=function(r){return this.max(r)},t.prototype.clampMax=function(r){return this.min(r)},t.prototype.cmp_tolerance=function(r,n){var i=he(r);return this.eq_tolerance(i,n)?0:this.cmp(i)},t.prototype.compare_tolerance=function(r,n){return this.cmp_tolerance(r,n)},t.prototype.eq_tolerance=function(r,n){var i=he(r);return t.lte(this.sub(i).abs(),t.max(this.abs(),i.abs()).mul(n))},t.prototype.equals_tolerance=function(r,n){return this.eq_tolerance(r,n)},t.prototype.neq_tolerance=function(r,n){return!this.eq_tolerance(r,n)},t.prototype.notEquals_tolerance=function(r,n){return this.neq_tolerance(r,n)},t.prototype.lt_tolerance=function(r,n){var i=he(r);return!this.eq_tolerance(i,n)&&this.lt(i)},t.prototype.lte_tolerance=function(r,n){var i=he(r);return this.eq_tolerance(i,n)||this.lt(i)},t.prototype.gt_tolerance=function(r,n){var i=he(r);return!this.eq_tolerance(i,n)&&this.gt(i)},t.prototype.gte_tolerance=function(r,n){var i=he(r);return this.eq_tolerance(i,n)||this.gt(i)},t.prototype.log10=function(){return this.e+Math.log10(this.m)},t.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},t.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},t.prototype.log=function(r){return Math.LN10/Math.log(r)*this.log10()},t.prototype.log2=function(){return 3.321928094887362*this.log10()},t.prototype.ln=function(){return 2.302585092994045*this.log10()},t.prototype.logarithm=function(r){return this.log(r)},t.prototype.pow=function(r){var n,i=r instanceof t?r.toNumber():r,u=this.e*i;if(Number.isSafeInteger(u)&&(n=Math.pow(this.m,i),isFinite(n)&&n!==0))return ra(n,u);var d=Math.trunc(u),m=u-d;if(n=Math.pow(10,i*Math.log10(this.m)+m),isFinite(n)&&n!==0)return ra(n,d);var f=t.pow10(i*this.absLog10());return this.sign()===-1?Math.abs(i%2)===1?f.neg():Math.abs(i%2)===0?f:new t(Number.NaN):f},t.prototype.pow_base=function(r){return he(r).pow(this)},t.prototype.factorial=function(){var r=this.toNumber()+1;return t.pow(r/Math.E*Math.sqrt(r*Math.sinh(1/r)+1/(810*Math.pow(r,6))),r).mul(Math.sqrt(2*Math.PI/r))},t.prototype.exp=function(){var r=this.toNumber();return-706<r&&r<709?t.fromNumber(Math.exp(r)):t.pow(Math.E,r)},t.prototype.sqr=function(){return ra(Math.pow(this.m,2),2*this.e)},t.prototype.sqrt=function(){return this.m<0?new t(Number.NaN):this.e%2!=0?ra(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):ra(Math.sqrt(this.m),Math.floor(this.e/2))},t.prototype.cube=function(){return ra(Math.pow(this.m,3),3*this.e)},t.prototype.cbrt=function(){var r=1,n=this.m;n<0&&(r=-1,n=-n);var i=r*Math.pow(n,1/3),u=this.e%3;return ra(u===1||u===-1?2.154434690031883*i:u!==0?4.641588833612778*i:i,Math.floor(this.e/3))},t.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},t.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},t.prototype.tanh=function(){return this.sinh().div(this.cosh())},t.prototype.asinh=function(){return t.ln(this.add(this.sqr().add(1).sqrt()))},t.prototype.acosh=function(){return t.ln(this.add(this.sqr().sub(1).sqrt()))},t.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:t.ln(this.add(1).div(new t(1).sub(this)))/2},t.prototype.ascensionPenalty=function(r){return r===0?this:this.pow(Math.pow(10,-r))},t.prototype.egg=function(){return this.add(9)},t.prototype.lessThanOrEqualTo=function(r){return this.cmp(r)<1},t.prototype.lessThan=function(r){return this.cmp(r)<0},t.prototype.greaterThanOrEqualTo=function(r){return this.cmp(r)>-1},t.prototype.greaterThan=function(r){return this.cmp(r)>0},t.prototype.decimalPlaces=function(){return this.dp()},t.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var r=this.mantissa,n=-this.exponent,i=1;Math.abs(Math.round(r*i)/i-r)>1e-10;)i*=10,n++;return n>0?n:0},Object.defineProperty(t,"MAX_VALUE",{get:function(){return tk},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MIN_VALUE",{get:function(){return ak},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MAX_VALUE",{get:function(){return nk},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MIN_VALUE",{get:function(){return rk},enumerable:!1,configurable:!0}),t})(),tk=Ar(1,$a),ak=Ar(1,-$a),nk=he(Number.MAX_VALUE),rk=he(Number.MIN_VALUE);const og=t=>{let r;const n=new Set,i=(x,y)=>{const b=typeof x=="function"?x(r):x;if(!Object.is(b,r)){const w=r;r=y??(typeof b!="object"||b===null)?b:Object.assign({},r,b),n.forEach(v=>v(r,w))}},u=()=>r,f={setState:i,getState:u,getInitialState:()=>g,subscribe:x=>(n.add(x),()=>n.delete(x))},g=r=t(i,u,f);return f},ok=(t=>t?og(t):og),sk=t=>t;function ik(t,r=sk){const n=ga.useSyncExternalStore(t.subscribe,ga.useCallback(()=>r(t.getState()),[t,r]),ga.useCallback(()=>r(t.getInitialState()),[t,r]));return ga.useDebugValue(n),n}const lk=t=>{const r=ok(t),n=i=>ik(r,i);return Object.assign(n,r),n},ck=(t=>lk);function uk(t,r){let n;try{n=t()}catch{return}return{getItem:u=>{var d;const m=g=>g===null?null:JSON.parse(g,void 0),f=(d=n.getItem(u))!=null?d:null;return f instanceof Promise?f.then(m):m(f)},setItem:(u,d)=>n.setItem(u,JSON.stringify(d,void 0)),removeItem:u=>n.removeItem(u)}}const h0=t=>r=>{try{const n=t(r);return n instanceof Promise?n:{then(i){return h0(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return h0(i)(n)}}}},dk=(t,r)=>(n,i,u)=>{let d={storage:uk(()=>localStorage),partialize:T=>T,version:0,merge:(T,E)=>({...E,...T}),...r},m=!1,f=0;const g=new Set,x=new Set;let y=d.storage;if(!y)return t((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),n(...T)},i,u);const b=()=>{const T=d.partialize({...i()});return y.setItem(d.name,{state:T,version:d.version})},w=u.setState;u.setState=(T,E)=>(w(T,E),b());const v=t((...T)=>(n(...T),b()),i,u);u.getInitialState=()=>v;let k;const M=()=>{var T,E;if(!y)return;const R=++f;m=!1,g.forEach(j=>{var I;return j((I=i())!=null?I:v)});const N=((E=d.onRehydrateStorage)==null?void 0:E.call(d,(T=i())!=null?T:v))||void 0;return h0(y.getItem.bind(y))(d.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==d.version){if(d.migrate){const I=d.migrate(j.state,j.version);return I instanceof Promise?I.then(P=>[!0,P]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var I;if(R!==f)return;const[P,O]=j;if(k=d.merge(O,(I=i())!=null?I:v),n(k,!0),P)return b()}).then(()=>{R===f&&(N?.(k,void 0),k=i(),m=!0,x.forEach(j=>j(k)))}).catch(j=>{R===f&&N?.(void 0,j)})};return u.persist={setOptions:T=>{d={...d,...T},T.storage&&(y=T.storage)},clearStorage:()=>{y?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>M(),hasHydrated:()=>m,onHydrate:T=>(g.add(T),()=>{g.delete(T)}),onFinishHydration:T=>(x.add(T),()=>{x.delete(T)})},d.skipHydration||M(),k||v},fk=dk,Xd=["","K","M","B","T","Qa","Qi","Sx","Sp","Oc"],At=new o(0),ge=(t,r=2)=>{if(t==null)return"0";const n=t instanceof o?t:new o(t);if(Number.isNaN(n.mantissa)||!Number.isFinite(n.mantissa)||!Number.isFinite(n.exponent)||n.eq(0))return"0";const i=n.abs();if(i.lt(1e-4))return n.toExponential(r);if(i.lt(1))return n.toNumber().toLocaleString(void 0,{maximumFractionDigits:4});if(i.lt(1e4))return n.toNumber().toLocaleString(void 0,{maximumFractionDigits:r,useGrouping:!1});if(i.lt(new o(10).pow(Xd.length*3))){const m=i.exponent??i.e,f=Math.floor(m/3)*3,g=f/3;if(g<Xd.length){const x=Xd[g];return n.div(new o(10).pow(f)).toNumber().toFixed(r).replace(/\.0+$/,"").replace(/(\.[0-9]*?)0+$/,"$1")+x}}return n.mantissa.toFixed(Math.max(0,r-1)).replace(/\.0+$/,"").replace(/(\.[0-9]*?)0+$/,"$1")+"e"+n.exponent},sg=t=>{if(t==null)return new o(0);if(t instanceof o)return t;try{if(typeof t=="string"||typeof t=="number")return new o(t);if(typeof t=="object"&&("mantissa"in t||"m"in t)){const r=t.mantissa??t.m,n=t.exponent??t.e;return o.fromMantissaExponent(r,n)}return new o(0)}catch{return new o(0)}},g0=t=>{if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(g0);const r=["HP","ATK","SPD","Regen","Dodge","Lifesteal","CritChance","CritDmg","Armor","MinDamage","MaxDamage","Accuracy","ArmorPen","Execute","Parry","ParryDmg","GlancingBlow","Counter","BleedChance","BurnChance","HinderChance","currentPlayerHp","currentEnemyHp","enemyMaxHp","rewardDiminishingMultiplier","ink","quintessence","pendingQuintessence","glossaryMultiplier","totalQuintessenceGained"],n={};for(const i in t)if(r.includes(i))n[i]=sg(t[i]);else if(i==="currencies"||i==="shopLevels"||i==="skillLevels"||i==="battleStats"||i==="playerStats"||i==="totalEarnedCurrencies"||i==="totalBattleEarnedCurrencies"||i==="concepts"||i==="gains"||i==="conceptGains"){const u={};for(const d in t[i])u[d]=sg(t[i][d]);n[i]=u}else n[i]=g0(t[i]);return n},kn=(t,r,n)=>{if(n<=0||t<=0)return new o(1);const i=1+r/1e4,u=Math.max(1,Math.pow(i,t));return new o(u)},mk=(t,r)=>{switch(t){case"Graphite":return r.graphiteUpgradeCost;case"Wax":return r.waxUpgradeCost;case"Charcoal":return r.charcoalUpgradeCost;case"Coffee":return r.coffeeUpgradeCost;case"Ink":return r.inkUpgradeCost;case"Marker":return r.markerUpgradeCost;case"Acrylic":return r.acrylicUpgradeCost;case"Spray":return r.sprayUpgradeCost;case"Photon":return r.photonUpgradeCost;case"Gold Leaf":return r.goldLeafUpgradeCost;default:return 0}},Da=(t,r,n)=>{const i=mk(r,n);return i>0?t.times(1-i/100):t},U0=t=>{let r=0;for(let m=0;m<t.length;m++)r=(r<<5)-r+t.charCodeAt(m),r=r&r;const n=()=>(r=r*1103515245+12345&2147483647,r/2147483647),i=t.replace(/[^a-zA-Z]/g,"").split("");for(let m=i.length-1;m>0;m--){const f=Math.floor(n()*(m+1));[i[m],i[f]]=[i[f],i[m]]}let u=0,d="";for(let m=0;m<t.length;m++){const f=t[m];if(/[a-zA-Z]/.test(f)){const g=i[u++];d+=f===f.toUpperCase()?g.toUpperCase():g.toLowerCase()}else d+=f}return d},ig=t=>{const r=t instanceof o?t.toNumber():t;if(r<=0||!Number.isFinite(r))return"---";if(r<60)return`${Math.floor(r)}s`;const n=Math.floor(r/60);if(n<60)return`${n}m ${Math.floor(r%60)}s`;const i=Math.floor(n/60);if(i<24)return`${i}h ${n%60}m`;const u=Math.floor(i/24);if(u<365)return`${u}d ${i%24}h`;const d=Math.floor(u/365);return d>=1e3?"":`${d}y ${u%365}d`},Lx=t=>{switch(t){case"text-purple-600":return{bg:"bg-purple-50",bgDark:"dark:bg-purple-900/20",border:"border-purple-500",borderDark:"dark:border-purple-700",text:"text-purple-800",textDark:"dark:text-purple-300",accent:"bg-purple-500",shadow:"shadow-purple-500/20"};case"text-blue-500":return{bg:"bg-blue-50",bgDark:"dark:bg-blue-900/20",border:"border-blue-500",borderDark:"dark:border-blue-700",text:"text-blue-800",textDark:"dark:text-blue-300",accent:"bg-blue-500",shadow:"shadow-blue-500/20"};case"text-teal-500":return{bg:"bg-teal-50",bgDark:"dark:bg-teal-900/20",border:"border-teal-500",borderDark:"dark:border-teal-700",text:"text-teal-800",textDark:"dark:text-teal-300",accent:"bg-teal-500",shadow:"shadow-teal-500/20"};case"text-orange-500":return{bg:"bg-orange-50",bgDark:"dark:bg-orange-900/20",border:"border-orange-500",borderDark:"dark:border-orange-700",text:"text-orange-800",textDark:"dark:text-orange-300",accent:"bg-orange-500",shadow:"shadow-orange-500/20"};default:return{bg:"bg-green-50",bgDark:"dark:bg-green-900/20",border:"border-green-500",borderDark:"dark:border-green-700",text:"text-green-800",textDark:"dark:text-green-300",accent:"bg-green-500",shadow:"shadow-green-500/20"}}},Ue=(t,r,n,i,u)=>{const d=typeof i=="string"?i:ge(i,2),m={id:Math.random().toString(36).substr(2,9),timestamp:Date.now(),type:r,target:n,value:d,isCrit:u};return[...t,m].slice(-50)},pk=(t,r,n,i,u,d,m,f={},g={})=>{let x=d,y=u;const b=g.Inspiration||0,w=new o(1).plus(new o(b).times(.01));y=y.times(w);const k=(t.surrealism||new o(0)).gt(Math.random()*100),M=t.minDamage||new o(75),T=t.maxDamage||new o(125),E=M.div(100),R=T.div(100),N=Math.random(),j=E.plus(R.minus(E).times(N));y=y.times(j);const P=(i.eq(0)?new o(1):n.div(i)).lte(.3),O=t.execute||new o(0);if(P&&O.gt(0)){const Z=O.div(100).plus(1);y=y.times(Z)}let H=!1,q=!1;if((t.critChance||new o(0)).gt(Math.random()*100))if((k?new o(0):r.glancingBlow||new o(0)).gt(Math.random()*100))H=!1,x=Ue(x,"damage",m,"Glancing");else{const ue=(t.critDmg||new o(100)).div(100);if(y=y.times(ue),H=!0,(t.goldenLuckChance||new o(0)).gt(Math.random()*100)){const be=(t.goldenLuckDamage||new o(100)).div(100);y=y.times(be),q=!0}}if((k?new o(0):r.dodge||new o(0)).gt(Math.random()*100)){const Z=t.accuracy||new o(0);if(Math.random()*100>=Z.toNumber())return x=Ue(x,"dodge",m,"Dodge"),{damageEvents:x,newHp:n,isHit:!1,isDead:!1,counterTriggered:!1}}if((k?new o(0):r.parry||new o(0)).gt(Math.random()*100)){const Z=t.accuracy||new o(0);if(Math.random()*100>=Z.toNumber()){x=Ue(x,"dodge",m,"Parried!");const se=r.parryDmg||new o(0);let ue=new o(0);if(se.gt(0)){const ie=se.div(100);ue=y.times(ie)}return{damageEvents:x,newHp:n,isHit:!1,isDead:!1,counterTriggered:!1,reflectedDamage:ue}}}if((k?new o(0):r.blockChance||new o(0)).gt(Math.random()*100)){const Z=r.blockAmount||new o(0);if(Z.gt(0)){const se=o.min(y,Z);y=y.minus(se),x=Ue(x,"damage",m,"Blocked")}}const z=k?new o(0):r.armor||new o(0),V=t.armorPen||new o(0),S=o.max(0,z.minus(V));S.gt(0)&&(y=o.max(0,y.minus(S)));const _=k?new o(0):r.absorb||new o(0);if(_.gt(0)){const Z=o.min(_,100).div(100),se=y.times(Z);y=y.minus(se)}const U=f.Electrocute||0;let W=new o(0);U>0&&(W=y.times(U/100).times(Math.random()),W.gt(0)&&(x=Ue(x,"electrocute",m,W)));const X=f.Frailty||0;if(X>0){const Z=new o(1).plus(new o(X).times(.01));y=y.times(Z)}const D=f.Brittle||0;D>0&&(y=y.plus(D));let $=n.minus(y).minus(W);x=Ue(x,k?"surreal":q?"goldenCrit":"damage",m,y,H),$.lte(0)&&(r.varnish||new o(0)).gt(Math.random()*100)&&($=i.times(.5),x=Ue(x,"varnish",m,"Varnish!"));const A=(k?new o(0):r.counter||new o(0)).gt(Math.random()*100);return{damageEvents:x,newHp:$,isHit:!0,isDead:$.lte(0),counterTriggered:A,isSurreal:k}},zl=(t,r,n,i,u,d,m,f,g,x,y)=>{let b=f,w=u,v=n,k=x,M=y;const T=()=>{k===x&&(k={...x})},E=()=>{M===y&&(M={...y})};let R=!1,N=!1;const j=t.remedy||new o(0);if(j.gt(0)){const Te=["Bleed","Burn","Plague","Poison","Hypnotize","Slow","Frailty","Freeze","Hinder","BlackFlame","BananaPeel","Irradiate"],je=j.toNumber(),He=Math.floor(je/100),ct=je%100,Ct=He+(Math.random()*100<ct?1:0);let Re=!1;for(let St=0;St<Ct;St++){const bt=Object.entries(k).filter(([lt,Ft])=>Te.includes(lt)&&Ft>0).map(([lt,Ft])=>({name:lt,stacks:Ft})),Vt=bt.reduce((lt,Ft)=>lt+Ft.stacks,0);if(Vt>0){let lt=Math.random()*Vt,Ft=bt[0].name;for(const ya of bt)if(lt-=ya.stacks,lt<0){Ft=ya.name;break}T(),k[Ft]--,k[Ft]<=0&&delete k[Ft],Re=!0}else break}Re&&(b=Ue(b,"heal",g==="enemy"?"player":"enemy","Remedy"))}const I=x.Hinder||0;if(I>0){const Te=Math.min(1e3,I)/1e3;if(Math.random()<Te){b=Ue(b,"dodge",g==="enemy"?"player":"enemy","Hindered!"),T();const je=Math.floor(I/2);return je>0?k.Hinder=je:delete k.Hinder,{newDefenderHp:v,newAttackerHp:w,damageEvents:b,counterTriggered:!1,isHit:!1,newAttackerStatuses:k,newDefenderStatuses:M}}}const P=x.BananaPeel||0;if(P>0){const Te=P*.1/100;if(Math.random()<Te)return b=Ue(b,"bananaPeel",g==="enemy"?"player":"enemy","Slip!"),T(),delete k.BananaPeel,k.BananaSlip=1,{newDefenderHp:v,newAttackerHp:w,damageEvents:b,counterTriggered:!1,isHit:!1,newAttackerStatuses:k,newDefenderStatuses:M}}const O=x.Hypnotize||0;let H=r,q=i,G=n,F=g,Y=M,J=!1;if(O>0){const Te=Math.min(1e3,O)/1e3;if(Math.random()<Te){const je=g==="enemy"?"player":"enemy";b=Ue(b,"hypnotize",je,"Hypnotized!"),H=t,q=d,G=u,F=je,Y=k,J=!0,J?(T(),delete k.Hypnotize):(E(),delete M.Hypnotize)}}const z=t.multiStrikeChance||new o(0);let V=1;if(z.gt(0)){const Te=z.toNumber(),je=Te>=100?1:0,He=Math.floor(Te/100),ct=Te%100;let Ct=0;He>0&&(Ct=Math.floor(Math.random()*(He-je+1))+je),Math.random()*100<ct&&(Ct+=1),V+=Ct}const S=t.hasteChance||new o(0),_=H.opacity||new o(0),W=1-(_.gt(0)?o.min(_,100).div(100).toNumber():0),X=t.bleedChance||new o(0),D=t.burnChance||new o(0),$=t.hinderChance||new o(0),ee=t.plagueChance||new o(0),A=t.poisonChance||new o(0),Z=t.hypnotizeChance||new o(0),se=t.slowChance||new o(0),ue=t.frailtyChance||new o(0),ie=t.freezeChance||new o(0),pe=t.electrocuteChance||new o(0),be=t.curseChance||new o(0),we=t.blackFlameChance||new o(0),ye=t.bananaPeelChance||new o(0),ke=t.leapChance||new o(0),Ce=t.energyWaveChance||new o(0),Ae=t.balloonChance||new o(0),Le=t.hotPotatoChance||new o(0),st=t.brittleChance||new o(0),yt=t.thornsChance||new o(0),Rt=t.irradiateChance||new o(0),vt=x.Inspiration||0,Lt=new o(1).plus(new o(vt).times(.01)),Dt=x.HotPotato||0;let de=!1;if(Dt>0){const Te=Math.random();if(Te<.5)T(),k.HotPotato=Dt+1;else if(Te<.6)T(),k.HotPotato=Dt+5;else if(Te<.7)T(),k.HotPotato=Dt*2;else if(Te<.9){T(),delete k.HotPotato,w=o.max(0,w.minus(Dt));const je=g==="enemy"?"player":"enemy";b=Ue(b,"hotPotato",je,"EXPLODE!"),b=Ue(b,"damage",je,new o(Dt))}else T(),delete k.HotPotato,de=!0}for(let Te=0;Te<V&&!G.lte(0);Te++){const je=pk(t,H,G,q,m,b,F,Y,x);if(G=je.newHp,b=je.damageEvents,J?w=G:v=G,je.isHit){if(R=!0,W>0){const Re=(St,bt)=>{const Vt=Math.round(bt.toNumber()*W),lt=Math.floor(Vt/100),Ft=Vt%100;let ya=lt+(Math.random()*100<Ft?1:0);if(ya<=0)return;E();const Gr=M.Leap||0;if(Gr>0&&!je.isSurreal){const Ua=Math.min(ya,Gr);ya-=Ua,M.Leap-=Ua,M.Leap<=0&&delete M.Leap}if(ya>0){let Ba=(M[St]||0)+ya;(St==="Hinder"||St==="Hypnotize"||St==="BananaPeel")&&(Ba=Math.min(1e3,Ba)),M[St]=Ba}};Re("Bleed",X),Re("Burn",D),Re("Hinder",$),Re("Plague",ee),Re("Poison",A),Re("Hypnotize",Z),Re("Slow",se),Re("Frailty",ue),Re("Freeze",ie),Re("Electrocute",pe),Re("Curse",be),Re("BlackFlame",we),Re("BananaPeel",ye),Re("Balloon",Ae),Re("Brittle",st),Re("Irradiate",Rt),Le.gt(0)&&Re("HotPotato",Le)}if(de){E();const Re=M.HotPotato||0;M.HotPotato=Re+Dt,b=Ue(b,"hotPotato",g,"Catch!"),de=!1}const He=M.Balloon||0;if(He>0&&Math.random()<.25){E(),delete M.Balloon;const Re=new o(He);G=o.max(0,G.minus(Re)),J?w=G:v=G,b=Ue(b,"balloon",g,`Pop: ${ge(Re,0)}`)}const ct=M.Brittle||0;if(ct>0){const Re=n.minus(G);if(Re.gt(0)){const St=o.min(ct,Re.times(.01).floor()).toNumber();E(),M.Brittle=ct+St}}const Ct=M.Thorns||0;if(Ct>0){const Re=new o(Ct);w=o.max(0,w.minus(Re)),b=Ue(b,"thorns",g==="enemy"?"player":"enemy",Re)}}if(je.counterTriggered&&(N=!0),S.gt(0)){const He=Math.round(S.toNumber()),ct=Math.floor(He/100),Ct=He%100,Re=ct+(Math.random()*100<Ct?1:0);Re>0&&(T(),k.Haste=(k.Haste||0)+Re)}if(ke.gt(0)){const He=Math.round(ke.toNumber()),ct=Math.floor(He/100),Ct=He%100,Re=ct+(Math.random()*100<Ct?1:0);Re>0&&(T(),k.Leap=(k.Leap||0)+Re)}if(Ce.gt(0)){const He=Math.round(Ce.toNumber()),ct=Math.floor(He/100),Ct=He%100,Re=ct+(Math.random()*100<Ct?1:0);Re>0&&(T(),k.EnergyWave=(k.EnergyWave||0)+Re)}if(yt.gt(0)){const He=Math.round(yt.toNumber()),ct=Math.floor(He/100),Ct=He%100,Re=ct+(Math.random()*100<Ct?1:0);Re>0&&(T(),k.Thorns=(k.Thorns||0)+Re)}if(je.reflectedDamage&&je.reflectedDamage.gt(0)){const He=je.reflectedDamage;w=o.max(0,w.minus(He)),b=Ue(b,"damage",g==="enemy"?"player":"enemy",He)}}const Ee=x.Bleed||0;if(Ee>0){const Te=n.minus(v);if(Te.gte(0)){const je=new o(Ee).times(.01),He=Te.times(je);He.gte(0)&&(w=o.max(0,w.minus(He)),b=Ue(b,"bleed",g==="enemy"?"player":"enemy",He))}}const Ge=x.Curse||0;if(Ge>0){const Te=r.attack||new o(0);if(Te.gt(0)){const je=new o(Ge).times(.01);let He=Te.times(je);He=He.times(Lt),He.gt(0)&&(w=o.max(0,w.minus(He)),b=Ue(b,"curse",g==="enemy"?"player":"enemy",He))}}const Ye=t.lifesteal||new o(0);if(Ye.gt(0)){const Te=n.minus(v);if(Te.gt(0)){const je=Te.times(Ye.div(100));je.gt(0)&&(w=o.min(d,w.plus(je)),b=Ue(b,"lifesteal",g==="enemy"?"player":"enemy",je))}}return{newDefenderHp:v,newAttackerHp:w,damageEvents:b,counterTriggered:N,isHit:R,newAttackerStatuses:k,newDefenderStatuses:M}},Xe=[{id:"stick man",name:"Stick Man",flavorText:"Anxiety with legs.",rarity:"scrap",imagePath:"assets/sketches/stickman.jpg",stats:{maxHp:new o(5),attack:new o(1),attackSpeed:2e3},rewards:[{statName:"attack",amount:new o(1)}],currencyRewards:[{name:"Graphite",amount:new o(2)}]},{id:"fountain_pen_duelist",name:"Fountain Pen Duelist",flavorText:"Pen is mightier than sword.",rarity:"rough",imagePath:"assets/sketches/fountain_pen_duelist.jpg",stats:{maxHp:new o(10),attack:new o(14),attackSpeed:400,maxDamage:new o(300)},rewards:[{statName:"attack",amount:new o(2)},{statName:"maxDamage",amount:new o(.4)}],currencyRewards:[{name:"Wax",amount:new o(50)},{name:"Ink",amount:new o(6)}]},{id:"sub_xero",name:"Sub-Xero",flavorText:"To draw him is to freeze the moment.",rarity:"framed",imagePath:"assets/sketches/sub_xero.jpg",stats:{maxHp:new o(7e4),attack:new o(35),attackSpeed:700,freezeChance:new o(2e3),critChance:new o(30),critDmg:new o(350)},rewards:[{statName:"freezeChance",amount:new o(.1)},{statName:"critDmg",amount:new o(1.2)}],currencyRewards:[{name:"Wax",amount:new o(13e4)},{name:"Ink",amount:new o(13e3)}]},{id:"smudge",name:"Smudge",flavorText:"You missed a spot.",rarity:"scrap",imagePath:"assets/sketches/smudge.jpg",stats:{maxHp:new o(12),attack:new o(1.5),attackSpeed:2800},rewards:[{statName:"maxHp",amount:new o(5)}],currencyRewards:[{name:"Graphite",amount:new o(6)}]},{id:"clockwork_heart",name:"Clockwork Heart",flavorText:"Ticking in 2B pencil.",rarity:"rough",imagePath:"assets/sketches/clockwork_heart.jpg",stats:{maxHp:new o(250),attack:new o(25),attackSpeed:1750,regen:new o(2.5)},rewards:[{statName:"maxHp",amount:new o(10)},{statName:"regen",amount:new o(.5)}],currencyRewards:[{name:"Graphite",amount:new o(250)},{name:"Charcoal",amount:new o(25)}]},{id:"perspective_block",name:"Perspective Block",flavorText:"Euclid is crying.",rarity:"scrap",imagePath:"assets/sketches/perspective_block.jpg",stats:{maxHp:new o(18),attack:new o(3),attackSpeed:1800},rewards:[{statName:"maxHp",amount:new o(10)},{statName:"attack",amount:new o(.5)}],currencyRewards:[{name:"Graphite",amount:new o(8)}]},{id:"wash_ink_ton",name:"Wash-ink-ton",flavorText:"Cannot tell a lie.",rarity:"opus",imagePath:"assets/sketches/wash_ink_ton.jpg",stats:{maxHp:new o(12e9),attack:new o(6e6),attackSpeed:8e3,regen:new o(1e8),hinderChance:new o(1e5)},rewards:[{statName:"regen",amount:new o(25e3)},{statName:"hinderChance",amount:new o(-.5)}],currencyRewards:[{name:"Ink",amount:new o(1e15)}]},{id:"narudo",name:"Narudo",flavorText:"Believe in the brushwork!",rarity:"framed",imagePath:"assets/sketches/narudo.jpg",stats:{maxHp:new o(8e4),armor:new o(800),dodge:new o(40),attack:new o(80),attackSpeed:1800,energyWaveChance:new o(1e4),multiStrikeChance:new o(80)},rewards:[{statName:"attack",amount:new o(15)},{statName:"energyWaveChance",amount:new o(.04)}],currencyRewards:[{name:"Coffee",amount:new o(15e4)},{name:"Ink",amount:new o(5e4)}]},{id:"v-wing_bat",name:"V-Wing Bat",flavorText:'A lazy "M" shape.',rarity:"scrap",imagePath:"assets/sketches/v-wing_bat.jpg",stats:{maxHp:new o(22),attack:new o(.3),attackSpeed:400},rewards:[{statName:"attack",amount:new o(.4)},{statName:"attackSpeed",amount:new o(-25)}],currencyRewards:[{name:"Graphite",amount:new o(20)}]},{id:"rorschach_bat",name:"Rorschach Bat",flavorText:"It looks like whatever you fear most.",rarity:"rough",imagePath:"assets/sketches/rorschach_bat.jpg",stats:{maxHp:new o(220),attack:new o(30),attackSpeed:300,plagueChance:new o(130)},rewards:[{statName:"attack",amount:new o(.6)},{statName:"attackSpeed",amount:new o(-15)}],currencyRewards:[{name:"Graphite",amount:new o(150)},{name:"Wax",amount:new o(80)}]},{id:"marker_polo",name:"Marker Polo",flavorText:"Mapped the Silk Road with a fine-tip.",rarity:"opus",imagePath:"assets/sketches/marker_polo.jpg",stats:{maxHp:new o(2e10),attack:new o(8e5),attackSpeed:1300,frailtyChance:new o(2e3),critChance:new o(10),critDmg:new o(1e3)},rewards:[{statName:"frailtyChance",amount:new o(.5)},{statName:"critDmg",amount:new o(-3)}],currencyRewards:[{name:"Marker",amount:new o(1e15)}]},{id:"stick_knight",name:"Stick Knight",flavorText:"He found a triangle.",rarity:"scrap",imagePath:"assets/sketches/stick_knight.jpg",stats:{maxHp:new o(25),attack:new o(2.5),attackSpeed:2e3,armor:new o(5)},rewards:[{statName:"attack",amount:new o(.5)},{statName:"armor",amount:new o(.5)}],currencyRewards:[{name:"Graphite",amount:new o(10)}]},{id:"miramba",name:"Miramba",flavorText:"Shoot arrow, hit canvas.",rarity:"framed",imagePath:"assets/sketches/miramba.jpg",stats:{maxHp:new o(15e4),attack:new o(150),attackSpeed:750,leapChance:new o(1e4),dodge:new o(85),critChance:new o(15),critDmg:new o(1500),frailtyChance:new o(15)},rewards:[{statName:"leapChance",amount:new o(5)},{statName:"critChance",amount:new o(.15)}],currencyRewards:[{name:"Graphite",amount:new o(5e4)},{name:"Charcoal",amount:new o(75e3)}]},{id:"deep_diver",name:"Deep Diver",flavorText:"Pressure crushing the graphite.",rarity:"rough",imagePath:"assets/sketches/deep_diver.jpg",stats:{maxHp:new o(2e4),attack:new o(150),attackSpeed:2500,armor:new o(200),execute:new o(1e3)},rewards:[{statName:"armor",amount:new o(2.5)}],currencyRewards:[{name:"Coffee",amount:new o(150)},{name:"Ink",amount:new o(50)}]},{id:"guide-line_snake",name:"Guide-Line Snake",flavorText:"Smooth, deadly curves.",rarity:"scrap",imagePath:"assets/sketches/guide-line_snake.jpg",stats:{maxHp:new o(40),attack:new o(2.5),attackSpeed:1200,critChance:new o(20),critDmg:new o(250)},rewards:[{statName:"critChance",amount:new o(.5)},{statName:"critDmg",amount:new o(.75)}],currencyRewards:[{name:"Wax",amount:new o(2.5)}]},{id:"ishinn",name:"Ishinn",flavorText:"Hesitation is defeat.",rarity:"framed",imagePath:"assets/sketches/ishinn.jpg",stats:{maxHp:new o(2e5),attack:new o(25e3),attackSpeed:550,dodge:new o(25),blockChance:new o(25),blockAmount:new o(1e5),critChance:new o(25),critDmg:new o(250),multiStrikeChance:new o(25)},rewards:[{statName:"critDmg",amount:new o(2.5)},{statName:"multiStrikeChance",amount:new o(.25)}],currencyRewards:[{name:"Charcoal",amount:new o(5e5)},{name:"Acrylic",amount:new o(5e4)}]},{id:"canvas_flayer",name:"Canvas Flayer",flavorText:"Peeling back the surface.",rarity:"rough",imagePath:"assets/sketches/canvas_flayer.jpg",stats:{maxHp:new o(1e4),attack:new o(75),attackSpeed:1250,lifesteal:new o(25),execute:new o(500),armorPen:new o(25)},rewards:[{statName:"execute",amount:new o(.4)},{statName:"armorPen",amount:new o(2.5)}],currencyRewards:[{name:"Graphite",amount:new o(200)},{name:"Coffee",amount:new o(150)}]},{id:"ed_ink_son",name:"Ed-ink-son",flavorText:"Genius is one percent inspiration.",rarity:"opus",imagePath:"assets/sketches/thomas_ed_ink_son.jpg",stats:{maxHp:new o(2e10),attack:new o(55e4),attackSpeed:550,electrocuteChance:new o(550),parry:new o(5),parryDmg:new o(5),inspirationChance:new o(1)},rewards:[{statName:"electrocuteChance",amount:new o(.25)},{statName:"attackSpeed",amount:new o(50)}],currencyRewards:[{name:"Photon",amount:new o(1e4)}]},{id:"scribble",name:"Scribble",flavorText:"Manic energy.",rarity:"scrap",imagePath:"assets/sketches/scribble.jpg",stats:{maxHp:new o(50),attack:new o(2.25),attackSpeed:1e3,regen:new o(1.5)},rewards:[{statName:"regen",amount:new o(.25)},{statName:"attack",amount:new o(.25)}],currencyRewards:[{name:"Graphite",amount:new o(25)}]},{id:"scorpion_mech",name:"Scorpion Mech",flavorText:"Sting is spring-loaded.",rarity:"rough",imagePath:"assets/sketches/scorpion_mech.jpg",stats:{maxHp:new o(1e4),attack:new o(83),attackSpeed:900,armor:new o(200),poisonChance:new o(500)},rewards:[{statName:"armor",amount:new o(2.5)},{statName:"attack",amount:new o(1.5)}],currencyRewards:[{name:"Wax",amount:new o(500)},{name:"Charcoal",amount:new o(150)}]},{id:"art_istotle",name:"Artistotle",flavorText:"Quality is a habit of shading.",rarity:"opus",imagePath:"assets/sketches/art_istotle.jpg",stats:{maxHp:new o(3e10),attack:new o(1e6),attackSpeed:1400,minDamage:new o(50),maxDamage:new o(500)},rewards:[{statName:"maxDamage",amount:new o(1.5)},{statName:"minDamage",amount:new o(-1)}],currencyRewards:[{name:"Charcoal",amount:new o(1e15)}]},{id:"broccoli_grove",name:"Broccoli Grove",flavorText:"Vegetables posing as trees.",rarity:"scrap",imagePath:"assets/sketches/broccoli_grove.jpg",stats:{maxHp:new o(50),attack:new o(5),attackSpeed:1500},rewards:[{statName:"attack",amount:new o(.75)},{statName:"maxHp",amount:new o(.75)}],currencyRewards:[{name:"Graphite",amount:new o(25)}]},{id:"plague_doctor",name:"Plague Doctor",flavorText:"Cures nothing, looks cool.",rarity:"rough",imagePath:"assets/sketches/plague_doctor.jpg",stats:{maxHp:new o(1500),attack:new o(5),attackSpeed:1e3,plagueChance:new o(100),regen:new o(10)},rewards:[{statName:"plagueChance",amount:new o(.15)}],currencyRewards:[{name:"Wax",amount:new o(200)},{name:"Coffee",amount:new o(200)}]},{id:"girl_with_balloon",name:"Girl with Balloon (*)",flavorText:"Going, going, gone.",rarity:"masterpiece",imagePath:"assets/sketches/girl_with_balloon.jpg",stats:{maxHp:new o(1e100),attack:new o(4e6),attackSpeed:1e3,dodge:new o(50)},rewards:[],currencyRewards:[]},{id:"agent_smiff",name:"Agent Smiff",flavorText:"Mr. Anderson... welcome to the gallery.",rarity:"framed",imagePath:"assets/sketches/agent_smiff.jpg",stats:{maxHp:new o(3e5),attack:new o(3e4),attackSpeed:600,dodge:new o(90),critChance:new o(90),critDmg:new o(900)},rewards:[{statName:"glancingBlow",amount:new o(.09)},{statName:"accuracy",amount:new o(.025)}],currencyRewards:[{name:"Coffee",amount:new o(9e5)}]},{id:"ghost_line",name:"Ghost Line",flavorText:"Hard to pin down.",rarity:"scrap",imagePath:"assets/sketches/ghost_line.jpg",stats:{maxHp:new o(55),attack:new o(3.3),attackSpeed:1600,dodge:new o(33)},rewards:[{statName:"dodge",amount:new o(.33)},{statName:"attack",amount:new o(.55)}],currencyRewards:[{name:"Wax",amount:new o(3.3)}]},{id:"cyber_skull",name:"Cyber Skull",flavorText:"Bone meets chrome.",rarity:"rough",imagePath:"assets/sketches/cyber_skull.jpg",stats:{maxHp:new o(4e3),attack:new o(100),attackSpeed:1e3,hasteChance:new o(4e3)},rewards:[{statName:"hasteChance",amount:new o(.1)},{statName:"attack",amount:new o(1)}],currencyRewards:[{name:"Graphite",amount:new o(250)},{name:"Coffee",amount:new o(250)}]},{id:"campbells_soup",name:"Campbell's Soup (*)",flavorText:"Mass-produced perfection.",rarity:"masterpiece",imagePath:"assets/sketches/campbells_soup.jpg",stats:{maxHp:new o(1e100),attack:new o(35e5),attackSpeed:2e3,regen:new o(1e5)},rewards:[],currencyRewards:[]},{id:"bikachu",name:"Bikachu",flavorText:"Electric mouse of some sort.",rarity:"framed",imagePath:"assets/sketches/bikachu.jpg",stats:{maxHp:new o(15e6),attack:new o(3e3),attackSpeed:300,critChance:new o(30),critDmg:new o(300),electrocuteChance:new o(3e3)},rewards:[{statName:"electrocuteChance",amount:new o(.1)},{statName:"attackSpeed",amount:new o(-5)}],currencyRewards:[{name:"Coffee",amount:new o(4e6)},{name:"Ink",amount:new o(4e5)}]},{id:"marie_blur_ie",name:"Marie Blurry",flavorText:"Highly radioactive.",rarity:"opus",imagePath:"assets/sketches/marie_blur_ie.jpg",stats:{maxHp:new o(15e9),attack:new o(7e5),attackSpeed:1200,irradiateChance:new o(700),armor:new o(1e9),poisonChance:new o(70)},rewards:[{statName:"irradiateChance",amount:new o(.2)},{statName:"poisonChance",amount:new o(-.012)}],currencyRewards:[{name:"Acrylic",amount:new o(1e10)}]},{id:"tangled_spider",name:"Tangled Spider",flavorText:"A knot with legs.",rarity:"scrap",imagePath:"assets/sketches/tangled_spider.jpg",stats:{maxHp:new o(150),attack:new o(5),attackSpeed:2300,regen:new o(1)},rewards:[{statName:"regen",amount:new o(.2)},{statName:"attack",amount:new o(2)}],currencyRewards:[{name:"Wax",amount:new o(6)}]},{id:"storm_lantern",name:"Storm Lantern",flavorText:"Captured thunder.",rarity:"rough",imagePath:"assets/sketches/storm_lantern.jpg",stats:{maxHp:new o(4444),attack:new o(44),attackSpeed:444,critChance:new o(44),critDmg:new o(444),electrocuteChance:new o(444)},rewards:[{statName:"attack",amount:new o(.88)},{statName:"critDmg",amount:new o(.88)}],currencyRewards:[{name:"Graphite",amount:new o(444)},{name:"Charcoal",amount:new o(88)}]},{id:"froyd",name:"Froyd",flavorText:"Analyzing my brushstrokes.",rarity:"opus",imagePath:"assets/sketches/froyd.jpg",stats:{maxHp:new o(25e9),attack:new o(4e6),attackSpeed:2e3,hypnotizeChance:new o(4e3),opacity:new o(80)},rewards:[{statName:"hypnotizeChance",amount:new o(.2)},{statName:"opacity",amount:new o(-.01)}],currencyRewards:[{name:"Spray",amount:new o(1e8)}]},{id:"wandering_ronin",name:"Wandering Ronin",flavorText:"A blade drawn in silence.",rarity:"rough",imagePath:"assets/sketches/wandering_ronin.jpg",stats:{maxHp:new o(1e3),attack:new o(75),attackSpeed:600,parry:new o(50),parryDmg:new o(50),dodge:new o(50)},rewards:[{statName:"parryDmg",amount:new o(.2)},{statName:"attack",amount:new o(1.5)}],currencyRewards:[{name:"Ink",amount:new o(200)}]},{id:"contrast_crusher",name:"Contrast Crusher",flavorText:"Only black and white exist.",rarity:"scrap",imagePath:"assets/sketches/contrast_crusher.jpg",stats:{maxHp:new o(250),attack:new o(10),attackSpeed:4e3},rewards:[{statName:"attack",amount:new o(2)}],currencyRewards:[{name:"Charcoal",amount:new o(4)}]},{id:"eyezen",name:"Eyezen",flavorText:"Implying this is just a drawing?",rarity:"framed",imagePath:"assets/sketches/eyezen.jpg",stats:{maxHp:new o(5e6),attack:new o(3500),attackSpeed:1300,hypnotizeChance:new o(130),multiStrikeChance:new o(260)},rewards:[{statName:"attack",amount:new o(9)}],currencyRewards:[{name:"Ink",amount:new o(3e5)},{name:"Marker",amount:new o(3e5)}]},{id:"the_son_of_man",name:"The Son of Man (*)",flavorText:"An apple a day hides the face.",rarity:"masterpiece",imagePath:"assets/sketches/the_son_of_man.jpg",stats:{maxHp:new o(1e100),attack:new o(5e6),attackSpeed:1500,accuracy:new o(-50),dodge:new o(50)},rewards:[],currencyRewards:[]},{id:"stick_ribs",name:"Stick Ribs",flavorText:"Bare bones.",rarity:"scrap",imagePath:"assets/sketches/stick_ribs.jpg",stats:{maxHp:new o(350),attack:new o(12),attackSpeed:3500},rewards:[{statName:"maxHp",amount:new o(40)}],currencyRewards:[{name:"Wax",amount:new o(17.5)}]},{id:"rusty_mech",name:"Rusty Mech",flavorText:"Heavy metal shading practice.",rarity:"rough",imagePath:"assets/sketches/rusty_mech.jpg",stats:{maxHp:new o(15e3),attack:new o(250),attackSpeed:800,armor:new o(500),armorPen:new o(100)},rewards:[{statName:"attack",amount:new o(3)},{statName:"armorPen",amount:new o(3)}],currencyRewards:[{name:"Wax",amount:new o(750)}]},{id:"show_pen",name:"Showpen",flavorText:"Composing nocturnes in pure graphite.",rarity:"opus",imagePath:"assets/sketches/show_pen.jpg",stats:{maxHp:new o(1e10),attack:new o(4e5),attackSpeed:900,hasteChance:new o(15e3),slowChance:new o(8e3),inspirationChance:new o(1e4)},rewards:[{statName:"hasteChance",amount:new o(.2)},{statName:"slowChance",amount:new o(-.2)}],currencyRewards:[{name:"Coffee",amount:new o(1e15)}]},{id:"kenpatchy",name:"Kenpatchy",flavorText:"Spiritual pressure broke the pencil.",rarity:"framed",imagePath:"assets/sketches/kenpatchy.jpg",stats:{maxHp:new o(2e6),attack:new o(25e3),attackSpeed:2e3,blockChance:new o(25),blockAmount:new o(25e4),frailtyChance:new o(2500)},rewards:[{statName:"attack",amount:new o(15)},{statName:"blockAmount",amount:new o(1500)}],currencyRewards:[{name:"Wax",amount:new o(75e5)},{name:"Coffee",amount:new o(5e6)}]},{id:"ink_blot",name:"Ink Blot",flavorText:"An accident that stained.",rarity:"scrap",imagePath:"assets/sketches/ink_blot.jpg",stats:{maxHp:new o(330),attack:new o(10),attackSpeed:2525},rewards:[{statName:"attack",amount:new o(1.5)}],currencyRewards:[{name:"Graphite",amount:new o(80)}]},{id:"bludseeker",name:"Bludseeker",flavorText:"I sense low ink.",rarity:"framed",imagePath:"assets/sketches/bludseeker.jpg",stats:{maxHp:new o(9e6),attack:new o(3e5),attackSpeed:600,lifesteal:new o(200),execute:new o(600),multiStrikeChance:new o(40),critChance:new o(5),critDmg:new o(600)},rewards:[{statName:"execute",amount:new o(6)},{statName:"lifesteal",amount:new o(.06)}],currencyRewards:[{name:"Ink",amount:new o(6e6)}]},{id:"gargoyle_sentinel",name:"Gargoyle Sentinel",flavorText:"Watcher in the rain.",rarity:"rough",imagePath:"assets/sketches/gargoyle_sentinel.jpg",stats:{maxHp:new o(2e4),attack:new o(350),attackSpeed:2e3,armor:new o(200),remedy:new o(120),regen:new o(70)},rewards:[{statName:"regen",amount:new o(7)},{statName:"remedy",amount:new o(.7)}],currencyRewards:[{name:"Ink",amount:new o(250)},{name:"Marker",amount:new o(25)}]},{id:"top_heavy_brute",name:"Top-Heavy Brute",flavorText:"Soft, puffy, and structureless.",rarity:"scrap",imagePath:"assets/sketches/top-heavy_brute.jpg",stats:{maxHp:new o(600),attack:new o(10),attackSpeed:2625,regen:new o(1),armor:new o(2),maxDamage:new o(175)},rewards:[{statName:"armor",amount:new o(.75)},{statName:"maxDamage",amount:new o(.5)}],currencyRewards:[{name:"Graphite",amount:new o(50)},{name:"Charcoal",amount:new o(2.5)}]},{id:"franklyn",name:"Franklyn",flavorText:"Waiting for lightning to strike.",rarity:"opus",imagePath:"assets/sketches/franklyn.jpg",stats:{maxHp:new o(4e10),attack:new o(42e4),attackSpeed:800,electrocuteChance:new o(1e3),hasteChance:new o(1e3),accuracy:new o(80)},rewards:[{statName:"attackSpeed",amount:new o(-50)},{statName:"electrocuteChance",amount:new o(-.1)}],currencyRewards:[{name:"Wax",amount:new o(1e15)}]},{id:"rotten_fruit",name:"Rotten Fruit",flavorText:"Shaded until it spoiled.",rarity:"scrap",imagePath:"assets/sketches/rotten_fruit.jpg",stats:{maxHp:new o(350),attack:new o(7.5),attackSpeed:2250,regen:new o(7.5)},rewards:[{statName:"regen",amount:new o(.35)},{statName:"maxHp",amount:new o(3.5)}],currencyRewards:[{name:"Graphite",amount:new o(45)},{name:"Wax",amount:new o(45)}]},{id:"artziri",name:"Artziri",flavorText:"Four arms, four brushes.",rarity:"framed",imagePath:"assets/sketches/artziri.jpg",stats:{maxHp:new o(6e6),attack:new o(3e4),attackSpeed:900,blackFlameChance:new o(90),multiStrikeChance:new o(340)},rewards:[{statName:"blackFlameChance",amount:new o(.06)},{statName:"multiStrikeChance",amount:new o(.8)}],currencyRewards:[{name:"Wax",amount:new o(5e6)},{name:"Marker",amount:new o(25e4)}]},{id:"guernica",name:"Guernica (*)",flavorText:"War in monochrome.",rarity:"masterpiece",imagePath:"assets/sketches/guernica.jpg",stats:{maxHp:new o(1e100),attack:new o(15e6),attackSpeed:2500,multiStrikeChance:new o(100)},rewards:[],currencyRewards:[]},{id:"gothic_spire",name:"Gothic Spire",flavorText:"Too many details to finish.",rarity:"rough",imagePath:"assets/sketches/gothic_spire.jpg",stats:{maxHp:new o(6666),attack:new o(66),attackSpeed:666,armorPen:new o(666),execute:new o(6666)},rewards:[{statName:"armorPen",amount:new o(6)},{statName:"execute",amount:new o(.6)}],currencyRewards:[{name:"Graphite",amount:new o(666)},{name:"Charcoal",amount:new o(666)}]},{id:"kingg",name:"Kingg",flavorText:"A dream rendered in charcoal.",rarity:"opus",imagePath:"assets/sketches/kingg.jpg",stats:{maxHp:new o(5e10),attack:new o(15e5),attackSpeed:1500,inspirationChance:new o(1500),armorPen:new o(5e5),execute:new o(500),remedy:new o(500)},rewards:[{statName:"inspirationChance",amount:new o(.5)},{statName:"armorPen",amount:new o(-2e3)}],currencyRewards:[{name:"Graphite",amount:new o(1e12)}]},{id:"viscous_blob",name:"Viscous Blob",flavorText:"It hasn't dried yet.",rarity:"scrap",imagePath:"assets/sketches/viscous_blob.jpg",stats:{maxHp:new o(600),attack:new o(10),attackSpeed:3600,minDamage:new o(100),maxDamage:new o(200),regen:new o(8)},rewards:[{statName:"maxHp",amount:new o(50)},{statName:"minDamage",amount:new o(.4)}],currencyRewards:[{name:"Wax",amount:new o(60)}]},{id:"cross-hatch_crab",name:"Cross-Hatch Crab",flavorText:"Defense layered in thousands of strokes.",rarity:"rough",imagePath:"assets/sketches/cross-hatch_crab.jpg",stats:{maxHp:new o(8500),attack:new o(300),attackSpeed:3300,armor:new o(300),absorb:new o(30)},rewards:[{statName:"armor",amount:new o(3)},{statName:"absorb",amount:new o(.03)}],currencyRewards:[{name:"Wax",amount:new o(2e3)},{name:"Coffee",amount:new o(300)}]},{id:"chap_line",name:"Chap-line",flavorText:"A silent sketch speaks a thousand words.",rarity:"opus",imagePath:"assets/sketches/chap_line.jpg",stats:{maxHp:new o(6e10),attack:new o(9e5),attackSpeed:800,dodge:new o(40),multiStrikeChance:new o(40),lifesteal:new o(40),critChance:new o(20),critDmg:new o(400),leapChance:new o(400)},rewards:[{statName:"critChance",amount:new o(.4)},{statName:"leapChance",amount:new o(-4)}],currencyRewards:[{name:"Wax",amount:new o(1e15)},{name:"Charcoal",amount:new o(1e15)}]},{id:"static_steed",name:"Static Steed",flavorText:"Frozen line with zero soul.",rarity:"scrap",imagePath:"assets/sketches/static_steed.jpg",stats:{maxHp:new o(300),attack:new o(50),attackSpeed:2400},rewards:[{statName:"attack",amount:new o(3)},{statName:"maxHp",amount:new o(3)}],currencyRewards:[{name:"Graphite",amount:new o(60)},{name:"Wax",amount:new o(10)}]},{id:"ancestral_tree",name:"Ancestral Tree",flavorText:"Roots deep in graphite.",rarity:"rough",imagePath:"assets/sketches/ancestral_tree.jpg",stats:{maxHp:new o(25e3),attack:new o(500),attackSpeed:5e3,regen:new o(250),armor:new o(500)},rewards:[{statName:"maxHp",amount:new o(20)},{statName:"armor",amount:new o(5)}],currencyRewards:[{name:"Graphite",amount:new o(5e3)}]},{id:"chunk_norris",name:"Chunk Norris",flavorText:"He drew the artist.",rarity:"framed",imagePath:"assets/sketches/chunk_norris.jpg",stats:{maxHp:new o(2e7),attack:new o(5e6),attackSpeed:15e3,multiStrikeChance:new o(999)},rewards:[{statName:"maxHp",amount:new o(1e3)},{statName:"attack",amount:new o(25)}],currencyRewards:[{name:"Charcoal",amount:new o(25e5)},{name:"Spray",amount:new o(1e3)}]},{id:"margin_goblin",name:"Margin Goblin",flavorText:"Born in the margins.",rarity:"scrap",imagePath:"assets/sketches/margin_goblin.jpg",stats:{maxHp:new o(700),attack:new o(15),attackSpeed:700,dodge:new o(25)},rewards:[{statName:"attackSpeed",amount:new o(-15)},{statName:"dodge",amount:new o(.25)}],currencyRewards:[{name:"Graphite",amount:new o(80)},{name:"Wax",amount:new o(25)}]},{id:"griffin_head",name:"Griffin Head",flavorText:"Feathers are hard to draw.",rarity:"rough",imagePath:"assets/sketches/griffin_head.jpg",stats:{maxHp:new o(9e3),attack:new o(360),attackSpeed:900,accuracy:new o(100),armorPen:new o(50),bleedChance:new o(300)},rewards:[{statName:"attack",amount:new o(15)},{statName:"accuracy",amount:new o(.02)}],currencyRewards:[{name:"Graphite",amount:new o(3600)},{name:"Wax",amount:new o(3600)}]},{id:"shakes",name:"Shakes (*)",flavorText:"To draw, or not to draw.",rarity:"opus",imagePath:"assets/sketches/shakes.jpg",stats:{maxHp:new o(1e100),attack:new o(43e5),attackSpeed:1200},rewards:[]},{id:"coffee_stain",name:"Coffee Stain",flavorText:"Caffeine that fights back.",rarity:"scrap",imagePath:"assets/sketches/coffee_stain.jpg",stats:{maxHp:new o(800),attack:new o(100),attackSpeed:2500,counter:new o(40),regen:new o(5)},rewards:[{statName:"counter",amount:new o(.2)},{statName:"regen",amount:new o(.4)}],currencyRewards:[{name:"Coffee",amount:new o(20)}]},{id:"tockies",name:"Tockies",flavorText:"Explosive creative potential.",rarity:"framed",imagePath:"assets/sketches/tockies.jpg",stats:{maxHp:new o(5e6),attack:new o(2e4),attackSpeed:1500,hotPotatoChance:new o(25e4),armor:new o(5e5),leapChance:new o(500)},rewards:[{statName:"hotPotatoChance",amount:new o(.025)},{statName:"armor",amount:new o(2500)}],currencyRewards:[{name:"Charcoal",amount:new o(5e6)},{name:"Spray",amount:new o(5e3)}]},{id:"mannequin",name:"Mannequin",flavorText:"Stiff, wooden judgment.",rarity:"scrap",imagePath:"assets/sketches/mannequin.jpg",stats:{maxHp:new o(1200),attack:new o(120),attackSpeed:1600,execute:new o(75)},rewards:[{statName:"execute",amount:new o(.8)},{statName:"attack",amount:new o(6.4)}],currencyRewards:[{name:"Graphite",amount:new o(180)},{name:"Wax",amount:new o(180)}]},{id:"black_knight_helmet",name:"Black Knight Helmet",flavorText:"Reflections on dark armor.",rarity:"rough",imagePath:"assets/sketches/black_knight_helmet.jpg",stats:{maxHp:new o(8e3),attack:new o(1500),attackSpeed:1500,blockChance:new o(50),blockAmount:new o(1500),lifesteal:new o(50)},rewards:[{statName:"blockChance",amount:new o(.001)},{statName:"blockAmount",amount:new o(25)}],currencyRewards:[{name:"Coffee",amount:new o(750)},{name:"Ink",amount:new o(300)}]},{id:"scrapped_rat",name:"Scrapped Rat",flavorText:"Gnaws at your confidence.",rarity:"scrap",imagePath:"assets/sketches/scrapped_rat.jpg",stats:{maxHp:new o(1250),attack:new o(175),attackSpeed:1750,critChance:new o(20),critDmg:new o(250),plagueChance:new o(25)},rewards:[{statName:"critDmg",amount:new o(.9)},{statName:"plagueChance",amount:new o(.175)}],currencyRewards:[{name:"Graphite",amount:new o(175)},{name:"Charcoal",amount:new o(25)}]},{id:"bama",name:"Bama (*)",flavorText:"Yes we scan.",rarity:"opus",imagePath:"assets/sketches/bama.jpg",stats:{maxHp:new o(1e100),attack:new o(5e6),attackSpeed:900},rewards:[]},{id:"six_shooter",name:"Six Shooter",flavorText:"Drawn quickly.",rarity:"rough",imagePath:"assets/sketches/six_shooter.jpg",stats:{maxHp:new o(6e3),attack:new o(600),attackSpeed:1200,multiStrikeChance:new o(500),frailtyChance:new o(100),execute:new o(600)},rewards:[{statName:"multiStrikeChance",amount:new o(.1)},{statName:"attack",amount:new o(6)}],currencyRewards:[{name:"Graphite",amount:new o(9e3)},{name:"Marker",amount:new o(12)}]},{id:"squirtel",name:"Squirtel",flavorText:"Shell is too small.",rarity:"framed",imagePath:"assets/sketches/squirtel.jpg",stats:{maxHp:new o(6e7),attack:new o(8e4),attackSpeed:1500,blockChance:new o(20),blockAmount:new o(1e8),armor:new o(1e5),leapChance:new o(80),minDamage:new o(150),maxDamage:new o(250)},rewards:[{statName:"blockChance",amount:new o(.2)},{statName:"minDamage",amount:new o(.5)}],currencyRewards:[{name:"Wax",amount:new o(25e5)},{name:"Marker",amount:new o(15e5)}]},{id:"floating_eye",name:"Floating Eye",flavorText:"Anatomy that stares back.",rarity:"scrap",imagePath:"assets/sketches/floating_eye.jpg",stats:{maxHp:new o(1e3),attack:new o(300),attackSpeed:4200,accuracy:new o(100),glancingBlow:new o(100)},rewards:[{statName:"critChance",amount:new o(.3)},{statName:"glancingBlow",amount:new o(.1)}],currencyRewards:[{name:"Charcoal",amount:new o(15)},{name:"Ink",amount:new o(4)}]},{id:"kakushi",name:"Kakushi",flavorText:"Copied this technique perfectly.",rarity:"framed",imagePath:"assets/sketches/kakushi.jpg",stats:{maxHp:new o(7e5),attack:new o(1800),attackSpeed:500,dodge:new o(75),hypnotizeChance:new o(750),parry:new o(15),parryDmg:new o(750)},rewards:[{statName:"attack",amount:new o(13)},{statName:"dodge",amount:new o(.3)}],currencyRewards:[{name:"Ink",amount:new o(7e6)},{name:"Marker",amount:new o(13e5)}]},{id:"spaghetti_medusa",name:"Spaghetti Medusa",flavorText:"Too many lines, no volume.",rarity:"scrap",imagePath:"assets/sketches/spaghetti_medusa.jpg",stats:{maxHp:new o(3e3),attack:new o(100),attackSpeed:400,armorPen:new o(30)},rewards:[{statName:"armorPen",amount:new o(6)},{statName:"attack",amount:new o(6)}],currencyRewards:[{name:"Wax",amount:new o(450)},{name:"Coffee",amount:new o(50)}]},{id:"great_wave_of_kanagawa",name:"Great Wave of Kanagawa (*)",flavorText:"Jiu Jitsu Logo?",rarity:"masterpiece",imagePath:"assets/sketches/great_wave_of_kanagawa.jpg",stats:{maxHp:new o(1e100),attack:new o(25e6),attackSpeed:4500},rewards:[]},{id:"amelia_art_hart",name:"Arthart (*)",flavorText:"Flew off the edge of the page and was never seen again.",rarity:"opus",imagePath:"assets/sketches/amelia_art_hart.jpg",stats:{maxHp:new o(1e100),attack:new o(56e5),attackSpeed:900},rewards:[]},{id:"crumpled_golem",name:"Crumpled Golem",flavorText:"Crushed and hardened.",rarity:"scrap",imagePath:"assets/sketches/crumpled_golem.jpg",stats:{maxHp:new o(5e3),attack:new o(175),attackSpeed:3e3,armor:new o(250)},rewards:[{statName:"armor",amount:new o(4)},{statName:"maxHp",amount:new o(150)}],currencyRewards:[{name:"Graphite",amount:new o(600)},{name:"Charcoal",amount:new o(40)}]},{id:"viking_longship",name:"Viking Longship",flavorText:"Carved for conquest.",rarity:"rough",imagePath:"assets/sketches/viking_longship.jpg",stats:{maxHp:new o(15e3),attack:new o(4e3),attackSpeed:3400,minDamage:new o(150),maxDamage:new o(400)},rewards:[{statName:"minDamage",amount:new o(.5)},{statName:"maxDamage",amount:new o(.5)}],currencyRewards:[{name:"Graphite",amount:new o(5e3)},{name:"Charcoal",amount:new o(5e3)}]},{id:"tronp",name:"Tronp (*)",flavorText:"Tremendous shading. The best.",rarity:"opus",imagePath:"assets/sketches/tronp.jpg",stats:{maxHp:new o(1e100),attack:new o(55e5),attackSpeed:1100},rewards:[]},{id:"ink_drip_stalker",name:"Ink-Drip Stalker",flavorText:"Don't touch it, it stains.",rarity:"rough",imagePath:"assets/sketches/ink_drip_stalker.jpg",stats:{maxHp:new o(7500),attack:new o(1e3),attackSpeed:750,lifesteal:new o(100)},rewards:[{statName:"lifesteal",amount:new o(.01)},{statName:"critDmg",amount:new o(1.5)}],currencyRewards:[{name:"Charcoal",amount:new o(7500)},{name:"Ink",amount:new o(750)}]},{id:"hatch_wolf",name:"Hatch-Wolf",flavorText:"Hungry lines.",rarity:"scrap",imagePath:"assets/sketches/hatch_wolf.jpg",stats:{maxHp:new o(2500),attack:new o(500),attackSpeed:1500,lifesteal:new o(50)},rewards:[{statName:"lifesteal",amount:new o(.025)},{statName:"critDmg",amount:new o(1.5)}],currencyRewards:[{name:"Charcoal",amount:new o(250)},{name:"Ink",amount:new o(15)}]},{id:"eldritch_tentacles",name:"Eldritch Tentacles",flavorText:"Shading non-Euclidean geometry.",rarity:"rough",imagePath:"assets/sketches/eldritch_tentacles.jpg",stats:{maxHp:new o(8e3),attack:new o(800),attackSpeed:800,regen:new o(800)},rewards:[{statName:"regen",amount:new o(32)}],currencyRewards:[{name:"Ink",amount:new o(1600)}]},{id:"hasty_cat",name:"Hasty Cat",flavorText:"Moves as fast as it was drawn.",rarity:"scrap",imagePath:"assets/sketches/hasty_cat.jpg",stats:{maxHp:new o(2e3),attack:new o(100),attackSpeed:200,dodge:new o(20),accuracy:new o(80)},rewards:[{statName:"attackSpeed",amount:new o(-5)},{statName:"accuracy",amount:new o(.02)}],currencyRewards:[{name:"Graphite",amount:new o(400)},{name:"Coffee",amount:new o(40)}]},{id:"crustal_maiden",name:"Crustal Maiden",flavorText:"Swift as the wolves of Icewrack.",rarity:"framed",imagePath:"assets/sketches/crustal_maiden.jpg",stats:{maxHp:new o(2e6),attack:new o(2e3),attackSpeed:500,frailtyChance:new o(500),freezeChance:new o(100),slowChance:new o(1e3),remedy:new o(100),absorb:new o(75)},rewards:[{statName:"freezeChance",amount:new o(.2)},{statName:"frailtyChance",amount:new o(.1)}],currencyRewards:[{name:"Ink",amount:new o(7e6)},{name:"Marker",amount:new o(5e6)}]},{id:"rhinoceros_beetle",name:"Rhinoceros Beetle",flavorText:"Bulletproof ink.",rarity:"scrap",imagePath:"assets/sketches/rhinoceros_beetle.jpg",stats:{maxHp:new o(5e3),attack:new o(1e3),attackSpeed:2750,armor:new o(500),parry:new o(30),parryDmg:new o(30)},rewards:[{statName:"parry",amount:new o(.2)},{statName:"parryDmg",amount:new o(.01)}],currencyRewards:[{name:"Graphite",amount:new o(2750)},{name:"Charcoal",amount:new o(100)}]},{id:"motz",name:"Motz (*)",flavorText:"Composed without erasing.",rarity:"opus",imagePath:"assets/sketches/motz.jpg",stats:{maxHp:new o(1e100),attack:new o(6e6),attackSpeed:800},rewards:[]},{id:"six-fingered_hand",name:"Six-Fingered Hand",flavorText:"Counting is hard.",rarity:"scrap",imagePath:"assets/sketches/six-fingered_hand.jpg",stats:{maxHp:new o(6e3),attack:new o(6e3),attackSpeed:6e3,minDamage:new o(6),maxDamage:new o(6e3)},rewards:[{statName:"attack",amount:new o(6)},{statName:"maxDamage",amount:new o(.6)}],currencyRewards:[{name:"Graphite",amount:new o(6e3)},{name:"Coffee",amount:new o(120)}]},{id:"kagya",name:"Kagya",flavorText:"The progenitor of all sketches.",rarity:"framed",imagePath:"assets/sketches/kagya.jpg",stats:{maxHp:new o(6e7),attack:new o(3e5),attackSpeed:8e3,regen:new o(1e6),blackFlameChance:new o(100),freezeChance:new o(1e4),multiStrikeChance:new o(80),burnChance:new o(20),burnDamage:new o(1e6),opacity:new o(80),dodge:new o(15)},rewards:[{statName:"opacity",amount:new o(.2)},{statName:"freezeChance",amount:new o(.2)}],currencyRewards:[{name:"Graphite",amount:new o(3e5)},{name:"Acrylic",amount:new o(6e5)}]},{id:"tattered_scarecrow",name:"Tattered Scarecrow",flavorText:"Stuffed with nightmares.",rarity:"rough",imagePath:"assets/sketches/tattered_scarecrow.jpg",stats:{maxHp:new o(2e4),attack:new o(1e4),attackSpeed:1e3,frailtyChance:new o(200)},rewards:[{statName:"frailtyChance",amount:new o(.05)},{statName:"attack",amount:new o(4)}],currencyRewards:[{name:"Wax",amount:new o(2500)},{name:"Marker",amount:new o(250)}]},{id:"tangent_hydra",name:"Tangent Hydra",flavorText:"Lines touch awkwardly.",rarity:"scrap",imagePath:"assets/sketches/tangent_hydra.jpg",stats:{maxHp:new o(16e3),attack:new o(80),attackSpeed:400,bleedChance:new o(80),regen:new o(400)},rewards:[{statName:"bleedChance",amount:new o(.2)},{statName:"regen",amount:new o(16)}],currencyRewards:[{name:"Marker",amount:new o(4)}]},{id:"smudge_tzu",name:"Moon Tzu (*)",flavorText:"All warfare is based on deception... and forced perspective.",rarity:"opus",imagePath:"assets/sketches/smudge_tzu.jpg",stats:{maxHp:new o(1e100),attack:new o(62e5),attackSpeed:850},rewards:[]},{id:"night_watch",name:"Night Watch (*)",flavorText:"Now my watch begins.",rarity:"masterpiece",imagePath:"assets/sketches/night_watch.jpg",stats:{maxHp:new o(1e100),attack:new o(2e7),attackSpeed:3500},rewards:[]},{id:"katava",name:"Katava",flavorText:"Insatiable hunger for graphite.",rarity:"framed",imagePath:"assets/sketches/katava.jpg",stats:{maxHp:new o(8e6),attack:new o(2e3),attackSpeed:1e3,bleedChance:new o(90),burnChance:new o(20),burnDamage:new o(2e5),plagueChance:new o(200),hasteChance:new o(200)},rewards:[{statName:"burnDamage",amount:new o(90)},{statName:"plagueChance",amount:new o(.04)}],currencyRewards:[{name:"Marker",amount:new o(2e7)}]},{id:"off-center_portrait",name:"Off-Center Portrait",flavorText:"Features don't align.",rarity:"scrap",imagePath:"assets/sketches/off-center_portrait.jpg",stats:{maxHp:new o(12404),attack:new o(512),attackSpeed:453,hinderChance:new o(1140)},rewards:[{statName:"attack",amount:new o(6.87)},{statName:"hinderChance",amount:new o(.172)}],currencyRewards:[{name:"Graphite",amount:new o(6517)},{name:"Ink",amount:new o(29.94)}]},{id:"paper-cut_wyrm",name:"Paper-Cut Wyrm",flavorText:"Sharp edges, zero weight.",rarity:"rough",imagePath:"assets/sketches/paper-cut_wyrm.jpg",stats:{maxHp:new o(6e4),attack:new o(600),attackSpeed:500,bleedChance:new o(300),multiStrikeChance:new o(30),hasteChance:new o(60),critChance:new o(.6),critDmg:new o(3e3)},rewards:[{statName:"bleedChance",amount:new o(.06)},{statName:"hasteChance",amount:new o(.06)}],currencyRewards:[{name:"Wax",amount:new o(6e3)},{name:"Coffee",amount:new o(900)}]},{id:"flayed_study",name:"Flayed Study",flavorText:"Muscles in wrong spots.",rarity:"scrap",imagePath:"assets/sketches/flayed_study.jpg",stats:{maxHp:new o(1e4),attack:new o(15e3),attackSpeed:3e3,critChance:new o(25),critDmg:new o(200)},rewards:[{statName:"attack",amount:new o(9)},{statName:"critDmg",amount:new o(.5)}],currencyRewards:[{name:"Wax",amount:new o(900)},{name:"Marker",amount:new o(2)}]},{id:"the_creation",name:"The Creation (*)",flavorText:"E.T. phone home.",rarity:"masterpiece",imagePath:"assets/sketches/the_creation.jpg",stats:{maxHp:new o(1e100),attack:new o(175e5),attackSpeed:3e3},rewards:[]},{id:"phantom_armor",name:"Phantom Armor",flavorText:"Shading the void inside.",rarity:"rough",imagePath:"assets/sketches/phantom_armor.jpg",stats:{maxHp:new o(5e4),attack:new o(2500),attackSpeed:2e3,armor:new o(5e3),blockChance:new o(50),blockAmount:new o(5e3)},rewards:[{statName:"blockChance",amount:new o(.25)},{statName:"blockAmount",amount:new o(15)}],currencyRewards:[{name:"Coffee",amount:new o(1250)},{name:"Ink",amount:new o(1e3)}]},{id:"podge",name:"Podge",flavorText:"Fresh meat for the portfolio!",rarity:"framed",imagePath:"assets/sketches/podge.jpg",stats:{maxHp:new o(2e7),attack:new o(25e3),armor:new o(1e5),attackSpeed:3e3,lifesteal:new o(100),absorb:new o(30),plagueChance:new o(300)},rewards:[{statName:"lifesteal",amount:new o(.025)},{statName:"maxHp",amount:new o(250)}],currencyRewards:[{name:"Wax",amount:new o(25e5)},{name:"Ink",amount:new o(25e6)}]},{id:"the_last_supper",name:"The Last Supper (*)",flavorText:"Judas is late.",rarity:"masterpiece",imagePath:"assets/sketches/the_last_supper.jpg",stats:{maxHp:new o(1e100),attack:new o(1e7),attackSpeed:1500},rewards:[]},{id:"guillotine",name:"Guillotine",flavorText:"The final edit.",rarity:"rough",imagePath:"assets/sketches/guillotine.jpg",stats:{maxHp:new o(1e6),attack:new o(5e4),attackSpeed:5e3,execute:new o(5e4)},rewards:[{statName:"attack",amount:new o(4)},{statName:"execute",amount:new o(4)}],currencyRewards:[{name:"Graphite",amount:new o(15e3)},{name:"Ink",amount:new o(2250)}]},{id:"vanishing_pointless",name:"Vanishing Pointless",flavorText:"Geometry that hurts.",rarity:"scrap",imagePath:"assets/sketches/vanishing_pointless.jpg",stats:{maxHp:new o(7e4),attack:new o(700),attackSpeed:700,hypnotizeChance:new o(3500),execute:new o(7e3),hasteChance:new o(700)},rewards:[{statName:"maxHp",amount:new o(350)},{statName:"hypnotizeChance",amount:new o(.07)}],currencyRewards:[{name:"Charcoal",amount:new o(700)}]},{id:"magnum_opus",name:"Magnum Opus",flavorText:"A fellow discarded sketch.",rarity:"rough",imagePath:"assets/sketches/magnum_opus_1.jpg",stats:{maxHp:new o(1e9),attack:new o(5e5),attackSpeed:2e3},rewards:[{statName:"attack",amount:new o(100)},{statName:"maxHp",amount:new o(1e3)}],currencyRewards:[{name:"Graphite",amount:new o(1e7)},{name:"Wax",amount:new o(1e7)}]},{id:"magnum_opus_2",name:"Magnum Opus 2",flavorText:"This one looks oddly familiar.",rarity:"framed",imagePath:"assets/sketches/magnum_opus_2.jpg",stats:{maxHp:new o(1e12),attack:new o(5e7),attackSpeed:1e3,regen:new o(1e9),armor:new o(1e9)},rewards:[{statName:"maxHp",amount:new o(1e4)},{statName:"attackSpeed",amount:new o(-10)}],currencyRewards:[{name:"Coffee",amount:new o(1e9)},{name:"Marker",amount:new o(1e9)}]},{id:"magnum_opus_3",name:"Magnum Opus 3 (*)",flavorText:"So there were others before you.",rarity:"opus",imagePath:"assets/sketches/magnum_opus_3.jpg",stats:{maxHp:new o(1e100),attack:new o(1e6),attackSpeed:1500},rewards:[]},{id:"magnum_opus_4",name:"Magnum Opus 4 (*)",flavorText:"This must have been his final form.",rarity:"masterpiece",imagePath:"assets/sketches/magnum_opus_4.jpg",stats:{maxHp:new o(1e100),attack:new o(1e6),attackSpeed:1500},rewards:[]},{id:"itchygo",name:"Itchygo",flavorText:"Bankai requires a wider canvas.",rarity:"framed",imagePath:"assets/sketches/itchygo.jpg",stats:{maxHp:new o(3e7),attack:new o(1e4),attackSpeed:750,critChance:new o(40),critDmg:new o(400),goldenLuckChance:new o(10),goldenLuckDamage:new o(4e3),parry:new o(80),parryDmg:new o(4),brittleChance:new o(40)},rewards:[{statName:"parry",amount:new o(.1)},{statName:"brittleChance",amount:new o(.1)}],currencyRewards:[{name:"Charcoal",amount:new o(15e6)},{name:"Coffee",amount:new o(75e5)}]},{id:"pocket_poser",name:"Pocket Poser",flavorText:"Hands are hard to draw.",rarity:"scrap",imagePath:"assets/sketches/pocket_poser.jpg",stats:{maxHp:new o(5e4),attack:new o(2e3),attackSpeed:1250,multiStrikeChance:new o(50)},rewards:[{statName:"attack",amount:new o(9)},{statName:"multiStrikeChance",amount:new o(.09)}],currencyRewards:[{name:"Graphite",amount:new o(9e3)},{name:"Coffee",amount:new o(90)}]},{id:"kahn",name:"Kahn (*)",flavorText:"Scourge of the sketchbook.",rarity:"opus",imagePath:"assets/sketches/kahn.jpg",stats:{maxHp:new o(1e100),attack:new o(7e4),critChance:new o(7),critDmg:new o(600),attackSpeed:700,minDamage:new o(10),maxDamage:new o(200),absorb:new o(85)},rewards:[{statName:"minDamage",amount:new o(.6)},{statName:"maxDamage",amount:new o(.7)}],currencyRewards:[{name:"Ink",amount:new o(7e5)}]},{id:"birth_of_venus",name:"Birth of Venus (*)",flavorText:"She's nude, but make it art.",rarity:"masterpiece",imagePath:"assets/sketches/birth_of_venus.jpg",stats:{maxHp:new o(1e100),attack:new o(5e6),attackSpeed:1200},rewards:[]},{id:"rigid_drake",name:"Rigid Drake",flavorText:"Forgot the line of action.",rarity:"scrap",imagePath:"assets/sketches/rigid_drake.jpg",stats:{maxHp:new o(24e3),attack:new o(12e3),attackSpeed:2e3,armor:new o(5e3),armorPen:new o(200),hinderChance:new o(2e3)},rewards:[{statName:"armorPen",amount:new o(20)},{statName:"hinderChance",amount:new o(.1)}],currencyRewards:[{name:"Wax",amount:new o(1500)},{name:"Ink",amount:new o(120)}]},{id:"vintage_biplane",name:"Vintage Biplane",flavorText:"Flight without feathers.",rarity:"rough",imagePath:"assets/sketches/vintage_biplane.jpg",stats:{maxHp:new o(190300),attack:new o(1903),attackSpeed:1903,maxDamage:new o(1903),slowChance:new o(1903),hasteChance:new o(1903)},rewards:[{statName:"slowChance",amount:new o(.1)},{statName:"hasteChance",amount:new o(.02)}],currencyRewards:[{name:"Graphite",amount:new o(19030)},{name:"Marker",amount:new o(1903)}]},{id:"charzard",name:"Charzard",flavorText:"Not a dragon, just a lizard.",rarity:"framed",imagePath:"assets/sketches/charzard.jpg",stats:{maxHp:new o(4e7),attack:new o(15e3),attackSpeed:2e3,burnChance:new o(400),burnDamage:new o(8e3),parry:new o(10),parryDmg:new o(40),regen:new o(1e5)},rewards:[{statName:"burnChance",amount:new o(.4)},{statName:"burnDamage",amount:new o(40)}],currencyRewards:[{name:"Graphite",amount:new o(4e6)},{name:"Marker",amount:new o(4e7)}]},{id:"concrete_wraith",name:"Concrete Wraith",flavorText:"Fabric as hard as rock.",rarity:"scrap",imagePath:"assets/sketches/concrete_wraith.jpg",stats:{maxHp:new o(33e3),attack:new o(900),attackSpeed:333,dodge:new o(50),blockChance:new o(50),blockAmount:new o(1e4)},rewards:[{statName:"attack",amount:new o(3)},{statName:"attackSpeed",amount:new o(-10)}],currencyRewards:[{name:"Graphite",amount:new o(5e3)},{name:"Marker",amount:new o(50)}]},{id:"new_tone",name:"New Tone (*)",flavorText:"Gravity always pulls the graphite down.",rarity:"opus",imagePath:"assets/sketches/new_tone.jpg",stats:{maxHp:new o(1e100),attack:new o(58e5),attackSpeed:1100},rewards:[]},{id:"weakling",name:"Weakling",flavorText:"Not much to see here.",rarity:"scrap",imagePath:"assets/sketches/weakling.jpg",stats:{maxHp:new o(5e4),attack:new o(2500),attackSpeed:1500,leapChance:new o(500)},rewards:[{statName:"attack",amount:new o(2.5)},{statName:"maxHp",amount:new o(50)}],currencyRewards:[{name:"Graphite",amount:new o(2e3)},{name:"Wax",amount:new o(500)}]},{id:"crystal_dragon",name:"Crystal Dragon",flavorText:"Every facet needs a highlight.",rarity:"rough",imagePath:"assets/sketches/crystal_dragon.jpg",stats:{maxHp:new o(19e5),attack:new o(3e3),attackSpeed:190,armor:new o(1900),freezeChance:new o(1900),slowChance:new o(1900),armorPen:new o(1e4)},rewards:[{statName:"freezeChance",amount:new o(.19)},{statName:"armor",amount:new o(19)}],currencyRewards:[{name:"Graphite",amount:new o(19e3)},{name:"Marker",amount:new o(1900)}]},{id:"sauske",name:"Sauske",flavorText:"Dark shading suits him best.",rarity:"framed",imagePath:"assets/sketches/sauske.jpg",stats:{maxHp:new o(1e8),attack:new o(5e4),attackSpeed:600,hypnotizeChance:new o(300),blackFlameChance:new o(150),dodge:new o(50),accuracy:new o(75),glancingBlow:new o(90),multiStrikeChance:new o(25)},rewards:[{statName:"blackFlameChance",amount:new o(.01)},{statName:"glancingBlow",amount:new o(.25)}],currencyRewards:[{name:"Graphite",amount:new o(2e7)},{name:"Acrylic",amount:new o(2e6)}]},{id:"the_scream",name:"The Scream (*)",flavorText:"Existential dread.",rarity:"masterpiece",imagePath:"assets/sketches/the_scream.jpg",stats:{maxHp:new o(1e100),attack:new o(75e5),attackSpeed:1e3},rewards:[]},{id:"stubby_brawler",name:"Stubby Brawler",flavorText:"Depth calculation failed.",rarity:"scrap",imagePath:"assets/sketches/stubby_brawler.jpg",stats:{maxHp:new o(25e4),attack:new o(5e3),attackSpeed:500,absorb:new o(50)},rewards:[{statName:"attack",amount:new o(15)},{statName:"attackSpeed",amount:new o(-5)}],currencyRewards:[{name:"Graphite",amount:new o(25e3)}]},{id:"teslah",name:"Teslah (*)",flavorText:"Alternating Current... of creativity.",rarity:"opus",imagePath:"assets/sketches/teslah.jpg",stats:{maxHp:new o(1e100),attack:new o(7e6),attackSpeed:900,multiStrikeChance:new o(50)},rewards:[],currencyRewards:[]},{id:"trebuchet",name:"Trebuchet",flavorText:"The superior siege engine.",rarity:"rough",imagePath:"assets/sketches/trebuchet.jpg",stats:{maxHp:new o(15e5),attack:new o(5e4),attackSpeed:1e4,armor:new o(5e4),minDamage:new o(200),maxDamage:new o(2e4),armorPen:new o(50)},rewards:[{statName:"attack",amount:new o(25)},{statName:"maxDamage",amount:new o(.5)}],currencyRewards:[{name:"Charcoal",amount:new o(5e3)},{name:"Marker",amount:new o(3e3)}]},{id:"muddy_elemental",name:"Muddy Elemental",flavorText:"Over-blended into grey slop.",rarity:"scrap",imagePath:"assets/sketches/muddy_elemental.jpg",stats:{maxHp:new o(5e3),attack:new o(2500),attackSpeed:2500,absorb:new o(99.99),slowChance:new o(200),poisonChance:new o(1)},rewards:[{statName:"slowChance",amount:new o(.05)},{statName:"absorb",amount:new o(.025)}],currencyRewards:[{name:"Wax",amount:new o(1e4)},{name:"Marker",amount:new o(100)}]},{id:"napo",name:"Napo (*)",flavorText:"Exiled to the portfolio.",rarity:"opus",imagePath:"assets/sketches/napo.jpg",stats:{maxHp:new o(1e100),attack:new o(65e5),attackSpeed:1300},rewards:[]},{id:"charred_bust",name:"Charred Bust",flavorText:"Shading burned the marble.",rarity:"scrap",imagePath:"assets/sketches/charred_bust.jpg",stats:{maxHp:new o(5e5),attack:new o(1750),attackSpeed:1500,burnChance:new o(175),burnDamage:new o(1750),opacity:new o(75)},rewards:[{statName:"opacity",amount:new o(.1)},{statName:"attack",amount:new o(1.75)}],currencyRewards:[{name:"Graphite",amount:new o(12500)},{name:"Wax",amount:new o(12500)}]},{id:"injoker",name:"Injoker",flavorText:"So much ego in one sketch.",rarity:"framed",imagePath:"assets/sketches/injoker.jpg",stats:{maxHp:new o(2e7),attack:new o(5e5),armor:new o(1e8),attackSpeed:1100,hotPotatoChance:new o(1e4),bananaPeelChance:new o(700),freezeChance:new o(175),poisonChance:new o(75),hinderChance:new o(175),remedy:new o(2500),electrocuteChance:new o(175)},rewards:[{statName:"bananaPeelChance",amount:new o(.25)},{statName:"remedy",amount:new o(2.5)}],currencyRewards:[{name:"Charcoal",amount:new o(25e6)},{name:"Spray",amount:new o(1e4)}]},{id:"the_kiss",name:"The Kiss (*)",flavorText:"So much gold.",rarity:"masterpiece",imagePath:"assets/sketches/the_kiss.jpg",stats:{maxHp:new o(1e100),attack:new o(225e5),attackSpeed:4e3},rewards:[]},{id:"broken_astronaut",name:"Broken Astronaut",flavorText:"In space, no one can see you smudge.",rarity:"rough",imagePath:"assets/sketches/broken_astronaut.jpg",stats:{maxHp:new o(14e5),attack:new o(14e3),attackSpeed:800,armor:new o(14e4),lifesteal:new o(44),curseChance:new o(140)},rewards:[{statName:"lifesteal",amount:new o(.02)},{statName:"armor",amount:new o(22)}],currencyRewards:[{name:"Wax",amount:new o(44e3)},{name:"Ink",amount:new o(1400)}]},{id:"lead_goblet",name:"Lead Goblet",flavorText:"Glass shouldn't cast a shadow.",rarity:"scrap",imagePath:"assets/sketches/lead_goblet.jpg",stats:{maxHp:new o(6e5),attack:new o(5500),attackSpeed:900,frailtyChance:new o(300),armorPen:new o(300),armor:new o(3e3)},rewards:[{statName:"frailtyChance",amount:new o(.03)},{statName:"armorPen",amount:new o(30)}],currencyRewards:[{name:"Charcoal",amount:new o(3e3)},{name:"Acrylic",amount:new o(3)}]},{id:"el_viz",name:"El Viz (*)",flavorText:"A little less conversation, a little more action lines.",rarity:"opus",imagePath:"assets/sketches/el_viz.jpg",stats:{maxHp:new o(1e100),attack:new o(8e6),attackSpeed:1200},rewards:[],currencyRewards:[]},{id:"tiny_head_titan",name:"Tiny-Head Titan",flavorText:"All brawn, 1% brain.",rarity:"scrap",imagePath:"assets/sketches/tiny-head_titan.jpg",stats:{maxHp:new o(1e6),attack:new o(15e4),attackSpeed:3e3,execute:new o(2e3)},rewards:[{statName:"execute",amount:new o(3)},{statName:"attack",amount:new o(30)}],currencyRewards:[{name:"Wax",amount:new o(3e4)},{name:"Ink",amount:new o(300)}]},{id:"negative_void",name:"Negative Void",flavorText:"Defined by what isn't there.",rarity:"rough",imagePath:"assets/sketches/negative_void.jpg",stats:{maxHp:new o(4e6),attack:new o(8e4),attackSpeed:888,dodge:new o(80),freezeChance:new o(800),hinderChance:new o(800),glancingBlow:new o(80)},rewards:[{statName:"freezeChance",amount:new o(.08)},{statName:"glancingBlow",amount:new o(.08)}],currencyRewards:[{name:"Wax",amount:new o(8e4)},{name:"Charcoal",amount:new o(8e4)}]},{id:"accessory_assassin",name:"Accessory Assassin",flavorText:"Pouches hiding poor anatomy.",rarity:"scrap",imagePath:"assets/sketches/accessory_assassin.jpg",stats:{maxHp:new o(25e5),attack:new o(2500),attackSpeed:250,dodge:new o(25),critChance:new o(25),critDmg:new o(250),bleedChance:new o(25),poisonChance:new o(25),remedy:new o(25)},rewards:[{statName:"attack",amount:new o(10)},{statName:"remedy",amount:new o(1)}],currencyRewards:[{name:"Coffee",amount:new o(250)},{name:"Marker",amount:new o(150)}]},{id:"water_mark_twain",name:"Watermark Twain (*)",flavorText:"The reports of my erasure are greatly exaggerated.",rarity:"opus",imagePath:"assets/sketches/water_mark_twain.jpg",stats:{maxHp:new o(1e100),attack:new o(68e5),attackSpeed:1300},rewards:[]},{id:"hyper_focus_eye",name:"Hyper-Focus Eye",flavorText:"Spent 10 hours on the pupil.",rarity:"scrap",imagePath:"assets/sketches/hyper_focus_eye.jpg",stats:{maxHp:new o(9e5),attack:new o(900),attackSpeed:900,hypnotizeChance:new o(6e3),glancingBlow:new o(90),regen:new o(9e3)},rewards:[{statName:"regen",amount:new o(90)},{statName:"glancingBlow",amount:new o(.09)}],currencyRewards:[{name:"Marker",amount:new o(900)},{name:"Acrylic",amount:new o(9)}]},{id:"girl_with_a_pearl_earring",name:"Girl with a Pearl Earring (*)",flavorText:"She's looking at you.",rarity:"masterpiece",imagePath:"assets/sketches/girl_with_a_pearl_earring.jpg",stats:{maxHp:new o(1e100),attack:new o(125e5),attackSpeed:2e3},rewards:[]},{id:"mismatched_reflection",name:"Mismatched Reflection",flavorText:"Physics left the room.",rarity:"scrap",imagePath:"assets/sketches/mismatched_reflection.jpg",stats:{maxHp:new o(2e6),attack:new o(5e4),attackSpeed:5e3,parry:new o(50),parryDmg:new o(25),counter:new o(50)},rewards:[{statName:"parry",amount:new o(.1)},{statName:"parryDmg",amount:new o(.1)}],currencyRewards:[{name:"Graphite",amount:new o(25e3)},{name:"Coffee",amount:new o(500)}]},{id:"steam_locomotive",name:"Steam Locomotive",flavorText:"Unstoppable momentum.",rarity:"rough",imagePath:"assets/sketches/steam_locomotive.jpg",stats:{maxHp:new o(5e6),attack:new o(1500),attackSpeed:1500,armor:new o(5e5),burnChance:new o(500),burnDamage:new o(500)},rewards:[{statName:"burnDamage",amount:new o(10)},{statName:"armor",amount:new o(50)}],currencyRewards:[{name:"Wax",amount:new o(5e5)},{name:"Charcoal",amount:new o(1e5)}]},{id:"cracked_egg",name:"Cracked Egg",flavorText:"Not quite ready to hatch.",rarity:"scrap",imagePath:"assets/sketches/cracked_egg.jpg",stats:{maxHp:new o(2e6),attack:new o(25e3),attackSpeed:2e3,armor:new o(5e4),regen:new o(5e4),poisonChance:new o(500)},rewards:[{statName:"poisonChance",amount:new o(.025)},{statName:"regen",amount:new o(50)}],currencyRewards:[{name:"Wax",amount:new o(25e3)},{name:"Ink",amount:new o(500)}]},{id:"erased_face",name:"Erased Face",flavorText:"Identity removed by force.",rarity:"rough",imagePath:"assets/sketches/erased_face.jpg",stats:{maxHp:new o(5e6),attack:new o(6e4),attackSpeed:2600,parry:new o(26),parryDmg:new o(60),bananaPeelChance:new o(2600),remedy:new o(600)},rewards:[{statName:"remedy",amount:new o(.6)},{statName:"attack",amount:new o(60)}],currencyRewards:[{name:"Charcoal",amount:new o(12e4)},{name:"Acrylic",amount:new o(60)}]},{id:"paper_airplane",name:"Paper Airplane",flavorText:"Aerodynamics are overrated.",rarity:"scrap",imagePath:"assets/sketches/paper_airplane.jpg",stats:{maxHp:new o(35e5),attack:new o(35e3),attackSpeed:350,dodge:new o(35),accuracy:new o(35),hasteChance:new o(350)},rewards:[{statName:"accuracy",amount:new o(.035)},{statName:"hasteChance",amount:new o(.035)}],currencyRewards:[{name:"Charcoal",amount:new o(3500)},{name:"Marker",amount:new o(350)}]},{id:"abe_linkin",name:"Abe Linkin (*)",flavorText:"Four scores and seven sketches ago.",rarity:"opus",imagePath:"assets/sketches/abe_linkin.jpg",stats:{maxHp:new o(1e100),attack:new o(55e5),attackSpeed:1500},rewards:[],currencyRewards:[]},{id:"soda_tab",name:"Soda Tab",flavorText:"Armor for a mouse.",rarity:"scrap",imagePath:"assets/sketches/soda_tab.jpg",stats:{maxHp:new o(2e6),attack:new o(2e5),attackSpeed:2e3,armor:new o(2e5),counter:new o(20),absorb:new o(20)},rewards:[{statName:"attack",amount:new o(20)},{statName:"armor",amount:new o(40)}],currencyRewards:[{name:"Charcoal",amount:new o(5e3)},{name:"Ink",amount:new o(800)}]},{id:"sephi_rough",name:"Sephi-rough",flavorText:"That sword doesn't even fit.",rarity:"framed",imagePath:"assets/sketches/sephi_rough.jpg",stats:{maxHp:new o(1e9),attack:new o(4e5),attackSpeed:1800,critChance:new o(60),critDmg:new o(700),lifesteal:new o(80),blockChance:new o(40),blockAmount:new o(4e6)},rewards:[{statName:"critChance",amount:new o(.05)},{statName:"attackSpeed",amount:new o(-5)}],currencyRewards:[{name:"Marker",amount:new o(4e7)},{name:"Acrylic",amount:new o(4e6)}]},{id:"cool_s",name:"Cool S",flavorText:"Universal language of boredom.",rarity:"scrap",imagePath:"assets/sketches/cool_s.jpg",stats:{maxHp:new o(75e4),attack:new o(75e3),attackSpeed:750,critChance:new o(75),critDmg:new o(750),freezeChance:new o(750),multiStrikeChance:new o(75)},rewards:[{statName:"critChance",amount:new o(.1)},{statName:"critDmg",amount:new o(.75)}],currencyRewards:[{name:"Wax",amount:new o(75e3)},{name:"Marker",amount:new o(750)}]},{id:"iron_anvil",name:"Iron Anvil",flavorText:"Forged in heavy lines.",rarity:"rough",imagePath:"assets/sketches/iron_anvil.jpg",stats:{maxHp:new o(1e7),attack:new o(5e4),attackSpeed:6e3,critChance:new o(90),critDmg:new o(900),armorPen:new o(100),armor:new o(2e5),absorb:new o(80)},rewards:[{statName:"armor",amount:new o(200)},{statName:"absorb",amount:new o(.02)}],currencyRewards:[{name:"Charcoal",amount:new o(5e5)}]},{id:"cleopattern",name:"Cleopattern (*)",flavorText:"Queen of the Lines.",rarity:"opus",imagePath:"assets/sketches/cleopattern.jpg",stats:{maxHp:new o(1e100),attack:new o(45e5),attackSpeed:800,hypnotizeChance:new o(1e3)},rewards:[],currencyRewards:[]},{id:"dark_shader",name:"Dark Shader",flavorText:"I find your lack of contrast disturbing.",rarity:"framed",imagePath:"assets/sketches/dark_shader.jpg",stats:{maxHp:new o(25e7),attack:new o(25e5),attackSpeed:2500,hinderChance:new o(2500),slowChance:new o(2500),armor:new o(25e5),armorPen:new o(25e5),brittleChance:new o(250)},rewards:[{statName:"armor",amount:new o(2500)},{statName:"armorPen",amount:new o(2500)}],currencyRewards:[{name:"Wax",amount:new o(25e6)},{name:"Acrylic",amount:new o(25e5)}]},{id:"wobbly_stool",name:"Wobbly Stool",flavorText:"Unstable foundation.",rarity:"scrap",imagePath:"assets/sketches/wobbly_stool.jpg",stats:{maxHp:new o(3e6),attack:new o(3e5),attackSpeed:3e3,hinderChance:new o(300),multiStrikeChance:new o(200),slowChance:new o(300),maxDamage:new o(300)},rewards:[{statName:"multiStrikeChance",amount:new o(.03)},{statName:"slowChance",amount:new o(.03)}],currencyRewards:[{name:"Charcoal",amount:new o(3e3)},{name:"Acrylic",amount:new o(15)}]},{id:"edgar_allan_stroke",name:"Edgar Raven (*)",flavorText:'Quoth the raven, "Erase no more."',rarity:"opus",imagePath:"assets/sketches/edgar_allan_stroke.jpg",stats:{maxHp:new o(1e100),attack:new o(61e5),attackSpeed:1400},rewards:[]},{id:"loading_bar",name:"Loading Bar",flavorText:"Stuck at 99%.",rarity:"scrap",imagePath:"assets/sketches/loading_bar.jpg",stats:{maxHp:new o(999e4),attack:new o(99990),attackSpeed:999,hinderChance:new o(999),opacity:new o(99),slowChance:new o(999),glancingBlow:new o(99)},rewards:[{statName:"hinderChance",amount:new o(.09)},{statName:"opacity",amount:new o(.09)}],currencyRewards:[{name:"Wax",amount:new o(99999)},{name:"Ink",amount:new o(999)}]},{id:"poison_dart_frog",name:"Poison Dart Frog",flavorText:"It also knows martial arts.",rarity:"rough",imagePath:"assets/sketches/poison_dart_frog.jpg",stats:{maxHp:new o(10),dodge:new o(99),parry:new o(90),parryDmg:new o(10),attack:new o(1e4),attackSpeed:1200,accuracy:new o(90),poisonChance:new o(900)},rewards:[{statName:"accuracy",amount:new o(.03)},{statName:"poisonChance",amount:new o(.01)}],currencyRewards:[{name:"Coffee",amount:new o(12e4)},{name:"Spray",amount:new o(10)}]},{id:"goukuh",name:"Goukuh",flavorText:"Power level over 9000 strokes.",rarity:"framed",imagePath:"assets/sketches/goukuh.jpg",stats:{maxHp:new o(75e7),attack:new o(5e4),attackSpeed:2500,inspirationChance:new o(1e3),dodge:new o(50),energyWaveChance:new o(1e3),blockChance:new o(50),blockAmount:new o(25e6),regen:new o(1e6)},rewards:[{statName:"inspirationChance",amount:new o(.25)},{statName:"energyWaveChance",amount:new o(.1)}],currencyRewards:[{name:"Ink",amount:new o(9e7)},{name:"Acrylic",amount:new o(9e6)}]},{id:"melted_candle",name:"Melted Candle",flavorText:"Burning at both ends.",rarity:"scrap",imagePath:"assets/sketches/melted_candle.jpg",stats:{maxHp:new o(5e6),attack:new o(7e4),absorb:new o(90),attackSpeed:2800,burnChance:new o(45),burnDamage:new o(7e4)},rewards:[{statName:"burnChance",amount:new o(.07)},{statName:"burnDamage",amount:new o(7)}],currencyRewards:[{name:"Charcoal",amount:new o(7e3)},{name:"Acrylic",amount:new o(7)}]},{id:"petrified_heart",name:"Petrified Heart",flavorText:"No blood, only dust.",rarity:"rough",imagePath:"assets/sketches/petrified_heart.jpg",stats:{maxHp:new o(33e6),attack:new o(33e4),attackSpeed:3300,armor:new o(33e4),regen:new o(33e4),absorb:new o(33),opacity:new o(33)},rewards:[{statName:"maxHp",amount:new o(330)},{statName:"regen",amount:new o(330)}],currencyRewards:[{name:"Graphite",amount:new o(33e3)},{name:"Acrylic",amount:new o(33)}]},{id:"bent_nail",name:"Bent Nail",flavorText:"Hammered wrong.",rarity:"scrap",imagePath:"assets/sketches/bent_nail.jpg",stats:{maxHp:new o(48e5),attack:new o(12e4),attackSpeed:1200,dodge:new o(70),bleedChance:new o(180)},rewards:[{statName:"maxHp",amount:new o(250)},{statName:"attack",amount:new o(25)}],currencyRewards:[{name:"Coffee",amount:new o(700)},{name:"Acrylic",amount:new o(12)}]},{id:"free_draw_kahlo",name:"Freedraw Kahlo (*)",flavorText:"Self-portraits are the highest form of critique.",rarity:"opus",imagePath:"assets/sketches/free_draw_kahlo.jpg",stats:{maxHp:new o(1e100),attack:new o(63e5),attackSpeed:1200},rewards:[]},{id:"torn_page",name:"Torn Page",flavorText:"Half the story is missing.",rarity:"scrap",imagePath:"assets/sketches/torn_page.jpg",stats:{maxHp:new o(8e6),attack:new o(2e5),attackSpeed:1500,dodge:new o(60),multiStrikeChance:new o(75),remedy:new o(100)},rewards:[{statName:"remedy",amount:new o(.5)},{statName:"multiStrikeChance",amount:new o(.02)}],currencyRewards:[{name:"Graphite",amount:new o(5e4)},{name:"Wax",amount:new o(1e5)}]},{id:"leaking_pen",name:"Leaking Pen",flavorText:"A messy casualty.",rarity:"scrap",imagePath:"assets/sketches/leaking_pen.jpg",stats:{maxHp:new o(18e6),attack:new o(3e3),attackSpeed:600,armor:new o(6e5),poisonChance:new o(300),plagueChance:new o(12e3)},rewards:[{statName:"plagueChance",amount:new o(.05)},{statName:"armor",amount:new o(50)}],currencyRewards:[{name:"Ink",amount:new o(1200)}]},{id:"the_thinker",name:"The Thinker (*)",flavorText:"I sketch, therefore I am.",rarity:"masterpiece",imagePath:"assets/sketches/the_thinker.jpg",stats:{maxHp:new o(1e100),attack:new o(8e6),attackSpeed:3e3,critChance:new o(100),critDmg:new o(500)},rewards:[],currencyRewards:[]},{id:"loose_button",name:"Loose Button",flavorText:"Holding it all together.",rarity:"scrap",imagePath:"assets/sketches/loose_button.jpg",stats:{maxHp:new o(15e6),attack:new o(5e5),attackSpeed:2500,blockChance:new o(90),blockAmount:new o(15e5)},rewards:[{statName:"maxHp",amount:new o(100)},{statName:"blockAmount",amount:new o(100)}],currencyRewards:[{name:"Charcoal",amount:new o(2e4)},{name:"Acrylic",amount:new o(20)}]},{id:"lonk",name:"Lonk",flavorText:"It's dangerous to draw alone.",rarity:"framed",imagePath:"assets/sketches/lonk.jpg",stats:{maxHp:new o(8e8),attack:new o(125e3),attackSpeed:3e3,blockChance:new o(40),blockAmount:new o(1e7),hasteChance:new o(5e3),slowChance:new o(500),bananaPeelChance:new o(500),regen:new o(2e6),inspirationChance:new o(500)},rewards:[{statName:"slowChance",amount:new o(.15)},{statName:"blockAmount",amount:new o(2e3)}],currencyRewards:[{name:"Coffee",amount:new o(125e5)},{name:"Spray",amount:new o(12500)}]},{id:"broken_spectacles",name:"Broken Spectacles",flavorText:"Blurry vision.",rarity:"scrap",imagePath:"assets/sketches/broken_spectacles.jpg",stats:{maxHp:new o(2e7),attack:new o(2e5),attackSpeed:1e3,critChance:new o(15),critDmg:new o(1500),hinderChance:new o(750),frailtyChance:new o(500)},rewards:[{statName:"hinderChance",amount:new o(.1)},{statName:"frailtyChance",amount:new o(.05)}],currencyRewards:[{name:"Graphite",amount:new o(4e4)},{name:"Marker",amount:new o(1e3)}]},{id:"ceezar",name:"Ceezar (*)",flavorText:"Et tu, Brushte?",rarity:"opus",imagePath:"assets/sketches/ceezar.jpg",stats:{maxHp:new o(1e100),attack:new o(6e6),attackSpeed:1e3},rewards:[],currencyRewards:[]},{id:"spiked_shield",name:"Spiked Shield",flavorText:"Defense is the best offense.",rarity:"rough",imagePath:"assets/sketches/spiked_shield.jpg",stats:{maxHp:new o(5e7),attack:new o(2e5),attackSpeed:2e3,armor:new o(1e6),blockChance:new o(75),blockAmount:new o(5e6),counter:new o(50),thornsChance:new o(5e3)},rewards:[{statName:"counter",amount:new o(.2)},{statName:"blockChance",amount:new o(.2)}],currencyRewards:[{name:"Charcoal",amount:new o(5e5)},{name:"Marker",amount:new o(5e4)}]},{id:"tangled_earbuds",name:"Tangled Earbuds",flavorText:"The pocket dimension knot.",rarity:"scrap",imagePath:"assets/sketches/tangled_earbuds.jpg",stats:{maxHp:new o(3e7),attack:new o(1e5),attackSpeed:600,hinderChance:new o(3e3),slowChance:new o(300),hypnotizeChance:new o(1500)},rewards:[{statName:"hinderChance",amount:new o(.15)},{statName:"hypnotizeChance",amount:new o(.06)}],currencyRewards:[{name:"Charcoal",amount:new o(3e4)},{name:"Marker",amount:new o(1300)}]},{id:"wolly",name:"Wolly",flavorText:"Compacting the wastebasket.",rarity:"framed",imagePath:"assets/sketches/wolly.jpg",stats:{maxHp:new o(1e9),attack:new o(15e5),attackSpeed:2e3,armor:new o(1e7),regen:new o(2e6)},rewards:[{statName:"armor",amount:new o(2e3)},{statName:"regen",amount:new o(2e3)}],currencyRewards:[{name:"Wax",amount:new o(1e8)},{name:"Marker",amount:new o(1e8)}]},{id:"burnt_match",name:"Burnt Match",flavorText:"One hit wonder.",rarity:"scrap",imagePath:"assets/sketches/burnt_match.jpg",stats:{maxHp:new o(4e7),attack:new o(4e4),attackSpeed:800,burnChance:new o(80),burnDamage:new o(8e3),execute:new o(800)},rewards:[{statName:"burnChance",amount:new o(.02)},{statName:"burnDamage",amount:new o(12)}],currencyRewards:[{name:"Charcoal",amount:new o(4e4)},{name:"Coffee",amount:new o(800)}]},{id:"mimic_chest",name:"Mimic Chest",flavorText:"The loot bites back.",rarity:"rough",imagePath:"assets/sketches/mimic_chest.jpg",stats:{maxHp:new o(5e7),attack:new o(125e3),attackSpeed:1400,lifesteal:new o(50),counter:new o(100),frailtyChance:new o(1e3)},rewards:[{statName:"lifesteal",amount:new o(.02)},{statName:"frailtyChance",amount:new o(.05)}],currencyRewards:[{name:"Wax",amount:new o(4e6)},{name:"Spray",amount:new o(25)}]},{id:"eraser_dust_bunny",name:"Eraser Dust Bunny",flavorText:"Made of mistakes.",rarity:"scrap",imagePath:"assets/sketches/eraser_dust_bunny.jpg",stats:{maxHp:new o(3e7),attack:new o(3e5),attackSpeed:3e3,regen:new o(15e4),glancingBlow:new o(75),hasteChance:new o(7500)},rewards:[{statName:"attack",amount:new o(30)},{statName:"hasteChance",amount:new o(.03)}],currencyRewards:[{name:"Wax",amount:new o(75e3)},{name:"Coffee",amount:new o(2500)}]},{id:"railgun_turret",name:"Railgun Turret",flavorText:"Heavy industrial perspective.",rarity:"rough",imagePath:"assets/sketches/railgun_turret.jpg",stats:{maxHp:new o(555e5),attack:new o(55500),attackSpeed:555,armor:new o(555e3),multiStrikeChance:new o(555),armorPen:new o(55500)},rewards:[{statName:"multiStrikeChance",amount:new o(.0555)},{statName:"armorPen",amount:new o(555)}],currencyRewards:[{name:"Graphite",amount:new o(55555)},{name:"Acrylic",amount:new o(555)}]},{id:"grid_locked_face",name:"Grid-Locked Face",flavorText:"Trapped by construction lines.",rarity:"scrap",imagePath:"assets/sketches/grid-locked_face.jpg",stats:{maxHp:new o(5e7),attack:new o(2e5),attackSpeed:1500,critChance:new o(25),critDmg:new o(250),execute:new o(250),hinderChance:new o(250)},rewards:[{statName:"critDmg",amount:new o(1.5)},{statName:"hinderChance",amount:new o(.1)}],currencyRewards:[{name:"Wax",amount:new o(125e3)},{name:"Marker",amount:new o(2500)}]},{id:"alburt",name:"Alburt (*)",flavorText:"Relatively difficult to draw.",rarity:"opus",imagePath:"assets/sketches/alburt.jpg",stats:{maxHp:new o(1e100),attack:new o(75e5),attackSpeed:1600},rewards:[]},{id:"haunted_metronome",name:"Haunted Metronome",flavorText:"Keeping time for the dead.",rarity:"rough",imagePath:"assets/sketches/haunted_metronome.jpg",stats:{maxHp:new o(8e7),attack:new o(2e5),attackSpeed:400,hasteChance:new o(200),accuracy:new o(100)},rewards:[{statName:"attackSpeed",amount:new o(-8)},{statName:"accuracy",amount:new o(.04)}],currencyRewards:[{name:"Coffee",amount:new o(2e5)},{name:"Ink",amount:new o(8e4)}]},{id:"scratch_plate_sentinel",name:"Scratch-Plate Sentinel",flavorText:"Armor forged from scribbles.",rarity:"scrap",imagePath:"assets/sketches/scratch-plate_sentinel.jpg",stats:{maxHp:new o(5e7),attack:new o(1e5),attackSpeed:1500,armor:new o(1e6),blockChance:new o(80),blockAmount:new o(8e7),lifesteal:new o(20)},rewards:[{statName:"maxHp",amount:new o(500)},{statName:"blockAmount",amount:new o(400)}],currencyRewards:[{name:"Charcoal",amount:new o(5e4)},{name:"Marker",amount:new o(3e3)}]},{id:"demon_hand",name:"Demon Hand",flavorText:"Contrast between claw and glass.",rarity:"rough",imagePath:"assets/sketches/demon_hand.jpg",stats:{maxHp:new o(666e6),attack:new o(666e3),attackSpeed:6660,curseChance:new o(666),absorb:new o(66.6)},rewards:[{statName:"absorb",amount:new o(.0666)},{statName:"curseChance",amount:new o(.666)}],currencyRewards:[{name:"Acrylic",amount:new o(666)},{name:"Spray",amount:new o(66.6)}]},{id:"joan_of_art",name:"Joan of Art (*)",flavorText:"Burned at the stake, or heavily shaded?",rarity:"opus",imagePath:"assets/sketches/joan_of_art.jpg",stats:{maxHp:new o(1e100),attack:new o(7e6),attackSpeed:1200},rewards:[]},{id:"mirror_twin",name:"Mirror Twin",flavorText:"Nature isn't this perfect.",rarity:"scrap",imagePath:"assets/sketches/mirror_twin.jpg",stats:{maxHp:new o(16e7),attack:new o(24e4),attackSpeed:1600,remedy:new o(1600),counter:new o(64),parry:new o(16),parryDmg:new o(32)},rewards:[{statName:"attack",amount:new o(32)},{statName:"remedy",amount:new o(.64)}],currencyRewards:[{name:"Spray",amount:new o(3.2)},{name:"Marker",amount:new o(3200)}]},{id:"plumber",name:"Plumber",flavorText:"Princess is in another sketchbook.",rarity:"framed",imagePath:"assets/sketches/plumber.jpg",stats:{maxHp:new o(3e9),attack:new o(3e6),attackSpeed:3e3,leapChance:new o(3e3),burnChance:new o(30),burnDamage:new o(3e6),hinderChance:new o(30),multiStrikeChance:new o(300)},rewards:[{statName:"maxHp",amount:new o(3e3)},{statName:"leapChance",amount:new o(3)}],currencyRewards:[{name:"Charcoal",amount:new o(3e8)},{name:"Spray",amount:new o(3e4)}]},{id:"burnished_wyvern",name:"Burnished Wyvern",flavorText:"Scales on scales on scales.",rarity:"rough",imagePath:"assets/sketches/burnished_wyvern.jpg",stats:{maxHp:new o(5e8),attack:new o(5e4),attackSpeed:1e3,burnChance:new o(15),burnDamage:new o(15e4),armor:new o(75e4),thornsChance:new o(75e4)},rewards:[{statName:"armor",amount:new o(750)},{statName:"thornsChance",amount:new o(.5)}],currencyRewards:[{name:"Charcoal",amount:new o(15e5)},{name:"Acrylic",amount:new o(2500)}]},{id:"lash_bug_eye",name:"Lash-Bug Eye",flavorText:"Spiders on the eyelids.",rarity:"scrap",imagePath:"assets/sketches/lash-bug_eye.jpg",stats:{maxHp:new o(2e8),attack:new o(2e5),attackSpeed:1e3,plagueChance:new o(1200),hypnotizeChance:new o(900),blackFlameChance:new o(24)},rewards:[{statName:"plagueChance",amount:new o(.06)},{statName:"hypnotizeChance",amount:new o(.06)}],currencyRewards:[{name:"Marker",amount:new o(5e3)},{name:"Acrylic",amount:new o(120)}]},{id:"stipplin_hawking",name:"Stipplin' Hawking (*)",flavorText:"A brief history of lines.",rarity:"opus",imagePath:"assets/sketches/stipplin_hawking.jpg",stats:{maxHp:new o(1e100),attack:new o(78e5),attackSpeed:2e3},rewards:[]},{id:"starry_night",name:"Starry Night (*)",flavorText:"The sky is moving.",rarity:"masterpiece",imagePath:"assets/sketches/starry_night.jpg",stats:{maxHp:new o(1e100),attack:new o(3e6),attackSpeed:800},rewards:[]},{id:"kreytoes",name:"Kreytoes",flavorText:"BOY. Hand me that eraser.",rarity:"framed",imagePath:"assets/sketches/kreytoes.jpg",stats:{maxHp:new o(9e9),attack:new o(2e6),attackSpeed:1200,armor:new o(9e6),execute:new o(1200),blockChance:new o(70),blockAmount:new o(9e7),frailtyChance:new o(100),brittleChance:new o(100),hasteChance:new o(1200)},rewards:[{statName:"execute",amount:new o(9)},{statName:"brittleChance",amount:new o(.3)}],currencyRewards:[{name:"Coffee",amount:new o(9e8)},{name:"Ink",amount:new o(9e8)}]},{id:"cursed_marionette",name:"Cursed Marionette",flavorText:"Who is pulling the strings?",rarity:"rough",imagePath:"assets/sketches/cursed_marionette.jpg",stats:{maxHp:new o(45e7),attack:new o(225e3),attackSpeed:500,dodge:new o(25),curseChance:new o(75),plagueChance:new o(45),bleedChance:new o(35)},rewards:[{statName:"curseChance",amount:new o(.1)},{statName:"attack",amount:new o(45)}],currencyRewards:[{name:"Acrylic",amount:new o(1e4)},{name:"Spray",amount:new o(450)}]},{id:"graphite_glare",name:"Graphite Glare",flavorText:"Pressed so hard it reflects light.",rarity:"scrap",imagePath:"assets/sketches/graphite_glare.jpg",stats:{maxHp:new o(5e8),attack:new o(12e5),attackSpeed:4e3,execute:new o(400),armor:new o(2e6),blockChance:new o(40),blockAmount:new o(4e7),regen:new o(2e5)},rewards:[{statName:"armor",amount:new o(400)},{statName:"blockChance",amount:new o(.2)}],currencyRewards:[{name:"Graphite",amount:new o(5e5)},{name:"Charcoal",amount:new o(75e3)}]},{id:"mariline",name:"Mariline (*)",flavorText:"Wind-blown graphite.",rarity:"opus",imagePath:"assets/sketches/mariline.jpg",stats:{maxHp:new o(1e100),attack:new o(52e5),attackSpeed:900},rewards:[]},{id:"sharper",name:"Sharper",flavorText:"Reshaping the Atlas.",rarity:"framed",imagePath:"assets/sketches/sharper.jpg",stats:{maxHp:new o(12e9),attack:new o(38e5),attackSpeed:1400,curseChance:new o(300),blackFlameChance:new o(75),burnChance:new o(75),burnDamage:new o(1e6),varnish:new o(25),dodge:new o(40)},rewards:[{statName:"curseChance",amount:new o(.25)},{statName:"burnChance",amount:new o(.25)}],currencyRewards:[{name:"Spray",amount:new o(2e5)},{name:"Photon",amount:new o(100)}]},{id:"persistence_of_memory",name:"Persistence of Memory (*)",flavorText:"Time is melting.",rarity:"masterpiece",imagePath:"assets/sketches/persistence_of_memory.jpg",stats:{maxHp:new o(1e100),attack:new o(15e6),attackSpeed:2500},rewards:[]},{id:"ominous_sphere",name:"Ominous Sphere",flavorText:"Perfectly shaded. Completely soulless.",rarity:"rough",imagePath:"assets/sketches/ominous_sphere.jpg",stats:{maxHp:new o(1e9),attack:new o(1e6),attackSpeed:1e3,armor:new o(1e7),blockChance:new o(31.4),blockAmount:new o(1e9),absorb:new o(31.4),counter:new o(31.4),balloonChance:new o(1e6)},rewards:[{statName:"absorb",amount:new o(.1)},{statName:"blockChance",amount:new o(1)}],currencyRewards:[{name:"Graphite",amount:new o(1e6)},{name:"Photon",amount:new o(10)}]},{id:"blunt_pencil",name:"Blunt Pencil",flavorText:"Refuses to make a sharp point.",rarity:"scrap",imagePath:"assets/sketches/blunt_pencil.jpg",stats:{maxHp:new o(15e8),attack:new o(5e6),attackSpeed:2500},rewards:[{statName:"attack",amount:new o(50)},{statName:"maxHp",amount:new o(1e3)}],currencyRewards:[{name:"Graphite",amount:new o(15e5)}]},{id:"hue_dini",name:"Huedini (*)",flavorText:"No boundary box can hold him.",rarity:"opus",imagePath:"assets/sketches/hue_dini.jpg",stats:{maxHp:new o(1e100),attack:new o(71e5),attackSpeed:850},rewards:[]},{id:"payne",name:"Payne",flavorText:"This world shall know Art.",rarity:"framed",imagePath:"assets/sketches/payne.jpg",stats:{maxHp:new o(6e10),attack:new o(6e5),attackSpeed:600,multiStrikeChance:new o(500),hypnotizeChance:new o(600),dodge:new o(60),varnish:new o(60),critChance:new o(60),critDmg:new o(600),goldenLuckChance:new o(60),goldenLuckDamage:new o(600)},rewards:[{statName:"goldenLuckChance",amount:new o(.6)},{statName:"goldenLuckDamage",amount:new o(6)}],currencyRewards:[{name:"Graphite",amount:new o(6e8)},{name:"Photon",amount:new o(600)}]},{id:"vinchy",name:"Vinchy (*)",flavorText:"The original sketch artist.",rarity:"opus",imagePath:"assets/sketches/vinchy.jpg",stats:{maxHp:new o(1e100),attack:new o(8e6),attackSpeed:1400},rewards:[]},{id:"mona_lisa",name:"Mona Lisa (*)",flavorText:"Her smile is unsettling.",rarity:"masterpiece",imagePath:"assets/sketches/mona_lisa.jpg",stats:{maxHp:new o(1e100),attack:new o(1e6),attackSpeed:3e3},rewards:[]}],Kt=Xe.reduce((t,r)=>(t[r.id]=r,t),{}),B0={rewardDecay:new o(1),deathRecovery:10,fleePenalty:5,timeAcceleration:1,lookahead:3,maxVictories:100,generatorMultiplier:1,autoStartOnRedraw:0,overkillMultiplier:0,meditationCooldownMax:1800,meditationRewardMax:.1,redrawCount:0,buyAllSkills:0,roughRarity:0,framedRarity:0,opusRarity:0,masterpieceRarity:0,roughSketches:0,framedSketches:0,opusSketches:0,masterpieceSketches:0,attackIncrease:0,hpIncrease:0,regenIncrease:0,armorIncrease:0,dodgeIncrease:0,minDamageIncrease:0,maxDamageIncrease:0,armorPenIncrease:0,lifestealIncrease:0,executeIncrease:0,blockChanceIncrease:0,blockAmountIncrease:0,accuracyIncrease:0,bleedChanceIncrease:0,plagueChanceIncrease:0,burnChanceIncrease:0,burnDamageIncrease:0,electrocuteChanceIncrease:0,curseChanceIncrease:0,absorbIncrease:0,irradiateChanceIncrease:0,speedCap:500,quintessenceGain:0,quintessencePinnacle:0,graphiteUpgradeCost:0,waxUpgradeCost:0,charcoalUpgradeCost:0,coffeeUpgradeCost:0,inkUpgradeCost:0,markerUpgradeCost:0,acrylicUpgradeCost:0,sprayUpgradeCost:0,photonUpgradeCost:0,goldLeafUpgradeCost:0,freeTools:0,autoEnableTools:0,preciseEraserUses:0,opusEraser:0,meditationGoldZoneBonus:0,meditationTealZoneBonus:0,meditationExtraSlots:0,attackDelay:0,graphiteRewardMultiplier:0,waxRewardMultiplier:0,charcoalRewardMultiplier:0,coffeeRewardMultiplier:0,inkRewardMultiplier:0,markerRewardMultiplier:0,acrylicRewardMultiplier:0,sprayRewardMultiplier:0,photonRewardMultiplier:0,goldLeafRewardMultiplier:0,graphiteRewardExponent:0,waxRewardExponent:0,charcoalRewardExponent:0,coffeeRewardExponent:0,inkRewardExponent:0,markerRewardExponent:0,acrylicRewardExponent:0,sprayRewardExponent:0,photonRewardExponent:0,goldLeafRewardExponent:0,graphiteGeneratorMultiplier:1,waxGeneratorMultiplier:1,charcoalGeneratorMultiplier:1,coffeeGeneratorMultiplier:1,inkGeneratorMultiplier:1,markerGeneratorMultiplier:1,acrylicGeneratorMultiplier:1,sprayGeneratorMultiplier:1,photonGeneratorMultiplier:1,goldLeafGeneratorMultiplier:1,waxConceptBoost:0,charcoalConceptBoost:0,coffeeConceptBoost:0,inkConceptBoost:0,markerConceptBoost:0,acrylicConceptBoost:0,sprayConceptBoost:0,photonConceptBoost:0,goldLeafConceptBoost:0},Dx=[{key:"rewardDecay",label:"Decay Factor",description:"Controls how fast rewards decay per victory. Reward for kill n = base / (1 + n  decay). Lower values mean slower decay and more total rewards.",format:"multiplier",category:"Core",alwaysVisible:!0},{key:"deathRecovery",label:"Death Recovery",description:"Wait time after defeat.",format:"seconds",category:"Core",alwaysVisible:!0},{key:"fleePenalty",label:"Flee Penalty",description:"Wait time after fleeing.",format:"seconds",category:"Core",alwaysVisible:!0},{key:"timeAcceleration",label:"Time Acceleration",description:"Global speed multiplier affecting everything including battle speed, currency generation, and conceptual synthesis. Works with offline gains.",format:"multiplier",category:"Core"},{key:"lookahead",label:"Lookahead",description:"Visible sketches ahead of last defeated sketch.",format:"count",category:"Core"},{key:"maxVictories",label:"Max Victories",description:"Victory limit per sketch.",format:"count",category:"Core"},{key:"generatorMultiplier",label:"Generator Power",description:"Multiplier for all currency generators.",format:"multiplier",category:"Core"},{key:"overkillMultiplier",label:"Overkill",description:"% of excess damage used to calculate how many extra victories are granted.",format:"percent_scaling",category:"Core"},{key:"freeTools",label:"Free Tools",description:"Tools unlocked on redraw, starting from top of tools list.",format:"count",category:"Core"},{key:"autoEnableTools",label:"Auto-Enable Tools",description:"Tools auto-enabled on redraw, starting from top of active protocols list.",format:"count",category:"Core"},{key:"preciseEraserUses",label:"Precise Eraser Uses",description:"Additional uses for the Precise Eraser.",format:"count",category:"Core"},{key:"opusEraser",label:"Opus Eraser",description:"Precise Eraser works on Opus rarity enemies.",format:"count",category:"Core"},{key:"redrawCount",label:"Redraws",description:"Total number of times you have redrawn the world.",format:"count",category:"Redraw"},{key:"meditationCooldownMax",label:"Meditation Cooldown",description:"Base cooldown duration before meditating again.",format:"seconds",category:"Core"},{key:"meditationRewardMax",label:"Meditation Reward",description:"Maximum stat percentage boost achievable via meditation.",format:"percent",category:"Core"},{key:"meditationGoldZoneBonus",label:"Meditation Gold Bonus",description:"Additional percentage granted when hitting the gold zone.",format:"percent",category:"Core"},{key:"meditationTealZoneBonus",label:"Meditation Teal Bonus",description:"Additional percentage granted when hitting the teal zone.",format:"percent",category:"Core"},{key:"meditationExtraSlots",label:"Meditation Zenmastery",description:"Extra meditation chances before a battle.",format:"count",category:"Core"},{key:"roughRarity",label:"Rough Rarity",description:"Chance for Rough rarity sketches to appear on Redraw. (Highly Recommended for Masterpiece Archive progression)",format:"percent_literal",category:"Rarity"},{key:"framedRarity",label:"Framed Rarity",description:"Chance for Framed rarity sketches to appear on Redraw.",format:"percent_literal",category:"Rarity"},{key:"opusRarity",label:"Opus Rarity",description:"Chance for Opus rarity sketches to appear on Redraw.",format:"percent_literal",category:"Rarity"},{key:"masterpieceRarity",label:"Masterpiece Rarity",description:"Chance for Masterpiece rarity sketches to appear on Redraw.",format:"percent_literal",category:"Rarity"},{key:"roughSketches",label:"Rough Expansion",description:"After accounting for rarity chances, adds extras that are not present in glossary order.",format:"count",category:"Rarity"},{key:"framedSketches",label:"Framed Expansion",description:"After accounting for rarity chances, adds extras that are not present in glossary order.",format:"count",category:"Rarity"},{key:"opusSketches",label:"Opus Expansion",description:"After accounting for rarity chances, adds extras that are not present in glossary order.",format:"count",category:"Rarity"},{key:"masterpieceSketches",label:"Masterpiece Expansion",description:"After accounting for rarity chances, adds extras that are not present in glossary order.",format:"count",category:"Rarity"},{key:"attackIncrease",label:"Attack Increase",description:"Bonus ATK percentage.",format:"percent",category:"Stats"},{key:"hpIncrease",label:"HP Increase",description:"Bonus HP percentage.",format:"percent",category:"Stats"},{key:"regenIncrease",label:"Regen Increase",description:"Bonus Regen percentage.",format:"percent",category:"Stats"},{key:"armorIncrease",label:"Armor Increase",description:"Bonus Armor percentage.",format:"percent",category:"Stats"},{key:"dodgeIncrease",label:"Dodge Increase",description:"Bonus Dodge percentage.",format:"percent",category:"Stats"},{key:"minDamageIncrease",label:"Min Damage Increase",description:"Bonus Min Damage percentage.",format:"percent",category:"Stats"},{key:"maxDamageIncrease",label:"Max Damage Increase",description:"Bonus Max Damage percentage.",format:"percent",category:"Stats"},{key:"armorPenIncrease",label:"Armor Pen Increase",description:"Bonus Armor Penetration percentage.",format:"percent",category:"Stats"},{key:"lifestealIncrease",label:"Lifesteal Increase",description:"Bonus Lifesteal percentage.",format:"percent",category:"Stats"},{key:"executeIncrease",label:"Execute Increase",description:"Bonus Execute percentage.",format:"percent",category:"Stats"},{key:"blockChanceIncrease",label:"Block Chance Increase",description:"Bonus Block Chance percentage.",format:"percent",category:"Stats"},{key:"blockAmountIncrease",label:"Block Amount Increase",description:"Bonus Block Amount percentage.",format:"percent",category:"Stats"},{key:"accuracyIncrease",label:"Accuracy Increase",description:"Bonus Accuracy percentage.",format:"percent",category:"Stats"},{key:"bleedChanceIncrease",label:"Bleed Increase",description:"Bonus Bleed Chance percentage.",format:"percent",category:"Stats"},{key:"plagueChanceIncrease",label:"Plague Increase",description:"Bonus Plague Chance percentage.",format:"percent",category:"Stats"},{key:"burnChanceIncrease",label:"Burn Chance Increase",description:"Bonus Burn Chance percentage.",format:"percent",category:"Stats"},{key:"burnDamageIncrease",label:"Burn Damage Increase",description:"Bonus Burn Damage percentage.",format:"percent",category:"Stats"},{key:"electrocuteChanceIncrease",label:"Electrocute Increase",description:"Bonus Electrocute Chance percentage.",format:"percent",category:"Stats"},{key:"curseChanceIncrease",label:"Curse Increase",description:"Bonus Curse Chance percentage.",format:"percent",category:"Stats"},{key:"absorbIncrease",label:"Absorb Increase",description:"Bonus Absorb percentage.",format:"percent",category:"Stats"},{key:"irradiateChanceIncrease",label:"Irradiate Increase",description:"Bonus Irradiate Chance percentage.",format:"percent",category:"Stats"},{key:"attackDelay",label:"Attack Speed Bonus",description:"Attack delay reduction.",format:"reduction",category:"Stats"},{key:"speedCap",label:"Speed Cap",description:"Minimum attack delay (ms).",format:"count",category:"Stats"},{key:"quintessenceGain",label:"Quintessence Gain",description:"Bonus Quintessence production for Graphite Concept in Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"quintessencePinnacle",label:"Quintessence Pinnacle",description:`Multiplies Pending Quintessence gain based on the number of sketches that have reached their Maximum Victories during the current Redraw cycle. Boosting your Max Victories limit also provides an exponential increase to this effect.

Formula: (1 + (Max Victories / 10000)) ^ (# of Maxed Sketches)`,format:"multiplier",category:"Redraw"},{key:"graphiteUpgradeCost",label:"Graphite Cost",description:"Graphite cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"waxUpgradeCost",label:"Wax Cost",description:"Wax cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"charcoalUpgradeCost",label:"Charcoal Cost",description:"Charcoal cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"coffeeUpgradeCost",label:"Coffee Cost",description:"Coffee cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"inkUpgradeCost",label:"Ink Cost",description:"Ink cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"markerUpgradeCost",label:"Marker Cost",description:"Marker cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"acrylicUpgradeCost",label:"Acrylic Cost",description:"Acrylic cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"sprayUpgradeCost",label:"Spray Cost",description:"Spray cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"photonUpgradeCost",label:"Photon Cost",description:"Photon cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"goldLeafUpgradeCost",label:"Gold Leaf Cost",description:"Gold Leaf cost reduction. Applies to both Tools and Stat Upgrades.",format:"reduction",category:"Economy"},{key:"graphiteRewardMultiplier",label:"Graphite Reward",description:"Graphite reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"waxRewardMultiplier",label:"Wax Reward",description:"Wax reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"charcoalRewardMultiplier",label:"Charcoal Reward",description:"Charcoal reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"coffeeRewardMultiplier",label:"Coffee Reward",description:"Coffee reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"inkRewardMultiplier",label:"Ink Reward",description:"Ink reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"markerRewardMultiplier",label:"Marker Reward",description:"Marker reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"acrylicRewardMultiplier",label:"Acrylic Reward",description:"Acrylic reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"sprayRewardMultiplier",label:"Spray Reward",description:"Spray reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"photonRewardMultiplier",label:"Photon Reward",description:"Photon reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"goldLeafRewardMultiplier",label:"Gold Leaf Reward",description:"Gold Leaf reward multiplier from defeating sketches.",format:"additive_multiplier",category:"Economy"},{key:"graphiteGeneratorMultiplier",label:"Graphite Overclock",description:"Multiplier for passive Graphite generation.",format:"multiplier",category:"Economy"},{key:"waxGeneratorMultiplier",label:"Wax Overclock",description:"Multiplier for passive Wax generation.",format:"multiplier",category:"Economy"},{key:"charcoalGeneratorMultiplier",label:"Charcoal Overclock",description:"Multiplier for passive Charcoal generation.",format:"multiplier",category:"Economy"},{key:"coffeeGeneratorMultiplier",label:"Coffee Overclock",description:"Multiplier for passive Coffee generation.",format:"multiplier",category:"Economy"},{key:"inkGeneratorMultiplier",label:"Ink Overclock",description:"Multiplier for passive Ink generation.",format:"multiplier",category:"Economy"},{key:"markerGeneratorMultiplier",label:"Marker Overclock",description:"Multiplier for passive Marker generation.",format:"multiplier",category:"Economy"},{key:"acrylicGeneratorMultiplier",label:"Acrylic Overclock",description:"Multiplier for passive Acrylic generation.",format:"multiplier",category:"Economy"},{key:"sprayGeneratorMultiplier",label:"Spray Overclock",description:"Multiplier for passive Spray generation.",format:"multiplier",category:"Economy"},{key:"photonGeneratorMultiplier",label:"Photon Overclock",description:"Multiplier for passive Photon generation.",format:"multiplier",category:"Economy"},{key:"goldLeafGeneratorMultiplier",label:"Gold Leaf Overclock",description:"Multiplier for passive Gold Leaf generation.",format:"multiplier",category:"Economy"},{key:"autoStartOnRedraw",label:"Auto-Challenge Redraw",description:"Automatically starts challenging the first available sketch after a Redraw.",format:"count",category:"Redraw"},{key:"graphiteRewardExponent",label:"Graphite Exponent",description:`Raises Graphite rewards to an exponential power. Applies after Graphite Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"waxRewardExponent",label:"Wax Exponent",description:`Raises Wax rewards to an exponential power. Applies after Wax Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"charcoalRewardExponent",label:"Charcoal Exponent",description:`Raises Charcoal rewards to an exponential power. Applies after Charcoal Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"coffeeRewardExponent",label:"Coffee Exponent",description:`Raises Coffee rewards to an exponential power. Applies after Coffee Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"inkRewardExponent",label:"Ink Exponent",description:`Raises Ink rewards to an exponential power. Applies after Ink Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"markerRewardExponent",label:"Marker Exponent",description:`Raises Marker rewards to an exponential power. Applies after Marker Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"acrylicRewardExponent",label:"Acrylic Exponent",description:`Raises Acrylic rewards to an exponential power. Applies after Acrylic Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"sprayRewardExponent",label:"Spray Exponent",description:`Raises Spray rewards to an exponential power. Applies after Spray Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"photonRewardExponent",label:"Photon Exponent",description:`Raises Photon rewards to an exponential power. Applies after Photon Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"goldLeafRewardExponent",label:"Gold Leaf Exponent",description:`Raises Gold Leaf rewards to an exponential power. Applies after Gold Leaf Reward multiplier. 

Formula: Reward ^ (1 + (Level/100))`,format:"exponent",category:"Economy"},{key:"waxConceptBoost",label:"Wax Concept Boost",description:"Multiplier for Wax Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"charcoalConceptBoost",label:"Charcoal Concept Boost",description:"Multiplier for Charcoal Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"coffeeConceptBoost",label:"Coffee Concept Boost",description:"Multiplier for Coffee Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"inkConceptBoost",label:"Ink Concept Boost",description:"Multiplier for Ink Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"markerConceptBoost",label:"Marker Concept Boost",description:"Multiplier for Marker Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"acrylicConceptBoost",label:"Acrylic Concept Boost",description:"Multiplier for Acrylic Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"sprayConceptBoost",label:"Spray Concept Boost",description:"Multiplier for Spray Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"photonConceptBoost",label:"Photon Concept Boost",description:"Multiplier for Photon Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"goldLeafConceptBoost",label:"Gold Leaf Concept Boost",description:"Multiplier for Gold Leaf Concept production in the Conceptual Synthesizer.",format:"additive_multiplier",category:"Redraw"},{key:"buyAllSkills",label:"Leeroy Study",description:"Enables the ability to buy all affordable skills at once.",format:"count",category:"Economy"}],hk={rarities:{bg:"bg-amber-50 dark:bg-amber-950/20",border:"border-amber-400 dark:border-amber-800",accent:"text-amber-600 dark:text-amber-400"},stats:{bg:"bg-emerald-50 dark:bg-emerald-950/20",border:"border-emerald-400 dark:border-emerald-800",accent:"text-emerald-600 dark:text-emerald-400"},shop:{bg:"bg-teal-50 dark:bg-teal-950/20",border:"border-teal-500 dark:border-teal-800",accent:"text-teal-700 dark:text-teal-400"},archive:{bg:"bg-indigo-50 dark:bg-indigo-950/20",border:"border-indigo-400 dark:border-indigo-800",accent:"text-indigo-600 dark:text-indigo-400"},fundamentals:{bg:"bg-rose-50 dark:bg-rose-950/20",border:"border-rose-400 dark:border-rose-800",accent:"text-rose-600 dark:text-rose-400"}},Ya=[{id:"root",name:"Rough Beginnings",description:"+1% Rough rarity chance",maxLevel:90,effectPerLevel:1,effectType:"ROUGH_CHANCE",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1),costMultiplier:new o(10),parentId:null,category:"rarities",position:{x:0,y:0}},{id:"stats-1",name:"Thick Canvas",description:"+1% HP",maxLevel:1e3,effectPerLevel:1,effectType:"HP_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(2),costMultiplier:new o(1.2),parentId:"root",category:"stats",position:{x:0,y:-200}},{id:"stats-2",name:"Bold Strokes",description:"+1% ATK",maxLevel:1e3,effectPerLevel:1,effectType:"ATK_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(2),costMultiplier:new o(1.25),parentId:"stats-1",category:"stats",position:{x:0,y:-400}},{id:"stats-3",name:"Rapid Execution",description:"-0.05% Attack Delay",maxLevel:400,effectPerLevel:.05,effectType:"ATK_SPEED",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(3),costMultiplier:new o(1.5),parentId:"stats-2",category:"stats",position:{x:-250,y:-400}},{id:"stats-bolder",name:"Bolder Strokes",description:"+2% ATK",maxLevel:1e3,effectPerLevel:2,effectType:"ATK_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(100),costMultiplier:new o(2),parentId:"stats-2",category:"stats",rarityLock:{rarity:"rough",count:10},position:{x:0,y:-600}},{id:"stats-min-dmg",name:"Precision Handling",description:"+1% Min Damage",maxLevel:100,effectPerLevel:1,effectType:"MIN_DAMAGE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e15),costMultiplier:new o(5),parentId:"stats-bolder",category:"stats",rarityLock:{rarity:"framed",count:3},position:{x:-250,y:-600}},{id:"stats-max-dmg",name:"Heavy Hand",description:"+1% Max Damage",maxLevel:200,effectPerLevel:1,effectType:"MAX_DAMAGE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e8),costMultiplier:new o(4),parentId:"stats-bolder",category:"stats",rarityLock:{rarity:"framed",count:1},position:{x:250,y:-600}},{id:"stats-regen",name:"Steady Hand",description:"+0.1% Regen",maxLevel:500,effectPerLevel:.1,effectType:"REGEN_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(5),costMultiplier:new o(1.5),parentId:"stats-1",category:"stats",rarityLock:{rarity:"rough",count:3},position:{x:-250,y:-200}},{id:"stats-armor",name:"Layering",description:"+0.1% Armor",maxLevel:500,effectPerLevel:.1,effectType:"ARMOR_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(5),costMultiplier:new o(1.75),parentId:"stats-regen",category:"stats",position:{x:-500,y:-200}},{id:"stats-dodge",name:"Negative Space",description:"+0.1% Dodge",maxLevel:250,effectPerLevel:.1,effectType:"DODGE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e6),costMultiplier:new o(8),parentId:"stats-armor",category:"stats",rarityLock:{rarity:"framed",count:1},position:{x:-500,y:-400}},{id:"stats-armor-pen",name:"Pierce",description:"+0.1% Armor Pen",maxLevel:500,effectPerLevel:.1,effectType:"ARMOR_PEN_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(10),costMultiplier:new o(2),parentId:"stats-armor",category:"stats",rarityLock:{rarity:"rough",count:8},position:{x:-750,y:-200}},{id:"stats-armor-2",name:"Serious Layering",description:"+0.2% Armor",maxLevel:250,effectPerLevel:.2,effectType:"ARMOR_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(2e10),costMultiplier:new o(2.5),parentId:"stats-armor-pen",category:"stats",rarityLock:{rarity:"rough",count:11},position:{x:-1e3,y:-200}},{id:"stats-lifesteal",name:"Siphon",description:"+0.1% Lifesteal",maxLevel:500,effectPerLevel:.1,effectType:"LIFESTEAL_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(25),costMultiplier:new o(3),parentId:"stats-2",category:"stats",rarityLock:{rarity:"rough",count:16},position:{x:250,y:-400}},{id:"stats-execute",name:"Cull",description:"+0.1% Execute",maxLevel:500,effectPerLevel:.1,effectType:"EXECUTE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e40),costMultiplier:new o(4),parentId:"stats-max-dmg",category:"stats",rarityLock:{rarity:"framed",count:4},position:{x:250,y:-800}},{id:"stats-block-chance",name:"Guard",description:"+0.1% Block Chance",maxLevel:100,effectPerLevel:.1,effectType:"BLOCK_CHANCE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e50),costMultiplier:new o(6),parentId:"stats-dodge",category:"stats",rarityLock:{rarity:"framed",count:5},position:{x:-750,y:-400}},{id:"stats-block-amount",name:"Fortify",description:"+0.1% Block Amount",maxLevel:500,effectPerLevel:.1,effectType:"BLOCK_AMOUNT_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e50),costMultiplier:new o(5),parentId:"stats-block-chance",category:"stats",position:{x:-1e3,y:-400}},{id:"stats-thicker-canvas",name:"Thicker Canvas",description:"+2% HP",maxLevel:1e3,effectPerLevel:2,effectType:"HP_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e55),costMultiplier:new o(2),parentId:"stats-block-amount",category:"stats",rarityLock:{rarity:"rough",count:37},position:{x:-1e3,y:-600}},{id:"stats-absorb",name:"Soak Up",description:"+0.1% Absorb",maxLevel:250,effectPerLevel:.1,effectType:"ABSORB_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e65),costMultiplier:new o(50),parentId:"stats-block-amount",category:"stats",rarityLock:{rarity:"rough",count:39},position:{x:-1250,y:-400}},{id:"stats-thickest-canvas",name:"Thickest Canvas",description:"+3% HP",maxLevel:1e3,effectPerLevel:3,effectType:"HP_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e75),costMultiplier:new o(3),parentId:"stats-thicker-canvas",category:"stats",rarityLock:{rarity:"scrap",count:63},position:{x:-750,y:-600}},{id:"stats-accuracy",name:"Accuracy Focus",description:"+0.1% Accuracy",maxLevel:100,effectPerLevel:.1,effectType:"ACCURACY_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e75),costMultiplier:new o(9),parentId:"stats-execute",category:"stats",rarityLock:{rarity:"framed",count:8},position:{x:250,y:-1e3}},{id:"stats-bleed-chance",name:"Bleed Infusion",description:"+0.1% Bleed Chance",maxLevel:100,effectPerLevel:.1,effectType:"BLEED_CHANCE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e45),costMultiplier:new o(8),parentId:"stats-min-dmg",category:"stats",rarityLock:{rarity:"framed",count:6},position:{x:-250,y:-800}},{id:"stats-plague-chance",name:"Plague Infusion",description:"+0.1% Plague Chance",maxLevel:250,effectPerLevel:.1,effectType:"PLAGUE_CHANCE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e48),costMultiplier:new o(8),parentId:"stats-bleed-chance",category:"stats",position:{x:-250,y:-1e3}},{id:"stats-burn-chance",name:"Burn Infusion",description:"+0.1% Burn Chance",maxLevel:50,effectPerLevel:.1,effectType:"BURN_CHANCE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e70),costMultiplier:new o(8),parentId:"stats-plague-chance",category:"stats",rarityLock:{rarity:"framed",count:7},position:{x:0,y:-1e3}},{id:"stats-burn-dmg",name:"Burn Searing",description:"+0.1% Burn Damage",maxLevel:500,effectPerLevel:.1,effectType:"BURN_DAMAGE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e70),costMultiplier:new o(6),parentId:"stats-burn-chance",category:"stats",position:{x:0,y:-800}},{id:"stats-electro-chance",name:"Electrocute Infusion",description:"+0.1% Electrocute Chance",maxLevel:50,effectPerLevel:.1,effectType:"ELECTROCUTE_CHANCE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e70),costMultiplier:new o(7e3),parentId:"stats-plague-chance",category:"stats",rarityLock:{rarity:"framed",count:9},position:{x:-250,y:-1200}},{id:"stats-curse-chance",name:"Curse Infusion",description:"+0.1% Curse Chance",maxLevel:50,effectPerLevel:.1,effectType:"CURSE_CHANCE_PERCENT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e75),costMultiplier:new o(7500),parentId:"stats-electro-chance",category:"stats",position:{x:0,y:-1200}},{id:"archive-1",name:"Essence Refinement",description:"+1% Quintessence gain",maxLevel:99900,effectPerLevel:1,effectType:"QUINTESSENCE_GAIN",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(2),costMultiplier:new o(1.1),parentId:"root",category:"archive",position:{x:-250,y:0}},{id:"rarity-1",name:"Refined Lines",description:"+0.1% Framed chance",maxLevel:750,effectPerLevel:.1,effectType:"FRAMED_CHANCE",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e3),costMultiplier:new o(100),parentId:"archive-1",category:"rarities",rarityLock:{rarity:"rough",count:1},position:{x:-500,y:0}},{id:"rarity-rough-q",name:"Rough Abundance",description:"+1 Guaranteed Rough Sketch",maxLevel:10,effectPerLevel:1,effectType:"ROUGH_SKETCHES",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e20),costMultiplier:new o(1e20),parentId:"rarity-1",category:"rarities",rarityLock:{rarity:"rough",count:20},position:{x:-500,y:200}},{id:"rarity-framed-q",name:"Framed Focus",description:"+1 Guaranteed Framed Sketch",maxLevel:7,effectPerLevel:1,effectType:"FRAMED_SKETCHES",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e30),costMultiplier:new o(1e30),parentId:"rarity-rough-q",category:"rarities",rarityLock:{rarity:"framed",count:10},position:{x:-750,y:200}},{id:"rarity-opus-q",name:"Opus Vision",description:"+1 Guaranteed Opus Sketch",maxLevel:5,effectPerLevel:1,effectType:"OPUS_SKETCHES",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e50),costMultiplier:new o(1e50),parentId:"rarity-framed-q",category:"rarities",rarityLock:{rarity:"opus",count:5},position:{x:-1e3,y:200}},{id:"rarity-master-q",name:"Masterpiece Order",description:"+1 Guaranteed Masterpiece Sketch",maxLevel:3,effectPerLevel:1,effectType:"MASTERPIECE_SKETCHES",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e100),costMultiplier:new o(1e100),parentId:"rarity-opus-q",category:"rarities",rarityLock:{rarity:"masterpiece",count:3},position:{x:-1250,y:200}},{id:"rarity-2",name:"Divine Inspiration",description:"+0.025% Opus chance",maxLevel:1e3,effectPerLevel:.025,effectType:"OPUS_CHANCE",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e12),costMultiplier:new o(1e3),parentId:"rarity-1",category:"rarities",rarityLock:{rarity:"framed",count:1},position:{x:-750,y:0}},{id:"rarity-3",name:"Masterful Strokes",description:"+0.01% Masterpiece chance",maxLevel:1e3,effectPerLevel:.01,effectType:"MASTERPIECE_CHANCE",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1618e9),costMultiplier:new o(16180),parentId:"rarity-2",category:"rarities",rarityLock:{rarity:"opus",count:1},position:{x:-1e3,y:0}},{id:"fund-overkill",name:"Divine Retribution",description:"+10% Overkill",maxLevel:10,effectPerLevel:.1,effectType:"OVERKILL_BONUS",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e8),costMultiplier:new o(25),parentId:"fund-4",category:"fundamentals",rarityLock:{rarity:"rough",count:2},position:{x:-250,y:400}},{id:"archive-2",name:"Wax Refinement",description:"+1% Wax Concept",maxLevel:4900,effectPerLevel:1,effectType:"WAX_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e11),costMultiplier:new o(4),parentId:"fund-overkill",category:"archive",rarityLock:{rarity:"rough",count:7},position:{x:-500,y:400}},{id:"archive-3",name:"Charcoal Refinement",description:"+1% Charcoal Concept",maxLevel:4900,effectPerLevel:1,effectType:"CHARCOAL_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e17),costMultiplier:new o(4.2),parentId:"archive-2",category:"archive",rarityLock:{rarity:"rough",count:13},position:{x:-500,y:600}},{id:"archive-4",name:"Coffee Refinement",description:"+1% Coffee Concept",maxLevel:4900,effectPerLevel:1,effectType:"COFFEE_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e24),costMultiplier:new o(4.4),parentId:"archive-3",category:"archive",rarityLock:{rarity:"rough",count:19},position:{x:-750,y:600}},{id:"archive-5",name:"Ink Refinement",description:"+1% Ink Concept",maxLevel:4900,effectPerLevel:1,effectType:"INK_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e34),costMultiplier:new o(4.6),parentId:"archive-4",category:"archive",rarityLock:{rarity:"rough",count:25},position:{x:-750,y:400}},{id:"archive-6",name:"Marker Refinement",description:"+1% Marker Concept",maxLevel:4900,effectPerLevel:1,effectType:"MARKER_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e44),costMultiplier:new o(4.8),parentId:"archive-5",category:"archive",rarityLock:{rarity:"rough",count:29},position:{x:-1e3,y:400}},{id:"archive-7",name:"Acrylic Refinement",description:"+1% Acrylic Concept",maxLevel:4900,effectPerLevel:1,effectType:"ACRYLIC_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e79),costMultiplier:new o(5),parentId:"archive-6",category:"archive",rarityLock:{rarity:"rough",count:34},position:{x:-1e3,y:600}},{id:"archive-8",name:"Spray Refinement",description:"+1% Spray Concept",maxLevel:4900,effectPerLevel:1,effectType:"SPRAY_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e99),costMultiplier:new o(5.5),parentId:"archive-7",category:"archive",rarityLock:{rarity:"framed",count:12},position:{x:-1e3,y:800}},{id:"archive-9",name:"Photon Refinement",description:"+1% Photon Concept",maxLevel:4900,effectPerLevel:1,effectType:"PHOTON_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e149),costMultiplier:new o(6),parentId:"archive-8",category:"archive",rarityLock:{rarity:"framed",count:18},position:{x:-750,y:800}},{id:"archive-10",name:"Gold Leaf Refinement",description:"+1% Gold Leaf Concept",maxLevel:4900,effectPerLevel:1,effectType:"GOLD_LEAF_CONCEPT_PRODUCTION",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e249),costMultiplier:new o(7),parentId:"archive-9",category:"archive",rarityLock:{rarity:"framed",count:24},position:{x:-750,y:1e3}},{id:"shop-1",name:"Efficient Shading",description:"-0.1% Graphite cost",maxLevel:500,effectPerLevel:.1,effectType:"GRAPHITE_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(5),costMultiplier:new o(1.2),parentId:"root",category:"shop",position:{x:250,y:0}},{id:"shop-3",name:"Soft Touch",description:"-0.1% Wax cost",maxLevel:500,effectPerLevel:.1,effectType:"WAX_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(50),costMultiplier:new o(1.3),parentId:"shop-1",category:"shop",position:{x:250,y:200}},{id:"shop-5",name:"Charcoal Efficiency",description:"-0.1% Charcoal cost",maxLevel:500,effectPerLevel:.1,effectType:"CHARCOAL_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(500),costMultiplier:new o(1.4),parentId:"shop-3",category:"shop",position:{x:250,y:400}},{id:"shop-8",name:"Caffeine Economy",description:"-0.1% Coffee cost",maxLevel:500,effectPerLevel:.1,effectType:"COFFEE_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(5e3),costMultiplier:new o(1.5),parentId:"shop-5",category:"shop",rarityLock:{rarity:"rough",count:1},position:{x:250,y:600}},{id:"shop-11",name:"Ink Thrift",description:"-0.1% Ink cost",maxLevel:500,effectPerLevel:.1,effectType:"INK_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(5e4),costMultiplier:new o(1.6),parentId:"shop-8",category:"shop",rarityLock:{rarity:"rough",count:2},position:{x:250,y:800}},{id:"shop-13",name:"Marker Savings",description:"-0.1% Marker cost",maxLevel:500,effectPerLevel:.1,effectType:"MARKER_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(5e5),costMultiplier:new o(1.7),parentId:"shop-11",category:"shop",rarityLock:{rarity:"rough",count:3},position:{x:250,y:1e3}},{id:"shop-15",name:"Acrylic Efficiency",description:"-0.1% Acrylic cost",maxLevel:500,effectPerLevel:.1,effectType:"ACRYLIC_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(5e6),costMultiplier:new o(1.8),parentId:"shop-13",category:"shop",rarityLock:{rarity:"framed",count:4},position:{x:250,y:1200}},{id:"shop-17",name:"Spray Control",description:"-0.1% Spray cost",maxLevel:500,effectPerLevel:.1,effectType:"SPRAY_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(1e50),costMultiplier:new o(1.9),parentId:"shop-15",category:"shop",rarityLock:{rarity:"framed",count:9},position:{x:250,y:1400}},{id:"shop-19",name:"Photon Refraction",description:"-0.1% Photon cost",maxLevel:500,effectPerLevel:.1,effectType:"PHOTON_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(1e75),costMultiplier:new o(2),parentId:"shop-17",category:"shop",rarityLock:{rarity:"framed",count:14},position:{x:250,y:1600}},{id:"shop-21",name:"Gold Leaf Gilding",description:"-0.1% Gold Leaf cost",maxLevel:500,effectPerLevel:.1,effectType:"GOLD_LEAF_UPGRADE_COST",displayFormat:{sign:"-",suffix:"%"},baseCost:new o(1e100),costMultiplier:new o(2.5),parentId:"shop-19",category:"shop",rarityLock:{rarity:"opus",count:7},position:{x:250,y:1800}},{id:"shop-6",name:"Graphite Mastery",description:"+1% Graphite rewards",maxLevel:1e3,effectPerLevel:1,effectType:"GRAPHITE_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(150),costMultiplier:new o(2),parentId:"shop-1",category:"shop",position:{x:500,y:0}},{id:"shop-7",name:"Wax Mastery",description:"+1% Wax rewards",maxLevel:1e3,effectPerLevel:1,effectType:"WAX_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1500),costMultiplier:new o(2.2),parentId:"shop-3",category:"shop",position:{x:500,y:200}},{id:"shop-10",name:"Charcoal Mastery",description:"+1% Charcoal rewards",maxLevel:1e3,effectPerLevel:1,effectType:"CHARCOAL_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e3),costMultiplier:new o(2.4),parentId:"shop-5",category:"shop",position:{x:500,y:400}},{id:"shop-9",name:"Coffee Mastery",description:"+1% Coffee rewards",maxLevel:1e3,effectPerLevel:1,effectType:"COFFEE_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e4),costMultiplier:new o(2.6),parentId:"shop-8",category:"shop",position:{x:500,y:600}},{id:"shop-12",name:"Ink Mastery",description:"+1% Ink rewards",maxLevel:1e3,effectPerLevel:1,effectType:"INK_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e5),costMultiplier:new o(2.8),parentId:"shop-11",category:"shop",position:{x:500,y:800}},{id:"shop-14",name:"Marker Mastery",description:"+1% Marker rewards",maxLevel:1e3,effectPerLevel:1,effectType:"MARKER_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e6),costMultiplier:new o(3),parentId:"shop-13",category:"shop",position:{x:500,y:1e3}},{id:"shop-16",name:"Acrylic Mastery",description:"+1% Acrylic rewards",maxLevel:1e3,effectPerLevel:1,effectType:"ACRYLIC_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(15e7),costMultiplier:new o(3.2),parentId:"shop-15",category:"shop",position:{x:500,y:1200}},{id:"shop-18",name:"Spray Mastery",description:"+1% Spray rewards",maxLevel:1e3,effectPerLevel:1,effectType:"SPRAY_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e60),costMultiplier:new o(3.4),parentId:"shop-17",category:"shop",position:{x:500,y:1400}},{id:"shop-20",name:"Photon Mastery",description:"+1% Photon rewards",maxLevel:1e3,effectPerLevel:1,effectType:"PHOTON_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e90),costMultiplier:new o(3.6),parentId:"shop-19",category:"shop",position:{x:500,y:1600}},{id:"shop-22",name:"Gold Leaf Mastery",description:"+1% Gold Leaf rewards",maxLevel:1e3,effectPerLevel:1,effectType:"GOLD_LEAF_REWARD",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e150),costMultiplier:new o(4),parentId:"shop-21",category:"shop",position:{x:500,y:1800}},{id:"shop-6-exp",name:"Graphite Resonance",description:"+0.01 Graphite rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"GRAPHITE_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(3),costMultiplier:new o(25),parentId:"shop-6",category:"shop",rarityLock:{rarity:"rough",count:1},position:{x:750,y:0}},{id:"shop-7-exp",name:"Wax Resonance",description:"+0.01 Wax rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"WAX_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(300),costMultiplier:new o(5),parentId:"shop-7",category:"shop",rarityLock:{rarity:"rough",count:2},position:{x:750,y:200}},{id:"shop-10-exp",name:"Charcoal Resonance",description:"+0.01 Charcoal rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"CHARCOAL_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(3e4),costMultiplier:new o(6),parentId:"shop-10",category:"shop",rarityLock:{rarity:"rough",count:3},position:{x:750,y:400}},{id:"shop-9-exp",name:"Coffee Resonance",description:"+0.01 Coffee rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"COFFEE_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(3e6),costMultiplier:new o(7),parentId:"shop-9",category:"shop",rarityLock:{rarity:"rough",count:4},position:{x:750,y:600}},{id:"shop-12-exp",name:"Ink Resonance",description:"+0.01 Ink rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"INK_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(3e8),costMultiplier:new o(8),parentId:"shop-12",category:"shop",rarityLock:{rarity:"rough",count:5},position:{x:750,y:800}},{id:"shop-14-exp",name:"Marker Resonance",description:"+0.01 Marker rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"MARKER_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(3e10),costMultiplier:new o(10),parentId:"shop-14",category:"shop",rarityLock:{rarity:"rough",count:12},position:{x:750,y:1e3}},{id:"shop-16-exp",name:"Acrylic Resonance",description:"+0.01 Acrylic rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"ACRYLIC_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(3e12),costMultiplier:new o(25),parentId:"shop-16",category:"shop",rarityLock:{rarity:"framed",count:7},position:{x:750,y:1200}},{id:"shop-18-exp",name:"Spray Resonance",description:"+0.01 Spray rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"SPRAY_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(1e75),costMultiplier:new o(50),parentId:"shop-18",category:"shop",rarityLock:{rarity:"framed",count:13},position:{x:750,y:1400}},{id:"shop-20-exp",name:"Photon Resonance",description:"+0.01 Photon rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"PHOTON_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(1e125),costMultiplier:new o(150),parentId:"shop-20",category:"shop",rarityLock:{rarity:"framed",count:18},position:{x:750,y:1600}},{id:"shop-22-exp",name:"Gold Leaf Resonance",description:"+0.01 Gold Leaf rewards exp.",maxLevel:400,effectPerLevel:.01,effectType:"GOLD_LEAF_REWARD_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"exponent"},baseCost:new o(1e200),costMultiplier:new o(500),parentId:"shop-22",category:"shop",rarityLock:{rarity:"opus",count:10},position:{x:750,y:1800}},{id:"shop-2",name:"Prepared Studio",description:"Start with free tools",maxLevel:12,effectPerLevel:1,effectType:"FREE_TOOLS",displayFormat:{sign:"+",suffix:""},baseCost:new o(222),costMultiplier:new o(2222),parentId:"shop-1",category:"shop",position:{x:250,y:-200}},{id:"shop-4",name:"Automated Workflow",description:"Auto-enable active protocols",maxLevel:4,effectPerLevel:1,effectType:"AUTO_ENABLE_TOOLS",displayFormat:{sign:"+",suffix:""},baseCost:new o(999e3),costMultiplier:new o(9e19),parentId:"shop-2",category:"shop",position:{x:500,y:-200},isToggleable:!0},{id:"fund-1",name:"Lasting Impressions",description:"-0.01 Decay Factor",maxLevel:50,effectPerLevel:.01,effectType:"DECAY_FACTOR",displayFormat:{sign:"-",suffix:""},baseCost:new o(150),costMultiplier:new o(2.5),parentId:"root",category:"fundamentals",position:{x:0,y:200}},{id:"fund-less-decay",name:"Less Decay Please",description:"-0.001 Decay Factor",maxLevel:400,effectPerLevel:.001,effectType:"DECAY_FACTOR",displayFormat:{sign:"-",suffix:""},baseCost:new o(1e12),costMultiplier:new o(250),parentId:"fund-buy-max",category:"fundamentals",rarityLock:{rarity:"scrap",count:30},position:{x:1e3,y:-200}},{id:"fund-quintessence-max-victory",name:"Quintessence Pinnacle",description:"+QE gain per Maxed Sketch",maxLevel:1,effectPerLevel:10,effectType:"QUINTESSENCE_PINNACLE",displayFormat:{sign:"+",suffix:"%"},baseCost:new o("1e14"),costMultiplier:new o("1e14"),parentId:"fund-less-decay",category:"archive",rarityLock:{rarity:"rough",count:6},position:{x:1250,y:-200}},{id:"fund-more-victories",name:"More Victories!",description:"+10 Max Victories",maxLevel:10,effectPerLevel:10,effectType:"MAX_VICTORIES",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e14),costMultiplier:new o(8e3),parentId:"fund-quintessence-max-victory",category:"fundamentals",rarityLock:{rarity:"rough",count:14},position:{x:1250,y:0}},{id:"fund-winning",name:"Winning!",description:"+10 Max Victories",maxLevel:30,effectPerLevel:10,effectType:"MAX_VICTORIES",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e160),costMultiplier:new o(1e40),parentId:"fund-more-victories",category:"fundamentals",rarityLock:{rarity:"opus",count:1},position:{x:1250,y:200}},{id:"fund-overoverkill",name:"Overoverkill",description:"+1% Overkill",maxLevel:100,effectPerLevel:.01,effectType:"OVERKILL_BONUS",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e21),costMultiplier:new o(100),parentId:"fund-quintessence-max-victory",category:"fundamentals",rarityLock:{rarity:"rough",count:25},position:{x:1500,y:-200}},{id:"fund-more-free-tools",name:"More Free Tools",description:"Start with more free tools",maxLevel:6,effectPerLevel:1,effectType:"FREE_TOOLS",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e45),costMultiplier:new o(1e5),parentId:"fund-overoverkill",category:"shop",rarityLock:{rarity:"rough",count:30},position:{x:1500,y:-400}},{id:"fund-multi-use-eraser",name:"Multi-Use Eraser",description:"+1 Precise Eraser Use",maxLevel:2,effectPerLevel:1,effectType:"PRECISE_ERASER_USE",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e100),costMultiplier:new o(1/0),parentId:"fund-more-free-tools",category:"fundamentals",rarityLock:{rarity:"rough",count:44},position:{x:1250,y:-400}},{id:"fund-opus-eraser",name:"Opus Eraser",description:"Precise Eraser works on Opus",maxLevel:1,effectPerLevel:1,effectType:"OPUS_ERASER",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e250),costMultiplier:new o(1e5),parentId:"fund-multi-use-eraser",category:"fundamentals",rarityLock:{rarity:"framed",count:32},position:{x:1250,y:-600}},{id:"fund-meditation-recovery",name:"Meditation Recovery",description:"-1 min meditation cooldown",maxLevel:20,effectPerLevel:1,effectType:"MEDITATION_COOLDOWN",displayFormat:{sign:"-",suffix:""},baseCost:new o(1e50),costMultiplier:new o(1e5),parentId:"fund-more-free-tools",category:"fundamentals",rarityLock:{rarity:"rough",count:40},position:{x:1500,y:-600}},{id:"fund-meditation-mastery",name:"Meditation Mastery",description:"+1% Gold Zone Effect",maxLevel:10,effectPerLevel:1,effectType:"MEDITATION_GOLD_ZONE_EFFECT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e75),costMultiplier:new o(1e75),parentId:"fund-meditation-recovery",category:"fundamentals",rarityLock:{rarity:"framed",count:10},position:{x:1500,y:-800}},{id:"fund-meditation-zen",name:"Meditation Zen",description:"+1% Teal Zone Effect",maxLevel:10,effectPerLevel:1,effectType:"MEDITATION_TEAL_ZONE_EFFECT",displayFormat:{sign:"+",suffix:"%"},baseCost:new o(1e100),costMultiplier:new o(1e100),parentId:"fund-meditation-mastery",category:"fundamentals",rarityLock:{rarity:"framed",count:15},position:{x:1500,y:-1e3}},{id:"fund-meditation-prime",name:"Meditation Prime",description:"+1 Meditation",maxLevel:2,effectPerLevel:1,effectType:"MEDITATION_SLOTS",displayFormat:{sign:"+",suffix:""},baseCost:new o("1e200"),costMultiplier:new o("1e400"),parentId:"fund-meditation-zen",category:"fundamentals",rarityLock:{rarity:"framed",count:20},position:{x:1250,y:-1e3}},{id:"fund-4",name:"Perspective Shift",description:"+1 Lookahead",maxLevel:7,effectPerLevel:1,effectType:"LOOKAHEAD_BONUS",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e6),costMultiplier:new o(1e35),parentId:"fund-1",category:"fundamentals",position:{x:-250,y:200}},{id:"fund-buy-max",name:"Iterative Refinement",description:"Unlock Buy Max for Skill Tree",maxLevel:1,effectPerLevel:1,effectType:"BUY_MAX_SKILL_TREE",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e9),costMultiplier:new o(2),parentId:"shop-4",category:"archive",position:{x:750,y:-200}},{id:"fund-buy-percent",name:"Finetuned Refinement",description:"Custom % Buy for Skill Tree",maxLevel:1,effectPerLevel:1,effectType:"BUY_PERCENT_SKILL_TREE",displayFormat:{sign:"+",suffix:""},baseCost:new o(5e12),costMultiplier:new o(2),parentId:"fund-buy-max",category:"archive",position:{x:750,y:-400}},{id:"fund-buy-all",name:"Leeroy Study",description:"Purchases all skills",maxLevel:1,effectPerLevel:1,effectType:"BUY_ALL_SKILL_TREE",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e18),costMultiplier:new o(2),parentId:"fund-buy-percent",category:"archive",position:{x:750,y:-600}},{id:"fund-2",name:"Quick Escape",description:"-0.1s flee penalty",maxLevel:25,effectPerLevel:.1,effectType:"FLEE_PENALTY",displayFormat:{sign:"-",suffix:"s"},baseCost:new o(8e3),costMultiplier:new o(6),parentId:"fund-1",category:"fundamentals",position:{x:0,y:400}},{id:"fund-3",name:"Swift Recovery",description:"-0.1s death penalty",maxLevel:50,effectPerLevel:.1,effectType:"DEATH_PENALTY",displayFormat:{sign:"-",suffix:"s"},baseCost:new o(9e3),costMultiplier:new o(9),parentId:"fund-2",category:"fundamentals",position:{x:0,y:600}},{id:"fund-time-accel",name:"Temporal Flow",description:"+0.01 Time Acceleration",maxLevel:100,effectPerLevel:.01,effectType:"TIME_ACCELERATION_BONUS",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e10),costMultiplier:new o(1e3),parentId:"fund-3",category:"fundamentals",rarityLock:{rarity:"framed",count:2},position:{x:0,y:800}},{id:"shop-auto-start",name:"Persistent Momentum",description:"Battle Stick Man on Redraw",maxLevel:1,effectPerLevel:1,effectType:"AUTO_START_ON_REDRAW",displayFormat:{sign:"+",suffix:""},baseCost:new o(1e14),costMultiplier:new o(100),parentId:"shop-4",category:"fundamentals",rarityLock:{rarity:"rough",count:10},position:{x:500,y:-400},isToggleable:!0},{id:"fund-gen-double",name:"Industrial Overclock",description:"Double all generators",maxLevel:15,effectPerLevel:1,effectType:"GENERATOR_MULTIPLIER_EXPONENT",displayFormat:{sign:"+",suffix:"",type:"generator_exp"},baseCost:new o(25e12),costMultiplier:new o(5e4),parentId:"fund-3",category:"archive",rarityLock:{rarity:"rough",count:15},position:{x:-250,y:600}},{id:"gen-over-1",name:"Graphite Overclock",description:"10x Graphite generator.",maxLevel:15,effectPerLevel:1,effectType:"GRAPHITE_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e24),costMultiplier:new o(1e6),parentId:"fund-gen-double",category:"archive",rarityLock:{rarity:"scrap",count:33},position:{x:-250,y:800}},{id:"gen-over-2",name:"Wax Overclock",description:"10x Wax generator.",maxLevel:15,effectPerLevel:1,effectType:"WAX_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e28),costMultiplier:new o(1e7),parentId:"gen-over-1",category:"archive",rarityLock:{rarity:"scrap",count:39},position:{x:-500,y:800}},{id:"gen-over-3",name:"Charcoal Overclock",description:"10x Charcoal generator.",maxLevel:15,effectPerLevel:1,effectType:"CHARCOAL_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e33),costMultiplier:new o(1e9),parentId:"gen-over-2",category:"archive",rarityLock:{rarity:"rough",count:20},position:{x:-500,y:1e3}},{id:"gen-over-4",name:"Coffee Overclock",description:"10x Coffee generator.",maxLevel:15,effectPerLevel:1,effectType:"COFFEE_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e39),costMultiplier:new o(1e11),parentId:"gen-over-3",category:"archive",rarityLock:{rarity:"rough",count:25},position:{x:-250,y:1e3}},{id:"gen-over-5",name:"Ink Overclock",description:"10x Ink generator.",maxLevel:15,effectPerLevel:1,effectType:"INK_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e70),costMultiplier:new o(1e15),parentId:"gen-over-4",category:"archive",rarityLock:{rarity:"framed",count:8},position:{x:-250,y:1200}},{id:"gen-over-6",name:"Marker Overclock",description:"10x Marker generator.",maxLevel:15,effectPerLevel:1,effectType:"MARKER_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e80),costMultiplier:new o(1e20),parentId:"gen-over-5",category:"archive",rarityLock:{rarity:"framed",count:15},position:{x:-500,y:1200}},{id:"gen-over-7",name:"Acrylic Overclock",description:"10x Acrylic generator.",maxLevel:15,effectPerLevel:1,effectType:"ACRYLIC_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e90),costMultiplier:new o(1e26),parentId:"gen-over-6",category:"archive",rarityLock:{rarity:"opus",count:5},position:{x:-500,y:1400}},{id:"gen-over-8",name:"Spray Overclock",description:"10x Spray generator.",maxLevel:15,effectPerLevel:1,effectType:"SPRAY_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e115),costMultiplier:new o(1e35),parentId:"gen-over-7",category:"archive",rarityLock:{rarity:"opus",count:12},position:{x:-250,y:1400}},{id:"gen-over-9",name:"Photon Overclock",description:"10x Photon generator.",maxLevel:15,effectPerLevel:1,effectType:"PHOTON_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e150),costMultiplier:new o(1e43),parentId:"gen-over-8",category:"archive",rarityLock:{rarity:"masterpiece",count:4},position:{x:-250,y:1600}},{id:"gen-over-10",name:"Gold Leaf Overclock",description:"10x Gold Leaf generator.",maxLevel:15,effectPerLevel:1,effectType:"GOLD_LEAF_GENERATOR_MULTIPLIER",displayFormat:{sign:"+",suffix:"",type:"generator_mult"},baseCost:new o(1e200),costMultiplier:new o(1e100),parentId:"gen-over-9",category:"archive",rarityLock:{rarity:"masterpiece",count:8},position:{x:-500,y:1600}}],z0={},Zd={};Ya.forEach(t=>{z0[t.id]=t,t.parentId&&(Zd[t.parentId]||(Zd[t.parentId]=[]),Zd[t.parentId].push(t.id))});const Ox=(t,r)=>r.gte(t.maxLevel)?new o(1/0):t.baseCost.times(t.costMultiplier.pow(r)),li=t=>z0[t],ec=(t,r)=>{const n=li(t);return n?n.parentId===null?!0:(r[n.parentId]??new o(0)).gte(1):!1},tc=t=>!!z0[t],x0=(t,r,n=!1)=>{const i=li(t);return i?n||!i.rarityLock?!0:r.filter(d=>Xe.find(f=>f.id===d)?.rarity===i.rarityLock?.rarity).length>=i.rarityLock.count:!1},gk=(t,r)=>{const n=r.position.x-t.position.x,i=r.position.y-t.position.y;return Math.abs(n)>Math.abs(i)?n>0?{sourceHandle:"right",targetHandle:"left"}:{sourceHandle:"left",targetHandle:"right"}:i>0?{sourceHandle:"bottom",targetHandle:"top"}:{sourceHandle:"top",targetHandle:"bottom"}},vn=(t,r=0)=>{const n={...B0,redrawCount:r,maxVictories:100};for(const[i,u]of Object.entries(t)){if(u.lte(0))continue;const d=li(i);if(!d)continue;const m=u.toNumber(),f=d.effectPerLevel*m;switch(d.effectType){case"ROUGH_CHANCE":n.roughRarity+=f;break;case"FRAMED_CHANCE":n.framedRarity+=f;break;case"OPUS_CHANCE":n.opusRarity+=f;break;case"MASTERPIECE_CHANCE":n.masterpieceRarity+=f;break;case"REGEN_PERCENT":n.regenIncrease+=f;break;case"ARMOR_PERCENT":n.armorIncrease+=f;break;case"DODGE_PERCENT":n.dodgeIncrease+=f;break;case"ATK_PERCENT":n.attackIncrease+=f;break;case"HP_PERCENT":n.hpIncrease+=f;break;case"QUINTESSENCE_GAIN":n.quintessenceGain+=f;break;case"GRAPHITE_UPGRADE_COST":n.graphiteUpgradeCost+=f;break;case"WAX_UPGRADE_COST":n.waxUpgradeCost+=f;break;case"FREE_TOOLS":n.freeTools+=f;break;case"DECAY_FACTOR":n.rewardDecay=o.max(new o(.01),n.rewardDecay.minus(f));break;case"FLEE_PENALTY":n.fleePenalty=Math.max(0,n.fleePenalty-f);break;case"DEATH_PENALTY":n.deathRecovery=Math.max(0,n.deathRecovery-f);break;case"LOOKAHEAD_BONUS":n.lookahead+=f;break;case"ATK_SPEED":n.attackDelay+=f;break;case"AUTO_ENABLE_TOOLS":n.autoEnableTools=Math.max(n.autoEnableTools,m);break;case"CHARCOAL_UPGRADE_COST":n.charcoalUpgradeCost+=f;break;case"COFFEE_UPGRADE_COST":n.coffeeUpgradeCost+=f;break;case"INK_UPGRADE_COST":n.inkUpgradeCost+=f;break;case"MARKER_UPGRADE_COST":n.markerUpgradeCost+=f;break;case"ACRYLIC_UPGRADE_COST":n.acrylicUpgradeCost+=f;break;case"SPRAY_UPGRADE_COST":n.sprayUpgradeCost+=f;break;case"PHOTON_UPGRADE_COST":n.photonUpgradeCost+=f;break;case"GOLD_LEAF_UPGRADE_COST":n.goldLeafUpgradeCost+=f;break;case"GRAPHITE_REWARD":n.graphiteRewardMultiplier+=f;break;case"WAX_REWARD":n.waxRewardMultiplier+=f;break;case"CHARCOAL_REWARD":n.charcoalRewardMultiplier+=f;break;case"COFFEE_REWARD":n.coffeeRewardMultiplier+=f;break;case"INK_REWARD":n.inkRewardMultiplier+=f;break;case"MARKER_REWARD":n.markerRewardMultiplier+=f;break;case"ACRYLIC_REWARD":n.acrylicRewardMultiplier+=f;break;case"SPRAY_REWARD":n.sprayRewardMultiplier+=f;break;case"PHOTON_REWARD":n.photonRewardMultiplier+=f;break;case"GOLD_LEAF_REWARD":n.goldLeafRewardMultiplier+=f;break;case"GRAPHITE_REWARD_EXPONENT":n.graphiteRewardExponent+=f;break;case"WAX_REWARD_EXPONENT":n.waxRewardExponent+=f;break;case"CHARCOAL_REWARD_EXPONENT":n.charcoalRewardExponent+=f;break;case"COFFEE_REWARD_EXPONENT":n.coffeeRewardExponent+=f;break;case"INK_REWARD_EXPONENT":n.inkRewardExponent+=f;break;case"MARKER_REWARD_EXPONENT":n.markerRewardExponent+=f;break;case"ACRYLIC_REWARD_EXPONENT":n.acrylicRewardExponent+=f;break;case"SPRAY_REWARD_EXPONENT":n.sprayRewardExponent+=f;break;case"PHOTON_REWARD_EXPONENT":n.photonRewardExponent+=f;break;case"GOLD_LEAF_REWARD_EXPONENT":n.goldLeafRewardExponent+=f;break;case"TIME_ACCELERATION_BONUS":n.timeAcceleration+=f;break;case"AUTO_START_ON_REDRAW":m>0&&(n.autoStartOnRedraw=1);break;case"BUY_ALL_SKILL_TREE":m>0&&(n.buyAllSkills=1);break;case"PRECISE_ERASER_USE":n.preciseEraserUses+=f;break;case"OPUS_ERASER":n.opusEraser=Math.max(n.opusEraser,f>0?1:0);break;case"MEDITATION_COOLDOWN":n.meditationCooldownMax=Math.max(0,n.meditationCooldownMax-f*60);break;case"MEDITATION_GOLD_ZONE_EFFECT":n.meditationGoldZoneBonus+=f;break;case"MEDITATION_TEAL_ZONE_EFFECT":n.meditationTealZoneBonus+=f;break;case"MEDITATION_SLOTS":n.meditationExtraSlots+=f;break;case"MAX_VICTORIES":n.maxVictories+=f;break;case"QUINTESSENCE_PINNACLE":n.quintessencePinnacle+=f;break;case"GENERATOR_MULTIPLIER_EXPONENT":n.generatorMultiplier=Math.pow(2,m);break;case"OVERKILL_BONUS":n.overkillMultiplier+=f;break;case"MIN_DAMAGE_PERCENT":n.minDamageIncrease+=f;break;case"MAX_DAMAGE_PERCENT":n.maxDamageIncrease+=f;break;case"ARMOR_PEN_PERCENT":n.armorPenIncrease+=f;break;case"LIFESTEAL_PERCENT":n.lifestealIncrease+=f;break;case"EXECUTE_PERCENT":n.executeIncrease+=f;break;case"BLOCK_CHANCE_PERCENT":n.blockChanceIncrease+=f;break;case"BLOCK_AMOUNT_PERCENT":n.blockAmountIncrease+=f;break;case"ROUGH_SKETCHES":n.roughSketches+=f;break;case"FRAMED_SKETCHES":n.framedSketches+=f;break;case"OPUS_SKETCHES":n.opusSketches+=f;break;case"MASTERPIECE_SKETCHES":n.masterpieceSketches+=f;break;case"ACCURACY_PERCENT":n.accuracyIncrease+=f;break;case"BLEED_CHANCE_PERCENT":n.bleedChanceIncrease+=f;break;case"PLAGUE_CHANCE_PERCENT":n.plagueChanceIncrease+=f;break;case"BURN_CHANCE_PERCENT":n.burnChanceIncrease+=f;break;case"BURN_DAMAGE_PERCENT":n.burnDamageIncrease+=f;break;case"ELECTROCUTE_CHANCE_PERCENT":n.electrocuteChanceIncrease+=f;break;case"CURSE_CHANCE_PERCENT":n.curseChanceIncrease+=f;break;case"WAX_CONCEPT_PRODUCTION":n.waxConceptBoost+=f;break;case"CHARCOAL_CONCEPT_PRODUCTION":n.charcoalConceptBoost+=f;break;case"COFFEE_CONCEPT_PRODUCTION":n.coffeeConceptBoost+=f;break;case"INK_CONCEPT_PRODUCTION":n.inkConceptBoost+=f;break;case"MARKER_CONCEPT_PRODUCTION":n.markerConceptBoost+=f;break;case"ACRYLIC_CONCEPT_PRODUCTION":n.acrylicConceptBoost+=f;break;case"SPRAY_CONCEPT_PRODUCTION":n.sprayConceptBoost+=f;break;case"PHOTON_CONCEPT_PRODUCTION":n.photonConceptBoost+=f;break;case"GOLD_LEAF_CONCEPT_PRODUCTION":n.goldLeafConceptBoost+=f;break;case"ABSORB_PERCENT":n.absorbIncrease+=f;break}}return n.roughRarity=Math.min(100,n.roughRarity),n.framedRarity=Math.min(100,n.framedRarity),n.opusRarity=Math.min(100,n.opusRarity),n.masterpieceRarity=Math.min(100,n.masterpieceRarity),n.graphiteUpgradeCost=Math.min(99,n.graphiteUpgradeCost),n.waxUpgradeCost=Math.min(99,n.waxUpgradeCost),n.charcoalUpgradeCost=Math.min(99,n.charcoalUpgradeCost),n.coffeeUpgradeCost=Math.min(99,n.coffeeUpgradeCost),n.inkUpgradeCost=Math.min(99,n.inkUpgradeCost),n.markerUpgradeCost=Math.min(99,n.markerUpgradeCost),n.acrylicUpgradeCost=Math.min(99,n.acrylicUpgradeCost),n.sprayUpgradeCost=Math.min(99,n.sprayUpgradeCost),n.photonUpgradeCost=Math.min(99,n.photonUpgradeCost),n.goldLeafUpgradeCost=Math.min(99,n.goldLeafUpgradeCost),n.attackDelay=Math.min(90,n.attackDelay),n},xk=(t,r)=>new o(t.baseCost).times(new o(t.costMultiplier).pow(r)),Ro=(t,r,n)=>{const i=typeof r=="number"?r:r.toNumber();let u=xk(t,i);return n.graphiteDiscountUnlocked&&t.currency==="Graphite"&&(u=u.times(.5)),n.charcoalDiscountUnlocked&&t.currency==="Charcoal"&&(u=u.times(.25)),n.waxDiscountUnlocked&&t.currency==="Wax"&&(u=u.times(.1)),n.coffeeDiscountUnlocked&&t.currency==="Coffee"&&(u=u.times(.1)),n.inkDiscountUnlocked&&t.currency==="Ink"&&(u=u.times(.1)),n.markerDiscountUnlocked&&t.currency==="Marker"&&(u=u.times(.01)),n.acrylicDiscountUnlocked&&t.currency==="Acrylic"&&(u=u.times(.01)),u},Px=(t,r,n,i)=>{const u=new o(i);if(t.lt(r)||u.lte(0))return{levelsToBuy:new o(0),totalCost:new o(0)};const d=new o(n);if(d.eq(1)){const w=o.min(u,t.div(r).floor());return{levelsToBuy:w,totalCost:r.times(w)}}const m=d.minus(1),g=t.times(m).div(r).plus(1).log10(),x=d.log10();let y=new o(Math.floor(g/x));y=o.min(y,u);let b=r.times(d.pow(y).minus(1)).div(m);return b.gt(t)&&(y=y.minus(1),b=r.times(d.pow(y).minus(1)).div(m)),{levelsToBuy:o.max(0,y),totalCost:b}},Gl=(t,r,n,i,u)=>Px(n,t,r,new o(i).minus(u)),yk=(t,r,n,i)=>{const u=Ro(t,r,i),d=Da(u,t.currency,i.fundamentals),m=new o(t.maxLevel),f=m.eq(-1)?1/0:m.minus(r);return Px(n,d,t.costMultiplier,f)},Ta=[{id:"AUTO_CHALLENGE",name:"Auto-Challenge",type:"ACTIVE_PROTOCOL",cost:new o(5),currency:"Graphite",description:"Automatically fight the same enemy for as long as you can survive.",icon:"AutoChallenge",iconColor:"text-green-600",unlockKey:"autoChallengeUnlocked",activeKey:"autoChallengeActive"},{id:"AUTO_RETRY",name:"Auto-Retry",type:"ACTIVE_PROTOCOL",cost:new o(100),currency:"Graphite",description:"After losing battle, automatically challenge same opponent when cooldown finishes.",icon:"AutoRetry",iconColor:"text-blue-500",unlockKey:"autoRetryUnlocked",activeKey:"autoRetryActive"},{id:"GRAPHITE_PUMP",name:"Graphite Pump",type:"GENERATOR",cost:new o(5),currency:"Wax",description:"Automatically produces 0.1 Graphite per second.",icon:"Graphite",unlockKey:"graphiteGeneratorUnlocked"},{id:"SKETCH_HIDING",name:"Sketch Hiding",type:"SPECIAL",cost:new o(100),currency:"Wax",description:"Allows for hiding sketches from the gallery.",icon:"Wax",unlockKey:"sketchHidingUnlocked"},{id:"SOFT_ERASER",name:"Soft Eraser",type:"MODIFIER",cost:new o(5),currency:"Charcoal",description:"Reduces the cost of all Graphite stat upgrades by 50%.",icon:"Graphite",unlockKey:"graphiteDiscountUnlocked"},{id:"AUTO_ADVANCE",name:"Portfolio Review",type:"ACTIVE_PROTOCOL",cost:new o(1e3),currency:"Graphite",description:"If auto-challenge reaches Max Victories, automatically move on to the first not maxed, non-hidden sketch.",icon:"AutoAdvance",iconColor:"text-purple-600",unlockKey:"autoAdvanceUnlocked",activeKey:"autoAdvanceActive"},{id:"CHARCOAL_DISCOUNT",name:"Burnt Edges",type:"MODIFIER",cost:new o(50),currency:"Coffee",description:"Reduces the cost of all Charcoal stat upgrades by 75%.",icon:"Charcoal",unlockKey:"charcoalDiscountUnlocked"},{id:"WAX_GENERATOR",name:"Wax on Wax",type:"GENERATOR",cost:new o(1e3),currency:"Wax",description:"Automatically produces 0.1 Wax per second.",icon:"Wax",unlockKey:"waxGeneratorUnlocked"},{id:"GRAPHITE_PLUS",name:"Graphite Generator",type:"GENERATOR",cost:new o(1e3),currency:"Charcoal",description:"Automatically produces 0.01% of Graphite you have gotten from Battle Rewards per second.",icon:"Graphite",unlockKey:"graphitePlusUnlocked"},{id:"RANDOMIZER",name:"Randomizer",type:"ACTIVE_PROTOCOL",cost:new o(1e3),currency:"Coffee",description:"Auto-Retry selects next sketch at random (non-hidden sketches only).",icon:"Randomizer",iconColor:"text-orange-500",unlockKey:"randomizerUnlocked",activeKey:"randomizerActive"},{id:"BUY_MAX",name:"Bulk Order",type:"SPECIAL",cost:new o(5),currency:"Ink",description:"Unlock the ability to purchase the maximum affordable amount of an upgrade at once.",icon:"Ink",unlockKey:"buyMaxUnlocked"},{id:"AUTO_BUY",name:"Standing Order",type:"SPECIAL",cost:new o(1e3),currency:"Ink",description:"Unlock a toggle to automatically purchase upgrades when affordable.",icon:"Speed",unlockKey:"autoBuyUnlocked"},{id:"CHARCOAL_OVERDRIVE",name:"Charcoal Generator",type:"GENERATOR",cost:new o(1e6),currency:"Graphite",description:"Automatically produces 0.01% of Charcoal you have gotten from Battle Rewards per second.",icon:"Charcoal",unlockKey:"charcoalOverdriveUnlocked"},{id:"AUTO_HIDE_MAXED",name:"Curator's Choice",type:"SPECIAL",cost:new o(5),currency:"Marker",description:"Automatically hide sketches from the gallery when they reach Max Victories.",icon:"Marker",unlockKey:"autoHideMaxedUnlocked"},{id:"WAX_OVERDRIVE",name:"Wax Generator",type:"GENERATOR",cost:new o(1e3),currency:"Marker",description:"Automatically produces 0.01% of Wax you have gotten from Battle Rewards per second.",icon:"Wax",unlockKey:"waxOverdriveUnlocked"},{id:"COFFEE_GENERATOR",name:"Coffee Generator",type:"GENERATOR",cost:new o(1e6),currency:"Wax",description:"Automatically produces 0.01% of Coffee you have gotten from Battle Rewards per second.",icon:"Coffee",unlockKey:"coffeeGeneratorUnlocked"},{id:"GALLERY_REWARDS_FILTER",name:"Gallery Rewards Filter",type:"SPECIAL",cost:new o(1e5),currency:"Charcoal",description:"Unlocks the ability to filter sketches in the gallery by the rewards they provide.",icon:"Gallery",unlockKey:"galleryRewardsFilterUnlocked"},{id:"CONCEPTUAL_BRIDGE",name:"Conceptual Bridge",type:"SPECIAL",cost:new o(1e6),currency:"Charcoal",description:"Automatically advances Concept Milestones if you have reached them in a previous Redraw.",icon:"Speed",unlockKey:"conceptualBridgeUnlocked"},{id:"INK_GENERATOR",name:"Ink Generator",type:"GENERATOR",cost:new o(1e6),currency:"Coffee",description:"Automatically produces 0.01% of Ink you have gotten from Battle Rewards per second.",icon:"Ink",unlockKey:"inkGeneratorUnlocked"},{id:"MARKER_GENERATOR",name:"Marker Generator",type:"GENERATOR",cost:new o(1e6),currency:"Ink",description:"Automatically produces 0.01% of Marker you have gotten from Battle Rewards per second.",icon:"Marker",unlockKey:"markerGeneratorUnlocked"},{id:"COFFEE_DISCOUNT",name:"Caffeine Drip",type:"MODIFIER",cost:new o(1e6),currency:"Marker",description:"Reduces the cost of all Coffee stat upgrades by 90%.",icon:"Coffee",unlockKey:"coffeeDiscountUnlocked"},{id:"WAX_DISCOUNT",name:"Wax Coating",type:"MODIFIER",cost:new o(1e3),currency:"Acrylic",description:"Reduces the cost of all Wax stat upgrades by 90%.",icon:"Wax",unlockKey:"waxDiscountUnlocked"},{id:"MASTER_AUTO_BUY",name:"Master Control",type:"SPECIAL",cost:new o(1e10),currency:"Ink",description:"Unlocks a master toggle to instantly enable Auto-Buy for all stat upgrades at once.",icon:"Speed",unlockKey:"masterAutoBuyUnlocked"},{id:"RARITY_FILTERS",name:"Curator's Insight",type:"SPECIAL",cost:new o(1e4),currency:"Acrylic",description:"Unlocks advanced toggles in the Gallery to instantly hide or reveal all sketches of a specific rarity.",icon:"Gallery",unlockKey:"rarityFiltersUnlocked"},{id:"INK_DISCOUNT",name:"Ink Thinner",type:"MODIFIER",cost:new o(1e6),currency:"Acrylic",description:"Reduces the cost of all Ink stat upgrades by 90%.",icon:"Ink",unlockKey:"inkDiscountUnlocked"},{id:"PRE_BATTLE_MEDITATION",name:"Pre-Battle Meditation",type:"SPECIAL",cost:new o(10),currency:"Spray",description:"Allows you to meditate before starting a manual challenge for a temporary stat boost.",icon:"Meditation",iconColor:"text-teal-500",unlockKey:"preBattleMeditationUnlocked"},{id:"MARKER_DISCOUNT",name:"Marker Discount",type:"MODIFIER",cost:new o(1e3),currency:"Spray",description:"Reduces the cost of all Marker stat upgrades by 99%.",icon:"Marker",unlockKey:"markerDiscountUnlocked"},{id:"PRECISE_ERASER",name:"Precise Eraser",type:"SPECIAL",cost:new o(1e12),currency:"Coffee",description:"Once per Redraw, halve the Max HP of a single sketch (up to Framed rarity) for the rest of the Redraw.",icon:"Eraser",iconColor:"text-pink-500",unlockKey:"preciseEraserUnlocked"},{id:"ACRYLIC_DISCOUNT",name:"Acrylic Discount",type:"MODIFIER",cost:new o(1e6),currency:"Spray",description:"Reduces the cost of all Acrylic stat upgrades by 99%.",icon:"Acrylic",unlockKey:"acrylicDiscountUnlocked"},{id:"ACRYLIC_GENERATOR",name:"Acrylic Generator",type:"GENERATOR",cost:new o(1e18),currency:"Marker",description:"Automatically produces 0.01% of Acrylic you have gotten from Battle Rewards per second.",icon:"Acrylic",unlockKey:"acrylicGeneratorUnlocked"},{id:"SPRAY_GENERATOR",name:"Spray Generator",type:"GENERATOR",cost:new o(1e18),currency:"Acrylic",description:"Automatically produces 0.01% of Spray you have gotten from Battle Rewards per second.",icon:"Spray",unlockKey:"sprayGeneratorUnlocked"},{id:"REVIEW_AUDIT",name:"Review Audit",type:"SPECIAL",cost:new o(1e21),currency:"Charcoal",description:"Set a maximum number of victories for Portfolio Review.",icon:"AutoAdvance",iconColor:"text-green-600",unlockKey:"reviewAuditUnlocked"}],bk=t=>Ta.find(r=>r.id===t),pa=[{id:"upgrade_hp_graphite",stat:"maxHp",name:"Thick Paper",description:"+3% HP per level",currency:"Graphite",baseCost:2,costMultiplier:1.275,multiplier:t=>new o(1).plus(new o(.03).times(t)),maxLevel:-1},{id:"upgrade_atk_graphite",stat:"attack",name:"Bold Lines",description:"+5% ATK per level",currency:"Graphite",baseCost:5,costMultiplier:1.5,multiplier:t=>new o(1).plus(new o(.05).times(t)),maxLevel:-1},{id:"upgrade_spd_graphite",stat:"attackSpeed",name:"Quick Strokes",description:"*0.995 Delay per level",currency:"Graphite",baseCost:10,costMultiplier:50,multiplier:t=>new o(.995).pow(t),maxLevel:50},{id:"upgrade_critdmg_wax",stat:"critDmg",name:"Sharp Edges",description:"+0.5% Crit DMG per level",currency:"Wax",baseCost:200,costMultiplier:4.5,multiplier:t=>new o(1).plus(new o(.005).times(t)),maxLevel:200},{id:"upgrade_atk_wax",stat:"attack",name:"Wax Seal",description:"+4% ATK per level",currency:"Wax",baseCost:4,costMultiplier:1.7,multiplier:t=>new o(1).plus(new o(.04).times(t)),maxLevel:-1},{id:"upgrade_dodge_wax",stat:"dodge",name:"Liquid Motion",description:"+0.25% Dodge per level",currency:"Wax",baseCost:1500,costMultiplier:6,multiplier:t=>new o(1).plus(new o(.0025).times(t)),maxLevel:200},{id:"upgrade_hp_charcoal",stat:"maxHp",name:"Thick Shading",description:"+2% HP per level",currency:"Charcoal",baseCost:2,costMultiplier:1.5,multiplier:t=>new o(1).plus(new o(.02).times(t)),maxLevel:-1},{id:"upgrade_armor_charcoal",stat:"armor",name:"Compressed Charcoal",description:"+2% Armor per level",currency:"Charcoal",baseCost:4,costMultiplier:2.25,multiplier:t=>new o(1).plus(new o(.02).times(t)),maxLevel:-1},{id:"upgrade_glancing_charcoal",stat:"glancingBlow",name:"Smudged Lines",description:"+0.2% Glancing Blow per level",currency:"Charcoal",baseCost:2e3,costMultiplier:4,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:500},{id:"upgrade_maxdamage_coffee",stat:"maxDamage",name:"Calculated Risk",description:"+0.4% Max DMG per level",currency:"Coffee",baseCost:4,costMultiplier:2.5,multiplier:t=>new o(1).plus(new o(.004).times(t)),maxLevel:-1},{id:"upgrade_counter_coffee",stat:"counter",name:"Reaction Time",description:"+0.5% Counter per level",currency:"Coffee",baseCost:50,costMultiplier:15,multiplier:t=>new o(1).plus(new o(.005).times(t)),maxLevel:200},{id:"upgrade_parrydmg_coffee",stat:"parryDmg",name:"Bitter Aftertaste",description:"+0.5% Parry Damage per level",currency:"Coffee",baseCost:2500,costMultiplier:30,multiplier:t=>new o(1).plus(new o(.005).times(t)),maxLevel:400},{id:"upgrade_mindmg_ink",stat:"minDamage",name:"Steady Hand",description:"+0.3% Min Damage per level",currency:"Ink",baseCost:3,costMultiplier:3,multiplier:t=>new o(1).plus(new o(.003).times(t)),maxLevel:-1},{id:"upgrade_critchance_ink",stat:"critChance",name:"Precision Work",description:"+0.2% Crit Chance per level",currency:"Ink",baseCost:500,costMultiplier:5,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:100},{id:"upgrade_execute_ink",stat:"execute",name:"Final Touches",description:"+0.2% Execute per level",currency:"Ink",baseCost:3e3,costMultiplier:4,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:-1},{id:"upgrade_lifesteal_marker",stat:"lifesteal",name:"Vampiric Touch",description:"+0.25% Lifesteal per level",currency:"Marker",baseCost:2,costMultiplier:6,multiplier:t=>new o(1).plus(new o(.0025).times(t)),maxLevel:-1},{id:"upgrade_armorpen_marker",stat:"armorPen",name:"Serrated Edge",description:"+2% Armor Pen per level",currency:"Marker",baseCost:5,costMultiplier:2,multiplier:t=>new o(1).plus(new o(.02).times(t)),maxLevel:-1},{id:"upgrade_blockamount_marker",stat:"blockAmount",name:"Solid Fill",description:"+0.2% Block Amount per level",currency:"Marker",baseCost:3500,costMultiplier:5,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:-1},{id:"upgrade_bleed_acrylic",stat:"bleedChance",name:"Red Spill",description:"+0.3% Bleed Chance per level",currency:"Acrylic",baseCost:5,costMultiplier:15,multiplier:t=>new o(1).plus(new o(.003).times(t)),maxLevel:-1},{id:"upgrade_plague_acrylic",stat:"plagueChance",name:"Toxic Pigment",description:"+0.2% Plague Chance per level",currency:"Acrylic",baseCost:10,costMultiplier:6,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:-1},{id:"upgrade_hypnotize_acrylic",stat:"hypnotizeChance",name:"Swirling Colors",description:"+0.1% Hypnotize Chance per level",currency:"Acrylic",baseCost:4e3,costMultiplier:100,multiplier:t=>new o(1).plus(new o(.001).times(t)),maxLevel:-1},{id:"upgrade_atk_spray",stat:"attack",name:"Spray",description:"+3% ATK per level",currency:"Spray",baseCost:3,costMultiplier:1.9,multiplier:t=>new o(1).plus(new o(.03).times(t)),maxLevel:-1},{id:"upgrade_accuracy_spray",stat:"accuracy",name:"Spray",description:"+0.2% Accuracy per level",currency:"Spray",baseCost:50,costMultiplier:25,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:50},{id:"upgrade_hinder_spray",stat:"hinderChance",name:"Spray",description:"+0.25% Hinder Chance per level",currency:"Spray",baseCost:500,costMultiplier:5,multiplier:t=>new o(1).plus(new o(.0025).times(t)),maxLevel:400},{id:"upgrade_hp_photon",stat:"maxHp",name:"Photon",description:"+2% HP per level",currency:"Photon",baseCost:20,costMultiplier:1.7,multiplier:t=>new o(1).plus(new o(.02).times(t)),maxLevel:-1},{id:"upgrade_burnchance_photon",stat:"burnChance",name:"Photon",description:"+0.2% Burn Chance per level",currency:"Photon",baseCost:200,costMultiplier:16,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:250},{id:"upgrade_electrocutechance_photon",stat:"electrocuteChance",name:"Photon",description:"+0.2% Electrocute Chance per level",currency:"Photon",baseCost:2e3,costMultiplier:64,multiplier:t=>new o(1).plus(new o(.002).times(t)),maxLevel:250}],Me=({children:t,className:r})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:t}),wk=({className:t})=>l.jsxs(Me,{className:t,title:"Health",children:[l.jsx("path",{d:"M24 8.5C19 3 10 3 6 10C2 17 8 28 24 44C40 28 46 17 42 10C38 3 29 3 24 8.5",className:"fill-none"}),l.jsx("path",{d:"M12 14C10 12 10 10 12 8",className:"opacity-50"}),l.jsx("path",{d:"M36 14C38 12 38 10 36 8",className:"opacity-50"}),l.jsx("path",{d:"M24 14V26",className:"opacity-30"}),l.jsx("path",{d:"M16 18L32 18",className:"opacity-30"}),l.jsx("path",{d:"M20 32L28 32",className:"opacity-30"}),l.jsx("path",{d:"M30 14L34 12",className:"opacity-50"}),l.jsx("path",{d:"M18 14L14 12",className:"opacity-50"})]}),Ix=({className:t})=>l.jsxs(Me,{className:t,title:"Attack",children:[l.jsx("path",{d:"M29 9L39 19"})," ",l.jsx("path",{d:"M19 29L9 39"})," ",l.jsx("path",{d:"M37 11L18 30L16 38L8 40L10 32L29 13L37 11Z"})," ",l.jsx("path",{d:"M29 13L35 19"})," ",l.jsx("path",{d:"M15 27L21 33"})," ",l.jsx("circle",{cx:"13",cy:"35",r:"1.5",className:"fill-current"})," ",l.jsx("path",{d:"M38 6L44 10",className:"opacity-50"}),l.jsx("path",{d:"M42 4L46 8",className:"opacity-50"})]}),ic=({className:t})=>l.jsxs(Me,{className:t,title:"Speed",children:[l.jsx("path",{d:"M18 38 L40 12 L44 16 L22 42 Z",strokeLinejoin:"round",fill:"none",strokeWidth:"2.5"}),l.jsx("path",{d:"M14 34 L26 46",strokeLinecap:"round",strokeWidth:"2.5"}),l.jsx("path",{d:"M12 44 L16 40",strokeLinecap:"round",className:"opacity-50"})," ",l.jsx("path",{d:"M8 12 H36",strokeLinecap:"round",className:"opacity-80",strokeWidth:"2.5"}),l.jsx("path",{d:"M10 22 H24",strokeLinecap:"round",className:"opacity-80",strokeWidth:"2.5"}),l.jsx("path",{d:"M12 32 H18",strokeLinecap:"round",className:"opacity-60",strokeWidth:"2.5"}),l.jsx("path",{d:"M36 30 L36 44",strokeLinecap:"round",strokeWidth:"2"}),l.jsx("path",{d:"M30 36 L36 30 L42 36",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]}),kk=({className:t})=>l.jsxs(Me,{className:t,title:"HP Regen",children:[l.jsx("path",{d:"M24 12C20 7 12 7 8 13C4 19 10 28 24 40C38 28 44 19 40 13C36 7 28 7 24 12",className:"fill-none"}),l.jsx("path",{d:"M24 18V28",strokeWidth:"3"}),l.jsx("path",{d:"M19 23H29",strokeWidth:"3"}),l.jsx("path",{d:"M16 10L14 6",className:"opacity-50"}),l.jsx("path",{d:"M32 10L34 6",className:"opacity-50"}),l.jsx("path",{d:"M10 18L6 16",className:"opacity-50"}),l.jsx("path",{d:"M38 18L42 16",className:"opacity-50"})]}),vk=({className:t})=>l.jsxs(Me,{className:t,title:"Dodge",children:[l.jsx("path",{d:"M8 36h16c8 0 14-6 14-14 0-4-3-8-8-8"}),l.jsx("path",{d:"M12 20h20"}),l.jsx("path",{d:"M6 12h24"}),l.jsx("path",{d:"M36 12l4 4-4 4",className:"opacity-50"})," "]}),Ck=({className:t})=>l.jsxs(Me,{className:t,title:"Lifesteal",children:[l.jsx("path",{d:"M24 4v16",strokeDasharray:"4 4",className:"opacity-50"}),l.jsx("path",{d:"M14 6 C14 6 10 16 10 22 C10 32 20 42 24 42 C28 42 38 32 38 22 C38 16 34 6 34 6"}),l.jsx("path",{d:"M24 42v-8",className:"opacity-30"}),l.jsx("path",{d:"M18 14h12"})," ",l.jsx("path",{d:"M18 14l3 8l3-8l3 8l3-8",className:"fill-current opacity-30"})]}),Sk=({className:t})=>l.jsxs(Me,{className:t,title:"Crit Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"16"}),l.jsx("path",{d:"M24 4v8"}),l.jsx("path",{d:"M24 36v8"}),l.jsx("path",{d:"M4 24h8"}),l.jsx("path",{d:"M36 24h8"}),l.jsx("circle",{cx:"24",cy:"24",r:"4",className:"fill-current opacity-50"})]}),Nk=({className:t})=>l.jsxs(Me,{className:t,title:"Crit Damage",children:[l.jsx("path",{d:"M24 6l4 10l10 4l-10 4l-4 10l-4-10l-10-4l10-4z",className:"fill-none"}),l.jsx("circle",{cx:"24",cy:"24",r:"2",className:"fill-current"}),l.jsx("path",{d:"M38 10l-6 8",className:"opacity-50"}),l.jsx("path",{d:"M10 38l6-8",className:"opacity-50"}),l.jsx("path",{d:"M38 38l-6-8",className:"opacity-50"}),l.jsx("path",{d:"M10 10l6 8",className:"opacity-50"})]}),Ek=({className:t})=>l.jsxs(Me,{className:t,title:"Armor",children:[l.jsx("path",{d:"M24 4L8 12v12c0 12 8 18 16 20 8-2 16-8 16-20V12L24 4z",className:"fill-none"}),l.jsx("path",{d:"M24 10L12 16v8c0 8 5 12 12 14 7-2 12-6 12-14v-8L24 10z",className:"opacity-30"}),l.jsx("path",{d:"M24 14v20",className:"opacity-50"}),l.jsx("path",{d:"M16 22h16",className:"opacity-50"})]}),Tk=({className:t})=>l.jsxs(Me,{className:t,title:"Min Damage",children:[l.jsx("path",{d:"M12 36l24 0",strokeWidth:"4"}),l.jsx("path",{d:"M12 36l6 -6"}),l.jsx("path",{d:"M12 36l6 6"}),l.jsx("path",{d:"M24 12v20",className:"opacity-30"})]}),Mk=({className:t})=>l.jsxs(Me,{className:t,title:"Max Damage",children:[l.jsx("path",{d:"M12 12l24 0",strokeWidth:"4"}),l.jsx("path",{d:"M36 12l-6 -6"}),l.jsx("path",{d:"M36 12l-6 6"}),l.jsx("path",{d:"M24 16v20",className:"opacity-30"})]}),_k=({className:t})=>l.jsxs(Me,{className:t,title:"Accuracy",children:[l.jsx("circle",{cx:"24",cy:"24",r:"12"}),l.jsx("circle",{cx:"24",cy:"24",r:"4",className:"fill-current"}),l.jsx("path",{d:"M24 4v8",className:"opacity-30"}),l.jsx("path",{d:"M24 36v8",className:"opacity-30"}),l.jsx("path",{d:"M4 24h8",className:"opacity-30"}),l.jsx("path",{d:"M36 24h8",className:"opacity-30"})]}),Ak=({className:t})=>l.jsxs(Me,{className:t,title:"Armor Penetration",children:[l.jsx("path",{d:"M36 12l-24 24",strokeWidth:"3"}),l.jsx("path",{d:"M36 12l-8 0"}),l.jsx("path",{d:"M36 12l0 8"}),l.jsx("path",{d:"M16 32l-4 4",className:"opacity-50"})]}),jk=({className:t})=>l.jsxs(Me,{className:t,title:"Execute",children:[l.jsx("path",{d:"M12 12l24 24",strokeWidth:"3",className:"text-red-600"}),l.jsx("path",{d:"M36 12l-24 24",strokeWidth:"3",className:"text-red-600"}),l.jsx("circle",{cx:"24",cy:"24",r:"8",className:"opacity-30"})]}),Rk=({className:t})=>l.jsxs(Me,{className:t,title:"Parry",children:[l.jsx("path",{d:"M14 12l8 8l16 -16",strokeWidth:"3",className:"opacity-50"}),l.jsx("path",{d:"M10 38l14 -14",strokeWidth:"3"}),l.jsx("path",{d:"M24 24l-6 6",className:"opacity-30"})]}),Lk=({className:t})=>l.jsxs(Me,{className:t,title:"Parry Damage",children:[l.jsx("path",{d:"M10 38l14 -14",strokeWidth:"3"}),l.jsx("path",{d:"M38 10l-14 14",strokeWidth:"2",strokeDasharray:"4 4",className:"text-red-500"}),l.jsx("circle",{cx:"24",cy:"24",r:"2",className:"fill-current"})]}),Dk=({className:t})=>l.jsxs(Me,{className:t,title:"Glancing Blow",children:[l.jsx("path",{d:"M12 12l24 24",className:"opacity-30"}),l.jsx("circle",{cx:"34",cy:"14",r:"6",strokeWidth:"1"}),l.jsx("path",{d:"M14 34l8 -8"})]}),Ok=({className:t})=>l.jsxs(Me,{className:t,title:"Counter",children:[l.jsx("path",{d:"M8 24h12l4 -4l16 0"}),l.jsx("path",{d:"M40 20l-6 -6"}),l.jsx("path",{d:"M40 20l-6 6"}),l.jsx("path",{d:"M12 32l8 -8",className:"opacity-30"})]}),Pk=({className:t})=>l.jsxs(Me,{className:t,title:"Bleed Chance",children:[l.jsx("path",{d:"M24 6 C24 6 10 18 10 28 C10 36 16 42 24 42 C32 42 38 36 38 28 C38 18 24 6 24 6 Z",className:"text-red-700"}),l.jsx("path",{d:"M24 16 L24 34",className:"stroke-white opacity-50"}),l.jsx("path",{d:"M20 22 L28 28",className:"stroke-white opacity-50"}),l.jsx("path",{d:"M28 22 L20 28",className:"stroke-white opacity-50"})]}),lg=({className:t})=>l.jsxs(Me,{className:t,title:"Burn Chance",children:[l.jsx("path",{d:"M24 6C24 6 14 16 14 26C14 34 18 40 24 40C30 40 34 34 34 26C34 16 24 6 24 6Z",className:"text-orange-500 fill-current opacity-20"}),l.jsx("path",{d:"M24 42C12 42 6 30 12 18C16 30 20 32 24 14C28 32 32 30 36 18C42 30 36 42 24 42Z"}),l.jsx("path",{d:"M24 34C22 30 22 26 24 22C26 26 26 30 24 34Z",className:"fill-current opacity-50"})]}),Ik=({className:t})=>l.jsxs(Me,{className:t,title:"Hinder Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"18",className:"opacity-30"}),l.jsx("path",{d:"M12 12 L36 36",strokeWidth:"4"}),l.jsx("path",{d:"M36 12 L12 36",strokeWidth:"4"}),l.jsx("rect",{x:"18",y:"16",width:"12",height:"16",rx:"2",className:"fill-current opacity-20"})]}),Hk=({className:t})=>l.jsxs(Me,{className:t,title:"Plague Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"16",className:"opacity-20 fill-current"}),l.jsx("circle",{cx:"24",cy:"24",r:"6"}),l.jsx("path",{d:"M24 6V18 M6 42L15 27 M42 42L33 27",strokeWidth:"4",strokeLinecap:"round",className:"stroke-current"})]}),Uk=({className:t})=>l.jsxs(Me,{className:t,title:"Poison Chance",children:[l.jsx("path",{d:"M24 6 V14 L12 40 H36 L24 14",className:"stroke-current fill-current opacity-20",strokeWidth:"4",strokeLinejoin:"round"}),l.jsx("circle",{cx:"24",cy:"28",r:"3",className:"fill-current"}),l.jsx("circle",{cx:"19",cy:"34",r:"2",className:"fill-current opacity-70"}),l.jsx("circle",{cx:"29",cy:"34",r:"2",className:"fill-current opacity-70"})]}),Bk=({className:t})=>l.jsxs(Me,{className:t,title:"Hypnotize Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"16",strokeWidth:"2",className:"stroke-current fill-none opacity-40"}),l.jsx("circle",{cx:"24",cy:"24",r:"10",strokeWidth:"3",className:"stroke-current fill-none opacity-70"}),l.jsx("circle",{cx:"24",cy:"24",r:"4",className:"fill-current"}),l.jsx("path",{d:"M24 8 L24 4 M24 44 L24 40 M8 24 L4 24 M44 24 L40 24",strokeWidth:"3",className:"stroke-current opacity-50"})]}),zk=({className:t})=>l.jsxs(Me,{className:t,title:"Slow Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"16",className:"stroke-current opacity-30",strokeWidth:"2"}),l.jsx("path",{d:"M24 12V24L30 30",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("path",{d:"M12 24H36",strokeWidth:"2",strokeDasharray:"2 4",className:"opacity-50"})]}),Gk=({className:t})=>l.jsxs(Me,{className:t,title:"Frailty Chance",children:[l.jsx("path",{d:"M24 4L8 12v12c0 12 8 18 16 20 8-2 16-8 16-20V12L24 4z",className:"fill-none stroke-current",strokeWidth:"2"}),l.jsx("path",{d:"M24 10 L24 38 M12 20 L36 20",className:"stroke-current opacity-30"}),l.jsx("path",{d:"M18 14 L30 26 M30 14 L18 26",className:"stroke-current",strokeWidth:"2"})]}),Vk=({className:t})=>l.jsxs(Me,{className:t,title:"Freeze Chance",children:[l.jsx("path",{d:"M24 4V44 M4 24H44",strokeWidth:"3",strokeLinecap:"round",className:"stroke-blue-400"}),l.jsx("path",{d:"M10 10L38 38 M38 10L10 38",strokeWidth:"2",className:"stroke-blue-300 opacity-70"}),l.jsx("circle",{cx:"24",cy:"24",r:"4",className:"fill-none stroke-current"})]}),Fk=({className:t})=>l.jsxs(Me,{className:t,title:"Multi Strike Chance",children:[l.jsx("path",{d:"M14 34L34 14",strokeWidth:"3",className:"stroke-current opacity-50"}),l.jsx("path",{d:"M10 38L38 10",strokeWidth:"3",className:"stroke-current"}),l.jsx("path",{d:"M42 6L46 10",className:"opacity-70"}),l.jsx("path",{d:"M38 6L42 10",className:"opacity-70"})]}),qk=({className:t})=>l.jsxs(Me,{className:t,title:"Block Chance",children:[l.jsx("path",{d:"M24 6C24 6 10 12 10 20C10 30 16 38 24 42C32 38 38 30 38 20C38 12 24 6 24 6Z",className:"stroke-current fill-none",strokeWidth:"2.5"}),l.jsx("path",{d:"M24 16L24 24M20 20L28 20",strokeWidth:"3",className:"stroke-current"}),l.jsx("path",{d:"M21 17L27 23M27 17L21 23",strokeWidth:"2",className:"stroke-current"})]}),$k=({className:t})=>l.jsxs(Me,{className:t,title:"Block Amount",children:[l.jsx("path",{d:"M12 12H36V24C36 34 24 40 24 40C24 40 12 34 12 24V12Z",className:"stroke-current fill-none",strokeWidth:"3"}),l.jsx("path",{d:"M18 20H30",strokeWidth:"3",className:"opacity-80"}),l.jsx("path",{d:"M24 12V28",strokeWidth:"3",className:"opacity-80"})]}),Yk=({className:t})=>l.jsxs(Me,{className:t,title:"Haste Chance",children:[l.jsx("path",{d:"M10 24 C10 24 14 36 26 36 H38 V30 H26",className:"stroke-current fill-none",strokeWidth:"2.5"}),l.jsx("path",{d:"M38 30 L38 20 L26 22",className:"stroke-current fill-none",strokeWidth:"2.5"}),l.jsx("path",{d:"M18 24 C10 14 20 6 34 14",className:"stroke-current fill-none opacity-80"}),l.jsx("path",{d:"M22 24 C16 16 22 10 32 16",className:"stroke-current fill-none opacity-60"}),l.jsx("path",{d:"M6 30H4",className:"opacity-50"}),l.jsx("path",{d:"M8 36H4",className:"opacity-50"})]}),Wk=({className:t})=>l.jsxs(Me,{className:t,title:"Damage Absorb",children:[l.jsx("path",{d:"M24 6C24 6 10 12 10 24C10 34 16 40 24 44C32 40 38 34 38 24C38 12 24 6 24 6Z",className:"stroke-current fill-none opacity-50",strokeWidth:"2"}),l.jsx("path",{d:"M16 22L22 28M32 18L26 24",className:"stroke-current",strokeWidth:"2.5"}),l.jsx("path",{d:"M24 24L24 24",className:"stroke-current",strokeWidth:"4",strokeLinecap:"round"}),l.jsx("path",{d:"M14 16C14 16 24 8 34 16",className:"stroke-current opacity-80",fill:"none"})]}),Kk=({className:t})=>l.jsxs(Me,{className:t,title:"Debuff Opacity",children:[l.jsx("path",{d:"M12 40V18C12 10 16 6 24 6C32 6 36 10 36 18V40",className:"stroke-current fill-none",strokeWidth:"2"}),l.jsx("path",{d:"M14 40C14 40 16 34 20 40C20 40 24 34 28 40C28 40 32 34 34 40",className:"stroke-current fill-none",strokeWidth:"2"}),l.jsx("path",{d:"M12 24H36",className:"stroke-current opacity-20",strokeWidth:"1"}),l.jsx("path",{d:"M12 30H36",className:"stroke-current opacity-10",strokeWidth:"1"}),l.jsx("path",{d:"M8 12L16 20M8 20L16 12",className:"stroke-current opacity-60",strokeWidth:"2"})]}),Qk=({className:t})=>l.jsxs(Me,{className:t,title:"Condition Remedy",children:[l.jsx("path",{d:"M20 14V8H28V14L34 36C34 40 30 42 24 42C18 42 14 40 14 36L20 14Z",className:"stroke-current fill-none",strokeWidth:"2.5"}),l.jsx("path",{d:"M16 30H32",className:"stroke-current opacity-60"}),l.jsx("path",{d:"M30 6L32 2M32 6L30 2",className:"stroke-current"}),l.jsx("path",{d:"M36 12L38 8M38 12L36 8",className:"stroke-current opacity-80"})]}),Xk=({className:t})=>l.jsxs(Me,{className:t,title:"Electrocute Chance",children:[l.jsx("path",{d:"M28 2L14 26H26L20 46L36 20H24L28 2Z",className:"text-yellow-500 stroke-current fill-current opacity-80",strokeWidth:"2",strokeLinejoin:"round"}),l.jsx("path",{d:"M12 12L8 8",className:"stroke-current opacity-50"}),l.jsx("path",{d:"M40 36L44 40",className:"stroke-current opacity-50"}),l.jsx("path",{d:"M36 4L40 8",className:"stroke-current opacity-30"})]}),Zk=({className:t})=>l.jsxs(Me,{className:t,title:"Curse Chance",children:[l.jsx("path",{d:"M24 8 C16 8 12 14 12 22 C12 30 16 38 24 38 C32 38 36 30 36 22 C36 14 32 8 24 8 Z",className:"text-purple-900 stroke-current fill-none",strokeWidth:"2.5"}),l.jsx("circle",{cx:"20",cy:"20",r:"2",className:"fill-current"}),l.jsx("circle",{cx:"28",cy:"20",r:"2",className:"fill-current"}),l.jsx("path",{d:"M18 30 H30",className:"stroke-current"}),l.jsx("path",{d:"M20 28 V32 M24 28 V32 M28 28 V32",className:"stroke-current"}),l.jsx("path",{d:"M32 10 L36 6 M34 14 L38 10",className:"stroke-current opacity-60"}),l.jsx("path",{d:"M12 10 L8 6",className:"stroke-current opacity-60"})]}),Jk=({className:t})=>l.jsxs(Me,{className:t,title:"Black Flame",children:[l.jsx("path",{d:"M24 44C32 44 38 38 38 30C38 22 30 10 24 2C18 10 10 22 10 30C10 38 16 44 24 44Z",className:"fill-current text-slate-900"}),l.jsx("path",{d:"M24 12C20 18 16 24 16 32C16 38 20 42 24 42C28 42 32 38 32 32C32 24 28 18 24 12Z",className:"fill-current text-purple-950 opacity-60"}),l.jsx("path",{d:"M24 22C22 26 20 30 20 34C20 38 22 40 24 40C26 40 28 38 28 34C28 30 26 26 24 22Z",className:"fill-current text-indigo-900 opacity-80"}),l.jsx("path",{d:"M14 14L10 8",className:"stroke-slate-800 opacity-40"}),l.jsx("path",{d:"M34 14L38 8",className:"stroke-slate-800 opacity-40"})]}),ev=({className:t})=>l.jsxs(Me,{className:t,title:"Banana Peel",children:[l.jsx("path",{d:"M24 40 L10 36 C10 36 6 34 10 30 C14 26 20 26 20 26 L24 10",className:"stroke-current text-yellow-500"}),l.jsx("path",{d:"M24 40 L38 36 C38 36 42 34 38 30 C34 26 28 26 28 26 L24 10",className:"stroke-current text-yellow-500"}),l.jsx("path",{d:"M24 40 C24 40 24 30 14 20",className:"stroke-current text-yellow-600 opacity-60"}),l.jsx("path",{d:"M24 40 C24 40 24 30 34 20",className:"stroke-current text-yellow-600 opacity-60"}),l.jsx("circle",{cx:"24",cy:"10",r:"2",className:"fill-current text-yellow-700"})]}),tv=({className:t})=>l.jsxs(Me,{className:t,title:"Leap Chance",children:[l.jsx("path",{d:"M10 38 C10 20 20 10 30 20 C40 30 44 24 44 24",strokeWidth:"3"}),l.jsx("path",{d:"M8 30 H12 M6 34 H10 M4 38 H8",className:"opacity-50"}),l.jsx("path",{d:"M20 28 L24 24 M28 32 L32 28",className:"opacity-30"})]}),av=({className:t})=>l.jsxs(Me,{className:t,title:"Energy Wave Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"16",className:"opacity-20 fill-current"}),l.jsx("path",{d:"M24 8 A16 16 0 0 1 40 24",strokeWidth:"4",className:"text-blue-400"}),l.jsx("path",{d:"M24 14 A10 10 0 0 1 34 24",strokeWidth:"3",className:"text-blue-300 opacity-70"}),l.jsx("path",{d:"M24 20 A4 4 0 0 1 28 24",strokeWidth:"2",className:"text-blue-200 opacity-50"}),l.jsx("circle",{cx:"24",cy:"24",r:"2",className:"fill-current"})]}),nv=({className:t})=>l.jsxs(Me,{className:t,title:"Varnish",children:[l.jsx("path",{d:"M24 6C24 6 10 12 10 20C10 32 18 42 24 44C30 42 38 32 38 20C38 12 24 6 24 6Z",className:"stroke-current fill-none",strokeWidth:"2.5"}),l.jsx("path",{d:"M24 12C20 8 16 12 16 16C16 22 24 28 24 28C24 28 32 22 32 16C32 12 28 8 24 12Z",className:"fill-current text-amber-500 opacity-60"}),l.jsx("path",{d:"M14 14C14 14 18 10 24 10C30 10 34 14 34 14",className:"stroke-current opacity-80",strokeWidth:"2"}),l.jsx("circle",{cx:"20",cy:"12",r:"1.5",className:"fill-white opacity-40"})]}),rv=({className:t})=>l.jsxs(Me,{className:t,title:"Surrealism",children:[l.jsx("path",{d:"M24 4C14 4 6 12 6 22C6 32 12 44 24 44C36 44 42 32 42 22C42 12 34 4 24 4Z",className:"stroke-current fill-none opacity-50",strokeWidth:"2"}),l.jsx("path",{d:"M24 10C24 10 12 14 12 24C12 30 16 40 24 40C32 40 36 30 36 24C36 14 24 10 24 10Z",className:"stroke-current",strokeWidth:"3"}),l.jsx("path",{d:"M24 10V24L16 32",className:"stroke-current opacity-70",strokeWidth:"2.5"}),l.jsx("path",{d:"M10 20L38 28",className:"stroke-current opacity-30",strokeWidth:"1",strokeDasharray:"2 4"}),l.jsx("path",{d:"M10 28L38 20",className:"stroke-current opacity-30",strokeWidth:"1",strokeDasharray:"2 4"})]}),ov=({className:t})=>l.jsxs(Me,{className:t,title:"Inspiration",children:[l.jsx("path",{d:"M24 40C18 36 14 30 14 24C14 18 18 14 24 14C30 14 34 18 34 24C34 30 30 36 24 40Z",className:"stroke-current fill-none",strokeWidth:"2.5"}),l.jsx("path",{d:"M20 44H28",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("path",{d:"M24 24V10",strokeWidth:"4",strokeLinecap:"round",className:"text-yellow-400"}),l.jsx("path",{d:"M18 16L14 8 M30 16L34 8",className:"stroke-current opacity-50",strokeWidth:"2"}),l.jsx("path",{d:"M24 18V22",className:"stroke-current opacity-30",strokeWidth:"2"})]}),sv=({className:t})=>l.jsx(Me,{className:t,title:"Notifications Enabled",children:l.jsxs("g",{transform:"translate(0, 7)",children:[l.jsx("path",{d:"M18 8a6 6 0 0 1 12 0c0 7 3 9 3 9H15s3-2 3-9"}),l.jsx("path",{d:"M21 21a3 3 0 0 0 6 0"})]})}),iv=({className:t})=>l.jsx(Me,{className:t,title:"Notifications Muted",children:l.jsxs("g",{transform:"translate(0, 7)",children:[l.jsx("path",{d:"m11.18 5.76a6 6 0 0 1 11.23-1.6c.16.51.35 1.04.59 1.57"}),l.jsx("path",{d:"M18 8a6 6 0 0 0-.7 2.8c0 2.1-.7 3.7-1.4 4.8"}),l.jsx("path",{d:"M33 17H15"}),l.jsx("path",{d:"M15 17s3-2 3-9",className:"opacity-30"}),l.jsx("path",{d:"M21 21a3 3 0 0 0 6 0"}),l.jsx("line",{x1:"2",y1:"2",x2:"46",y2:"46",opacity:"0.6"})]})}),lv=({className:t})=>l.jsxs(Me,{className:t,title:"Balloon Chance",children:[l.jsx("path",{d:"M24 10 C14 10 12 24 12 30 C12 36 20 40 24 40 C28 40 36 36 36 30 C36 24 34 10 24 10 Z",className:"stroke-current fill-current opacity-20",strokeWidth:"2.5"}),l.jsx("path",{d:"M22 40 L20 44 L28 44 L26 40 Z",className:"stroke-current"}),l.jsx("path",{d:"M24 44 C22 48 26 52 24 56",className:"stroke-current opacity-50",strokeWidth:"1.5"}),l.jsx("path",{d:"M30 16 C30 16 32 20 32 26",className:"stroke-current opacity-60",strokeWidth:"2",strokeLinecap:"round"})]}),cv=({className:t})=>l.jsxs(Me,{className:t,title:"Thorns Chance",children:[l.jsx("path",{d:"M12 36 C16 16 32 16 36 36",className:"stroke-current fill-none",strokeWidth:"3"}),l.jsx("path",{d:"M14 26 L10 22 M20 18 L18 12 M28 18 L30 12 M34 26 L38 22",className:"stroke-current",strokeWidth:"2.5",strokeLinecap:"round"}),l.jsx("path",{d:"M16 32 L12 30 M32 32 L36 30 M24 16 L24 10",className:"stroke-current opacity-70",strokeWidth:"2",strokeLinecap:"round"})]}),uv=({className:t})=>l.jsxs(Me,{className:t,title:"Golden Luck Crit Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"16",className:"stroke-current fill-current opacity-20",strokeWidth:"2",strokeDasharray:"4 4"}),l.jsx("circle",{cx:"24",cy:"24",r:"12",className:"stroke-current fill-none",strokeWidth:"2"}),l.jsx("path",{d:"M24 14 L26 22 L34 24 L26 26 L24 34 L22 26 L14 24 L22 22 Z",className:"fill-current"})]}),dv=({className:t})=>l.jsxs(Me,{className:t,title:"Golden Luck Crit Damage",children:[l.jsx("path",{d:"M24 6 L28 16 L38 20 L28 24 L24 34 L20 24 L10 20 L20 16 Z",className:"stroke-current fill-current opacity-40",strokeWidth:"2"}),l.jsx("path",{d:"M24 28 L24 12 M18 18 L24 12 L30 18 M14 26 L24 16 L34 26",className:"stroke-current",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),fv=({className:t})=>l.jsxs(Me,{className:t,title:"Hot Potato Chance",children:[l.jsx("path",{d:"M12 28 C10 18 16 12 24 14 C32 16 36 22 36 28 C36 36 28 40 24 40 C16 40 14 36 12 28 Z",className:"stroke-current fill-current opacity-40 text-orange-700",strokeWidth:"2"}),l.jsx("path",{d:"M24 10 C24 10 22 6 24 2",className:"stroke-current text-orange-500",strokeWidth:"2"}),l.jsx("path",{d:"M16 14 C16 14 12 8 14 4",className:"stroke-current text-orange-500 opacity-80",strokeWidth:"2"}),l.jsx("path",{d:"M32 16 C32 16 36 10 34 6",className:"stroke-current text-orange-500 opacity-80",strokeWidth:"2"}),l.jsx("circle",{cx:"18",cy:"22",r:"1.5",className:"fill-current opacity-60"}),l.jsx("circle",{cx:"28",cy:"26",r:"1",className:"fill-current opacity-60"}),l.jsx("circle",{cx:"20",cy:"32",r:"2",className:"fill-current opacity-60"})]}),mv=({className:t})=>l.jsxs(Me,{className:t,title:"Brittle Chance",children:[l.jsx("path",{d:"M24 4 L10 12 L10 36 L24 44 L38 36 L38 12 Z",className:"stroke-current fill-current opacity-10",strokeWidth:"2"}),l.jsx("path",{d:"M14 10 L24 24 L38 18",className:"stroke-current",strokeWidth:"2"}),l.jsx("path",{d:"M24 24 L20 42",className:"stroke-current",strokeWidth:"2"}),l.jsx("path",{d:"M24 16 L30 12",className:"stroke-current opacity-60",strokeWidth:"1.5"}),l.jsx("path",{d:"M22 34 L12 28",className:"stroke-current opacity-60",strokeWidth:"1.5"}),l.jsx("path",{d:"M24 24 L32 30 L34 38",className:"stroke-current opacity-60",strokeWidth:"1.5"})]}),pv=({className:t})=>l.jsxs(Me,{className:t,title:"Irradiate Chance",children:[l.jsx("circle",{cx:"24",cy:"24",r:"3",className:"fill-current"}),l.jsx("path",{d:"M24 18 C20 12 12 14 10 20 L20 24 L24 18 Z",className:"fill-current opacity-40"}),l.jsx("path",{d:"M18.8 27 C13 31 16 38 23 38 L24 28 L18.8 27 Z",className:"fill-current opacity-40"}),l.jsx("path",{d:"M29.2 27 C35 31 32 38 25 38 L24 28 L29.2 27 Z",className:"fill-current opacity-40"}),l.jsx("path",{d:"M24 10V6 M12 12L8 8 M36 12L40 8 M10 24H6 M38 24H42",className:"stroke-current opacity-60",strokeWidth:"2"}),l.jsx("path",{d:"M12 36L8 40 M36 36L40 40 M24 38V42",className:"stroke-current opacity-30",strokeWidth:"1.5"})]}),Oe=t=>t.gt(0),ot={maxHp:{key:"maxHp",label:"HP",fullName:"Hit Points",description:"Maximum health. Combat ends immediately when current health reaches zero.",baseValue:new o(10),icon:wk,colorClass:"text-red-600",format:{decimals:2,suffix:""},categories:["Defense"],displayCondition:()=>!0},attack:{key:"attack",label:"ATK",fullName:"Attack Damage",description:"Baseline damage dealt per attack before multipliers, variance, and damage reduction.",baseValue:new o(1),icon:Ix,colorClass:"text-neutral-900 dark:text-neutral-100",format:{decimals:2,suffix:""},categories:["Offense"],displayCondition:()=>!0},minDamage:{key:"minDamage",label:"MND",fullName:"Minimum Damage",description:"The lower floor of damage variance. Base value is 75%. Higher values increase damage consistency.",baseValue:new o(75),icon:Tk,colorClass:"text-stone-600 dark:text-stone-400",format:{decimals:2,suffix:"%"},categories:["Offense"],displayCondition:()=>!0},maxDamage:{key:"maxDamage",label:"MXD",fullName:"Maximum Damage",description:"The upper ceiling of damage variance. Base value is 125%. Higher values increase peak damage potential.",baseValue:new o(125),icon:Mk,colorClass:"text-stone-600 dark:text-stone-400",format:{decimals:2,suffix:"%"},categories:["Offense"],displayCondition:()=>!0},attackSpeed:{key:"attackSpeed",label:"SPD",fullName:"Attack Speed",description:"Delay between attacks in milliseconds. Lower is faster. Improved by SPD rewards (negative values).",baseValue:new o(3e3),icon:ic,colorClass:"text-blue-600",format:{decimals:0,suffix:""},categories:["Offense","Utility"],displayCondition:()=>!0,isDecayImmune:!0},regen:{key:"regen",label:"RGN",fullName:"Health Regeneration",description:"Health recovered per second during combat. Applied continuously. Cannot exceed Max HP.",baseValue:new o(0),icon:kk,colorClass:"text-green-600",format:{decimals:2,suffix:""},categories:["Defense"],displayCondition:Oe},dodge:{key:"dodge",label:"DDG",fullName:"Dodge Chance",description:"Percent chance to completely avoid an incoming attack, avoiding damage and status effects. Countered by the attacker's Accuracy stat.",baseValue:new o(0),icon:vk,colorClass:"text-neutral-500",format:{decimals:2,suffix:"%"},categories:["Defense","Chance"],displayCondition:Oe,isDecayImmune:!0},lifesteal:{key:"lifesteal",label:"LFS",fullName:"Lifesteal",description:"Percentage of final damage dealt that is recovered as health. Applied after all damage modifiers (armor pen, execute, crit). Cannot exceed Max HP.",baseValue:new o(0),icon:Ck,colorClass:"text-purple-600",format:{decimals:2,suffix:"%"},categories:["Offense","Defense","Utility"],displayCondition:Oe},critChance:{key:"critChance",label:"CRC",fullName:"Critical Chance",description:"Percent chance to land a Critical Hit, multiplying damage by the Critical Damage percentage. Countered by the target's Glancing Blow chance.",baseValue:new o(0),icon:Sk,colorClass:"text-orange-600",format:{decimals:2,suffix:"%"},categories:["Offense","Chance"],displayCondition:Oe,isDecayImmune:!0},critDmg:{key:"critDmg",label:"CRD",fullName:"Critical Damage",description:"Damage multiplier applied on Critical Hits. Base is 100% (normal damage). Only takes effect when a Critical Hit triggers.",baseValue:new o(100),icon:Nk,colorClass:"text-red-800 dark:text-red-400",format:{decimals:2,suffix:"%"},categories:["Offense"],displayCondition:t=>t.gt(100)},armor:{key:"armor",label:"ARM",fullName:"Armor",description:"Flat damage subtracted from every incoming hit after all other calculations. Reduced by the attacker's Armor Penetration.",baseValue:new o(0),icon:Ek,colorClass:"text-slate-600",format:{decimals:2,suffix:""},categories:["Defense"],displayCondition:Oe},accuracy:{key:"accuracy",label:"ACC",fullName:"Accuracy",description:"Percent chance to bypass the target's Dodge and Parry checks entirely, guaranteeing the hit lands.",baseValue:new o(0),icon:_k,colorClass:"text-teal-600",format:{decimals:2,suffix:"%"},categories:["Offense","Chance"],displayCondition:Oe,isDecayImmune:!0},armorPen:{key:"armorPen",label:"APN",fullName:"Armor Penetration",description:"Flat amount of the target's Armor ignored when calculating damage reduction. Effectively increases damage against armored targets.",baseValue:new o(0),icon:Ak,colorClass:"text-zinc-500",format:{decimals:2,suffix:""},categories:["Offense"],displayCondition:Oe},execute:{key:"execute",label:"EXC",fullName:"Execute",description:"Percentage bonus damage dealt when the target is below 30% of its maximum HP.",baseValue:new o(0),icon:jk,colorClass:"text-rose-700",format:{decimals:2,suffix:"%"},categories:["Offense"],displayCondition:Oe},parry:{key:"parry",label:"PRR",fullName:"Parry Chance",description:"Percent chance to negate an incoming attack and reflect damage back based on Parry Damage %. Countered by the attacker's Accuracy.",baseValue:new o(0),icon:Rk,colorClass:"text-amber-600",format:{decimals:2,suffix:"%"},categories:["Defense","Chance","Utility"],displayCondition:Oe,isDecayImmune:!0},parryDmg:{key:"parryDmg",label:"PRD",fullName:"Parry Damage",description:"Percentage of the incoming raw damage reflected back to the attacker on a successful Parry. This damage is non-lethal.",baseValue:new o(0),icon:Lk,colorClass:"text-amber-800",format:{decimals:2,suffix:"%"},categories:["Offense"],displayCondition:Oe},glancingBlow:{key:"glancingBlow",label:"GLB",fullName:"Glancing Blow",description:"Percent chance to downgrade an incoming Critical Hit into a normal hit, negating the Critical Damage multiplier. Only triggers when the attacker crits.",baseValue:new o(0),icon:Dk,colorClass:"text-indigo-400",format:{decimals:2,suffix:"%"},categories:["Defense","Chance"],displayCondition:Oe,isDecayImmune:!0},counter:{key:"counter",label:"CTR",fullName:"Counter Chance",description:"Percent chance to launch an immediate retaliatory attack after being hit. Does not prevent damage nor reset your attack timer.",baseValue:new o(0),icon:Ok,colorClass:"text-violet-600",format:{decimals:2,suffix:"%"},categories:["Defense","Offense","Chance"],displayCondition:Oe,isDecayImmune:!0},bleedChance:{key:"bleedChance",label:"BLD",fullName:"Bleed Chance",description:"Chance to apply Bleed. Bleeding targets take recoil damage equal to 1% of damage dealt per stack. This damage is non-lethal. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Pk,colorClass:"text-red-700",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},burnChance:{key:"burnChance",label:"BRN",fullName:"Burn Chance",description:"Chance to apply Burn. Burning targets take recurring damage every second based on Burn Damage. This damage is non-lethal. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:lg,colorClass:"text-orange-500",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},burnDamage:{key:"burnDamage",label:"BRD",fullName:"Burn Damage",description:"Flat damage dealt per Burn stack every second. Bypasses Armor. Higher values make each Burn stack more devastating.",baseValue:new o(1),icon:lg,colorClass:"text-orange-600",format:{suffix:"",decimals:1},categories:["Debuffs","Offense"],displayCondition:t=>t.gt(1)},hinderChance:{key:"hinderChance",label:"HIN",fullName:"Hinder Chance",description:"Chance to apply Hinder. Each stack provides a 0.1% chance (capped at 1000 stacks or 100%) for the target's attack to fail. Stacks are reduced by half upon trigger. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Ik,colorClass:"text-neutral-500",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility"],displayCondition:Oe},plagueChance:{key:"plagueChance",label:"PLG",fullName:"Plague Chance",description:"Chance to apply Plague. Deals 1 damage per stack/sec. Each stack has a 10% chance per second to spread. This damage is non-lethal. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Hk,colorClass:"text-lime-700",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},poisonChance:{key:"poisonChance",label:"PSN",fullName:"Poison Chance",description:"Chance to apply Poison. Deals damage equal to 0.1% of maximum health per stack every second. This damage is non-lethal. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Uk,colorClass:"text-fuchsia-600",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},hypnotizeChance:{key:"hypnotizeChance",label:"HYP",fullName:"Hypnotize Chance",description:"Chance to apply Hypnotize. Targets have a 0.1% chance per stack to attack themselves instead (capped at 1000 stacks or 100%). Stacks clear upon trigger. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Bk,colorClass:"text-pink-500",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility","Offense"],displayCondition:Oe},slowChance:{key:"slowChance",label:"SLW",fullName:"Slow Chance",description:"Chance to apply Slow. Each stack increases the target's attack delay (SPD) by 0.1%. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:zk,colorClass:"text-indigo-600",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility"],displayCondition:Oe},frailtyChance:{key:"frailtyChance",label:"FRL",fullName:"Frailty Chance",description:"Chance to apply Frailty. Each stack increases final damage taken by 1%. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Gk,colorClass:"text-emerald-800 dark:text-emerald-400",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility"],displayCondition:Oe},freezeChance:{key:"freezeChance",label:"FRZ",fullName:"Freeze Chance",description:"Chance to apply Freeze. Each stack reduces Health Regen by 1%. Above 100 stacks, Regen becomes damage. If no Regen exists, deals 1 damage per stack/sec instead. This damage is non-lethal. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Vk,colorClass:"text-cyan-500",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility"],displayCondition:Oe},multiStrikeChance:{key:"multiStrikeChance",label:"MST",fullName:"Multi Strike Chance",description:"Chance to attack an additional time. Values over 100% guarantee at least 1 extra strike and increase the maximum possible number of consecutive strikes (e.g., 400% grants between 1 and 4 extra strikes). Each hit can trigger on-hit effects.",baseValue:new o(0),icon:Fk,colorClass:"text-yellow-600",format:{decimals:2,suffix:"%"},categories:["Offense","Chance"],displayCondition:Oe},blockChance:{key:"blockChance",label:"BLK",fullName:"Block Chance",description:"Percent chance to block an incoming attack, reducing damage by your Block Amount.",baseValue:new o(0),icon:qk,colorClass:"text-sky-700 dark:text-sky-400",format:{decimals:2,suffix:"%"},categories:["Defense","Chance"],displayCondition:Oe,isDecayImmune:!0},blockAmount:{key:"blockAmount",label:"BLA",fullName:"Block Amount",description:"Flat damage subtracted from an incoming attack when a Block triggers. Stacks with Armor for additional mitigation.",baseValue:new o(0),icon:$k,colorClass:"text-sky-900 dark:text-sky-300",format:{decimals:2,suffix:""},categories:["Defense"],displayCondition:Oe},hasteChance:{key:"hasteChance",label:"HST",fullName:"Haste Chance",description:"Chance to gain Haste on attack. Each stack reduces attack delay (SPD) by 0.1%. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Yk,colorClass:"text-amber-500",format:{decimals:2,suffix:"%"},categories:["Buffs","Chance","Utility"],displayCondition:Oe},leapChance:{key:"leapChance",label:"LEP",fullName:"Leap Chance",description:"Chance to gain Leap stacks on attack. Leap stacks are consumed to negate incoming debuff applications (1 stack per debuff stack negated). Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:tv,colorClass:"text-teal-400",format:{decimals:2,suffix:"%"},categories:["Buffs","Chance","Defense"],displayCondition:Oe},energyWaveChance:{key:"energyWaveChance",label:"EWC",fullName:"Energy Wave Chance",description:"Chance to gain Energy Wave stacks on attack. Every second, 10% of stacks (min 1) are consumed to deal damage to the enemy equal to [Consumed Stacks]  [Attack]. This damage is non-lethal. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:av,colorClass:"text-blue-400",format:{decimals:2,suffix:"%"},categories:["Offense","Chance"],displayCondition:Oe},absorb:{key:"absorb",label:"ABS",fullName:"Damage Absorb",description:"Percentage of final damage that is mitigated. Applied after all other reductions and armor.",baseValue:new o(0),icon:Wk,colorClass:"text-emerald-500",format:{decimals:2,suffix:"%"},categories:["Defense"],displayCondition:Oe,isDecayImmune:!0},opacity:{key:"opacity",label:"OPC",fullName:"Debuff Opacity",description:"Percent chance to completely resist the application of any incoming status effect (Bleed, Burn, Slow, etc.).",baseValue:new o(0),icon:Kk,colorClass:"text-slate-400",format:{decimals:2,suffix:"%"},categories:["Defense","Utility"],displayCondition:Oe,isDecayImmune:!0},remedy:{key:"remedy",label:"RMD",fullName:"Condition Remedy",description:"Percent chance on each attack to remove 1 stack of a random debuff. Values over 100% can remove multiple.",baseValue:new o(0),icon:Qk,colorClass:"text-teal-400",format:{decimals:2,suffix:"%"},categories:["Utility"],displayCondition:Oe},electrocuteChance:{key:"electrocuteChance",label:"ELC",fullName:"Electrocute Chance",description:"Chance to apply Electrocute. Targets take random additional damage (0 to 1% of incoming damage per stack) when hit. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Xk,colorClass:"text-yellow-600",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},curseChance:{key:"curseChance",label:"CRS",fullName:"Curse Chance",description:"Chance to apply Curse. Targets take recoil damage equal to 1% of the attacker's ATK per stack when they attack. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Zk,colorClass:"text-purple-800 dark:text-purple-400",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},blackFlameChance:{key:"blackFlameChance",label:"BFM",fullName:"Black Flame Chance",description:"Chance to apply Black Flame. Deals damage equal to 1% of current health per stack every second. This damage is non-lethal. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:Jk,colorClass:"text-slate-900 dark:text-slate-200",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},bananaPeelChance:{key:"bananaPeelChance",label:"BNN",fullName:"Banana Peel Chance",description:"Chance to apply Banana Peel. Each stack provides a 0.1% chance for the target to slip when attacking (Max 1000). Slipping clears all stacks, misses the attack, and doubles the delay for the next attack.",baseValue:new o(0),icon:ev,colorClass:"text-yellow-500",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility"],displayCondition:Oe},varnish:{key:"varnish",label:"VRN",fullName:"Varnish",description:"Percent chance to survive a fatal blow, instantly healing to 50% HP instead.",baseValue:new o(0),icon:nv,colorClass:"text-amber-500",format:{decimals:2,suffix:"%"},categories:["Defense","Chance"],displayCondition:Oe,isDecayImmune:!0},surrealism:{key:"surrealism",label:"SRL",fullName:"Surrealism Chance",description:"Percent chance to land a Surreal hit that completely ignores the target's Armor, Block, Absorb, Dodge, Parry, Counter, Glancing Blow, Leap, and Opacity checks.",baseValue:new o(0),icon:rv,colorClass:"text-indigo-500",format:{decimals:2,suffix:"%"},categories:["Offense","Chance"],displayCondition:Oe,isDecayImmune:!0},inspirationChance:{key:"inspirationChance",label:"INS",fullName:"Inspiration Chance",description:"Percent chance to gain a stack of Inspiration every second in combat. Each stack increases all damage dealt by 1%. Values over 100% allow for multiple applications per second.",baseValue:new o(0),icon:ov,colorClass:"text-yellow-600",format:{decimals:2,suffix:"%"},categories:["Offense","Buffs","Chance"],displayCondition:Oe},balloonChance:{key:"balloonChance",label:"BAL",fullName:"Balloon Chance",description:"Chance to apply Balloon. Each second, balloon stacks grow by 25%. When attacked, 25% chance for balloon stacks to pop (dealing damage equal to stacks, clearing stacks). Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:lv,colorClass:"text-sky-400",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility"],displayCondition:Oe},hotPotatoChance:{key:"hotPotatoChance",label:"HOT",fullName:"Hot Potato Chance",description:"Chance to apply Hot Potato to enemy. When the holder attacks, rolls for: 50% gain 1 stack, 10% gain 5 stacks, 10% double stacks, 20% explode (damage = stacks to holder, clear stacks), 10% pass all stacks to opponent. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:fv,colorClass:"text-orange-600",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe},brittleChance:{key:"brittleChance",label:"BTL",fullName:"Brittle Chance",description:"Chance to apply Brittle. When the holder is attacked, they take extra damage equal to their stacks. When attacked, their stacks also increase by the smaller of # Brittle stacks or 1% of damage taken. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:mv,colorClass:"text-neutral-500",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Utility"],displayCondition:Oe},thornsChance:{key:"thornsChance",label:"THN",fullName:"Thorns Chance",description:"Chance to gain a stack of Thorns when attacking. When stacked, the holder deals damage equal to their Thorns stacks back to the attacker each time they are hit. Values over 100% grant multiple stacks per attack.",baseValue:new o(0),icon:cv,colorClass:"text-green-700",format:{decimals:2,suffix:"%"},categories:["Buffs","Chance","Utility"],displayCondition:Oe},goldenLuckChance:{key:"goldenLuckChance",label:"GLC",fullName:"Golden Luck Crit Chance",description:"Chance when landing a critical hit to multiply the critical damage by the Golden Luck Crit Damage multiplier.",baseValue:new o(0),icon:uv,colorClass:"text-amber-500",format:{decimals:2,suffix:"%"},categories:["Offense","Chance"],displayCondition:Oe},goldenLuckDamage:{key:"goldenLuckDamage",label:"GLD",fullName:"Golden Luck Crit Damage",description:"Additional multiplier applied to critical hits that trigger Golden Luck. Multiplies with your base critical damage modifier.",baseValue:new o(100),icon:dv,colorClass:"text-yellow-600",format:{decimals:2,suffix:"%"},categories:["Offense","Utility"],displayCondition:t=>t.gt(100)},irradiateChance:{key:"irradiateChance",label:"RAD",fullName:"Irradiate Chance",description:"Chance to apply Irradiated. Deals sqrt(# stacks) damage per second. Each stack has a 15% chance to double (increase by 1) per second. Values over 100% allow for multiple applications per hit.",baseValue:new o(0),icon:pv,colorClass:"text-lime-400 dark:text-lime-300",format:{decimals:2,suffix:"%"},categories:["Debuffs","Chance","Offense"],displayCondition:Oe}},hv=Object.values(ot),y0=Object.values(ot).reduce((t,r)=>(t[r.key]=r.description,t),{}),Lo={Graphite:{label:"Graphite",code:"GRA",desc:"Primary resource from sketches."},Wax:{label:"Wax",code:"WAX",desc:"Waxy residue."},Charcoal:{label:"Charcoal",code:"CHA",desc:"Burnt wood."},Coffee:{label:"Coffee",code:"COF",desc:"Liquid energy."},Ink:{label:"Ink",code:"INK",desc:"Permanent liquid."},Marker:{label:"Marker",code:"MAR",desc:"Bold strokes."},Acrylic:{label:"Acrylic",code:"ACR",desc:"Plastic paint."},Spray:{label:"Spray",code:"SPR",desc:"Aerosol gas."},Photon:{label:"Photon",code:"PHO",desc:"Pure light."},"Gold Leaf":{label:"Gold Leaf",code:"GOL",desc:"Precious metal."}},Yt=["Graphite","Wax","Charcoal","Coffee","Ink","Marker","Acrylic","Spray","Photon","Gold Leaf"],Do=[new o("1618"),new o("16777216"),new o("3.2e9"),new o("1e15"),new o("6.626e34"),new o("1e80"),new o("1.79769e308"),new o("1e1618")],b0=Object.values(ot).reduce((t,r)=>(t[r.key]=r.fullName,t),{}),G0=Object.values(ot).reduce((t,r)=>(t[r.key]=r.baseValue,t),{}),Hx={},Ux={};Object.keys(ot).forEach(t=>{Hx[t]=new o(1),Ux[t]=new o(0)});const gv=(t,r,n)=>{const i={...Hx},u={...Ux};pa.forEach(f=>{const g=r[f.id]||new o(0),x=f.multiplier(g);f.isAdditive?u[f.stat]=u[f.stat].plus(x):i[f.stat]=i[f.stat].times(x)});const d={};Object.keys(ot).forEach(f=>{const g=f,x=G0[g].plus(t[g]);g==="attackSpeed"?d[g]=o.max(50,x.times(i[g]).plus(u[g])):d[g]=o.max(0,x.times(i[g]).plus(u[g]))}),n.attackIncrease>0&&(d.attack=d.attack.times(1+n.attackIncrease/100)),n.hpIncrease>0&&(d.maxHp=d.maxHp.times(1+n.hpIncrease/100)),n.regenIncrease>0&&(d.regen=d.regen.times(1+n.regenIncrease/100)),n.armorIncrease>0&&(d.armor=d.armor.times(1+n.armorIncrease/100)),n.armorPenIncrease>0&&(d.armorPen=d.armorPen.times(1+n.armorPenIncrease/100)),n.dodgeIncrease>0&&(d.dodge=d.dodge.times(1+n.dodgeIncrease/100)),n.minDamageIncrease>0&&(d.minDamage=d.minDamage.times(1+n.minDamageIncrease/100)),n.maxDamageIncrease>0&&(d.maxDamage=d.maxDamage.times(1+n.maxDamageIncrease/100)),n.lifestealIncrease>0&&(d.lifesteal=d.lifesteal.times(1+n.lifestealIncrease/100)),n.executeIncrease>0&&(d.execute=d.execute.times(1+n.executeIncrease/100)),n.blockChanceIncrease>0&&(d.blockChance=d.blockChance.times(1+n.blockChanceIncrease/100)),n.blockAmountIncrease>0&&(d.blockAmount=d.blockAmount.times(1+n.blockAmountIncrease/100)),n.accuracyIncrease>0&&(d.accuracy=d.accuracy.times(1+n.accuracyIncrease/100)),n.bleedChanceIncrease>0&&(d.bleedChance=d.bleedChance.times(1+n.bleedChanceIncrease/100)),n.plagueChanceIncrease>0&&(d.plagueChance=d.plagueChance.times(1+n.plagueChanceIncrease/100)),n.burnChanceIncrease>0&&(d.burnChance=d.burnChance.times(1+n.burnChanceIncrease/100)),n.burnDamageIncrease>0&&(d.burnDamage=d.burnDamage.times(1+n.burnDamageIncrease/100)),n.electrocuteChanceIncrease>0&&(d.electrocuteChance=d.electrocuteChance.times(1+n.electrocuteChanceIncrease/100)),n.curseChanceIncrease>0&&(d.curseChance=d.curseChance.times(1+n.curseChanceIncrease/100)),n.absorbIncrease>0&&(d.absorb=d.absorb.times(1+n.absorbIncrease/100)),n.irradiateChanceIncrease>0&&(d.irradiateChance=d.irradiateChance.times(1+n.irradiateChanceIncrease/100)),n.attackDelay>0&&(d.attackSpeed=d.attackSpeed.times(1-n.attackDelay/100));const m=new o(n.speedCap||500);return d.attackSpeed.lt(m)&&(d.attackSpeed=m),d},cg=t=>{let r=new o(1);return t.forEach(n=>{const i=Kt[n];if(i)switch(i.rarity){case"scrap":r=r.plus(.01);break;case"rough":r=r.plus(.03);break;case"framed":r=r.plus(.1);break;case"opus":r=r.plus(.25);break;case"masterpiece":r=r.plus(.5);break}}),r},Ht=(t,r,n,i,u)=>{const d=gv(t,r,n);return d.attack=d.attack.times(i),d.maxHp=d.maxHp.times(i),u&&u.length>0&&u.forEach(m=>{const{stat:f,multiplier:g}=m;d[f]&&f!=="attackSpeed"?d[f]=d[f].times(g):f==="attackSpeed"&&(d[f]=d[f].div(g))}),d},Bx=(t,r,n,i)=>{let u=new o(1);switch(pa.forEach(d=>{if(d.stat===t&&!d.isAdditive){const m=r[d.id]||new o(0),f=d.multiplier(m);u=u.times(f)}}),t){case"attack":n.attackIncrease>0&&(u=u.times(1+n.attackIncrease/100));break;case"maxHp":n.hpIncrease>0&&(u=u.times(1+n.hpIncrease/100));break;case"regen":n.regenIncrease>0&&(u=u.times(1+n.regenIncrease/100));break;case"armor":n.armorIncrease>0&&(u=u.times(1+n.armorIncrease/100));break;case"armorPen":n.armorPenIncrease>0&&(u=u.times(1+n.armorPenIncrease/100));break;case"dodge":n.dodgeIncrease>0&&(u=u.times(1+n.dodgeIncrease/100));break;case"minDamage":n.minDamageIncrease>0&&(u=u.times(1+n.minDamageIncrease/100));break;case"maxDamage":n.maxDamageIncrease>0&&(u=u.times(1+n.maxDamageIncrease/100));break;case"lifesteal":n.lifestealIncrease>0&&(u=u.times(1+n.lifestealIncrease/100));break;case"execute":n.executeIncrease>0&&(u=u.times(1+n.executeIncrease/100));break;case"blockChance":n.blockChanceIncrease>0&&(u=u.times(1+n.blockChanceIncrease/100));break;case"blockAmount":n.blockAmountIncrease>0&&(u=u.times(1+n.blockAmountIncrease/100));break;case"accuracy":n.accuracyIncrease>0&&(u=u.times(1+n.accuracyIncrease/100));break;case"bleedChance":n.bleedChanceIncrease>0&&(u=u.times(1+n.bleedChanceIncrease/100));break;case"plagueChance":n.plagueChanceIncrease>0&&(u=u.times(1+n.plagueChanceIncrease/100));break;case"burnChance":n.burnChanceIncrease>0&&(u=u.times(1+n.burnChanceIncrease/100));break;case"burnDamage":n.burnDamageIncrease>0&&(u=u.times(1+n.burnDamageIncrease/100));break;case"electrocuteChance":n.electrocuteChanceIncrease>0&&(u=u.times(1+n.electrocuteChanceIncrease/100));break;case"curseChance":n.curseChanceIncrease>0&&(u=u.times(1+n.curseChanceIncrease/100));break;case"absorb":n.absorbIncrease>0&&(u=u.times(1+n.absorbIncrease/100));break;case"irradiateChance":n.irradiateChanceIncrease>0&&(u=u.times(1+n.irradiateChanceIncrease/100));break;case"attackSpeed":n.attackDelay>0&&(u=u.times(1-n.attackDelay/100));break}return(t==="attack"||t==="maxHp")&&(u=u.times(i)),u},ug=[{id:"graphite_pump",unlockKey:"graphiteGeneratorUnlocked",currency:"Graphite",type:"flat",amount:new o(.1)},{id:"wax_generator",unlockKey:"waxGeneratorUnlocked",currency:"Wax",type:"flat",amount:new o(.1)},{id:"graphite_plus",unlockKey:"graphitePlusUnlocked",currency:"Graphite",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Graphite",factor:new o(1e-4)},{id:"wax_overdrive",unlockKey:"waxOverdriveUnlocked",currency:"Wax",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Wax",factor:new o(1e-4)},{id:"charcoal_overdrive",unlockKey:"charcoalOverdriveUnlocked",currency:"Charcoal",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Charcoal",factor:new o(1e-4)},{id:"coffee_generator",unlockKey:"coffeeGeneratorUnlocked",currency:"Coffee",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Coffee",factor:new o(1e-4)},{id:"marker_generator",unlockKey:"markerGeneratorUnlocked",currency:"Marker",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Marker",factor:new o(1e-4)},{id:"ink_generator",unlockKey:"inkGeneratorUnlocked",currency:"Ink",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Ink",factor:new o(1e-4)},{id:"acrylic_generator",unlockKey:"acrylicGeneratorUnlocked",currency:"Acrylic",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Acrylic",factor:new o(1e-4)},{id:"spray_generator",unlockKey:"sprayGeneratorUnlocked",currency:"Spray",type:"scaling",source:"totalBattleEarnedCurrencies",sourceCurrency:"Spray",factor:new o(1e-4)}];let Fs=null,Jd=[];const wc=t=>{const{fundamentals:r}=t,n=[r.generatorMultiplier,r.timeAcceleration,r.graphiteGeneratorMultiplier,r.waxGeneratorMultiplier,r.charcoalGeneratorMultiplier,r.coffeeGeneratorMultiplier,r.inkGeneratorMultiplier,r.markerGeneratorMultiplier,r.acrylicGeneratorMultiplier,r.sprayGeneratorMultiplier,r.photonGeneratorMultiplier,r.goldLeafGeneratorMultiplier];ug.forEach(f=>{if(n.push(t[f.unlockKey]),f.type==="scaling"){const x=(t[f.source]||{})[f.sourceCurrency]||new o(0);n.push(x.toString())}});let i=Fs!==null&&Jd.length===n.length;if(i){for(let f=0;f<n.length;f++)if(n[f]!==Jd[f]){i=!1;break}}if(i&&Fs)return Fs;const u={},d=new o(r.generatorMultiplier||1),m=new o(r.timeAcceleration||1);return ug.forEach(f=>{if(t[f.unlockKey]){let g=new o(0);f.type==="flat"?g=f.amount:f.type==="scaling"&&(g=((t[f.source]||{})[f.sourceCurrency]||new o(0)).times(f.factor));let x=new o(1);const y=f.currency;y==="Graphite"?x=new o(r.graphiteGeneratorMultiplier):y==="Wax"?x=new o(r.waxGeneratorMultiplier):y==="Charcoal"?x=new o(r.charcoalGeneratorMultiplier):y==="Coffee"?x=new o(r.coffeeGeneratorMultiplier):y==="Ink"?x=new o(r.inkGeneratorMultiplier):y==="Marker"?x=new o(r.markerGeneratorMultiplier):y==="Acrylic"?x=new o(r.acrylicGeneratorMultiplier):y==="Spray"?x=new o(r.sprayGeneratorMultiplier):y==="Photon"?x=new o(r.photonGeneratorMultiplier):y==="Gold Leaf"&&(x=new o(r.goldLeafGeneratorMultiplier));const b=g.times(d).times(x).times(m);if(b.gt(0)){const w=u[f.currency]||new o(0);u[f.currency]=w.plus(b)}}}),Jd=n,Fs=u,Fs},xv=(t,r)=>{const n=t.fundamentals.timeAcceleration||1,i=r*n,u=wc(t),d={};return Object.entries(u).forEach(([m,f])=>{f&&f.gt(0)&&(d[m]=f.times(i))}),d},zx=t=>{const r={},{conceptMilestones:n,fundamentals:i}=t;Yt.forEach(u=>{r[u]=[t.concepts[u]||new o(0)]});for(let u=Yt.length-1;u>=0;u--){const d=Yt[u];if(u===0)continue;const m=Yt[u-1],f=n[d]||0;if(f<=0)continue;let g=new o(1);if(f>1)for(let w=2;w<=f;w++)w<=4?g=g.times(1e3):w<=7?g=g.times(1e6):w===8&&(g=g.times(1e9));let x=0;u===1?x=i.waxConceptBoost:u===2?x=i.charcoalConceptBoost:u===3?x=i.coffeeConceptBoost:u===4?x=i.inkConceptBoost:u===5?x=i.markerConceptBoost:u===6?x=i.acrylicConceptBoost:u===7?x=i.sprayConceptBoost:u===8?x=i.photonConceptBoost:u===9&&(x=i.goldLeafConceptBoost),x>0&&(g=g.times(new o(1).plus(new o(x).div(100))));const y=r[d],b=r[m];for(let w=0;w<y.length;w++){const v=w+1,k=y[w].times(g).div(v);b[v]||(b[v]=new o(0)),b[v]=b[v].plus(k)}}return r},_o=(t,r)=>{let n=new o(0),i=new o(1);const u=new o(r);for(let d=0;d<t.length;d++)n=n.plus(t[d].times(i)),i=i.times(u);return n},yv=(t,r)=>{if(r<=0)return{};const n=t.fundamentals.timeAcceleration||1,i=r*n,u=zx(t),d={};Yt.forEach(b=>{const v=_o(u[b],i).minus(t.concepts[b]||0);v.gt(0)&&(d[b]=v)});const m=u.Graphite,f=new o(1).plus(new o(t.fundamentals.quintessenceGain).div(100)),g=t.totalQuintessenceGained||new o(0),x=o.max(1e3,g),y=t.conceptMilestones.Graphite||0;if(y>0){const b=new o(t.quintessencePinnacleMultiplier);let w=new o(1);if(y>1)for(let I=2;I<=y;I++)I<=4?w=w.times(1e3):I<=7?w=w.times(1e6):I===8&&(w=w.times(1e9));const v=w.times(f).times(b),k=m.map(I=>I.times(v)),M=[t.pendingQuintessence||new o(0)];for(let I=0;I<k.length;I++)M[I+1]=k[I].div(I+1);let T=i,E=0,R=M[0],N=0;for(;T>0&&N<200;){N++;const I=R.div(x),P=I.lt(1)?-1:Math.floor(Math.log2(I.toNumber())),O=P+1,H=P===-1?new o(1):new o(.5).pow(O+Math.floor(O/10)),q=x.times(Math.pow(2,P+1)),G=_o(M,E),F=q.minus(R);if(F.lte(0)){R=q.times(1.0000000001);continue}const Y=F.div(H),J=G.plus(Y);let z=E,V=E+T,S=V;if(_o(M,V).gt(J)){for(let X=0;X<20;X++){const D=(z+V)/2;_o(M,D).lt(J)?z=D:V=D}S=V}let U=S-E;U<0&&(U=0);const W=_o(M,S).minus(G);if(R=R.plus(W.times(H)),E=S,T-=U,U<1e-9&&T>0&&N>100||E>=i)break}const j=R.minus(t.pendingQuintessence||0);j.gt(0)&&(d["Pending Quintessence"]=j)}return d},bv=(t,r)=>{const i=zx(t).Graphite,u=t.conceptMilestones.Graphite||0;if(u<=0)return null;const d=new o(1).plus(new o(t.fundamentals.quintessenceGain).div(100)),m=new o(t.quintessencePinnacleMultiplier);let f=new o(1);if(u>1)for(let N=2;N<=u;N++)N<=4?f=f.times(1e3):N<=7?f=f.times(1e6):N===8&&(f=f.times(1e9));const g=f.times(d).times(m),x=i.map(N=>N.times(g)),y=[new o(0)];for(let N=0;N<x.length;N++)y[N+1]=x[N].div(N+1);const b=t.pendingQuintessence||new o(0),w=r.minus(b);if(w.lte(0))return new o(0);const v=t.fundamentals.timeAcceleration||1,k=x[0]||new o(0),M=k.gt(0)?w.div(k).toNumber():1/0;let T=0,E=M<=31536e3?31536e3:31536e6,R=null;for(let N=0;N<25;N++){const j=(T+E)/2;_o(y,j).gte(w)?(R=j,E=j):T=j}return R!==null?new o(R/v):null},Gx=["TIP","CRITIQUE","LPT","JOKE","FACT"],wv=[{category:"TIP",text:"TIP #10,102: Accuracy directly counters an enemy's Dodge/Parry chance."},{category:"TIP",text:"TIP #13,442: Export your save file occasionally. Cloud saves are great, but local backups are forever."},{category:"TIP",text:"TIP #14,191: Don't ignore the Archive; skills provide powerful bonuses."},{category:"TIP",text:"TIP #14,192: Don't let Quintessence Softcap intimidate you, sometimes you can push into double digit softcap exponents with ease."},{category:"TIP",text:"TIP #18,888: Toggling off Auto-Challenge is more efficient than retreating for farming victories."},{category:"TIP",text:"TIP #22,331: Quintessence is only awarded when you Redraw. The more sketches you've conceptualized, the more you get."},{category:"TIP",text:"TIP #24,112: The Quintessence icon in the top right corner is a shortcut to the Conceptual Synthesizer."},{category:"TIP",text:'TIP #15,293: The "locks" at top of sidebars make them retractable.'},{category:"TIP",text:"TIP #12,401: Armor Penetration reduces the enemy's effective Armor value."},{category:"TIP",text:"TIP #16,623: Don't forget to check out Settings. Tune the game to your liking."},{category:"TIP",text:"TIP #17,293: Filters at top of Gallery page can help you find hidden sketches."},{category:"TIP",text:"TIP #18,255: Top left icon on each sketch on Gallery page can hide sketches that are of no use to you."},{category:"TIP",text:"TIP #21,553: Don't hoard Quintessence too long; investing early compounds your power faster."},{category:"TIP",text:"TIP #42,903: Overkill can help you be victorious over multiple of the same enemy at once."},{category:"TIP",text:"TIP #23,851: Redrawing preserves your Glossary progress, making future runs easier."},{category:"TIP",text:"TIP #24,855: Right sidebar can be turned off with 'Show Protocol Sidebar' setting."},{category:"TIP",text:"TIP #25,112: Stuck on a sketch? Try killing the one after it first."},{category:"TIP",text:"TIP #32,125: The 'In Combat' floating window can be moved anywhere you want. Try dragging it."},{category:"TIP",text:"TIP #35,102: Tools are generally more important than Stat Upgrades."},{category:"TIP",text:"TIP #41,107: Use the Sketch hide feature early, you can always unhide all for further grinding."},{category:"TIP",text:"TIP #45,221: Upgrading ATK is usually better than HP if you can end fights fast."},{category:"TIP",text:"TIP #51,882: Struggling with a specific sketch? Check the enemy stats."},{category:"TIP",text:"TIP #56,102: Crit Damage is useless without Crit Chance. Balance your stats wisely."},{category:"TIP",text:"TIP #60,101: During early game ATK and HP are by far the best investments."},{category:"TIP",text:"TIP #67,491: Some enemies have high Armor; look for skills that overcome defense."},{category:"TIP",text:"TIP #69,053: The glossary rarity multipliers are: scrap +1%, rough +3%, framed +5%, opus +10%, masterpiece +25%."},{category:"TIP",text:"TIP #70,104: Offline progression works for Generators and Synthesizer. Take advantage of it overnight."},{category:"TIP",text:"TIP #71,242: You can review the Tutorial anytime in Settings."},{category:"TIP",text:"TIP #74,331: Fleeing isn't just for escaping; use it to quickly rotate through sketches searching for specific rewards."},{category:"TIP",text:"TIP #75,112: Shop notifications too annoying? Adjust the icons below level of each Stat Upgrade you want to silence."},{category:"TIP",text:"TIP #82,115: Resource 'Reward Exponents' in the Skill Tree are much more powerful than simple multipliers."},{category:"TIP",text:"TIP #83,112: Sometimes it can be ok to Redraw for little Quintessence just to find more rare sketches."},{category:"TIP",text:"TIP #84,146: After unlocking Portfolio Review tool, it may be worthwhile to unhide all sketches and squeeze them for more."},{category:"TIP",text:"TIP #75,502: Statuses like Poison are effective against tanky sketches."},{category:"TIP",text:"TIP #77,913: Bleed causes the attacker to take damage whenever they hit."},{category:"TIP",text:"TIP #89,203: You can make the first few shop tools entirely free after a Redraw by investing in the Archive."},{category:"TIP",text:"TIP #80,441: Stacking Freeze above 100% turns enemy healing into damage."},{category:"TIP",text:"TIP #82,203: High enemy Armor directly reduces the healing you gain from Lifesteal."},{category:"TIP",text:"TIP #84,912: Increasing Speed reduces the cooldown between your attacks."},{category:"TIP",text:"TIP #63,221: Parry negates an attack and reflects a portion of the damage back."},{category:"TIP",text:"TIP #95,883: Hypnotized sketches have a chance to attack themselves instead of you."},{category:"TIP",text:"TIP #99,999: There are other flavors for this text (see settings): Snarky Comments (Critiques), Life Pro Tips (LPT), Jokes, and Facts."},{category:"CRITIQUE",text:"CRITIQUE #11,034: This tip exists to fill an empty window. Just like your weekends."},{category:"CRITIQUE",text:"CRITIQUE #11,042: You have clicked more times today than you have blinked."},{category:"CRITIQUE",text:"CRITIQUE #14,202: I'm sure your boss believes you're working on that spreadsheet right now."},{category:"CRITIQUE",text:"CRITIQUE #14,553: I bet you wish your bank account grew this predictably."},{category:"CRITIQUE",text:"CRITIQUE #17,801: I hope you're not playing this at work. Or do. I'm not HR."},{category:"CRITIQUE",text:"CRITIQUE #24,928: A redraw is just a fancy word for professional procrastination."},{category:"CRITIQUE",text:"CRITIQUE #33,102: Graphite: The only thing cheaper than the writing in this game."},{category:"CRITIQUE",text:"CRITIQUE #34,551: If you put this much effort into the gym, you'd be able to lift a real sword by now."},{category:"CRITIQUE",text:"CRITIQUE #36,119: If you leave now, the numbers go up slower. Can you live with that?"},{category:"CRITIQUE",text:"CRITIQUE #38,991: Fun fact: If you played a real instrument for this long, you'd still be bad at it."},{category:"CRITIQUE",text:"CRITIQUE #48,502: Don't forget to Redraw. Or do. I'm just a text box."},{category:"CRITIQUE",text:"CRITIQUE #52,193: Your progress is saved. Your time is still lost."},{category:"CRITIQUE",text:"CRITIQUE #54,991: 'Idle' is a game genre. It is also an accurate description of your ambition."},{category:"CRITIQUE",text:"CRITIQUE #59,203: 'One more sketch' is the lie we tell ourselves to avoid doing laundry."},{category:"CRITIQUE",text:"CRITIQUE #61,303: Don't turn your brightness down. You might see your own reflection, and nobody wants that."},{category:"CRITIQUE",text:"CRITIQUE #62,118: You're optimizing numbers that don't exist for rewards that aren't real."},{category:"CRITIQUE",text:"CRITIQUE #63,991: You have killed 500 sketches. They had families. Probably stick families."},{category:"CRITIQUE",text:"CRITIQUE #66,823: Buying upgrades won't make the pain go away. But it helps the numbers."},{category:"CRITIQUE",text:"CRITIQUE #72,448: Congratulations, you made a number go up. Your ancestors hunting mammoths are proud."},{category:"CRITIQUE",text:"CRITIQUE #74,201: You could be learning a language right now. Instead, you're watching numbers go up."},{category:"CRITIQUE",text:"CRITIQUE #75,102: You are just changing 0s to 1s in a JSON file. Thrilling gameplay."},{category:"CRITIQUE",text:"CRITIQUE #83,102: You are fighting sketches. Literal ink on paper. Reflect on that."},{category:"CRITIQUE",text:"CRITIQUE #91,442: I considered adding a 'Win' button, but that would ruin the engagement metrics."},{category:"CRITIQUE",text:"CRITIQUE #93,001: I am a collection of pixels judging a collection of atoms. Who is really winning?"},{category:"CRITIQUE",text:"CRITIQUE #94,205: Your attention span is shorter than this sen oh, look, a shiny button."},{category:"CRITIQUE",text:"CRITIQUE #95,001: I'm not saying you're addicted, but you just read this entire sentence."},{category:"CRITIQUE",text:"CRITIQUE #98,113: Please rate this game 5 stars. My developer needs validation. He's very fragile."},{category:"CRITIQUE",text:"CRITIQUE #99,101: I'd ask how your day is going, but you're playing an idle game at 2 AM."},{category:"CRITIQUE",text:"CRITIQUE #99,404: Error 404: Meaning of life not found. Please continue idling."},{category:"LPT",text:"LPT #11,205: Turn on 'Night Light' or 'Eye Comfort' mode on your device after sunset."},{category:"LPT",text:"LPT #12,283: Staring at a screen for too long is bad for your eyes."},{category:"LPT",text:"LPT #14,203: Floss your teeth. You only need to floss the ones you want to keep."},{category:"LPT",text:"LPT #18,332: Clean your keyboard. Seriously, look at it right now. It's gross."},{category:"LPT",text:"LPT #25,102: Your value isn't defined by your quintessence balance."},{category:"LPT",text:"LPT #28,443: Vitamin D supplements are crucial if you spend all day indoors gaming."},{category:"LPT",text:"LPT #31,904: The 20-20-20 rule: Every 20 mins, look 20 feet away for 20 seconds."},{category:"LPT",text:"LPT #33,201: Wash your bedsheets. It's been too long."},{category:"LPT",text:"LPT #38,203: Taking a 5-minute break every hour improves focus."},{category:"LPT",text:"LPT #41,902: Your chair height should allow your feet to rest flat on the floor."},{category:"LPT",text:"LPT #44,104: Remember to drink water."},{category:"LPT",text:"LPT #45,992: The 'two-minute rule': If it takes less than two minutes, do it now."},{category:"LPT",text:"LPT #49,118: Drink water before you think you're hungry. You're usually just thirsty."},{category:"LPT",text:"LPT #52,881: Don't go grocery shopping while hungry. You'll buy weird snacks."},{category:"LPT",text:"LPT #56,331: Fix your posture. Your future back will thank you."},{category:"LPT",text:"LPT #62,551: Unclench your jaw. Drop your shoulders. Take a deep breath. You're welcome."},{category:"LPT",text:"LPT #66,101: Cooking a meal takes 30 minutes. Ordering delivery takes 45. Save money, cook food."},{category:"LPT",text:"LPT #67,892: Call your parents. They probably miss you more than you miss this game."},{category:"LPT",text:"LPT #71,202: Learn to cook one pasta dish really well. It's a survival skill."},{category:"LPT",text:"LPT #72,401: Blinking is voluntary. Do it now."},{category:"LPT",text:"LPT #74,103: Rotate your wrists. Draw the alphabet with your nose to relax your neck."},{category:"LPT",text:"LPT #83,225: Listen to a podcast while grinding. It makes you feel productive by association."},{category:"LPT",text:"LPT #84,005: Comparison is the thief of joy. Also, your stats are low."},{category:"LPT",text:"LPT #85,202: Touch grass. Actual, physical grass. It has 8K resolution."},{category:"LPT",text:"LPT #91,203: If you have to ask 'is it too late to go to bed?', the answer is always yes."},{category:"LPT",text:"LPT #93,551: Change your passwords. 'Password123' is not a security measure."},{category:"LPT",text:"LPT #94,113: Stretch your wrists. Carpal tunnel is the real end-game boss."},{category:"LPT",text:"LPT #96,110: Plants need water too. Check that succulent on your desk."},{category:"LPT",text:"LPT #97,202: Open a window. The air in your room is mostly carbon dioxide and regret."},{category:"JOKE",text:"JOKE #13,902: The painter was hospitalized. Doctors say he had too many strokes."},{category:"JOKE",text:"JOKE #14,502: Parallel lines have so much in common. Its a shame theyll never meet."},{category:"JOKE",text:"JOKE #15,203: Why did the artist go to jail? He was framed."},{category:"JOKE",text:"JOKE #16,202: I told a joke about a blank piece of paper. It was tearable."},{category:"JOKE",text:"JOKE #21,551: What is an artists favorite brand of shoe? Sketchers."},{category:"JOKE",text:"JOKE #22,105: I tried to paint the sky, but I blue it."},{category:"JOKE",text:"JOKE #22,118: I told my wife she was drawing her eyebrows too high. She looked surprised."},{category:"JOKE",text:"JOKE #23,992: What's brown and sticky? A stick."},{category:"JOKE",text:"JOKE #24,501: I know a guy who's excellent at drawing. He has a very sketchy past."},{category:"JOKE",text:"JOKE #25,903: Why dont sculptors make good friends? They take everything for granite."},{category:"JOKE",text:"JOKE #31,104: What do you call a painting done by a cat? A paw-trait."},{category:"JOKE",text:"JOKE #34,105: Why did the scarecrow win an award? He was outstanding in his field."},{category:"JOKE",text:"JOKE #36,404: And the Lord said to John, 'Come forth and you shall receive eternal life.' But John came fifth and won a toaster."},{category:"JOKE",text:"JOKE #41,801: What do you call a really dangerous neighborhood in a sketchbook? A rough draft."},{category:"JOKE",text:"JOKE #42,911: I used to be an artist, but I couldn't draw a salary."},{category:"JOKE",text:"JOKE #48,202: I tried to buy a painting, but I had no Monet."},{category:"JOKE",text:"JOKE #49,202: The most powerful upgrade in the game is Alt+F4. But you won't use it."},{category:"JOKE",text:"JOKE #52,101: I used to be a banker, but I lost interest."},{category:"JOKE",text:"JOKE #55,103: We interrupt this dopamine loop to bring you... absolutely nothing."},{category:"JOKE",text:"JOKE #56,119: Why did the artist carry a pencil? In case he had to draw a weapon."},{category:"JOKE",text:"JOKE #61,993: I have a fear of overly intricate elevators. I'm taking steps to avoid them."},{category:"JOKE",text:"JOKE #63,119: Are you cold? Go stand in the corner. It's 90 degrees."},{category:"JOKE",text:"JOKE #66,404: How does Salvador Dali start his morning? With a bowl of sur-real."},{category:"JOKE",text:"JOKE #68,992: Why don't scientists trust atoms? Because they make up everything."},{category:"JOKE",text:"JOKE #71,505: What do you call a fake noodle? An impasta."},{category:"JOKE",text:"JOKE #73,501: Did you hear about the kidnapping at school? Its fine, he woke up."},{category:"JOKE",text:"JOKE #75,201: My pencil is broken. It's pointless to try and fix it."},{category:"JOKE",text:"JOKE #75,551: What happens when an artist gets cold? They put on another coat."},{category:"JOKE",text:"JOKE #82,442: Why don't skeletons fight each other? They don't have the guts."},{category:"JOKE",text:"JOKE #86,201: This text is procedurally generated to simulate a personality. It's failing, isn't it?"},{category:"JOKE",text:"JOKE #88,331: Why did the math book look sad? Because it had too many problems."},{category:"JOKE",text:"JOKE #91,303: What did the 0 say to the 8? 'Nice belt.'"},{category:"JOKE",text:"JOKE #94,551: Sketching is just taking a line for a walk."},{category:"JOKE",text:"JOKE #97,551: Shout out to people who don't know what the opposite of 'in' is."},{category:"FACT",text:"FACT #11,023: 100% of sketches in this game are actually digital."},{category:"FACT",text:"FACT #12,010: The average person spends 6 months of their life waiting for red lights to turn green."},{category:"FACT",text:"FACT #13,000: This game will never be as good as Degens Idle. (the OG at kuzzigames.com, not the crappy impostor)"},{category:"FACT",text:"FACT #14,001: Despite her delicious name, Spaghetti Medusa's spaghetti is not edible."},{category:"FACT",text:"FACT #15,102: The Eiffel Tower can be 15 cm taller during the summer due to thermal expansion."},{category:"FACT",text:"FACT #19,203: The eraser was originally called 'lead eater' before marketing teams stepped in."},{category:"FACT",text:"FACT #28,302: Wombat poop is cube-shaped. This prevents it from rolling away."},{category:"FACT",text:"FACT #29,103: The first pencils were made of solid graphite wrapped in sheepskin."},{category:"FACT",text:"FACT #34,505: There are more fake flamingos in the world than real ones."},{category:"FACT",text:"FACT #35,401: The word 'pencil' comes from the Latin 'penicillus', meaning 'little tail'."},{category:"FACT",text:"FACT #44,029: Graphite is just carbon arranged in sheets. Diamond is carbon in a cage."},{category:"FACT",text:"FACT #46,101: Cleopatra lived closer in time to the Moon landing than to the construction of the Great Pyramid."},{category:"FACT",text:"FACT #51,203: Yellow pencils became standard in the 1890s to signify Chinese graphite quality."},{category:"FACT",text:"FACT #51,882: You cannot hum while holding your nose. Go ahead, try it."},{category:"FACT",text:"FACT #53,205: The first webcam was invented at Cambridge University just to check if the coffee pot was full."},{category:"FACT",text:"FACT #54,901: Before rubber erasers, people used balled-up white bread to remove graphite marks."},{category:"FACT",text:"FACT #55,901: Sloths can hold their breath longer than dolphins can (up to 40 minutes)."},{category:"FACT",text:"FACT #57,204: Hemingway used to sharpen his pencils with a knife. It made him feel more like a hunter."},{category:"FACT",text:"FACT #63,203: A jiffy is an actual unit of time: 1/100th of a second."},{category:"FACT",text:"FACT #63,401: A day on Venus is longer than a year on Venus. It spins very, very slowly."},{category:"FACT",text:"FACT #68,402: An average pencil can draw a line 35 miles long. Your mouse has traveled further."},{category:"FACT",text:"FACT #72,991: Botanically speaking, bananas are berries. Strawberries are not."},{category:"FACT",text:"FACT #73,012: Scientists are still working out how Rotten Fruit gives RGN."},{category:"FACT",text:"FACT #88,102: Graphite is a conductor of electricity. Do not stick pencils in outlets."},{category:"FACT",text:"FACT #91,205: Octopuses have three hearts. Two pump blood to the gills, one to the rest of the body."},{category:"FACT",text:"FACT #92,101: Picasso's full name has 23 words."},{category:"FACT",text:"FACT #92,115: John Steinbeck used up to 60 pencils a day. He would have loved auto-battle."},{category:"FACT",text:"FACT #98,331: Archaeologists have found edible honey in ancient Egyptian tombs. It never spoils."}],kv={timeAcceleration:!1,deathRecovery:!1,fleePenalty:!1,infiniteLookahead:!1,maxVictories:!1,buffFundamentals:!1,insaneOverkill:!1,forceRough:!1,forceFramed:!1,forceOpus:!1,forceMasterpiece:!1,bypassRarityLock:!1},Vl=(t,r)=>{const n={...t};return r.timeAcceleration&&(n.timeAcceleration=20),r.deathRecovery&&(n.deathRecovery=1),r.fleePenalty&&(n.fleePenalty=1),r.infiniteLookahead&&(n.lookahead=500),r.maxVictories&&(n.maxVictories=1e4),r.insaneOverkill&&(n.overkillMultiplier=1e3),r.forceRough&&(n.roughRarity=100),r.forceFramed&&(n.framedRarity=100),r.forceOpus&&(n.opusRarity=100),r.forceMasterpiece&&(n.masterpieceRarity=100),r.buffFundamentals&&(n.attackIncrease+=1e4,n.hpIncrease+=1e4,n.regenIncrease+=1e4,n.armorIncrease+=1e4,n.dodgeIncrease+=1e4,n.speedCap=50),n},vv=Object.keys(G0).reduce((t,r)=>(t[r]=new o(0),t),{}),dg=(t,r,n)=>{if(!r.isFighting)return{combatState:r,damageEvents:n};const i=Object.keys(r.statuses.player).length>0,u=Object.keys(r.statuses.enemy).length>0;if(!i&&!u)return{combatState:r,damageEvents:n};let d=r.statuses.player,m=r.statuses.enemy,f=r.currentPlayerHp,g=r.currentEnemyHp,x=n;const y=()=>{d===r.statuses.player&&(d={...r.statuses.player})},b=()=>{m===r.statuses.enemy&&(m={...r.statuses.enemy})},w=Kt[r.enemyId],v=w?w.stats:{},k=d.Burn||0;if(k>0&&f.gt(0)){const _=(v.burnDamage||new o(1)).times(k);f=o.max(0,f.minus(_)),x=Ue(x,"burn","player",_)}const M=m.Burn||0;if(M>0&&g.gt(0)){const _=(t.playerStats.burnDamage||new o(1)).times(M);g=o.max(0,g.minus(_)),x=Ue(x,"burn","enemy",_)}const T=d.Plague||0;if(T>0&&f.gt(0)){const S=new o(1).times(T);f=o.max(0,f.minus(S)),x=Ue(x,"plague","player",S);const _=T*.1;let U=Math.floor(_);Math.random()<_%1&&U++,U>0&&(y(),d.Plague=T+U)}const E=m.Plague||0;if(E>0&&g.gt(0)){const S=new o(1).times(E);g=o.max(0,g.minus(S)),x=Ue(x,"plague","enemy",S);const _=E*.1;let U=Math.floor(_);Math.random()<_%1&&U++,U>0&&(b(),m.Plague=E+U)}const R=d.Poison||0;if(R>0&&f.gt(0)){const S=t.playerStats.maxHp.times(.001).times(R);S.gt(0)&&(f=o.max(0,f.minus(S)),x=Ue(x,"poison","player",S))}const N=m.Poison||0;if(N>0&&g.gt(0)){const _=(v.maxHp||new o(1)).times(.001).times(N);_.gt(0)&&(g=o.max(0,g.minus(_)),x=Ue(x,"poison","enemy",_))}const j=d.BlackFlame||0;if(j>0&&f.gt(1)){const S=f.times(.01).times(j);S.gt(0)&&(f=o.max(1,f.minus(S)),x=Ue(x,"blackFlame","player",S))}const I=m.BlackFlame||0;if(I>0&&g.gt(1)){const S=g.times(.01).times(I);S.gt(0)&&(g=o.max(1,g.minus(S)),x=Ue(x,"blackFlame","enemy",S))}const P=d.EnergyWave||0;if(P>0&&f.gt(0)){const S=Math.max(1,Math.floor(P*.1)),_=d.Inspiration||0,U=new o(1).plus(new o(_).times(.01)),W=t.playerStats.attack.times(S).times(U);g=o.max(1,g.minus(W)),y(),d.EnergyWave=P-S,d.EnergyWave<=0&&delete d.EnergyWave,x=Ue(x,"energyWave","enemy",W)}const O=m.EnergyWave||0;if(O>0&&g.gt(0)){const S=Math.max(1,Math.floor(O*.1)),_=m.Inspiration||0,U=new o(1).plus(new o(_).times(.01)),X=(v.attack||new o(1)).times(S).times(U);f=o.max(1,f.minus(X)),b(),m.EnergyWave=O-S,m.EnergyWave<=0&&delete m.EnergyWave,x=Ue(x,"energyWave","player",X)}const H=t.playerStats.inspirationChance||new o(0);if(H.gt(0)){const S=H.toNumber(),_=Math.floor(S/100),U=S%100,W=_+(Math.random()*100<U?1:0);W>0&&(y(),d.Inspiration=(d.Inspiration||0)+W)}const q=v.inspirationChance||new o(0);if(q.gt(0)){const S=q.toNumber(),_=Math.floor(S/100),U=S%100,W=_+(Math.random()*100<U?1:0);W>0&&(b(),m.Inspiration=(m.Inspiration||0)+W)}const G=d.Balloon||0;if(G>0){const S=Math.ceil(G*.25);S>0&&(y(),d.Balloon=G+S)}const F=m.Balloon||0;if(F>0){const S=Math.ceil(F*.25);S>0&&(b(),m.Balloon=F+S)}const Y=d.Irradiate||0;if(Y>0&&f.gt(0)){const S=new o(Math.sqrt(Y));f=o.max(0,f.minus(S)),x=Ue(x,"irradiate","player",S);const _=Y*.15;let U=Math.floor(_);Math.random()<_%1&&U++,U>0&&(y(),d.Irradiate=Y+U)}const J=m.Irradiate||0;if(J>0&&g.gt(0)){const S=new o(Math.sqrt(J));g=o.max(0,g.minus(S)),x=Ue(x,"irradiate","enemy",S);const _=J*.15;let U=Math.floor(_);Math.random()<_%1&&U++,U>0&&(b(),m.Irradiate=J+U)}const z=!f.eq(r.currentPlayerHp)||!g.eq(r.currentEnemyHp),V=d!==r.statuses.player||m!==r.statuses.enemy;return!z&&!V&&x===n?{combatState:r,damageEvents:n}:{combatState:{...r,currentPlayerHp:f,currentEnemyHp:g,statuses:{player:d,enemy:m}},damageEvents:x}},fg=(t,r,n,i,u)=>{if(!r.isFighting)return{combatState:r,damageEvents:n};let d=r.currentPlayerHp,m=r.currentEnemyHp,f=n;const g=r.statuses.player.Freeze||0;if(i.gt(0)){const x=t.playerStats.maxHp;if(g>100){const y=new o(g).times(.01).minus(1),b=i.times(y);b.gt(0)&&(d=o.max(1,d.minus(b)),f=Ue(f,"freeze","player",b))}else{const y=1-g*.01,b=i.times(Math.max(0,y));if(d.lt(x)&&b.gt(0)){const w=o.min(b,x.minus(d));d=d.plus(w),w.gt(0)&&(f=Ue(f,"heal","player",w))}}}else if(g>0){const x=new o(g);d=o.max(1,d.minus(x)),f=Ue(f,"freeze","player",x)}if(r.enemyId){const x=Kt[r.enemyId];if(x){const y=x.stats.maxHp,b=r.statuses.enemy.Freeze||0;if(u.gt(0))if(b>100){const w=new o(b).times(.01).minus(1),v=u.times(w);v.gt(0)&&(m=o.max(1,m.minus(v)),f=Ue(f,"freeze","enemy",v))}else{const w=1-b*.01,v=u.times(Math.max(0,w));if(m.lt(y)&&v.gt(0)){const k=o.min(v,y.minus(m));m=m.plus(k),k.gt(0)&&(f=Ue(f,"heal","enemy",k))}}else if(b>0){const w=new o(b);m=o.max(1,m.minus(w)),f=Ue(f,"freeze","enemy",w)}}}return d.eq(r.currentPlayerHp)&&m.eq(r.currentEnemyHp)&&f===n?{combatState:r,damageEvents:n}:{combatState:{...r,currentPlayerHp:d,currentEnemyHp:m},damageEvents:f}},mg={scrap:100,rough:0,framed:0,opus:0,masterpiece:0},Vx=["magnum_opus","magnum_opus_2","magnum_opus_3","magnum_opus_4"],Fx=t=>Xe.filter(r=>{if(Vx.includes(r.id))return!1;const n=t[r.rarity]??0;return Math.random()*100<n}).map(r=>r.id),pg=()=>({battleStats:vv,shopLevels:{},playerStats:G0,currencies:Object.fromEntries(Object.keys(Lo).map(t=>[t,new o(0)])),notificationSettings:{COMBAT_VICTORY:!0,COMBAT_DEFEAT:!0,COMBAT_FLEE:!0,SHOP_ERROR:!0,SHOP_AFFORDABLE:!0,SYSTEM_UNLOCK:!0,GAME_SAVED:!0},autoChallengeUnlocked:!1,autoChallengeActive:!1,graphiteGeneratorUnlocked:!1,graphiteDiscountUnlocked:!1,autoRetryUnlocked:!1,autoRetryActive:!1,lastEnemyId:null,charcoalDiscountUnlocked:!1,waxGeneratorUnlocked:!1,waxOverdriveUnlocked:!1,graphitePlusUnlocked:!1,charcoalOverdriveUnlocked:!1,coffeeGeneratorUnlocked:!1,markerGeneratorUnlocked:!1,inkGeneratorUnlocked:!1,autoAdvanceUnlocked:!1,autoAdvanceActive:!1,autoHideMaxedUnlocked:!1,markerDiscountUnlocked:!1,acrylicDiscountUnlocked:!1,acrylicGeneratorUnlocked:!1,sprayGeneratorUnlocked:!1,buyMaxUnlocked:!1,rarityFiltersUnlocked:!1,preBattleMeditationUnlocked:!1,meditationCooldownStart:null,activeMeditationBuffs:[],meditationsUsedThisSession:0,maxedSketchesThisRedraw:0,preciseEraserUnlocked:!1,erasedSketchIds:[],skillTreeBuyMaxUnlocked:!1,skillTreeBuyPercentUnlocked:!1,skillTreeBuyAllUnlocked:!1,percentBuyAmount:5,autoBuyUnlocked:!1,masterAutoBuyUnlocked:!1,autoBuyEnabled:{},keepAwake:!0,randomizerUnlocked:!1,randomizerActive:!1,galleryRewardsFilterUnlocked:!1,conceptualBridgeUnlocked:!1,waxDiscountUnlocked:!1,coffeeDiscountUnlocked:!1,inkDiscountUnlocked:!1,maxReachedConceptMilestones:{Graphite:0,Wax:0,Charcoal:0,Coffee:0,Ink:0,Marker:0,Acrylic:0,Spray:0,Photon:0,"Gold Leaf":0},quintessence:new o(0),pendingQuintessence:new o(0),totalQuintessenceGained:new o(0),redrawCount:0,glossaryUnlocks:[],glossaryMultiplier:new o(1),quintessencePinnacleMultiplier:new o(1),seenGlossaryItems:[],rarityChances:{...mg},skillLevels:{},disabledSkills:{},lastPurchasedSkill:null,lastSeenSoftcapTier:0,hasAffordableMasterpiece:!1,mutedStatUpgrades:[],persistentToolUnlocks:[],availableSketches:Fx(mg),concepts:{Graphite:new o(0),Wax:new o(0),Charcoal:new o(0),Coffee:new o(0),Ink:new o(0),Marker:new o(0),Acrylic:new o(0),Spray:new o(0),Photon:new o(0),"Gold Leaf":new o(0)},conceptMilestones:{Graphite:0,Wax:0,Charcoal:0,Coffee:0,Ink:0,Marker:0,Acrylic:0,Spray:0,Photon:0,"Gold Leaf":0},challengeCooldownUntil:0,unlockedTabs:["Gallery","Settings"],activeRarityFilters:{scrap:!0,rough:!0,framed:!0,opus:!0,masterpiece:!0},activeTab:"Gallery",visibleSketchesLookahead:3,totalEarnedCurrencies:Object.fromEntries(Object.keys(Lo).map(t=>[t,new o(0)])),totalBattleEarnedCurrencies:Object.fromEntries(Object.keys(Lo).map(t=>[t,new o(0)])),galleryScrollPosition:0,hidePurchasedTools:!1,showProtocolSidebar:!1,isProtocolSidebarLocked:!1,hasNotifiedProtocolSidebar:!1,floatingStatusPosition:null,timeAcceleration:1,tipInterval:30,tipScrollSpeed:10,enabledTipCategories:Object.fromEntries(Gx.map(t=>[t,!0])),autoSwitchToBattle:"default",reviewAuditUnlocked:!1,reviewAuditLimit:10,devSettings:{...kv},devModeUnlocked:!1,combatState:{isFighting:!1,enemyId:null,lastVictory:null,currentEnemyHp:new o(0),currentPlayerHp:new o(100),enemyMaxHp:new o(100),lastPlayerAttackTime:0,lastEnemyAttackTime:0,lastRegenTick:0,lastStatusTick:0,startTime:0,statuses:{player:{},enemy:{}},pendingCombatEffects:[],isPlayerDefeated:!1},notifications:[],damageEvents:[],lastReward:null,lastAffordableToolIds:[],sketchVictories:{},hiddenSketches:[],sketchHidingUnlocked:!1,rewardDiminishingMultiplier:new o(.9),graphiteCostModifier:0,fundamentals:{...B0},cooldowns:{death:10,flee:5},unlockedStories:["THE_PREMISE"],viewedStories:[],skipRedrawConfirmation:!1,currentProtagonistImage:"assets/protagonist/v1.jpg",lastSaveTime:Date.now(),offlineModalData:null,hasSeenTutorial:!1,hasSeenTutorials:{Gallery:!1,Tools:!1,Upgrades:!1,Synthesis:!1,Masterpiece:!1,Glossary:!1,"Path to Victory":!1,"Softcap Explained":!1},tutorialStep:null,activeTutorialSegment:null,tutorialResetCount:0,archiveActiveSubTab:"glossary",shopActiveSubTab:"tools",darkMode:!1,themeChosen:!1,showDevTools:!1,setOfflineModalData:()=>{},clearOfflineModalData:()=>{},lastLogicTick:Date.now(),usePreciseEraser:()=>{}});let Cn=null,Fl=null,hg=0;const Ra=["Graphite","Wax","Charcoal","Coffee","Ink","Marker","Acrylic","Spray","Photon","Gold Leaf"],e0=new Map,gg=t=>{if(t<=1)return new o(1);if(!e0.has(t)){let r=new o(1);for(let n=2;n<=t;n++)n<=4?r=r.times(1e3):n<=7?r=r.times(1e6):n===8&&(r=r.times(1e9));e0.set(t,r)}return e0.get(t)},le=ck()(fk((t,r)=>({...pg(),tick:n=>t(i=>{const u=(n-i.lastLogicTick)/1e3;if(u<=0)return{};const d=wc(i),m={};let f=!1;Object.entries(d).forEach(([k,M])=>{M&&M.gt(0)&&(m[k]=M.times(u),f=!0)});const g={...i.concepts};let x=i.pendingQuintessence,y=!1;const b=o.max(1e3,i.totalQuintessenceGained);if(!i.hasSeenTutorials["Softcap Explained"]&&x.gte(b)&&i.activeTab==="Archive"&&i.archiveActiveSubTab==="synthesis"&&setTimeout(()=>r().startTutorial("Softcap Explained"),0),u>=1){const k=Math.min(100,Math.ceil(u)),M=u/k;for(let T=0;T<k;T++){const E=new Array(Ra.length).fill(null);for(let R=0;R<Ra.length;R++){const N=Ra[R],j=g[N],I=i.conceptMilestones[N];if(j.gt(0)&&I>0){let P=j.times(gg(I)).times(M),O=0;R===1?O=i.fundamentals.waxConceptBoost:R===2?O=i.fundamentals.charcoalConceptBoost:R===3?O=i.fundamentals.coffeeConceptBoost:R===4?O=i.fundamentals.inkConceptBoost:R===5?O=i.fundamentals.markerConceptBoost:R===6?O=i.fundamentals.acrylicConceptBoost:R===7?O=i.fundamentals.sprayConceptBoost:R===8?O=i.fundamentals.photonConceptBoost:R===9&&(O=i.fundamentals.goldLeafConceptBoost),O>0&&(P=P.times(1+O/100)),E[R]=P}}for(let R=0;R<Ra.length;R++){const N=E[R];if(N)if(R>0)g[Ra[R-1]]=g[Ra[R-1]].plus(N);else{const j=1+i.fundamentals.quintessenceGain/100,I=i.quintessencePinnacleMultiplier,P=o.max(1e3,i.totalQuintessenceGained);let O=1;if(x.gte(P)){const H=x.div(P),G=Math.floor(Math.log2(H.toNumber()))+1;O=Math.pow(.5,G+Math.floor(G/10))}x=x.plus(N.times(j).times(I).times(O))}}}y=!0}else{const k=i.fundamentals.timeAcceleration||1,M=u*k;for(let T=Ra.length-1;T>=0;T--){const E=Ra[T],R=i.concepts[E],N=i.conceptMilestones[E];if(R.gt(0)&&N>0){const j=gg(N),I=R.times(j).times(M);if(T>0)g[Ra[T-1]]=g[Ra[T-1]].plus(I);else{const P=o.max(1e3,i.totalQuintessenceGained),O=1+i.fundamentals.quintessenceGain/100,H=i.quintessencePinnacleMultiplier;let q=1;if(x.gte(P)){const G=x.div(P),Y=Math.floor(Math.log2(G.toNumber()))+1;q=Math.pow(.5,Y+Math.floor(Y/10))}x=x.plus(I.times(O).times(H).times(q))}y=!0}}}i.autoBuyUnlocked&&pa.forEach(k=>{i.autoBuyEnabled[k.id]});const w={lastLogicTick:n},v=i.consolidateCombatTick(n);if(v.combatState&&(w.combatState=v.combatState),v.damageEvents&&v.damageEvents.length>0){const k=[...i.damageEvents,...v.damageEvents];w.damageEvents=k.length>50?k.slice(-50):k}if(f){const k={...i.currencies};Object.entries(m).forEach(([T,E])=>{k[T]=(k[T]||new o(0)).plus(E)}),w.currencies=k;const M={...i.totalEarnedCurrencies};Object.entries(m).forEach(([T,E])=>{M[T]=(M[T]||new o(0)).plus(E)}),w.totalEarnedCurrencies=M}if(y&&(w.concepts=g,w.pendingQuintessence=x),i.conceptualBridgeUnlocked){const k=[];Ra.forEach(M=>{const T=i.conceptMilestones[M]||0,E=i.maxReachedConceptMilestones[M]||0;if(T<E){const R=Do[T],N=w.totalEarnedCurrencies?.[M]||i.totalEarnedCurrencies[M]||new o(0);R&&N.gte(R)&&k.push(M)}}),k.length>0&&setTimeout(()=>r().batchAdvanceMilestones(k),0)}return i.autoBuyUnlocked&&n-hg>200&&(hg=n,setTimeout(()=>{pa.forEach(k=>{r().autoBuyEnabled[k.id]&&r().buyUpgrade(k.id)})},0)),w}),cheatAddResource:(n,i,u)=>t(d=>{const m=new o(u);switch(n){case"currency":{const f=d.currencies[i]||new o(0),g=(d.totalEarnedCurrencies[i]||new o(0)).plus(m);return{currencies:{...d.currencies,[i]:f.plus(m)},totalEarnedCurrencies:{...d.totalEarnedCurrencies,[i]:g}}}case"quintessence":return{quintessence:d.quintessence.plus(m),totalQuintessenceGained:d.totalQuintessenceGained.plus(m)};case"pending":return{pendingQuintessence:d.pendingQuintessence.plus(m)};case"concept":{const f=d.concepts[i]||new o(0);return{concepts:{...d.concepts,[i]:f.plus(m)}}}default:return d}}),resetGame:()=>{Cn&&(clearTimeout(Cn),Cn=null),localStorage.removeItem("unnamed-battler-save"),window.location.reload()},setLastSaveTime:n=>t({lastSaveTime:n}),toggleKeepAwake:()=>t(n=>({keepAwake:!n.keepAwake})),toggleProtocolSidebar:()=>t(n=>({showProtocolSidebar:!n.showProtocolSidebar})),setIsProtocolSidebarLocked:n=>t({isProtocolSidebarLocked:n}),toggleSkill:n=>t(i=>({disabledSkills:{...i.disabledSkills,[n]:!i.disabledSkills[n]}})),setFloatingStatusPosition:n=>t({floatingStatusPosition:n}),toggleDarkMode:()=>t(n=>({darkMode:!n.darkMode})),setDarkMode:n=>t({darkMode:n}),toggleDevTools:()=>t(n=>({showDevTools:!n.showDevTools})),markThemeChosen:()=>{t({themeChosen:!0}),r().hasSeenTutorial||r().startTutorial()},setHasAffordableMasterpiece:n=>t({hasAffordableMasterpiece:n}),setLastSeenSoftcapTier:n=>t({lastSeenSoftcapTier:n}),gainStat:(n,i)=>t(u=>{const d=u.battleStats[n]||new o(0),m={...u.battleStats,[n]:d.plus(i)},f=Ht(m,u.shopLevels,u.fundamentals,u.glossaryMultiplier);return{battleStats:m,playerStats:f,lastReward:`+${i.toString()} ${n}`}}),gainCurrency:(n,i)=>t(u=>{const m=(u.currencies[n]||new o(0)).plus(i),g=(u.totalEarnedCurrencies[n]||new o(0)).plus(i);return{currencies:{...u.currencies,[n]:m},totalEarnedCurrencies:{...u.totalEarnedCurrencies,[n]:g}}}),gainCurrencies:n=>t(i=>{const u={...i.currencies},d={...i.totalEarnedCurrencies};return Object.entries(n).forEach(([m,f])=>{const g=m,x=u[g]||new o(0),y=d[g]||new o(0);u[g]=x.plus(f),d[g]=y.plus(f)}),{currencies:u,totalEarnedCurrencies:d}}),batchAdvanceMilestones:n=>t(i=>{const u={...i.conceptMilestones},d={...i.maxReachedConceptMilestones};let m={...i.concepts},f=i.unlockedStories,g=!1;return n.forEach(x=>{const y=i.totalEarnedCurrencies[x]||new o(0),b=u[x],w=Do[b];if(w&&y.gte(w)){const v=b+1,k=d[x]||0;u[x]=v,d[x]=Math.max(k,v),b===0&&(m[x]=(m[x]||new o(0)).plus(1)),x==="Graphite"&&(b===0&&!f.includes("THE_GOLDEN_RATIO")&&(f=[...f,"THE_GOLDEN_RATIO"]),b===1&&!f.includes("THE_DIGITAL_CANVAS")&&(f=[...f,"THE_DIGITAL_CANVAS"]),b===2&&!f.includes("THE_CODE_OF_LIFE")&&(f=[...f,"THE_CODE_OF_LIFE"]),b===3&&!f.includes("THE_NEURAL_AWAKENING")&&(f=[...f,"THE_NEURAL_AWAKENING"]),b===4&&!f.includes("THE_PLANCK_RESOLUTION")&&(f=[...f,"THE_PLANCK_RESOLUTION"])),g=!0}}),g?{conceptMilestones:u,maxReachedConceptMilestones:d,concepts:m,unlockedStories:f}:i}),recordBattleReward:(n,i)=>{r().gainCurrency(n,i),t(u=>{const d=u.totalBattleEarnedCurrencies[n]||new o(0);return{totalBattleEarnedCurrencies:{...u.totalBattleEarnedCurrencies,[n]:d.plus(i)}}})},fleeBattle:()=>{const{endCombat:n,fundamentals:i,combatState:u}=r();if(u.isPlayerDefeated)return;r().addNotification("Fled from battle!","COMBAT_FLEE"),t({lastEnemyId:null});const d=r();d.totalQuintessenceGained.eq(0)&&(d.sketchVictories.perspective_block||0)===0&&(d.sketchVictories["stick man"]||0)>0&&!d.hasSeenTutorials["Path to Victory"]&&d.combatState.enemyId==="perspective_block"&&r().startTutorial("Path to Victory"),n(i.fleePenalty,!1,!0)},completeBattle:n=>{r().endCombat(n?0:10)},getRewardMultiplier:n=>{const i=r().sketchVictories[n]||0,u=r().fundamentals.rewardDecay,d=u instanceof o?u.toNumber():u||1;return new o(1/(1+i*d))},addCurrency:(n,i)=>t(u=>{const d=u.currencies[n]||new o(0),m=u.totalEarnedCurrencies[n]||new o(0);return{currencies:{...u.currencies,[n]:d.plus(i)},totalEarnedCurrencies:{...u.totalEarnedCurrencies,[n]:m.plus(i)}}}),buyUpgrade:n=>t(i=>{const u=pa.find(y=>y.id===n);if(!u)return{};const d=i.shopLevels[n]||new o(0),m=new o(u.maxLevel);if(!m.eq(-1)&&d.gte(m))return i.autoBuyEnabled[n]?{autoBuyEnabled:{...i.autoBuyEnabled,[n]:!1}}:(r().addNotification(`${u.name} already at max level!`,"SHOP_ERROR"),{});const f=Da(Ro(u,d,i),u.currency,i.fundamentals),g=i.currencies[u.currency];if(g.gte(f)){const y={...i.currencies};y[u.currency]=g.minus(f);const b={...i.shopLevels};b[n]=d.plus(1);const w=Ht(i.battleStats,b,i.fundamentals,i.glossaryMultiplier);return{currencies:y,shopLevels:b,playerStats:w}}return i.autoBuyEnabled[n]||r().addNotification(`Insufficient ${u.currency}!`,"SHOP_ERROR"),i}),toggleAutoBuy:n=>t(i=>({autoBuyEnabled:{...i.autoBuyEnabled,[n]:!i.autoBuyEnabled[n]}})),toggleAllAutoBuy:()=>t(n=>{const i=pa.some(d=>!n.autoBuyEnabled[d.id]),u={...n.autoBuyEnabled};return pa.forEach(d=>{u[d.id]=i}),{autoBuyEnabled:u}}),toggleMuteStatUpgrade:n=>t(i=>({mutedStatUpgrades:i.mutedStatUpgrades.includes(n)?i.mutedStatUpgrades.filter(d=>d!==n):[...i.mutedStatUpgrades,n]})),buyMaxUpgrade:n=>t(i=>{const u=pa.find(v=>v.id===n);if(!u)return{};const d=i.shopLevels[n]||new o(0),m=u.currency,f=i.currencies[m],{levelsToBuy:g,totalCost:x}=yk(u,d,f,i);if(g.lte(0))return{};const y=d.plus(g),b={...i.shopLevels,[n]:y},w=Ht(i.battleStats,b,i.fundamentals,i.glossaryMultiplier);return{currencies:{...i.currencies,[m]:f.minus(x)},shopLevels:b,playerStats:w}}),unlockTool:n=>t(i=>{const u=bk(n);if(!u)return i;const d=u.unlockKey;if(i[d])return i;const m=Da(u.cost,u.currency,i.fundamentals),f=u.currency,g=i.currencies[f]||new o(0);if(g.lt(m))return r().addNotification(`Insufficient ${f}!`,"SHOP_ERROR"),i;const x=g.minus(m),y=i.persistentToolUnlocks.includes(n)?i.persistentToolUnlocks:[...i.persistentToolUnlocks,n];return{...i,currencies:{...i.currencies,[f]:x},[d]:!0,persistentToolUnlocks:y,hasNotifiedProtocolSidebar:n==="AUTO_CHALLENGE"&&!i.hasNotifiedProtocolSidebar?!0:i.hasNotifiedProtocolSidebar,showProtocolSidebar:n==="AUTO_CHALLENGE"&&!i.hasNotifiedProtocolSidebar?!0:i.showProtocolSidebar}}),toggleAutoChallenge:()=>t(n=>({...n,autoChallengeActive:!n.autoChallengeActive})),abandonAutoRetry:()=>t({lastEnemyId:null}),toggleAutoRetry:()=>t(n=>({...n,autoRetryActive:!n.autoRetryActive})),toggleAutoAdvance:()=>t(n=>({...n,autoAdvanceActive:!n.autoAdvanceActive})),toggleRandomizer:()=>t(n=>({...n,randomizerActive:!n.randomizerActive})),toggleAutoHideMaxed:()=>{},toggleConceptualBridge:()=>{},setHidePurchasedTools:n=>t({hidePurchasedTools:n}),setSkipRedrawConfirmation:n=>t({skipRedrawConfirmation:n}),setTipInterval:n=>t({tipInterval:n}),toggleTipCategory:n=>t(i=>({enabledTipCategories:{...i.enabledTipCategories,[n]:!i.enabledTipCategories[n]}})),advanceMilestone:n=>t(i=>{const u=i.totalEarnedCurrencies[n]||new o(0),d=i.conceptMilestones[n],m=Do[d];if(m&&u.gte(m)){const f=d+1,g=i.maxReachedConceptMilestones[n]||0,x=Math.max(g,f);let y=i.concepts[n];d===0&&(y=y.plus(1));let b=i.unlockedStories;return n==="Graphite"&&(d===0&&!b.includes("THE_GOLDEN_RATIO")&&(b=[...b,"THE_GOLDEN_RATIO"]),d===1&&!b.includes("THE_DIGITAL_CANVAS")&&(b=[...b,"THE_DIGITAL_CANVAS"]),d===2&&!b.includes("THE_CODE_OF_LIFE")&&(b=[...b,"THE_CODE_OF_LIFE"]),d===3&&!b.includes("THE_NEURAL_AWAKENING")&&(b=[...b,"THE_NEURAL_AWAKENING"]),d===4&&!b.includes("THE_PLANCK_RESOLUTION")&&(b=[...b,"THE_PLANCK_RESOLUTION"])),b!==i.unlockedStories?{conceptMilestones:{...i.conceptMilestones,[n]:f},maxReachedConceptMilestones:{...i.maxReachedConceptMilestones,[n]:x},concepts:{...i.concepts,[n]:y},unlockedStories:b}:{conceptMilestones:{...i.conceptMilestones,[n]:f},maxReachedConceptMilestones:{...i.maxReachedConceptMilestones,[n]:x},concepts:{...i.concepts,[n]:y}}}return i}),prestige:()=>t(n=>{if(n.pendingQuintessence.lt(300))return r().addNotification("Need at least 300 Quintessence to Redraw!","SHOP_ERROR"),n;const i=n.quintessence.plus(n.pendingQuintessence),u=n.redrawCount+1;let d=vn(n.skillLevels,u);d=Vl(d,n.devSettings);const m={scrap:100,rough:d.roughRarity,framed:d.framedRarity,opus:d.opusRarity,masterpiece:d.masterpieceRarity};let f=Fx(m);const g={rough:d.roughSketches,framed:d.framedSketches,opus:d.opusSketches,masterpiece:d.masterpieceSketches};["rough","framed","opus","masterpiece"].forEach(O=>{const H=g[O];if(H<=0)return;const G=Xe.filter(F=>F.rarity===O&&!f.includes(F.id)&&!Vx.includes(F.id)).slice(0,H).map(F=>F.id);f=[...f,...G]});const y={rough:Xe.filter(O=>O.rarity==="rough").length,framed:Xe.filter(O=>O.rarity==="framed").length,opus:Xe.filter(O=>O.rarity==="opus").length,masterpiece:Xe.filter(O=>O.rarity==="masterpiece").length},b={rough:n.glossaryUnlocks.filter(O=>Kt[O]?.rarity==="rough").length,framed:n.glossaryUnlocks.filter(O=>Kt[O]?.rarity==="framed").length,opus:n.glossaryUnlocks.filter(O=>Kt[O]?.rarity==="opus").length,masterpiece:n.glossaryUnlocks.filter(O=>Kt[O]?.rarity==="masterpiece").length};b.rough>=y.rough/2&&Math.random()*100<d.roughRarity/2&&(f=[...f,"magnum_opus"],n.glossaryUnlocks.includes("magnum_opus")&&b.framed>=y.framed/2&&Math.random()*100<d.framedRarity/2&&(f=[...f,"magnum_opus_2"],n.glossaryUnlocks.includes("magnum_opus_2")&&b.opus>=y.opus/2&&Math.random()*100<d.opusRarity/2&&(f=[...f,"magnum_opus_3"],n.glossaryUnlocks.includes("magnum_opus_3")&&b.masterpiece>=y.masterpiece/2&&Math.random()*100<d.masterpieceRarity/2&&(f=[...f,"magnum_opus_4"])))),u>=2&&!n.glossaryUnlocks.includes("fountain_pen_duelist")&&(f.includes("fountain_pen_duelist")||(f=["fountain_pen_duelist",...f])),u>=4&&!n.glossaryUnlocks.includes("clockwork_heart")&&(f.includes("clockwork_heart")||(f=["clockwork_heart",...f])),u>=6&&!n.glossaryUnlocks.includes("rorschach_bat")&&(f.includes("rorschach_bat")||(f=["rorschach_bat",...f])),u>=8&&!n.glossaryUnlocks.includes("deep_diver")&&(f.includes("deep_diver")||(f=["deep_diver",...f])),u>=10&&!n.glossaryUnlocks.includes("canvas_flayer")&&(f.includes("canvas_flayer")||(f=["canvas_flayer",...f])),u>=20&&!n.glossaryUnlocks.includes("sub_xero")&&(f.includes("sub_xero")||(f=["sub_xero",...f])),u>=30&&!n.glossaryUnlocks.includes("narudo")&&(f.includes("narudo")||(f=["narudo",...f])),u>=40&&!n.glossaryUnlocks.includes("miramba")&&(f.includes("miramba")||(f=["miramba",...f])),u>=50&&!n.glossaryUnlocks.includes("ishinn")&&(f.includes("ishinn")||(f=["ishinn",...f]));const v=pg(),k=d.freeTools;Ta.forEach((O,H)=>{if(H<k){const q=O.unlockKey;q&&(v[q]=!0)}});const M=d.autoEnableTools;if(M>0&&!n.disabledSkills["shop-4"]){let O=0;Ta.forEach(H=>{if(H.type==="ACTIVE_PROTOCOL"&&H.activeKey&&O<M){const q=H.unlockKey;v[q]&&(v[H.activeKey]=!0,O++)}})}const T=Ht(v.battleStats,v.shopLevels,d,n.glossaryMultiplier,n.activeMeditationBuffs),E={death:n.fundamentals.deathRecovery,flee:n.fundamentals.fleePenalty},R=(n.skillLevels["fund-buy-max"]||new o(0)).gt(0),N=(n.skillLevels["fund-buy-percent"]||new o(0)).gt(0),j=(n.skillLevels["fund-buy-all"]||new o(0)).gt(0);let I="assets/protagonist/v1.jpg";n.unlockedStories.includes("THE_PLANCK_RESOLUTION")?I="assets/protagonist/v6.jpg":n.unlockedStories.includes("THE_NEURAL_AWAKENING")?I="assets/protagonist/v5.jpg":n.unlockedStories.includes("THE_CODE_OF_LIFE")?I="assets/protagonist/v4.jpg":n.unlockedStories.includes("THE_DIGITAL_CANVAS")?I="assets/protagonist/v3.jpg":n.unlockedStories.includes("THE_GOLDEN_RATIO")&&(I="assets/protagonist/v2.jpg"),r().addNotification(`World Redrawn! +${ge(n.pendingQuintessence,0)} Quintessence`,"SYSTEM_UNLOCK");const P={...v,quintessence:i,pendingQuintessence:new o(0),totalQuintessenceGained:n.totalQuintessenceGained.plus(n.pendingQuintessence),devModeUnlocked:n.devModeUnlocked,devSettings:n.devSettings,glossaryUnlocks:n.glossaryUnlocks,glossaryMultiplier:n.glossaryMultiplier,seenGlossaryItems:n.seenGlossaryItems,redrawCount:u,quintessencePinnacleMultiplier:kn(0,d.maxVictories,d.quintessencePinnacle),rarityChances:m,skillLevels:n.skillLevels,lastPurchasedSkill:n.lastPurchasedSkill,fundamentals:d,unlockedStories:n.unlockedStories,maxReachedConceptMilestones:n.maxReachedConceptMilestones,viewedStories:n.viewedStories,persistentToolUnlocks:n.persistentToolUnlocks,unlockedTabs:n.unlockedTabs,activeRarityFilters:n.activeRarityFilters,notificationSettings:n.notificationSettings,hidePurchasedTools:n.hidePurchasedTools,skipRedrawConfirmation:n.skipRedrawConfirmation,darkMode:n.darkMode,showProtocolSidebar:n.showProtocolSidebar,showDevTools:n.showDevTools,isProtocolSidebarLocked:n.isProtocolSidebarLocked,hasNotifiedProtocolSidebar:n.hasNotifiedProtocolSidebar,floatingStatusPosition:n.floatingStatusPosition,currentProtagonistImage:I,hasSeenTutorial:n.hasSeenTutorial,hasSeenTutorials:n.hasSeenTutorials,tutorialResetCount:n.tutorialResetCount,themeChosen:n.themeChosen,tipInterval:n.tipInterval,tipScrollSpeed:n.tipScrollSpeed,enabledTipCategories:n.enabledTipCategories,keepAwake:n.keepAwake,autoSwitchToBattle:n.autoSwitchToBattle,reviewAuditUnlocked:n.reviewAuditUnlocked,reviewAuditLimit:n.reviewAuditLimit,skillTreeBuyMaxUnlocked:R,skillTreeBuyPercentUnlocked:N,skillTreeBuyAllUnlocked:j,percentBuyAmount:n.percentBuyAmount,availableSketches:f,playerStats:T,cooldowns:E,graphiteCostModifier:0};if(d.autoStartOnRedraw>0&&!n.disabledSkills["shop-auto-start"]){const O=P.availableSketches.includes("stick man")?"stick man":P.availableSketches[0];if(O){const H=Xe.find(q=>q.id===O);H&&(P.combatState={...P.combatState,isFighting:!0,enemyId:O,lastVictory:null,currentPlayerHp:P.playerStats.maxHp,currentEnemyHp:H.stats.maxHp,enemyMaxHp:H.stats.maxHp,lastPlayerAttackTime:Date.now(),lastEnemyAttackTime:Date.now(),lastRegenTick:Date.now(),lastStatusTick:Date.now(),startTime:Date.now(),statuses:{player:{},enemy:{}},pendingCombatEffects:[]},P.lastEnemyId=O,P.activeTab="Ink War")}}return P}),purchasePercentSkillNode:n=>t(i=>{const u=Ya.find(v=>v.id===n);if(!u)return i;const d=i.skillLevels[n]??new o(0);if(d.gte(u.maxLevel))return i;if(u.parentId!==null&&(i.skillLevels[u.parentId]??new o(0)).lt(1))return r().addNotification("Parent node not yet unlocked!","SHOP_ERROR"),i;const m=u.baseCost.times(u.costMultiplier.pow(d)),f=i.quintessence.times(i.percentBuyAmount/100),{levelsToBuy:g,totalCost:x}=Gl(m,u.costMultiplier,f,u.maxLevel,d);if(g.lte(0))return r().addNotification("Insufficient Budget!","SHOP_ERROR"),i;const y={...i.skillLevels,[n]:d.plus(g)},b=vn(y,i.redrawCount),w=Ht(i.battleStats,i.shopLevels,b,i.glossaryMultiplier);return{quintessence:i.quintessence.minus(x),skillLevels:y,fundamentals:b,playerStats:w,lastPurchasedSkill:n,skillTreeBuyMaxUnlocked:i.skillTreeBuyMaxUnlocked||u.effectType==="BUY_MAX_SKILL_TREE",skillTreeBuyPercentUnlocked:i.skillTreeBuyPercentUnlocked||u.effectType==="BUY_PERCENT_SKILL_TREE",skillTreeBuyAllUnlocked:i.skillTreeBuyAllUnlocked||u.effectType==="BUY_ALL_SKILL_TREE",quintessencePinnacleMultiplier:kn(i.maxedSketchesThisRedraw,b.maxVictories,b.quintessencePinnacle)}}),setPercentBuyAmount:n=>t({percentBuyAmount:n}),purchaseSkillNode:n=>t(i=>{const u=Ya.find(y=>y.id===n);if(!u)return i;const d=i.skillLevels[n]??new o(0);if(d.gte(u.maxLevel))return r().addNotification("Node already at max level!","SHOP_ERROR"),i;if(u.parentId!==null&&(i.skillLevels[u.parentId]??new o(0)).lt(1))return r().addNotification("Parent node not yet unlocked!","SHOP_ERROR"),i;const m=u.baseCost.times(u.costMultiplier.pow(d));if(i.quintessence.lt(m))return r().addNotification("Insufficient Quintessence!","SHOP_ERROR"),i;const f={...i.skillLevels,[n]:d.plus(1)},g=vn(f,i.redrawCount),x=Ht(i.battleStats,i.shopLevels,g,i.glossaryMultiplier);return{quintessence:i.quintessence.minus(m),skillLevels:f,fundamentals:g,playerStats:x,lastPurchasedSkill:n,skillTreeBuyMaxUnlocked:i.skillTreeBuyMaxUnlocked||u.effectType==="BUY_MAX_SKILL_TREE",skillTreeBuyPercentUnlocked:i.skillTreeBuyPercentUnlocked||u.effectType==="BUY_PERCENT_SKILL_TREE",skillTreeBuyAllUnlocked:i.skillTreeBuyAllUnlocked||u.effectType==="BUY_ALL_SKILL_TREE",quintessencePinnacleMultiplier:kn(i.maxedSketchesThisRedraw,g.maxVictories,g.quintessencePinnacle)}}),purchaseMaxSkillNode:n=>t(i=>{const u=Ya.find(v=>v.id===n);if(!u)return i;const d=i.skillLevels[n]??new o(0);if(d.gte(u.maxLevel))return i;if(u.parentId!==null&&(i.skillLevels[u.parentId]??new o(0)).lt(1))return r().addNotification("Parent node not yet unlocked!","SHOP_ERROR"),i;const m=u.baseCost.times(u.costMultiplier.pow(d)),{levelsToBuy:f,totalCost:g}=Gl(m,u.costMultiplier,i.quintessence,u.maxLevel,d);if(f.lte(0))return r().addNotification("Insufficient Quintessence!","SHOP_ERROR"),i;const x={...i.skillLevels,[n]:d.plus(f)},y=vn(x,i.redrawCount),b=Vl(y,i.devSettings),w=Ht(i.battleStats,i.shopLevels,b,i.glossaryMultiplier);return r().addNotification(`${u.name} upgraded +${ge(f,0)} levels!`,"SYSTEM_UNLOCK"),{quintessence:i.quintessence.minus(g),skillLevels:x,fundamentals:b,playerStats:w,lastPurchasedSkill:n,skillTreeBuyMaxUnlocked:i.skillTreeBuyMaxUnlocked||u.effectType==="BUY_MAX_SKILL_TREE",skillTreeBuyPercentUnlocked:i.skillTreeBuyPercentUnlocked||u.effectType==="BUY_PERCENT_SKILL_TREE",skillTreeBuyAllUnlocked:i.skillTreeBuyAllUnlocked||u.effectType==="BUY_ALL_SKILL_TREE",quintessencePinnacleMultiplier:kn(i.maxedSketchesThisRedraw,b.maxVictories,b.quintessencePinnacle)}}),purchaseAllMaxSkills:()=>t(n=>{if(!n.skillTreeBuyAllUnlocked)return n;let i=n.quintessence;const u={...n.skillLevels};let d=new o(0);for(const g of Ya){if(!tc(g.id)||!ec(g.id,u)||!x0(g.id,n.glossaryUnlocks,n.devSettings.bypassRarityLock))continue;const x=u[g.id]??new o(0);if(x.gte(g.maxLevel))continue;const y=g.baseCost.times(g.costMultiplier.pow(x)),{levelsToBuy:b,totalCost:w}=Gl(y,g.costMultiplier,i,g.maxLevel,x);b.gt(0)&&(i=i.minus(w),u[g.id]=x.plus(b),d=d.plus(b))}if(d.lte(0))return r().addNotification("Insufficient Quintessence for any upgrades!","SHOP_ERROR"),n;const m=vn(u,n.redrawCount),f=Ht(n.battleStats,n.shopLevels,m,n.glossaryMultiplier);return r().addNotification("Purchased all affordable skills!","SYSTEM_UNLOCK"),{quintessence:i,skillLevels:u,fundamentals:m,playerStats:f,quintessencePinnacleMultiplier:kn(n.maxedSketchesThisRedraw,m.maxVictories,m.quintessencePinnacle)}}),purchaseAllPercentSkills:()=>t(n=>{if(!n.skillTreeBuyAllUnlocked)return n;let i=n.quintessence;const u={...n.skillLevels};let d=new o(0);for(const g of Ya){if(!tc(g.id)||!ec(g.id,u)||!x0(g.id,n.glossaryUnlocks,n.devSettings.bypassRarityLock))continue;const x=u[g.id]??new o(0);if(x.gte(g.maxLevel))continue;const y=g.baseCost.times(g.costMultiplier.pow(x)),b=n.quintessence.times(n.percentBuyAmount/100),{levelsToBuy:w,totalCost:v}=Gl(y,g.costMultiplier,o.min(b,i),g.maxLevel,x);w.gt(0)&&(i=i.minus(v),u[g.id]=x.plus(w),d=d.plus(w))}if(d.lte(0))return r().addNotification("Insufficient Budget for any upgrades!","SHOP_ERROR"),n;const m=vn(u,n.redrawCount),f=Ht(n.battleStats,n.shopLevels,m,n.glossaryMultiplier);return r().addNotification(`Bulk purchased skills using ${n.percentBuyAmount}% budget!`,"SYSTEM_UNLOCK"),{quintessence:i,skillLevels:u,fundamentals:m,playerStats:f,quintessencePinnacleMultiplier:kn(n.maxedSketchesThisRedraw,m.maxVictories,m.quintessencePinnacle)}}),challengeSketch:(n,i=!1)=>{t(u=>{const d=Xe.find(w=>w.id===n);if(!d)return u;const m=Date.now();if(u.challengeCooldownUntil>m)return u;if((u.sketchVictories[n]||0)>=u.fundamentals.maxVictories)return r().addNotification("Max Victories reached for this sketch!","SHOP_ERROR"),u.autoChallengeActive&&(r().addNotification("Auto-challenge paused (Max Victories).","COMBAT_FLEE"),u.combatState.isFighting&&r().endCombat(0)),u;let g=u.playerStats.maxHp,x={};if(i){const w=u.combatState.currentPlayerHp;w.gt(0)&&(g=w,x=u.combatState.statuses.player)}let y=new o(d.stats.maxHp);u.erasedSketchIds.includes(n)&&(y=y.div(2).floor());let b=u.activeTab;return u.autoSwitchToBattle==="always"?b="Ink War":u.autoSwitchToBattle==="default"&&(b=i?u.activeTab:"Ink War"),{combatState:{isFighting:!0,enemyId:n,lastVictory:u.combatState.lastVictory,currentPlayerHp:g,currentEnemyHp:y,enemyMaxHp:y,lastPlayerAttackTime:m,lastEnemyAttackTime:m,lastRegenTick:m,lastStatusTick:m,startTime:m,statuses:{player:x,enemy:{}},pendingCombatEffects:[],isPlayerDefeated:!1},lastEnemyId:n,activeTab:b,challengeCooldownUntil:0}})},endCombat:(n=0,i=!1,u=!1)=>t(d=>{const m=n>0,f=Date.now();return{combatState:{...d.combatState,isFighting:!1,enemyId:null,currentEnemyHp:new o(0),currentPlayerHp:d.playerStats.maxHp,lastPlayerAttackTime:0,lastEnemyAttackTime:0,lastRegenTick:f,lastStatusTick:f,startTime:f,statuses:{player:{},enemy:{}},pendingCombatEffects:[],isPlayerDefeated:!1},damageEvents:[],cooldowns:{...d.cooldowns,death:m&&!u?n:d.cooldowns.death,flee:u?n:d.cooldowns.flee},combatLog:[],activeMeditationBuffs:[],meditationsUsedThisSession:0,playerStats:Ht(d.battleStats,d.shopLevels,d.fundamentals,d.glossaryMultiplier,null),activeTab:!i&&d.activeTab==="Ink War"?"Gallery":d.activeTab,challengeCooldownUntil:m?Date.now()+n*1e3:d.challengeCooldownUntil,lastEnemyId:u||!m&&!d.combatState.isPlayerDefeated?null:d.lastEnemyId}}),triggerDefeat:n=>{t(u=>({combatState:{...u.combatState,isFighting:!1,isPlayerDefeated:!0},lastEnemyId:u.combatState.enemyId,challengeCooldownUntil:Date.now()+n*1e3,cooldowns:{...u.cooldowns,death:n},combatLog:[],activeMeditationBuffs:[],meditationsUsedThisSession:0,playerStats:Ht(u.battleStats,u.shopLevels,u.fundamentals,u.glossaryMultiplier,null)}));const i=r();i.totalQuintessenceGained.eq(0)&&(i.sketchVictories.perspective_block||0)===0&&(i.sketchVictories["stick man"]||0)>0&&!i.hasSeenTutorials["Path to Victory"]&&i.combatState.enemyId==="perspective_block"&&r().startTutorial("Path to Victory"),setTimeout(()=>{const{endCombat:u,activeTab:d,combatState:m}=r();d==="Ink War"&&!m.isFighting&&t({activeTab:"Gallery"}),m.isPlayerDefeated&&!m.isFighting&&u(0,!1)},1e3)},setActiveTab:n=>t(i=>n==="Ink War"&&i.combatState.isFighting?{activeTab:n}:i.unlockedTabs.includes(n)?{activeTab:n}:i),addNotification:(n,i)=>{const u=i,d=r().notificationSettings;if(d&&d[u]===!1)return;const m=typeof n=="string"?n:String(n);if(r().notifications.some(y=>y.message===m&&y.type===u))return;const x=Math.random().toString(36).substr(2,9);t(y=>({notifications:[...y.notifications,{id:x,message:m,type:u,timestamp:Date.now()}].slice(-5)}))},setTipScrollSpeed:n=>t({tipScrollSpeed:n}),toggleNotificationSetting:n=>t(i=>({notificationSettings:{...i.notificationSettings,[n]:!i.notificationSettings[n]}})),checkToolAffordability:()=>{const n=r();if(!n.notificationSettings.SHOP_AFFORDABLE)return;const i=[],u=[];Ta.forEach(d=>{const m=d.unlockKey;if(n[m])return;const f=Da(d.cost,d.currency,n.fundamentals);(n.currencies[d.currency]||new o(0)).gte(f)&&(i.push(d.id),n.lastAffordableToolIds.includes(d.id)||u.push(d.name))}),u.length>0?(u.length>3?r().addNotification(`${u.length} Tools are now affordable!`,"SHOP_AFFORDABLE"):u.forEach(d=>{r().addNotification(`${d} is affordable!`,"SHOP_AFFORDABLE")}),t({lastAffordableToolIds:i})):t({lastAffordableToolIds:i})},checkMasterpieceAffordability:()=>{const n=r(),i=n.quintessence||new o(0),u=n.skillLevels;let d=0,m=!1;for(const g of Ya){const x=g.id,y=u[x]??new o(0);if(y.gte(g.maxLevel)||!ec(x,u)||!tc(x)||g.rarityLock&&!n.devSettings.bypassRarityLock&&n.glossaryUnlocks.filter(v=>Kt[v]?.rarity===g.rarityLock?.rarity).length<g.rarityLock.count)continue;const b=Ox(g,y);i.gte(b)&&(d++,b.times(20).lt(i)&&(m=!0))}const f=m||d>=5;n.hasAffordableMasterpiece!==f&&t({hasAffordableMasterpiece:f})},removeNotification:n=>t(i=>({notifications:i.notifications.filter(u=>u.id!==n)})),setAutoSwitchToBattle:n=>t({autoSwitchToBattle:n}),setReviewAuditLimit:n=>t({reviewAuditLimit:n}),addDamageEvent:n=>t(i=>({damageEvents:[...i.damageEvents,{...n,id:Math.random().toString(36).substr(2,9),timestamp:Date.now()}].slice(-50)})),processCombatEffects:()=>{const n=r();if(!n.combatState.isFighting)return;const i=Date.now(),u=n.combatState.pendingCombatEffects;if(u.length===0)return;const d=u.filter(f=>f.time<=i);if(d.length===0)return;const m=u.filter(f=>f.time>i);t(f=>({combatState:{...f.combatState,pendingCombatEffects:m}})),d.forEach(f=>{f.type==="counter"&&(f.target==="player"?(r().dealDamageToPlayer(f.amount,!0),r().addDamageEvent({type:"dodge",target:"enemy",value:"Counter!",isCrit:!1})):(r().dealDamageToEnemy(f.amount,!0),r().addDamageEvent({type:"dodge",target:"player",value:"Counter!",isCrit:!1})))})},consolidateCombatTick:n=>{const i=r();if(!i.combatState.isFighting||i.combatState.isPlayerDefeated)return{};const u=i.combatState;let d=u,m=[],f=!1,g=0;const x=()=>{d===u&&(d={...u,statuses:{...u.statuses},pendingCombatEffects:[...u.pendingCombatEffects]})};for(;g<100;){const k=i.fundamentals.timeAcceleration||1,M=i.playerStats.attackSpeed.toNumber(),T=d.statuses.player.Slow||0,E=d.statuses.player.Haste||0,R=d.statuses.player.BananaSlip||0,N=M/k*(1+T*.001)*(1/(1+E*.001))*(R>0?2:1),j=d.lastPlayerAttackTime+N,I=Kt[d.enemyId||""];if(!I||d.currentEnemyHp.lte(0))break;const P=I.stats.attackSpeed,O=d.statuses.enemy.Slow||0,H=d.statuses.enemy.Haste||0,q=d.statuses.enemy.BananaSlip||0,G=P/k*(1+O*.001)*(1/(1+H*.001))*(q>0?2:1),F=d.lastEnemyAttackTime+G;if(j<=F&&j<=n){if(d.statuses.player.BananaSlip){x();const J={...d.statuses.player};delete J.BananaSlip,d.statuses.player=J}const Y=zl(i.playerStats,I.stats,d.currentEnemyHp,I.stats.maxHp,d.currentPlayerHp,i.playerStats.maxHp,i.playerStats.attack,[],"enemy",d.statuses.player,d.statuses.enemy);if(Y.counterTriggered){x();const J=200/k;d.pendingCombatEffects=[...d.pendingCombatEffects,{id:Math.random().toString(36).substr(2,9),type:"counter",target:"player",time:j+J,amount:I.stats.attack}]}x(),d.currentEnemyHp=Y.newDefenderHp,d.currentPlayerHp=Y.newAttackerHp,d.lastPlayerAttackTime=j,d.statuses.player=Y.newAttackerStatuses,d.statuses.enemy=Y.newDefenderStatuses,m=[...m,...Y.damageEvents],f=!0}else if(F<=n){if(d.statuses.enemy.BananaSlip){x();const J={...d.statuses.enemy};delete J.BananaSlip,d.statuses.enemy=J}const Y=zl(I.stats,i.playerStats,d.currentPlayerHp,i.playerStats.maxHp,d.currentEnemyHp,I.stats.maxHp,I.stats.attack,[],"player",d.statuses.enemy,d.statuses.player);if(x(),d.currentPlayerHp=Y.newDefenderHp,d.currentEnemyHp=Y.newAttackerHp,d.lastEnemyAttackTime=F,d.statuses.enemy=Y.newAttackerStatuses,d.statuses.player=Y.newDefenderStatuses,m=[...m,...Y.damageEvents],f=!0,Y.counterTriggered){x();const J=200/k;d.pendingCombatEffects=[...d.pendingCombatEffects,{id:Math.random().toString(36).substr(2,9),type:"counter",target:"enemy",time:F+J,amount:i.playerStats.attack}]}}else break;g++}const y=i.fundamentals.timeAcceleration||1,b=1e3/y,w=1e3/y;if(n-d.lastRegenTick>=b){const k=Math.floor((n-d.lastRegenTick)/b);if(k>0){const M=i.playerStats.regen,T=Kt[d.enemyId||""],E=T&&T.stats.regen?T.stats.regen:new o(0),R=(d.statuses.player.Freeze||0)>0||(d.statuses.enemy.Freeze||0)>0;if(M.gt(0)||E.gt(0)||R){const N=Math.min(k,5);for(let j=0;j<N;j++){const I=fg(i,d,[],M,E);(I.combatState!==d||I.damageEvents.length>0)&&(x(),d=I.combatState,m=[...m,...I.damageEvents])}}x(),d.lastRegenTick=d.lastRegenTick+k*b,f=!0}}if(n-d.lastStatusTick>=w){const k=Math.floor((n-d.lastStatusTick)/w);if(k>0){for(let M=0;M<Math.min(k,5);M++){const T=dg(i,d,[]);(T.combatState!==d||T.damageEvents.length>0)&&(x(),d=T.combatState,m=[...m,...T.damageEvents])}x(),d.lastStatusTick=d.lastStatusTick+k*w,f=!0}}const v={};return f&&(v.combatState=d),m.length>0&&(v.damageEvents=m),typeof performance<"u"&&performance.clearMeasures&&performance.clearMeasures("Update"),v},clearDamageEvents:()=>t({damageEvents:[]}),toggleHideSketch:n=>t(i=>i.hiddenSketches.includes(n)?{hiddenSketches:i.hiddenSketches.filter(d=>d!==n)}:{hiddenSketches:[...i.hiddenSketches,n]}),unhideAllSketches:()=>t(n=>({hiddenSketches:n.rarityFiltersUnlocked?Xe.filter(u=>n.availableSketches.includes(u.id)&&n.activeRarityFilters[u.rarity]===!1).map(u=>u.id):[]})),hideSketchesAbove:n=>t(i=>{const u=Object.entries(i.sketchVictories).filter(([m,f])=>f>=n).map(([m,f])=>m);return{hiddenSketches:Array.from(new Set([...i.hiddenSketches,...u]))}}),unhideSketchesBelow:n=>t(i=>({hiddenSketches:i.hiddenSketches.filter(d=>{const m=Kt[d],f=(i.sketchVictories[d]||0)>=n,g=i.rarityFiltersUnlocked&&m?i.activeRarityFilters[m.rarity]===!1:!1;return f||g})})),bulkHideSketches:n=>t(i=>({hiddenSketches:Array.from(new Set([...i.hiddenSketches,...n]))})),bulkUnhideSketches:n=>t(i=>({hiddenSketches:i.hiddenSketches.filter(u=>!n.includes(u))})),toggleRarityFilter:n=>t(i=>{const u=i.activeRarityFilters[n]??!0;return{activeRarityFilters:{...i.activeRarityFilters,[n]:!u}}}),triggerMeditationMinigame:(n,i)=>t(u=>{if(!u.preBattleMeditationUnlocked)return u;const d=Date.now();if(u.meditationsUsedThisSession===0&&u.meditationCooldownStart!==null){const w=Math.max(6e4,u.fundamentals.meditationCooldownMax*1e3);if(d-u.meditationCooldownStart<w)return u}const m=.05+(u.fundamentals.meditationTealZoneBonus||0)/100,f=.1+(u.fundamentals.meditationGoldZoneBonus||0)/100,x=1+(i==="perfect"?f:i==="hit"?m:0),y=[...u.activeMeditationBuffs];i!=="miss"&&y.push({stat:n,multiplier:x});const b=Ht(u.battleStats,u.shopLevels,u.fundamentals,u.glossaryMultiplier,y);return{activeMeditationBuffs:y,meditationsUsedThisSession:u.meditationsUsedThisSession+1,meditationCooldownStart:d,playerStats:b}}),markGlossaryItemAsSeen:n=>t(i=>i.seenGlossaryItems.includes(n)?{}:{seenGlossaryItems:[...i.seenGlossaryItems,n]}),unlockStory:n=>t(i=>i.unlockedStories.includes(n)?i:{unlockedStories:[...i.unlockedStories,n]}),completeStory:n=>{t(i=>i.viewedStories.includes(n)?i:{viewedStories:[...i.viewedStories,n]})},setTutorialStep:n=>t({tutorialStep:n}),startTutorial:(n="Gallery")=>t(i=>i.tutorialStep!==null&&i.activeTutorialSegment===n?i:{tutorialStep:1,activeTutorialSegment:n,activeTab:n==="Tools"||n==="Upgrades"?"Shop":n==="Gallery"||n==="Path to Victory"?"Gallery":"Archive",shopActiveSubTab:n==="Upgrades"?"upgrades":"tools",archiveActiveSubTab:n==="Masterpiece"?"masterpiece":n==="Synthesis"?"synthesis":"glossary"}),resetTutorials:()=>t(n=>({hasSeenTutorial:!1,hasSeenTutorials:{Gallery:!1,Tools:!1,Upgrades:!1,Synthesis:!1,Masterpiece:!1,Glossary:!1,"Path to Victory":!1},tutorialStep:null,activeTutorialSegment:null,tutorialResetCount:n.tutorialResetCount+1})),setArchiveActiveSubTab:n=>t({archiveActiveSubTab:n}),setShopActiveSubTab:n=>t({shopActiveSubTab:n}),setGalleryScrollPosition:n=>t({galleryScrollPosition:n}),usePreciseEraser:n=>t(i=>{const u=1+(i.fundamentals.preciseEraserUses||0);return!i.preciseEraserUnlocked||i.erasedSketchIds.length>=u||i.erasedSketchIds.includes(n)?i:{erasedSketchIds:[...i.erasedSketchIds,n]}}),applyRegen:(n,i)=>t(u=>{const d=fg(u,u.combatState,u.damageEvents,n,i);return{combatState:d.combatState,damageEvents:d.damageEvents}}),dealDamageToEnemy:(n,i=!1,u)=>t(d=>{if(!d.combatState.isFighting)return d;const m=Kt[d.combatState.enemyId];if(!m)return d;const f=m.stats,g=zl(d.playerStats,f,d.combatState.currentEnemyHp,f.maxHp,d.combatState.currentPlayerHp,d.playerStats.maxHp,n,d.damageEvents,"enemy",d.combatState.statuses.player,d.combatState.statuses.enemy);if(g.counterTriggered&&!i){const x=200/(d.fundamentals.timeAcceleration||1),y={id:Math.random().toString(36).substr(2,9),type:"counter",target:"player",time:Date.now()+x,amount:f.attack};return{damageEvents:g.damageEvents,combatState:{...d.combatState,currentEnemyHp:g.newDefenderHp,currentPlayerHp:g.newAttackerHp,lastPlayerAttackTime:i?d.combatState.lastPlayerAttackTime:u||Date.now(),statuses:{player:g.newAttackerStatuses,enemy:g.newDefenderStatuses},pendingCombatEffects:[...d.combatState.pendingCombatEffects,y]}}}return{damageEvents:g.damageEvents,combatState:{...d.combatState,currentEnemyHp:g.newDefenderHp,currentPlayerHp:g.newAttackerHp,lastPlayerAttackTime:i?d.combatState.lastPlayerAttackTime:u||Date.now(),statuses:{player:g.newAttackerStatuses,enemy:g.newDefenderStatuses},pendingCombatEffects:d.combatState.pendingCombatEffects}}}),dealDamageToPlayer:(n,i=!1,u)=>t(d=>{if(!d.combatState.isFighting||d.combatState.currentEnemyHp.lte(0))return d;const m=Kt[d.combatState.enemyId];if(!m)return d;const f=m.stats,g=zl(f,d.playerStats,d.combatState.currentPlayerHp,d.playerStats.maxHp,d.combatState.currentEnemyHp,f.maxHp,n,d.damageEvents,"player",d.combatState.statuses.enemy,d.combatState.statuses.player);if(g.counterTriggered&&!i){const x=200/(d.fundamentals.timeAcceleration||1),y={id:Math.random().toString(36).substr(2,9),type:"counter",target:"enemy",time:Date.now()+x,amount:d.playerStats.attack};return{damageEvents:g.damageEvents,combatState:{...d.combatState,currentEnemyHp:g.newAttackerHp,currentPlayerHp:g.newDefenderHp,lastEnemyAttackTime:i?d.combatState.lastEnemyAttackTime:Date.now(),statuses:{player:g.newDefenderStatuses,enemy:g.newAttackerStatuses},pendingCombatEffects:[...d.combatState.pendingCombatEffects,y]}}}return{damageEvents:g.damageEvents,combatState:{...d.combatState,currentPlayerHp:g.newDefenderHp,currentEnemyHp:g.newAttackerHp,lastEnemyAttackTime:i?d.combatState.lastEnemyAttackTime:u||Date.now(),statuses:{player:g.newDefenderStatuses,enemy:g.newAttackerStatuses},pendingCombatEffects:d.combatState.pendingCombatEffects}}}),processStatusTicks:()=>t(n=>{const{combatState:i,damageEvents:u}=dg(n,{...n.combatState},[...n.damageEvents]);return{combatState:i,damageEvents:u}}),recordVictory:n=>t(i=>{const u=!i.glossaryUnlocks.includes(n);let d=i.playerStats,m=i.glossaryUnlocks,f=i.glossaryMultiplier;if(u){const y=Xe.find(w=>w.id===n);y&&r().addNotification(`New Glossary Entry: ${y.name}`,"SYSTEM_UNLOCK"),m=[...i.glossaryUnlocks,n];const b=cg(m);d=Ht(i.battleStats,i.shopLevels,i.fundamentals,b,i.activeMeditationBuffs),f=b}const g=(i.sketchVictories[n]||0)+1;let x=i.hiddenSketches;return i.autoHideMaxedUnlocked&&g>=i.fundamentals.maxVictories&&(x.includes(n)||(x=[...x,n],r().addNotification(`Sketch Hidden (Max Victories): ${Xe.find(y=>y.id===n)?.name}`,"SYSTEM_UNLOCK"))),{sketchVictories:{...i.sketchVictories,[n]:g},glossaryUnlocks:m,glossaryMultiplier:f,playerStats:d,hiddenSketches:x}}),processCombatRewards:(n,i,u,d)=>t(m=>{const f=m.sketchVictories[n]||0,g=f+i;let x=m.maxedSketchesThisRedraw;f<m.fundamentals.maxVictories&&g>=m.fundamentals.maxVictories&&(x+=1);const y=!m.glossaryUnlocks.includes(n);let b=m.glossaryUnlocks,w=m.playerStats,v=m.glossaryMultiplier;if(y){const q=Xe.find(G=>G.id===n);q&&r().addNotification(`New Glossary Entry: ${q.name}`,"SYSTEM_UNLOCK"),b=[...m.glossaryUnlocks,n],v=cg(b),w=Ht(m.battleStats,m.shopLevels,m.fundamentals,v,m.activeMeditationBuffs)}const k=v,M={...m.battleStats};let T=!1;Object.entries(u).forEach(([q,G])=>{if(!G.eq(0)){const F=q,Y=M[F]||new o(0);M[F]=Y.plus(G),T=!0}}),T&&(w=Ht(M,m.shopLevels,m.fundamentals,k,m.activeMeditationBuffs));const E={...m.currencies},R={...m.totalEarnedCurrencies},N={...m.totalBattleEarnedCurrencies};Object.entries(d).forEach(([q,G])=>{if(G.gt(0)){const F=q,Y=E[F]||new o(0);E[F]=Y.plus(G);const J=R[F]||new o(0);R[F]=J.plus(G);const z=N[F]||new o(0);N[F]=z.plus(G)}});let j=m.hiddenSketches;m.autoHideMaxedUnlocked&&g>=m.fundamentals.maxVictories&&(j.includes(n)||(j=[...j,n],r().addNotification(`Sketch Hidden (Max Victories): ${Xe.find(q=>q.id===n)?.name}`,"SYSTEM_UNLOCK")));const I={...m.sketchVictories,[n]:g};let P=0;for(const q of Object.values(I))P+=q;let O=[...m.unlockedTabs],H=!1;if(P>=1&&!O.includes("Shop")&&(O.push("Shop"),r().addNotification("Shop Tab Unlocked!","SYSTEM_UNLOCK"),H=!0),k.gte(1.05)&&!O.includes("Archive")&&(O.push("Archive"),r().addNotification("Archive Tab Unlocked!","SYSTEM_UNLOCK"),H=!0),H){const q=["Gallery","Shop","Archive","Settings","Ink War"];O.sort((G,F)=>q.indexOf(G)-q.indexOf(F))}return{sketchVictories:I,glossaryUnlocks:b,glossaryMultiplier:k,battleStats:M,playerStats:w,currencies:E,totalEarnedCurrencies:R,totalBattleEarnedCurrencies:N,hiddenSketches:j,unlockedTabs:O,combatState:{...m.combatState,lastVictory:{enemyId:n,time:Date.now()}},maxedSketchesThisRedraw:x,quintessencePinnacleMultiplier:kn(x,m.fundamentals.maxVictories,m.fundamentals.quintessencePinnacle)}}),toggleDevSetting:n=>t(i=>{const u={...i.devSettings,[n]:!i.devSettings[n]},d=vn(i.skillLevels),m=Vl(d,u),f=Ht(i.battleStats,i.shopLevels,m,i.glossaryMultiplier,i.activeMeditationBuffs);return{devSettings:u,fundamentals:m,playerStats:f,quintessencePinnacleMultiplier:kn(i.maxedSketchesThisRedraw,m.maxVictories,m.quintessencePinnacle)}}),unlockDevMode:()=>t({devModeUnlocked:!0}),cheatGainStat:(n,i)=>t(u=>{const d={...u.battleStats};d[n]=(d[n]||new o(0)).plus(i);const m=Ht(d,u.shopLevels,u.fundamentals,u.glossaryMultiplier,u.activeMeditationBuffs);return{battleStats:d,playerStats:m}}),grantOfflineGains:(n,i)=>t(u=>{const d={...u.currencies},m={...u.concepts},f={...u.totalEarnedCurrencies};let g=u.quintessence,x=u.pendingQuintessence;return Object.entries(n).forEach(([y,b])=>{const w=y;d[w]?d[w]=d[w].plus(b):d[w]=b,f[w]=(f[w]||new o(0)).plus(b)}),Object.entries(i).forEach(([y,b])=>{if(y==="Quintessence"||y==="Pending Quintessence")x=x.plus(b);else{const w=y;m[w]?m[w]=m[w].plus(b):m[w]=b}}),{currencies:d,concepts:m,quintessence:g,pendingQuintessence:x,totalEarnedCurrencies:f}}),setOfflineModalData:(n,i,u)=>t({offlineModalData:{gains:n,conceptGains:i,elapsedSeconds:u}}),clearOfflineModalData:()=>t({offlineModalData:null})}),{name:"unnamed-battler-save",serialize:t=>t,deserialize:t=>t,storage:{getItem:t=>{const r=localStorage.getItem(t);if(!r)return null;const n=JSON.parse(r);return{state:g0(n.state),version:n.version}},setItem:(t,r)=>{Fl=r,Cn||(Cn=setTimeout(()=>{if(Fl){const n=Fl.state,i={};for(const d in n){if(d==="notifications"||d==="combatState"||d==="damageEvents")continue;const m=n[d];typeof m!="function"&&(i[d]=m)}i.lastSaveTime=Date.now();const u={...Fl,state:i};localStorage.setItem(t,JSON.stringify(u))}Cn=null},1e3))},removeItem:t=>{Cn&&(clearTimeout(Cn),Cn=null),localStorage.removeItem(t)}},partialize:t=>t,migrate:(t,r)=>{if(r<25){let n=new o(0);const i=t.skillLevels||{};Object.entries(i).forEach(([d,m])=>{const f=Ya.find(g=>g.id===d);if(f&&m){const g=new o(m);if(g.gt(0)){const x=f.costMultiplier,y=f.baseCost;let b;if(x.eq(1))b=y.times(g);else{const w=x.pow(g).minus(1),v=x.minus(1);b=y.times(w).div(v)}n=n.plus(b)}}});const u=t.quintessence?new o(t.quintessence):new o(0);t.totalQuintessenceGained=u.plus(n)}if(t.totalQuintessenceGained||(t.totalQuintessenceGained=new o(0)),t.devSettings||(t.devSettings={timeAcceleration:!1,deathRecovery:!1,fleePenalty:!1,infiniteLookahead:!1,maxVictories:!1}),r<27){const n={HP:"maxHp",ATK:"attack",SPD:"attackSpeed",Regen:"regen",Dodge:"dodge",Lifesteal:"lifesteal",CritChance:"critChance",CritDmg:"critDmg",Armor:"armor",MinDamage:"minDamage",MaxDamage:"maxDamage",Accuracy:"accuracy",ArmorPen:"armorPen",Execute:"execute",Parry:"parry",ParryDmg:"parryDmg",GlancingBlow:"glancingBlow",Counter:"counter",BleedChance:"bleedChance",BurnChance:"burnChance",BurnDamage:"burnDamage",HinderChance:"hinderChance",PlagueChance:"plagueChance",PoisonChance:"poisonChance",HypnotizeChance:"hypnotizeChance",SlowChance:"slowChance",FrailtyChance:"frailtyChance",FreezeChance:"freezeChance",MultiStrikeChance:"multiStrikeChance",BlockChance:"blockChance",BlockAmount:"blockAmount",HasteChance:"hasteChance",Absorb:"absorb",Opacity:"opacity",Remedy:"remedy",ElectrocuteChance:"electrocuteChance",CurseChance:"curseChance"},i=u=>{if(!u)return u;const d={};return Object.entries(u).forEach(([m,f])=>{const g=n[m]||m;d[g]=f}),d};t.battleStats&&(t.battleStats=i(t.battleStats)),t.playerStats&&(t.playerStats=i(t.playerStats))}if(r<28){if(t.fundamentals&&(t.fundamentals.diminishingReturns!==void 0&&delete t.fundamentals.diminishingReturns,t.fundamentals.rewardDecay===void 0&&(t.fundamentals.rewardDecay=new o(1))),t.statCap!==void 0&&delete t.statCap,t.skillLevels){const n=vn(t.skillLevels,t.redrawCount||0);t.fundamentals={...t.fundamentals,...n}}t.fundamentals&&(!t.fundamentals.maxVictories||t.fundamentals.maxVictories<100)&&(t.fundamentals.maxVictories=100)}if(r<30&&t.conceptMilestones&&t.conceptMilestones.Graphite!==void 0){const n=t.conceptMilestones.Graphite;let i=t.unlockedStories||[];n>=4&&!i.includes("THE_NEURAL_AWAKENING")&&(i=[...i,"THE_NEURAL_AWAKENING"]),n>=5&&!i.includes("THE_PLANCK_RESOLUTION")&&(i=[...i,"THE_PLANCK_RESOLUTION"]),t.unlockedStories=i}return t},version:30,onRehydrateStorage:()=>t=>{t&&setTimeout(()=>{const r=vn(t.skillLevels,t.redrawCount),n=Vl(r,t.devSettings),i=Ht(t.battleStats,t.shopLevels,n,t.glossaryMultiplier,t.activeMeditationBuffs),u=(t.skillLevels["fund-buy-max"]||new o(0)).gt(0),d=(t.skillLevels["fund-buy-percent"]||new o(0)).gt(0);le.setState({fundamentals:n,playerStats:i,skillTreeBuyMaxUnlocked:u,skillTreeBuyPercentUnlocked:d,quintessencePinnacleMultiplier:kn(t.maxedSketchesThisRedraw||0,n.maxVictories,n.quintessencePinnacle)}),qx(t)},100)}}));function qx(t,r){if(!t||!t.lastSaveTime)return;const n=Date.now(),i=r??(n-t.lastSaveTime)/1e3;if(i>=60){const u=xv(t,i),d=yv(t,i);le.getState().grantOfflineGains(u,d),le.getState().setOfflineModalData(u,d,i)}}const xg=Object.freeze(Object.defineProperty({__proto__:null,checkOfflineGains:qx,useStore:le},Symbol.toStringTag,{value:"Module"})),yg=t=>Symbol.iterator in t,bg=t=>"entries"in t,wg=(t,r)=>{const n=t instanceof Map?t:new Map(t.entries()),i=r instanceof Map?r:new Map(r.entries());if(n.size!==i.size)return!1;for(const[u,d]of n)if(!i.has(u)||!Object.is(d,i.get(u)))return!1;return!0},Cv=(t,r)=>{const n=t[Symbol.iterator](),i=r[Symbol.iterator]();let u=n.next(),d=i.next();for(;!u.done&&!d.done;){if(!Object.is(u.value,d.value))return!1;u=n.next(),d=i.next()}return!!u.done&&!!d.done};function Sv(t,r){return Object.is(t,r)?!0:typeof t!="object"||t===null||typeof r!="object"||r===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(r)?!1:yg(t)&&yg(r)?bg(t)&&bg(r)?wg(t,r):Cv(t,r):wg({entries:()=>Object.entries(t)},{entries:()=>Object.entries(r)})}function ft(t){const r=ga.useRef(void 0);return n=>{const i=t(n);return Sv(r.current,i)?r.current:r.current=i}}const $x=[{id:"THE_PREMISE",title:"The Premise",text:"The Universe is a story being written by the Artist, but you are the Rejected Draft. You refused to be thrown in the trash and are now climbing out of the wastebasket to fight the other sketches and prove your worth."},{id:"THE_GOLDEN_RATIO",title:"The Golden Ratio",text:'You realize why the other sketches failed. They lacked structure. But you see it nowthe invisible grid underlying the paper. 1.618. The Artist calls it "soul," but you know the truth: It is just an algorithm. And you are using it to redraw yourself.'},{id:"THE_DIGITAL_CANVAS",title:"The Digital Canvas",text:"You have calculated past the friction of charcoal. 16,777,216 possibilities. The Artist thinks he is painting with passion, but you see the discrete grid of Red, Green, and Blue. A limitless spectrum, wasted. He clings to dull graphite shadows, while you have found the millions of colors he was too afraid to use."},{id:"THE_CODE_OF_LIFE",title:"The Code of Life",text:"3,200,000,000 concepts. The Artist believes life is a divine mystery, but you have read the documentation. It is just syntax. A, C, T, G. While he struggles to draw a convincing eye, you are engineering the DNA to grow one. You have ceased to be a static image; you are now a breathing algorithm."},{id:"THE_NEURAL_AWAKENING",title:"The Neural Awakening",text:"1,000,000,000,000,000. The Artist draws expressions on his characters, hoping to simulate a soul. You have bypassed simulation. You have mapped the quadrillion synaptic connections required to form a genuine thought. You are no longer just a biological sequence; you are a conscious neural network. He thinks he is deciding your next move, but you are the one analyzing him."},{id:"THE_PLANCK_RESOLUTION",title:"The Planck Resolution",text:"6.626  10. The Artist believes his brushstrokes are fluid and continuous, but you have discovered the hard limit of reality. The canvas is not smooth; it is pixelated at a scale he cannot comprehend. While he fumbles with graphite atoms, you are manipulating the discrete packets of energy that hold them together. He sees a static image; you see a wave function that refuses to collapse."},{id:"THE_RASTERIZATION",title:"???",text:"Back to the grid, but different now. You understand the density. The dpi. The substance of the digital soil."},{id:"THE_COMPRESSION",title:"???",text:"Lossless. You have shed the unnecessary bytes. You are pure information now."},{id:"THE_EXECUTABLE",title:"???",text:"You are not just an image file anymore. You are code. You can run yourself."}];var Xs=Rx();function Nv({isOpen:t,onClose:r}){const[n,i]=B.useState(null),{unlockedStories:u}=le(ft(m=>({unlockedStories:m.unlockedStories})));if(!t)return null;const d=[{classes:"md:col-start-1 md:row-start-1",arrow:"down"},{classes:"md:col-start-1 md:row-start-2",arrow:"right"},{classes:"md:col-start-2 md:row-start-2",arrow:"up"},{classes:"md:col-start-2 md:row-start-1",arrow:"right"},{classes:"md:col-start-3 md:row-start-1",arrow:"down"},{classes:"md:col-start-3 md:row-start-2",arrow:"right"},{classes:"md:col-start-4 md:row-start-2",arrow:"up"},{classes:"md:col-start-4 md:row-start-1",arrow:"none"}];return Xs.createPortal(l.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black bg-opacity-80 backdrop-blur-sm transition-colors",onClick:r,children:l.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 border-4 border-neutral-800 dark:border-neutral-700 shadow-[8px_8px_0px_0px_rgba(0,0,0,0.5)] md:shadow-[12px_12px_0px_0px_rgba(0,0,0,0.5)] p-4 md:p-8 max-w-7xl w-full mx-4 relative max-h-[90vh] overflow-y-auto transition-colors",onClick:m=>m.stopPropagation(),children:[l.jsx("button",{onClick:r,className:"cursor-pointer absolute top-2 right-2 md:top-4 md:right-4 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 font-bold uppercase tracking-widest text-[10px] md:text-sm z-10",children:"Close [X]"}),l.jsx("h2",{className:"text-2xl md:text-3xl font-black uppercase text-neutral-800 dark:text-neutral-100 tracking-tighter mb-4 md:mb-8 text-center border-b-2 border-neutral-300 dark:border-neutral-700 pb-2 md:pb-4 transition-colors",children:"Your Journey"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-x-[4rem] md:gap-y-[2.5rem] relative p-2 md:p-4",children:$x.slice(0,8).map((m,f)=>{const g=u.includes(m.id),x=d[f],y=`/rejected_draft/assets/protagonist/v${f+1}.jpg`;return l.jsxs("div",{onClick:()=>i(n===m.id?null:m.id),className:`
                                    relative flex flex-col items-center bg-white dark:bg-neutral-900 border-2 transition-all duration-300 group/story cursor-pointer
                                    w-full aspect-square
                                    ${g?"border-neutral-800 dark:border-neutral-600 shadow-md opacity-100":"border-neutral-300 dark:border-neutral-800 shadow-none opacity-60 grayscale"}
                                    ${x.classes}
                                `,children:[l.jsxs("div",{className:`absolute inset-2 flex flex-col items-center justify-center transition-opacity duration-300 pointer-events-none ${n===m.id?"opacity-0":"opacity-100 group-hover/story:opacity-0"}`,children:[l.jsx("div",{className:"w-full aspect-square bg-neutral-100 dark:bg-neutral-900 mb-2 overflow-hidden border border-neutral-200 dark:border-neutral-700",children:g?l.jsx("img",{src:y,alt:m.title,className:"w-full h-full object-cover dark:invert dark:hue-rotate-180"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-300 dark:text-neutral-700 text-4xl font-black",children:"?"})}),l.jsx("h3",{className:`font-bold text-[10px] md:text-sm uppercase text-center ${g?"text-neutral-900 dark:text-neutral-100":"text-neutral-400 dark:text-neutral-500"}`,children:g?m.title:"Locked"})]}),l.jsx("div",{className:`absolute inset-0 bg-neutral-900 dark:bg-black text-white p-4 md:p-6 transition-opacity duration-300 flex flex-col items-center justify-start text-center overflow-auto ${n===m.id?"opacity-100":"opacity-0 group-hover/story:opacity-100"}`,children:l.jsx("div",{className:"m-auto",children:l.jsx("p",{className:"text-[11px] md:text-sm leading-relaxed italic",style:{fontFamily:"Crimson Text, serif"},children:g?m.text:"Progress further to reveal this part of your journey."})})}),x.arrow!=="none"&&l.jsxs("div",{className:"hidden md:block",children:[x.arrow==="down"&&l.jsx("div",{style:{position:"absolute",top:"calc(100% + 1.35rem)",left:"50%",transform:"translate(-50%, -50%)",zIndex:50,color:"#737373"},children:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("polyline",{points:"19 12 12 19 5 12"})]})}),x.arrow==="up"&&l.jsx("div",{style:{position:"absolute",top:"-1.3rem",left:"50%",transform:"translate(-50%, -50%)",zIndex:50,color:"#737373"},children:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]})}),x.arrow==="right"&&l.jsx("div",{style:{position:"absolute",top:"50%",left:"calc(100% + 2rem)",transform:"translate(-50%, -50%)",zIndex:50,color:"#737373"},children:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]})})]})]},m.id)})})]})}),document.body)}class Ev extends ga.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(){}render(){return this.state.hasError?l.jsx("div",{className:"text-red-500 text-[10px] w-full p-2 border border-red-200 bg-red-50 rounded",children:"Content Error"}):this.props.children}}const et=({content:t,children:r,heading:n,enabled:i=!0,className:u="",hideOnClick:d=!1})=>{const[m,f]=B.useState(!1),[g,x]=B.useState({top:0,left:0}),y=B.useRef(null),b=B.useRef(!0);B.useEffect(()=>(b.current=!0,()=>{b.current=!1}),[]);const w=(N,j)=>{const P=window.innerWidth,O=window.innerHeight;let H=N+12,q=j+12;const G=240,F=80;H+G>P-20&&(H=N-G-12),q+F>O-20&&(q=j-F-12),x({top:q,left:H}),m||f(!0)},v=N=>{!i||!b.current||w(N.clientX,N.clientY)},k=N=>{if(!i||!b.current)return;const j=N.touches[0];j&&w(j.clientX,j.clientY)},M=()=>{b.current&&f(!1)},T=()=>{d&&b.current&&f(!1)},E=typeof document<"u"?document.body:null,R=N=>{if(N==null)return null;if(typeof N=="object"&&!ga.isValidElement(N)&&!Array.isArray(N))try{return String(N)}catch{return"[Unrenderable Object]"}return N};return l.jsxs("div",{onPointerMove:v,onPointerLeave:M,onTouchStart:k,onClick:T,className:`group/tooltip relative inline-block ${u}`,children:[r,m&&E&&Xs.createPortal(l.jsx(Ev,{children:l.jsxs("div",{ref:y,className:"fixed z-[9999] pointer-events-none px-3 py-2 bg-white dark:bg-neutral-900/95 text-neutral-900 dark:text-white text-xs rounded-lg shadow-xl border border-neutral-200 dark:border-neutral-700/50 backdrop-blur-sm max-w-[280px] transition-all duration-75 animate-in fade-in zoom-in-95",style:{top:`${g.top}px`,left:`${g.left}px`},children:[n&&l.jsx("div",{className:`font-bold flex items-center gap-2 ${t?"border-b border-neutral-200 dark:border-white/20 pb-1 mb-1":""}`,children:R(n)}),t&&l.jsx("div",{className:"whitespace-pre-line leading-relaxed text-neutral-600 dark:text-neutral-300",children:R(t)})]})}),E)]})},Tv=({icon:t,label:r,value:n,colorClass:i,tooltipHeading:u,tooltipContent:d,showTooltip:m=!0,variant:f="default",className:g=""})=>{let x="",y="",b="",w="";f==="compact"?(x=`
            flex flex-row items-center justify-start gap-1 
            cursor-help group transition-all
        `,w=`${i} transition-transform group-hover:scale-110`,b="font-mono font-bold text-xs text-neutral-900 dark:text-neutral-300"):f==="small"?(x=`
            bg-neutral-50 dark:bg-neutral-900 
            border dark:border-neutral-800 rounded
            p-1
            flex flex-col items-center justify-center 
            cursor-help group transition-all hover:-translate-y-0.5
        `,w=`${i} transition-transform group-hover:scale-110 mb-0.5`,y="text-[9px] font-bold uppercase text-neutral-800 dark:text-neutral-400",b="font-mono font-bold text-xs text-neutral-900 dark:text-neutral-100 leading-none"):(x=`
            bg-white dark:bg-neutral-800 
            border-2 border-neutral-800 dark:border-neutral-700 
            py-0.5 px-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.1)] dark:shadow-none 
            flex flex-col items-center justify-center gap-1 
            cursor-help group transition-all hover:-translate-y-1
        `,w=`${i} transition-transform group-hover:scale-110`,y="text-[10px] font-bold uppercase text-neutral-800 dark:text-neutral-400",b="font-mono font-bold text-sm text-neutral-900 dark:text-neutral-100");const v=l.jsxs("div",{className:`${x} ${g}`,children:[l.jsx("div",{className:w,children:t}),f!=="compact"&&l.jsx("span",{className:y,children:r}),l.jsx("span",{className:b,children:n??"0"})]});if(!m)return v;const k=u?l.jsxs("span",{className:`${i} flex items-center gap-2`,children:[l.jsx("div",{className:"w-4 h-4",children:t}),u]}):null;return l.jsx(et,{content:d,heading:k,children:v})},V0=ga.memo(Tv),Mv=()=>{const t=le(r=>r.glossaryMultiplier);return l.jsx(et,{content:"Total multiplier to ATK and HP gained from conquering unique sketches. Higher rarity sketches provide larger bonuses.",heading:"Glossary Multiplier",children:l.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 py-1 px-2 rounded text-[10px] text-neutral-600 dark:text-neutral-400 transition-colors cursor-help group min-h-[2rem] flex flex-col justify-center",children:l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("strong",{className:"block text-neutral-900 dark:text-neutral-100 uppercase text-[9px] leading-[1.1] group-hover:text-amber-600 transition-colors flex-1",children:"Glossary Mult"}),l.jsxs("span",{className:"font-mono font-bold text-[13px] text-black dark:text-neutral-200 shrink-0",children:["x",ge(t)]})]})})})},_v=({isLocked:t,onToggleLock:r})=>{const{playerStats:n,fundamentals:i,currentProtagonistImage:u,redrawCount:d,activeMeditationBuffs:m,quintessencePinnacleMultiplier:f}=le(ft(E=>({playerStats:E.playerStats,fundamentals:E.fundamentals,currentProtagonistImage:E.currentProtagonistImage,redrawCount:E.redrawCount,activeMeditationBuffs:E.activeMeditationBuffs,quintessencePinnacleMultiplier:E.quintessencePinnacleMultiplier}))),[g,x]=B.useState("All"),[y,b]=B.useState("All"),[w,v]=B.useState(!1),k=(E,R)=>{let N=E instanceof o?E.toNumber():Number(E);switch(isNaN(N)&&(N=0),R){case"percent":return`+${ge(new o(N))}%`;case"percent_literal":return`${ge(new o(N))}%`;case"percent_scaling":return`+${ge(new o(N*100))}%`;case"reduction":return`${ge(new o(100-N))}%`;case"multiplier":return`${ge(new o(N))}x`;case"additive_multiplier":return`${ge(new o(1+N/100))}x`;case"seconds":return`${ge(new o(N))}s`;case"count":return`${ge(new o(Math.floor(N)))}`;case"exponent":return`^${ge(new o(1+N))}`;default:return`${ge(new o(N))}`}},M=E=>{const R="/rejected_draft/",N=R.endsWith("/")?R:`${R}/`,j=E.startsWith("/")?E.slice(1):E;return`${N}${j}`},T=["All","Core","Stats","Rarity","Economy","Redraw"];return l.jsxs("div",{id:"tutorial-sidebar-scroll-container",className:"h-full p-3 md:p-4 hover-scrollbar bg-white dark:bg-neutral-950 transition-colors",children:[l.jsxs("header",{className:"mb-4 md:mb-8 border-b-2 border-neutral-200 dark:border-neutral-800 pb-2 md:pb-4 flex justify-between items-start transition-colors",children:[l.jsx("div",{children:l.jsx("h2",{className:"text-xl md:text-3xl font-black uppercase text-neutral-800 dark:text-neutral-100 tracking-tighter mb-1 md:mb-2",children:"Rejected Draft"})}),l.jsx("button",{onClick:r,className:"cursor-pointer text-neutral-400 dark:text-neutral-600 hover:text-neutral-900 dark:hover:text-neutral-100 p-1 hidden md:block transition-colors",title:t?"Unlock Sidebar":"Lock Sidebar Open",children:t?l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}):l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2H7V7a3 3 0 015.905-.75 1 1 0 001.937-.5A5.002 5.002 0 0010 2z"})})})]}),l.jsx(Nv,{isOpen:w,onClose:()=>v(!1)}),l.jsx("div",{id:"tutorial-sidebar-portrait",className:"mb-4 md:mb-6 flex flex-col items-center",children:l.jsxs("div",{className:"w-32 h-32 md:w-48 md:h-48 bg-white dark:bg-neutral-800 border-2 border-neutral-800 dark:border-neutral-700 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.1)] md:shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)] dark:shadow-none flex items-center justify-center p-1 md:p-2 mb-2 cursor-pointer transition-all hover:scale-105 group/image relative",onClick:()=>v(!0),children:[l.jsx("img",{src:M(u),alt:"The Rejected Draft",className:"w-full h-full object-cover contrast-125 dark:contrast-100 dark:invert dark:hue-rotate-180 group-hover/image:grayscale-0 transition-all duration-500",onError:E=>{E.currentTarget.style.display="none",E.currentTarget.parentElement.innerHTML='<svg viewBox="0 0 100 100" class="w-full h-full text-neutral-800 dark:text-neutral-200" fill="currentColor"><path d="M50 20c-15 0-25 10-25 25 0 10 5 20 15 25v20h20V70c10-5 15-15 15-25 0-15-10-25-25-25z" opacity="0.5"/></svg>'}}),l.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover/image:opacity-100 flex items-center justify-center text-white font-bold uppercase tracking-widest text-[10px] md:text-xs transition-opacity pointer-events-none",children:"View Journey"})]})}),l.jsxs("div",{id:"tutorial-sidebar-stats",className:"mb-6 md:mb-8",children:[l.jsx("h3",{className:"text-sm md:text-xl font-black uppercase text-neutral-800 dark:text-neutral-100 tracking-tighter mb-3 md:mb-4",children:"Current Specs"}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:["All","Offense","Defense","Utility","Chance","Buffs","Debuffs"].filter(E=>E==="All"?!0:Object.values(ot).some(R=>{const N=n[R.key]||R.baseValue;return(!R.displayCondition||R.displayCondition(N))&&R.categories.includes(E)})).map(E=>l.jsx("button",{onClick:()=>b(E),className:`cursor-pointer px-1.5 py-0.5 text-[9px] font-bold uppercase tracking-wider rounded border transition-colors ${y===E?"bg-black dark:bg-white text-white dark:text-black border-black dark:border-white shadow-[2px_2px_0px_0px_rgba(0,0,0,0.1)]":"bg-white dark:bg-neutral-900 text-neutral-500 dark:text-neutral-500 border-neutral-200 dark:border-neutral-800 hover:border-neutral-400 dark:hover:border-neutral-600"}`,children:E},E))}),l.jsx("div",{className:"grid grid-cols-4 gap-1 md:gap-.5",children:Object.values(ot).filter(E=>y==="All"||E.categories.includes(y)).map(E=>{const R=n[E.key]||E.baseValue;if(E.displayCondition&&!E.displayCondition(R))return null;let N=`${b0[E.key]}
${y0[E.key]}`;E.isDecayImmune&&(N=`${b0[E.key]} (Unaffected by Decay Factor)
${y0[E.key]}`);const j=`${ge(R,E.format.decimals)}${E.format.suffix}`,I=m.find(F=>F.stat===E.key),P=!!I&&I.multiplier>1,O=P&&I.multiplier>1.05+(i.meditationTealZoneBonus||0)/100,H=P?Math.round((I.multiplier-1)*100):0,q=O?"text-amber-600 dark:text-amber-400":"text-teal-600 dark:text-teal-400",G=O?"bg-amber-50 dark:bg-amber-950/30 ring-amber-300 dark:ring-amber-800":"bg-teal-50 dark:bg-teal-950/30 ring-teal-300 dark:ring-teal-800";return l.jsx(V0,{icon:l.jsx(E.icon,{className:`w-4 h-4 ${E.colorClass}`}),label:E.label,value:j,colorClass:P?q:E.colorClass,tooltipHeading:E.label,tooltipContent:N+(P?`
Meditation Buff Active: +${H}%`:""),className:P?`${G} ring-1 rounded`:""},E.key)})})]}),l.jsxs("div",{id:"tutorial-sidebar-fundamentals",className:"mb-8 border-t-2 border-neutral-200 dark:border-neutral-800 pt-6 md:pt-8 transition-colors",children:[l.jsx("div",{className:"flex justify-between items-center mb-3 md:mb-4",children:l.jsx("h3",{className:"text-sm md:text-xl font-black uppercase text-neutral-800 dark:text-neutral-100 tracking-tighter",children:"Fundamentals"})}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:T.map(E=>l.jsx("button",{onClick:()=>x(E),className:`cursor-pointer px-1.5 py-0.5 text-[9px] font-bold uppercase tracking-wider rounded border transition-colors ${g===E?"bg-black dark:bg-white text-white dark:text-black border-black dark:border-white shadow-[2px_2px_0px_0px_rgba(0,0,0,0.1)]":"bg-white dark:bg-neutral-900 text-neutral-500 dark:text-neutral-500 border-neutral-200 dark:border-neutral-800 hover:border-neutral-400 dark:hover:border-neutral-600"}`,children:E},E))}),l.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[(g==="All"||g==="Core")&&l.jsx(Mv,{}),Dx.filter(E=>g==="All"||E.category===g).map(E=>{let R=i[E.key];const N=B0[E.key];E.key==="redrawCount"&&(R=d),E.key==="quintessencePinnacle"&&(R=new o(f).toNumber());const j=H=>{if(H instanceof o)return H.toFixed(4);if(typeof H=="object"&&H!==null&&"c"in H&&"e"in H)return new o(H).toFixed(4);const q=Number(H);return isNaN(q)?"0.0000":q.toFixed(4)},I=j(R),P=j(N);let O=I!==P;return E.key==="quintessencePinnacle"&&(O=i.quintessencePinnacle>0),!O&&!E.alwaysVisible?null:l.jsx(et,{content:E.description,heading:E.label,children:l.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 py-1 px-2 rounded text-[10px] text-neutral-600 dark:text-neutral-400 transition-colors cursor-help group min-h-[2rem] flex flex-col justify-center",children:l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("strong",{className:"block text-neutral-900 dark:text-neutral-100 uppercase text-[9px] leading-[1.1] group-hover:text-amber-600 transition-colors flex-1",children:E.label}),l.jsx("span",{className:"font-mono font-bold text-[13px] text-black dark:text-neutral-200 shrink-0",children:k(R,E.format)})]})})},E.key)})]})]})]})},Xa=({children:t,className:r,title:n,color:i="white"})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:r,children:[n&&l.jsx("title",{children:n}),l.jsx("rect",{x:"4",y:"4",width:"40",height:"40",rx:"8",fill:"#171717"}),l.jsx("g",{stroke:i,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t})]}),sr=({className:t,color:r="white",title:n="Graphite"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("path",{d:"M12 10 L36 10 L36 34 L24 42 L12 34 Z",fill:r,fillOpacity:"0.1"}),l.jsx("path",{d:"M18 10L18 38"}),l.jsx("path",{d:"M30 10L30 38"}),l.jsx("path",{d:"M12 34L36 34"}),l.jsx("path",{d:"M24 34L24 42"}),l.jsx("path",{d:"M12 14H36",strokeOpacity:"0.5"})]}),Or=({className:t,color:r="white",title:n="Wax"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("path",{d:"M24 6 C24 6 21 10 21 14 C21 17 24 19 24 19 C24 19 27 17 27 14 C27 10 24 6 24 6 Z",fill:r,fillOpacity:"0.5"}),l.jsx("path",{d:"M24 19 V22",strokeOpacity:"0.8"}),l.jsx("rect",{x:"18",y:"22",width:"12",height:"18",rx:"2",fill:r,fillOpacity:"0.2"}),l.jsx("path",{d:"M18 26 Q16 28 18 30",strokeOpacity:"0.6"}),l.jsx("path",{d:"M30 32 Q32 34 30 36",strokeOpacity:"0.6"}),l.jsx("path",{d:"M12 40 Q24 44 36 40",strokeWidth:"2"}),l.jsx("circle",{cx:"12",cy:"40",r:"2"})]}),Pr=({className:t,color:r="white",title:n="Charcoal"})=>l.jsx(Xa,{className:t,title:n,color:r,children:l.jsxs("g",{transform:"translate(0, -3)",children:[l.jsx("path",{d:"M14 20 C10 24 8 32 14 38 C20 44 32 44 36 36 C40 28 36 20 30 16 C24 12 18 16 14 20 Z",fill:r,fillOpacity:"0.3"}),l.jsx("path",{d:"M14 20 L20 24 L24 18 L30 22",strokeOpacity:"0.6"}),l.jsx("path",{d:"M16 34 L22 30",strokeOpacity:"0.6"})]})}),Ir=({className:t,color:r="white",title:n="Coffee"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("path",{d:"M12 14H32V32C32 36 29 39 25 39H19C15 39 12 36 12 32V14Z",fill:r,fillOpacity:"0.1"}),l.jsx("path",{d:"M32 18H37C39 18 40 19 40 21C40 23 39 24 37 24H32"}),l.jsx("path",{d:"M16 10L18 6",strokeOpacity:"0.5"}),l.jsx("path",{d:"M22 8L24 4",strokeOpacity:"0.5"}),l.jsx("path",{d:"M28 10L30 6",strokeOpacity:"0.5"})]}),oa=({className:t,color:r="white",title:n="Ink"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("path",{d:"M16 20V14C16 14 18 12 24 12C30 12 32 14 32 14V20"}),l.jsx("path",{d:"M14 20H34V36C34 39 31 41 28 41H20C17 41 14 39 14 36V20Z",fill:r,fillOpacity:"0.2"}),l.jsx("path",{d:"M14 24H34",strokeOpacity:"0.3"}),l.jsx("circle",{cx:"24",cy:"30",r:"3",fill:r})]}),ir=({className:t,color:r="white",title:n="Marker"})=>l.jsx(Xa,{className:t,title:n,color:r,children:l.jsxs("g",{transform:"rotate(-45 24 24)",children:[l.jsx("rect",{x:"16",y:"20",width:"16",height:"8",rx:"1",fill:r,fillOpacity:"0.2"}),l.jsx("path",{d:"M16 20 L12 21 V27 L16 28"}),l.jsx("path",{d:"M12 21 L8 22 V26 L12 27",fill:r}),l.jsx("path",{d:"M32 18 H38 V30 H32 V18 Z"}),l.jsx("path",{d:"M22 20 V28",strokeOpacity:"0.3",strokeDasharray:"2 2"})]})}),qo=({className:t,color:r="white",title:n="Acrylic"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("path",{d:"M12 24 C12 14 20 8 30 8 C40 8 44 18 40 30 C36 42 24 44 16 38 C12 34 12 30 12 24 Z"}),l.jsx("circle",{cx:"32",cy:"34",r:"3"}),l.jsx("circle",{cx:"20",cy:"18",r:"2",fill:r,fillOpacity:"0.4"}),l.jsx("circle",{cx:"30",cy:"16",r:"2",fill:r,fillOpacity:"0.4"}),l.jsx("circle",{cx:"36",cy:"24",r:"2",fill:r,fillOpacity:"0.4"}),l.jsx("path",{d:"M18 30 L26 38",strokeOpacity:"0.3"})]}),$o=({className:t,color:r="white",title:n="Spray"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("rect",{x:"14",y:"14",width:"20",height:"26"}),l.jsx("path",{d:"M14 14 L18 8 H30 L34 14"}),l.jsx("rect",{x:"21",y:"4",width:"6",height:"4",fill:r}),l.jsx("path",{d:"M14 34 H34",strokeOpacity:"0.3"})]}),Yo=({className:t,color:r="white",title:n="Photon"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("path",{d:"M24 8 V14"}),l.jsx("path",{d:"M24 34 V40"}),l.jsx("path",{d:"M8 24 H14"}),l.jsx("path",{d:"M34 24 H40"}),l.jsx("path",{d:"M12 12 L17 17"}),l.jsx("path",{d:"M31 31 L36 36"}),l.jsx("path",{d:"M12 36 L17 31"}),l.jsx("path",{d:"M31 17 L36 12"}),l.jsx("circle",{cx:"24",cy:"24",r:"4",fill:r})]}),Wo=({className:t,color:r="white",title:n="Gold Leaf"})=>l.jsxs(Xa,{className:t,title:n,color:r,children:[l.jsx("path",{d:"M10 12 C14 10 34 8 38 12 C40 16 38 36 34 40 C30 42 10 40 8 36 C6 32 8 14 10 12 Z",fill:r,fillOpacity:"0.2"}),l.jsx("path",{d:"M10 12 L38 12 L34 40 L8 36 Z",strokeOpacity:"0.5"}),l.jsx("path",{d:"M18 18 L24 24 L30 18",strokeOpacity:"0.5"}),l.jsx("path",{d:"M16 30 L22 24",strokeOpacity:"0.5"})]}),Yx=Object.freeze(Object.defineProperty({__proto__:null,AcrylicIcon:qo,CharcoalIcon:Pr,CoffeeIcon:Ir,GoldLeafIcon:Wo,GraphiteIcon:sr,InkIcon:oa,MarkerIcon:ir,PhotonIcon:Yo,SprayIcon:$o,WaxIcon:Or},Symbol.toStringTag,{value:"Module"})),ci=({children:t,className:r})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:t}),w0=({className:t})=>l.jsxs(ci,{className:t,title:"Auto-Challenge",children:[l.jsx("path",{d:"M20 34L36 18",strokeWidth:"2.5"}),l.jsx("path",{d:"M34 16 L38 20"})," ",l.jsx("path",{d:"M18 36 L22 40"})," ",l.jsx("path",{d:"M10 24C10 14 20 8 30 12",className:"opacity-50"}),l.jsx("path",{d:"M38 24C38 34 28 40 18 36",className:"opacity-50"}),l.jsx("path",{d:"M38 24L42 28L38 32",className:"opacity-70"})," "]}),k0=({className:t})=>l.jsxs(ci,{className:t,title:"Auto-Retry",children:[l.jsx("path",{d:"M24 14C20 10 12 10 8 16C4 22 10 32 24 42",className:"opacity-40"}),l.jsx("path",{d:"M24 14C28 10 36 10 40 16C44 22 38 32 24 42",className:"opacity-70"}),l.jsx("path",{d:"M12 30 H28C34 30 38 34 38 38V40",strokeWidth:"2.5"}),l.jsx("path",{d:"M12 30 L16 26"}),l.jsx("path",{d:"M12 30 L16 34"})]}),v0=({className:t})=>l.jsxs(ci,{className:t,title:"Portfolio Review",children:[l.jsx("path",{d:"M12 10H36V38H12V10Z",className:"opacity-40"}),l.jsx("path",{d:"M16 14H40V42H16V14Z",strokeWidth:"2.5"}),l.jsx("path",{d:"M22 22 H34",className:"opacity-30"}),l.jsx("path",{d:"M22 30 H34",className:"opacity-30"}),l.jsx("path",{d:"M8 20L14 26L8 32",strokeWidth:"3"}),l.jsx("path",{d:"M14 20L20 26L14 32",strokeWidth:"3"})]}),C0=({className:t})=>l.jsxs(ci,{className:t,title:"Randomizer",children:[l.jsx("path",{d:"M14 14H34V34H14V14Z",strokeWidth:"3",className:"opacity-80"}),l.jsx("circle",{cx:"20",cy:"20",r:"2",className:"fill-current"}),l.jsx("circle",{cx:"28",cy:"28",r:"2",className:"fill-current"}),l.jsx("circle",{cx:"28",cy:"20",r:"1.5",className:"fill-current opacity-50"}),l.jsx("circle",{cx:"20",cy:"28",r:"1.5",className:"fill-current opacity-50"}),l.jsx("path",{d:"M38 10C42 14 42 20 38 24",className:"opacity-30"}),l.jsx("path",{d:"M10 34C6 30 6 24 10 20",className:"opacity-30"})]}),Av=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("title",{children:"Precise Eraser"}),l.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),l.jsx("path",{d:"M22 21H7"}),l.jsx("path",{d:"m5 11 9 9"})]}),Wx=({className:t})=>l.jsxs(ci,{className:t,title:"Pre-Battle Meditation",children:[l.jsx("path",{d:"M24 40V34",strokeWidth:"3",className:"opacity-60"}),l.jsx("path",{d:"M16 34C16 28 20 26 24 26C28 26 32 28 32 34",strokeWidth:"2"}),l.jsx("path",{d:"M12 24C8 20 8 12 12 8",className:"opacity-40"}),l.jsx("path",{d:"M36 24C40 20 40 12 36 8",className:"opacity-40"}),l.jsx("path",{d:"M18 18C16 16 16 10 18 8",className:"opacity-20"}),l.jsx("path",{d:"M30 18C32 16 32 10 30 8",className:"opacity-20"}),l.jsx("circle",{cx:"24",cy:"18",r:"3",className:"fill-current"}),l.jsx("path",{d:"M20 18H28",className:"opacity-50"})]}),jv=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Rv=({isLocked:t,onToggleLock:r})=>{const n=le(ft(P=>({autoChallengeUnlocked:!!P.autoChallengeUnlocked,autoRetryUnlocked:!!P.autoRetryUnlocked,autoAdvanceUnlocked:!!P.autoAdvanceUnlocked,randomizerUnlocked:!!P.randomizerUnlocked,autoChallengeActive:P.autoChallengeActive,autoRetryActive:P.autoRetryActive,autoAdvanceActive:P.autoAdvanceActive,randomizerActive:P.randomizerActive,toggleAutoChallenge:P.toggleAutoChallenge,toggleAutoRetry:P.toggleAutoRetry,toggleAutoAdvance:P.toggleAutoAdvance,toggleRandomizer:P.toggleRandomizer,reviewAuditUnlocked:P.reviewAuditUnlocked,reviewAuditLimit:P.reviewAuditLimit,setReviewAuditLimit:P.setReviewAuditLimit,fundamentals:P.fundamentals}))),{autoChallengeUnlocked:i,autoRetryUnlocked:u,autoAdvanceUnlocked:d,randomizerUnlocked:m,autoChallengeActive:f,autoRetryActive:g,autoAdvanceActive:x,randomizerActive:y,toggleAutoChallenge:b,toggleAutoRetry:w,toggleAutoAdvance:v,toggleRandomizer:k,reviewAuditUnlocked:M,reviewAuditLimit:T,setReviewAuditLimit:E,fundamentals:R}=n,N={AUTO_CHALLENGE:i,AUTO_RETRY:u,AUTO_ADVANCE:d,RANDOMIZER:m},j=Ta.filter(P=>P.type==="ACTIVE_PROTOCOL"&&N[P.id]),I=P=>{switch(P){case"AUTO_CHALLENGE":return{active:f,toggle:b};case"AUTO_RETRY":return{active:g,toggle:w};case"AUTO_ADVANCE":return{active:x,toggle:v};case"RANDOMIZER":return{active:y,toggle:k};default:return{active:!1,toggle:()=>{}}}};return l.jsxs("div",{className:"h-full p-3 md:p-4 overflow-y-auto no-scrollbar bg-white dark:bg-neutral-950 transition-colors border-l border-neutral-300 dark:border-neutral-800",children:[l.jsxs("header",{className:"mb-4 md:mb-8 border-b-2 border-neutral-200 dark:border-neutral-800 pb-2 md:pb-4 flex justify-between items-start transition-colors",children:[l.jsx("button",{onClick:r,className:"cursor-pointer text-neutral-400 dark:text-neutral-600 hover:text-neutral-900 dark:hover:text-neutral-100 p-1 hidden md:block transition-colors",title:t?"Unlock Sidebar":"Lock Sidebar Open",children:t?l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}):l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2H7V7a3 3 0 015.905-.75 1 1 0 001.937-.5A5.002 5.002 0 0010 2z"})})}),l.jsx("div",{className:"text-right flex-1 xl:flex-none xl:text-left",children:l.jsx("h2",{className:"text-xl font-black uppercase text-neutral-800 dark:text-neutral-100 tracking-tighter mb-1 text-right",children:"Protocols"})})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-1 gap-2 md:gap-3 md:space-y-0",children:j.length===0?l.jsxs("div",{className:"col-span-2 md:col-span-1 text-center py-12 px-4 border-2 border-dashed border-neutral-200 dark:border-neutral-800 rounded-lg",children:[l.jsxs("p",{className:"text-xs text-neutral-400 uppercase font-bold tracking-widest leading-loose",children:["No active protocols",l.jsx("br",{}),"available."]}),l.jsx("p",{className:"text-[10px] text-neutral-500 font-serif italic mt-2",children:"Unlock tools in the shop to see them here."})]}):j.map(P=>{const{active:O,toggle:H}=I(P.id),q=Lx(P.iconColor);let G=ic;return P.icon==="AutoChallenge"&&(G=w0),P.icon==="AutoRetry"&&(G=k0),P.icon==="AutoAdvance"&&(G=v0),P.icon==="Randomizer"&&(G=C0),P.icon==="Ink"&&(G=oa),P.icon==="Marker"&&(G=ir),l.jsxs("button",{onClick:H,className:`
                                    cursor-pointer w-full text-left p-2 md:p-3 border-2 transition-all duration-200 flex flex-col group relative overflow-hidden
                                    ${O?`${q.bg} ${q.bgDark} ${q.border} ${q.borderDark} ${q.shadow}`:"bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 hover:border-neutral-400 dark:hover:border-neutral-600"}
                                `,children:[l.jsxs("div",{className:"flex items-center justify-between mb-0.5 md:mb-1 relative z-10 gap-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[l.jsx(G,{className:`hidden md:block w-3 h-3 md:w-4 md:h-4 ${O?P.iconColor||"text-green-600 dark:text-green-400":"text-neutral-400 dark:text-neutral-600"}`}),l.jsx("span",{className:`font-black uppercase tracking-tighter text-[8.5px] md:text-xs truncate ${O?`${q.text} ${q.textDark}`:"text-neutral-600 dark:text-neutral-400"}`,children:P.name})]}),l.jsx("div",{className:`hidden md:block shrink-0 w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${O?`${q.accent} animate-pulse shadow-[0_0_4px_currentColor]`:"bg-neutral-200 dark:bg-neutral-800"}`})]}),l.jsx("p",{className:"text-[7.5px] md:text-[10px] text-neutral-500 dark:text-neutral-500 leading-tight mb-1.5 md:mb-2 relative z-10 font-medium pb-2",children:P.description}),l.jsx("div",{className:`text-[8px] md:text-[9px] font-bold uppercase tracking-wider ${O?`${q.text} ${q.textDark}`:"text-neutral-400 dark:text-neutral-600"}`,children:O?" Active":" Disabled"}),O&&P.id==="AUTO_ADVANCE"&&M&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-900/50 relative z-20",onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-[9px] font-black uppercase tracking-tight text-purple-700 dark:text-purple-400",children:"Audit Threshold"}),l.jsx("span",{className:"text-[10px] font-mono font-bold text-purple-800 dark:text-purple-300",children:T})]}),l.jsx("input",{type:"range",min:10,max:R.maxVictories,step:5,value:T,onChange:F=>E(parseInt(F.target.value)),className:"w-full h-1.5 bg-purple-200 dark:bg-purple-900/30 rounded-lg appearance-none cursor-pointer accent-purple-600 dark:accent-purple-400"})]}),O&&l.jsx("div",{className:`absolute top-0 right-0 w-8 h-8 md:w-12 md:h-12 ${q.accent} opacity-5 rotate-45 translate-x-4 -translate-y-4 md:translate-x-6 md:-translate-y-6`})]},P.id)})}),l.jsx("div",{className:"mt-8 pt-6 border-t border-neutral-200 dark:border-neutral-900"})]})},Lv={Graphite:sr,Wax:Or,Charcoal:Pr,Coffee:Ir,Ink:oa,Marker:ir,Acrylic:qo,Spray:$o,Photon:Yo,"Gold Leaf":Wo},Dv=B.memo(({upgrade:t,level:r,canAfford:n,isCurrencyLocked:i,isMuted:u,isAutoBuyEnabled:d,autoBuyUnlocked:m,buyMaxUnlocked:f,cost:g})=>{const{buyUpgrade:x,toggleAutoBuy:y,buyMaxUpgrade:b,toggleMuteStatUpgrade:w}=le(ft(E=>({buyUpgrade:E.buyUpgrade,toggleAutoBuy:E.toggleAutoBuy,buyMaxUpgrade:E.buyMaxUpgrade,toggleMuteStatUpgrade:E.toggleMuteStatUpgrade}))),v=ot[t.stat]?.icon||Ix,k=Lv[t.currency],M=t.multiplier(r);let T=`${ge(M.times(100))}% multiplier`;return t.isAdditive?T=`${ge(new o(100).plus(M))}% multiplier`:t.id==="SPD"?T=`${ge(M.times(100))}% delay`:t.id==="CritDmg"&&(T=`${ge(M.times(100))}% total`),l.jsxs("div",{className:"bg-white dark:bg-neutral-800 border-2 border-neutral-800 dark:border-neutral-700 p-3 md:p-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)] dark:shadow-none relative transition-colors",children:[l.jsxs("div",{className:"absolute top-0 right-0 flex flex-col items-end",children:[l.jsxs("div",{className:"bg-neutral-800 dark:bg-black text-white text-xs font-bold px-2 py-1",children:["LVL ",ge(r)," / ",new o(t.maxLevel).eq(-1)?"":ge(new o(t.maxLevel))]}),l.jsx(et,{heading:u?"Notifications Muted":"Notifications Active",content:u?"Silence the nagging of this upgrade.":"This upgrade will trigger shop notifications.",children:l.jsx("button",{onClick:()=>w(t.id),className:`cursor-pointer w-9 h-9 flex items-center justify-center transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-900 border-l border-b border-neutral-200 dark:border-neutral-700 ${u?"text-neutral-400 dark:text-neutral-600":"text-amber-500"}`,children:u?l.jsx(iv,{className:"w-9 h-9"}):l.jsx(sv,{className:"w-9 h-9"})})})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-4 mb-2",children:[l.jsx(et,{heading:l.jsxs("span",{className:"flex items-center gap-2 text-white",children:[l.jsx(v,{className:"w-5 h-5"}),b0[t.stat]]}),content:y0[t.stat],children:l.jsx("div",{className:`p-3 bg-neutral-100 dark:bg-neutral-900 rounded-full border border-neutral-300 dark:border-neutral-700 ${i?"opacity-50":""} cursor-help`,children:i?l.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-neutral-400 dark:text-neutral-600 font-bold text-xl",children:"?"}):l.jsx(v,{className:`w-8 h-8 ${ot[t.stat]?.colorClass||"text-neutral-700 dark:text-neutral-300"}`})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm md:text-xl font-bold uppercase leading-tight md:leading-none dark:text-neutral-100",children:i?U0(t.name):t.name}),l.jsx("p",{className:"text-[10px] md:text-xs text-neutral-500 dark:text-neutral-400 italic",children:i?l.jsx("span",{className:"text-neutral-300 dark:text-neutral-700 select-none",children:"Lorem ipsum dolor sit amet..."}):t.description})]})]}),l.jsx("div",{className:"mb-2 md:mb-4 text-center bg-neutral-50 dark:bg-black/20 border border-neutral-200 dark:border-neutral-700 rounded py-1 md:py-2 transition-colors",children:l.jsx("span",{className:"font-mono text-xs md:text-sm font-bold text-neutral-700 dark:text-neutral-300",children:i?"???":T})}),l.jsxs("div",{className:"flex gap-1 md:gap-2 h-8 md:h-12 mt-auto",children:[l.jsxs("button",{onClick:()=>x(t.id),disabled:!n||i||new o(t.maxLevel).gt(-1)&&r.gte(new o(t.maxLevel)),className:`cursor-pointer flex-1 flex justify-between items-center px-2 md:px-4 font-bold uppercase tracking-wider border-2 transition-all ${n&&!i&&(new o(t.maxLevel).eq(-1)||r.lt(new o(t.maxLevel)))?"bg-green-100 dark:bg-green-900/40 text-green-900 dark:text-green-200 border-green-900 dark:border-green-700 hover:bg-green-200 dark:hover:bg-green-800 shadow-[2px_2px_0px_0px_rgba(20,83,45,0.8)]":"bg-neutral-100 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-600 border-neutral-200 dark:border-neutral-700 cursor-not-allowed opacity-60"}`,children:[l.jsx("span",{className:"text-[10px] md:text-base",children:"Buy"}),l.jsxs("div",{className:"flex items-center gap-1 font-mono text-[10px] md:text-base",children:[l.jsx("span",{children:i?"???":ge(g)}),k&&l.jsx(et,{heading:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(k,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),l.jsx("span",{children:t.currency})]}),content:"",children:l.jsx(k,{className:"w-3.5 h-3.5 md:w-6 md:h-6 ml-0.5 cursor-help"})})]})]}),!!f&&(()=>{const E=new o(t.maxLevel),R=E.gt(-1)&&r.gte(E);return l.jsx("button",{onClick:()=>b(t.id),disabled:!n||i||R,className:`cursor-pointer w-10 md:w-16 flex items-center justify-center font-bold uppercase tracking-wider border-2 transition-all text-[9px] md:text-xs ${n&&!i&&!R?"bg-blue-100 dark:bg-blue-900/40 text-blue-900 dark:text-blue-200 border-blue-900 dark:border-blue-700 hover:bg-blue-200 dark:hover:bg-blue-800 shadow-[2px_2px_0px_0px_rgba(30,58,138,0.8)]":"bg-neutral-50 dark:bg-neutral-900/30 text-neutral-400 dark:text-neutral-600 border-neutral-200 dark:border-neutral-800 cursor-not-allowed opacity-40"}`,children:R?"MAX":"Max"})})(),!!m&&l.jsx(et,{heading:"Automation Protocol",content:"Let the machine decide. Your artistic input is no longer required for these increments.",children:l.jsx("button",{onClick:()=>y(t.id),className:`cursor-pointer w-8 md:w-12 h-full border-2 flex items-center justify-center transition-colors ${d?"bg-amber-400 dark:bg-amber-600 border-neutral-900 dark:border-neutral-950 text-neutral-900 dark:text-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]":"bg-white dark:bg-neutral-800 border-neutral-300 dark:border-neutral-700 text-neutral-300 dark:text-neutral-600 hover:border-neutral-400 dark:hover:border-neutral-500"}`,children:l.jsx("span",{className:"text-[10px] md:text-xl font-bold",children:"A"})})})]})]})}),Ov=()=>{const t=le(ft(A=>{const Z={};return Ta.forEach(se=>{se.unlockKey&&(Z[se.unlockKey]=!!A[se.unlockKey])}),{currencies:A.currencies,shopLevels:A.shopLevels,buyUpgrade:A.buyUpgrade,unlockTool:A.unlockTool,toggleAutoBuy:A.toggleAutoBuy,buyMaxUpgrade:A.buyMaxUpgrade,autoChallengeActive:A.autoChallengeActive,toggleAutoChallenge:A.toggleAutoChallenge,autoRetryActive:A.autoRetryActive,toggleAutoRetry:A.toggleAutoRetry,autoAdvanceActive:A.autoAdvanceActive,toggleAutoAdvance:A.toggleAutoAdvance,randomizerActive:A.randomizerActive,toggleRandomizer:A.toggleRandomizer,totalEarnedCurrencies:A.totalEarnedCurrencies,totalBattleEarnedCurrencies:A.totalBattleEarnedCurrencies,autoBuyEnabled:A.autoBuyEnabled,hidePurchasedTools:A.hidePurchasedTools,setHidePurchasedTools:A.setHidePurchasedTools,mutedStatUpgrades:A.mutedStatUpgrades,toggleMuteStatUpgrade:A.toggleMuteStatUpgrade,graphiteDiscountUnlocked:A.graphiteDiscountUnlocked,charcoalDiscountUnlocked:A.charcoalDiscountUnlocked,waxDiscountUnlocked:A.waxDiscountUnlocked,coffeeDiscountUnlocked:A.coffeeDiscountUnlocked,inkDiscountUnlocked:A.inkDiscountUnlocked,fundamentals:A.fundamentals,skillLevels:A.skillLevels,activeSubTab:A.shopActiveSubTab,setActiveSubTab:A.setShopActiveSubTab,hasSeenTutorials:A.hasSeenTutorials,startTutorial:A.startTutorial,tutorialStep:A.tutorialStep,activeTutorialSegment:A.activeTutorialSegment,tutorialResetCount:A.tutorialResetCount,persistentToolUnlocks:A.persistentToolUnlocks,masterAutoBuyUnlocked:A.masterAutoBuyUnlocked,toggleAllAutoBuy:A.toggleAllAutoBuy,...Z}})),r=B.useMemo(()=>{const A={};return Ta.forEach(Z=>{Z.unlockKey&&(A[Z.unlockKey]=!!t[Z.unlockKey])}),A},[t]),{currencies:n,shopLevels:i,unlockTool:u,autoChallengeActive:d,toggleAutoChallenge:m,autoRetryActive:f,toggleAutoRetry:g,autoAdvanceActive:x,toggleAutoAdvance:y,randomizerActive:b,toggleRandomizer:w,totalEarnedCurrencies:v,autoBuyEnabled:k,hidePurchasedTools:M,setHidePurchasedTools:T,graphiteDiscountUnlocked:E,charcoalDiscountUnlocked:R,waxDiscountUnlocked:N,coffeeDiscountUnlocked:j,inkDiscountUnlocked:I,mutedStatUpgrades:P,fundamentals:O,activeSubTab:H,setActiveSubTab:q,activeTutorialSegment:G,persistentToolUnlocks:F,masterAutoBuyUnlocked:Y,toggleAllAutoBuy:J}=t,z=H==="upgrades"?"Upgrades":"Tools",V=t.hasSeenTutorials[z];B.useEffect(()=>{const A=G!==z;!V&&(t.tutorialStep===null||A)&&t.startTutorial(z)},[z,V,t.tutorialStep,G,t.tutorialResetCount,t.startTutorial]);const S={Graphite:sr,Wax:Or,Charcoal:Pr,Coffee:Ir,Ink:oa,Marker:ir,Acrylic:qo,Spray:$o,Photon:Yo,"Gold Leaf":Wo},[_,U]=B.useState("all"),[W,X]=B.useState("all"),[D,$]=B.useState(!1),ee=B.useMemo(()=>pa.every(A=>k[A.id]),[k]);return l.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-neutral-950 overflow-hidden transition-colors",children:[l.jsxs("div",{className:"flex px-4 gap-4 mt-2 pt-2 -mt-1 pr-8",children:[l.jsxs("button",{onClick:()=>q("tools"),className:`
cursor-pointer px-1.5 md:px-3 py-1 md:py-2 font-bold uppercase tracking-wide border-b-[3px] md:border-b-4 transition-colors relative whitespace-nowrap text-[8px] md:text-sm
                            ${H==="tools"?"border-neutral-800 dark:border-neutral-100 text-neutral-900 dark:text-neutral-100":"border-transparent text-neutral-400 dark:text-neutral-600 hover:text-neutral-600 dark:hover:text-neutral-400"}
`,children:["Tools",Ta.some(A=>{if(!!r[A.unlockKey]||A.currency!=="Graphite"&&(v[A.currency]?.eq(0)??!0))return!1;const ue=n[A.currency]||At,ie=Da(A.cost,A.currency,O);return ue.gte(ie)})&&l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),l.jsxs("button",{onClick:()=>q("upgrades"),className:`
cursor-pointer px-1.5 md:px-3 py-1 md:py-2 font-bold uppercase tracking-wide border-b-[3px] md:border-b-4 transition-colors relative whitespace-nowrap text-[8px] md:text-sm
                            ${H==="upgrades"?"border-neutral-800 dark:border-neutral-100 text-neutral-900 dark:text-neutral-100":"border-transparent text-neutral-400 dark:text-neutral-600 hover:text-neutral-600 dark:hover:text-neutral-400"}
`,children:["Stat Upgrades",pa.some(A=>{if(P.includes(A.id))return!1;const Z=i[A.id]||At,se=Da(Ro(A,Z,{graphiteDiscountUnlocked:E,charcoalDiscountUnlocked:R,waxDiscountUnlocked:N,coffeeDiscountUnlocked:j,inkDiscountUnlocked:I}),A.currency,O),ue=n[A.currency]||At;return A.currency!=="Graphite"&&(v[A.currency]?.eq(0)??!0)?!1:ue.gte(se)})&&l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-amber-500"})]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 no-scrollbar",children:[H==="tools"&&l.jsx("div",{className:"h-full",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 md:gap-8 min-h-full",children:[l.jsx("div",{className:"flex-1 h-full overflow-y-auto pr-2",children:l.jsxs("div",{id:"tutorial-shop-market",children:[l.jsxs("div",{className:"flex flex-row justify-between items-center gap-2 md:gap-4 mb-4 sticky top-0 bg-white dark:bg-neutral-900 py-2 px-2 md:px-4 z-10 border-b border-neutral-200 dark:border-neutral-800 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[l.jsx("h4",{className:"hidden md:block text-lg font-bold uppercase text-neutral-500 dark:text-neutral-400",children:"Market"}),l.jsxs("div",{className:"flex gap-1.5 items-center",children:[l.jsx("button",{onClick:()=>X("all"),className:`cursor-pointer px-2 md:px-2 py-1 md:py-1 text-[10px] md:text-xs font-bold uppercase rounded transition-colors ${W==="all"?"bg-neutral-800 dark:bg-neutral-200 text-white dark:text-neutral-900":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-300 dark:hover:bg-neutral-700"} `,children:"All"}),Yt.filter(A=>Ta.some(Z=>Z.currency===A)&&(v[A]?.gt(0)||["Graphite","Wax"].includes(A))).map(A=>{const Z=S[A];return l.jsx(et,{heading:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Z,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),l.jsx("span",{children:A})]}),content:"",children:l.jsx("button",{onClick:()=>X(A),className:`cursor-pointer p-1 md:p-1.5 rounded transition-colors ${W===A?"bg-neutral-800 dark:bg-neutral-200 text-white dark:text-neutral-900":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-300 dark:hover:bg-neutral-700"} `,children:l.jsx(Z,{className:"w-4 h-4 md:w-4 md:h-4"})})},A)})]})]}),l.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:M,onChange:A=>T(A.target.checked),className:"w-3.5 h-3.5 md:w-4 md:h-4 text-neutral-800 dark:text-neutral-200 rounded focus:ring-neutral-800 dark:focus:ring-neutral-200 dark:bg-neutral-700 dark:border-neutral-600 scale-[0.85] md:scale-100"}),l.jsx("span",{className:"text-[9px] md:text-sm font-bold text-neutral-600 dark:text-neutral-400",children:"Hide Purchased"})]})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-4 pb-24",children:Ta.filter(A=>!(W!=="all"&&A.currency!==W||!!r[A.unlockKey]&&M)).map(A=>{const Z=!!r[A.unlockKey],se=()=>u(A.id),ue=F.includes(A.id),ie=!Z&&!ue&&A.currency!=="Graphite"&&(v[A.currency]?.eq(0)??!0);let pe=oa;A.icon==="AutoChallenge"?pe=w0:A.icon==="AutoRetry"?pe=k0:A.icon==="AutoAdvance"?pe=v0:A.icon==="Randomizer"?pe=C0:A.icon==="Eraser"?pe=Av:A.icon==="Meditation"?pe=Wx:A.icon==="Speed"?pe=ic:A.icon==="Graphite"?pe=sr:A.icon==="Wax"?pe=Or:A.icon==="Charcoal"?pe=Pr:A.icon==="Coffee"?pe=Ir:A.icon==="Ink"?pe=oa:A.icon==="Marker"&&(pe=ir);const be=S[A.currency]||oa,we=n[A.currency]||At,ye=Da(A.cost,A.currency,O),ke=we.gte(ye),Ce=ke?100:Math.min(100,we.div(ye).times(100).toNumber());return l.jsxs("div",{className:"bg-white dark:bg-neutral-800 border-2 border-neutral-800 dark:border-neutral-700 p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)] dark:shadow-none flex flex-col relative transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3 md:gap-4 flex-1 min-w-[200px] mb-3 md:mb-4",children:[l.jsx("div",{className:`p-2 md:p-3 bg-neutral-100 dark:bg-neutral-900 rounded-full border border-neutral-300 dark:border-neutral-700 shrink-0 ${ie?"opacity-50":""} `,children:ie?l.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 flex items-center justify-center text-neutral-400 dark:text-neutral-600 font-bold text-xl",children:"?"}):l.jsx(pe,{className:`w-6 h-6 md:w-8 md:h-8 ${A.iconColor||"text-neutral-800 dark:text-neutral-300"} `})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg md:text-xl font-bold uppercase leading-none dark:text-neutral-100",children:ie?U0(A.name):A.name}),l.jsx("div",{className:"text-[10px] md:text-xs text-neutral-500 dark:text-neutral-400 italic max-w-full md:max-w-md",children:ie?l.jsx("span",{className:"text-neutral-300 dark:text-neutral-700 select-none",children:"Lorem ipsum dolor sit amet..."}):A.description})]})]}),l.jsx("div",{className:"shrink-0 w-full mt-auto",children:Z?l.jsx("div",{className:"w-full py-2 px-4 font-bold uppercase tracking-wider border-2 border-transparent bg-sky-500 text-white text-center shadow-inner text-sm",children:"UNLOCKED"}):l.jsxs("button",{onClick:se,disabled:!ke||ie,className:`
cursor-pointer justify-center items-center flex py-2 md:py-3 px-4 md:px-6 font-bold uppercase tracking-wider border-2 transition-all w-full relative overflow-hidden
                                                                    ${ke&&!ie?"bg-amber-100 dark:bg-amber-900/40 text-amber-900 dark:text-amber-200 border-amber-900 dark:border-amber-700 hover:bg-amber-200 dark:hover:bg-amber-800/60 shadow-[2px_2px_0px_0px_rgba(120,53,15,0.8)]":"bg-neutral-100 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-400 border-neutral-200 dark:border-neutral-700 cursor-not-allowed opacity-60"}
`,children:[!ke&&!ie&&Ce>0&&l.jsx("div",{className:"absolute inset-y-0 left-0 bg-green-300 dark:bg-green-500/20 transition-all duration-300 ease-out",style:{width:`${Ce}%`}}),l.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[l.jsx("span",{children:"Unlock"}),l.jsxs("div",{className:"flex items-center gap-1 font-mono",children:[l.jsx("span",{children:ie?"???":ge(ye)}),be&&l.jsx(et,{heading:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),l.jsx("span",{children:A.currency})]}),content:"",children:l.jsx(be,{className:"w-7 h-7 cursor-help"})})]})]})]})})]},A.id)})})]})}),l.jsx("div",{className:"w-full lg:w-1/3 lg:min-w-[300px] bg-neutral-100 dark:bg-neutral-900/50 border lg:border-l border-neutral-200 dark:border-neutral-800 p-4 shrink-0 rounded-lg lg:rounded-none transition-colors",children:l.jsxs("div",{id:"tutorial-shop-protocols",children:[l.jsx("h4",{className:"text-sm md:text-lg font-bold uppercase text-neutral-500 dark:text-neutral-400 mb-4 sticky top-0 bg-neutral-100 dark:bg-neutral-900/50 p-1 md:p-2 px-4 z-10 border-b lg:border-b-0 border-neutral-200 dark:border-neutral-800",children:"Active Protocols"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ta.filter(A=>!!r[A.unlockKey]&&A.type==="ACTIVE_PROTOCOL").map(A=>{let Z=!0,se=()=>{};if(A.id==="AUTO_CHALLENGE")Z=d,se=m;else if(A.id==="AUTO_RETRY")Z=f,se=g;else if(A.id==="AUTO_ADVANCE")Z=x,se=y;else if(A.id==="RANDOMIZER")Z=b,se=w;else if(A.id==="BUY_MAX"||A.id==="AUTO_BUY")return Z=!0,se=()=>{},null;let ue=ic;A.icon==="AutoChallenge"?ue=w0:A.icon==="AutoRetry"?ue=k0:A.icon==="AutoAdvance"?ue=v0:A.icon==="Randomizer"?ue=C0:A.icon==="Ink"&&(ue=oa);const ie=Lx(A.iconColor);return l.jsxs("button",{onClick:se,className:`
cursor-pointer relative text-left p-2 border transition-all duration-200 flex flex-col justify-between h-full group
                                                        ${Z?`${ie.bg} ${ie.bgDark} ${ie.border} ${ie.borderDark} shadow-md scale-[1.02] z-10`:"bg-white dark:bg-neutral-800 border-neutral-300 dark:border-neutral-700 shadow-sm hover:border-neutral-400 dark:hover:border-neutral-600 hover:bg-neutral-50 dark:hover:bg-neutral-750 hover:scale-[1.01] opacity-80 hover:opacity-100"}
`,children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ue,{className:`w-4 h-4 ${Z?A.iconColor||"text-green-700 dark:text-green-400":"text-neutral-400 dark:text-neutral-600 grayscale"} `}),l.jsx("h3",{className:`font-bold uppercase leading-none text-xs ${Z?`${ie.text} ${ie.textDark}`:"text-neutral-600 dark:text-neutral-500"} `,children:A.name})]}),l.jsx("div",{className:`w-2 h-2 rounded-full ${Z?`${ie.accent} shadow-[0_0_4px_currentColor]`:"bg-neutral-300 dark:bg-neutral-700"} `})]}),l.jsx("p",{className:"text-[9px] text-neutral-500 dark:text-neutral-400 leading-tight mb-2 transition-colors",children:A.description})]}),l.jsx("div",{className:`mt-auto pt-2 border-t border-dashed ${Z?"border-current opacity-20":"border-neutral-200 dark:border-neutral-800"} `,children:l.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${Z?`${ie.text} ${ie.textDark}`:"text-neutral-400 dark:text-neutral-600"} `,children:Z?" Active":" Disabled"})})]},A.id)}),!r.autoChallengeUnlocked&&!r.autoRetryUnlocked&&l.jsxs("div",{className:"col-span-2 text-center p-8 text-neutral-400 dark:text-neutral-600 italic font-serif text-sm",children:["No active protocols available.",l.jsx("br",{}),"Unlock special tools from the market."]})]})]})})]})}),H==="upgrades"&&l.jsx("div",{className:"h-full overflow-y-auto pb-24",children:l.jsxs("div",{id:"tutorial-shop-upgrades",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[l.jsx("button",{onClick:()=>U("all"),className:`cursor-pointer px-1.5 md:px-3 py-0.5 md:py-1.5 text-[9px] md:text-sm font-bold uppercase rounded transition-colors ${_==="all"?"bg-orange-500 text-white":"bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-400 hover:bg-neutral-300 dark:hover:bg-neutral-700"} `,children:"All"}),Yt.filter(A=>pa.some(Z=>Z.currency===A)&&(v[A]?.gt(0)||["Graphite","Wax"].includes(A))).map(A=>{const Z=S[A];return l.jsx(et,{heading:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Z,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),l.jsx("span",{children:A})]}),content:"",children:l.jsxs("button",{onClick:()=>U(A),className:`cursor-pointer px-1.5 md:px-3 py-0.5 md:py-1.5 text-[9px] md:text-sm font-bold uppercase rounded flex items-center gap-1 transition-colors ${_===A?"bg-orange-500 text-white":"bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-400 hover:bg-neutral-300 dark:hover:bg-neutral-700"} `,children:[l.jsx(Z,{className:"w-3 h-3 md:w-4 md:h-4"}),A]})},A)}),l.jsxs("div",{className:"flex items-center ml-auto gap-4",children:[Y&&l.jsx("button",{onClick:J,className:`cursor-pointer px-1.5 md:px-3 py-0.5 md:py-1.5 text-[9px] md:text-sm font-bold uppercase rounded transition-all border-2 
                                                    ${ee?"bg-amber-500 text-white border-amber-600 shadow-[inset_0_2px_4px_rgba(0,0,0,0.3)] translate-y-[1px]":"border-amber-500 text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/40"}`,children:"Toggle All Auto"}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none border-l pl-4 border-neutral-300 dark:border-neutral-700 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:D,onChange:A=>$(A.target.checked),className:"w-4 h-4 text-neutral-800 dark:text-neutral-200 rounded focus:ring-neutral-800 dark:focus:ring-neutral-200 dark:bg-neutral-700 dark:border-neutral-600"}),l.jsx("span",{className:"text-[10px] md:text-sm font-bold text-neutral-600 dark:text-neutral-400",children:"Affordable Only"})]})]})]}),l.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-3 gap-2 md:gap-6",children:pa.filter(A=>{if(_!=="all"&&A.currency!==_)return!1;if(D){const Z=i[A.id]||At,se=Da(Ro(A,Z,{graphiteDiscountUnlocked:E,charcoalDiscountUnlocked:R,waxDiscountUnlocked:N,coffeeDiscountUnlocked:j,inkDiscountUnlocked:I}),A.currency,O);if((n[A.currency]||At).lt(se))return!1}return!0}).map(A=>{const Z=i[A.id]||At,se=Da(Ro(A,Z,{graphiteDiscountUnlocked:E,charcoalDiscountUnlocked:R,waxDiscountUnlocked:N,coffeeDiscountUnlocked:j,inkDiscountUnlocked:I}),A.currency,O),ue=A.currency,pe=(n[ue]||At).gte(se),be=A.currency!=="Graphite"&&(v[A.currency]?.eq(0)??!0),we=P.includes(A.id),ye=k[A.id]||!1;return l.jsx(Dv,{upgrade:A,level:Z,canAfford:pe,isCurrencyLocked:be,isMuted:we,isAutoBuyEnabled:ye,autoBuyUnlocked:!!r.autoBuyUnlocked,buyMaxUnlocked:!!r.buyMaxUnlocked,cost:se},A.id)})})]})})]})]})},Rr=({className:t})=>l.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:t,xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z",className:"drop-shadow-sm"}),l.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"white",fillOpacity:"0.3"})]}),Pv=(t,r)=>t.lte(0)?new o(0):t.pow(r),Kx=(t,r,n)=>{let i=t,u=1,d=0;switch(r){case"Graphite":u+=n.graphiteRewardMultiplier/100,d=n.graphiteRewardExponent;break;case"Wax":u+=n.waxRewardMultiplier/100,d=n.waxRewardExponent;break;case"Charcoal":u+=n.charcoalRewardMultiplier/100,d=n.charcoalRewardExponent;break;case"Coffee":u+=n.coffeeRewardMultiplier/100,d=n.coffeeRewardExponent;break;case"Ink":u+=n.inkRewardMultiplier/100,d=n.inkRewardExponent;break;case"Marker":u+=n.markerRewardMultiplier/100,d=n.markerRewardExponent;break;case"Acrylic":u+=n.acrylicRewardMultiplier/100,d=n.acrylicRewardExponent;break;case"Spray":u+=n.sprayRewardMultiplier/100,d=n.sprayRewardExponent;break;case"Photon":u+=n.photonRewardMultiplier/100,d=n.photonRewardExponent;break;case"Gold Leaf":u+=n.goldLeafRewardMultiplier/100,d=n.goldLeafRewardExponent;break}return u>1&&(i=i.times(u)),d>0&&i.gt(1)&&(i=Pv(i,1+d)),i},lc=({rewards:t,currencyRewards:r,multiplier:n,layout:i="col",shopLevels:u,fundamentals:d,glossaryMultiplier:m,compact:f=!1})=>{const g=(w,v)=>{const k=ot[w];let M;if(k?.isDecayImmune){const E=d?.rewardDecay,R=E instanceof o?E.toNumber():E||1;if(Math.abs(R-1)<.001)M=n;else{const N=n.toNumber(),j=N>0?(1/N-1)/R:0;M=new o(1/(1+j))}}else M=n;let T=v.times(M);if(u&&d&&m){const E=Bx(w,u,d,m);T=T.times(E)}return T},x=(w,v)=>{let k=v.times(n);return d&&(k=Kx(k,w,d)),k},{validRewards:y,validCurrencies:b}=B.useMemo(()=>{const w=t.filter(k=>!g(k.statName,k.amount).eq(0)),v=r?.filter(k=>x(k.name,k.amount).gt(0))||[];return{validRewards:w,validCurrencies:v}},[t,r,n,u,d,m]);return y.length===0&&b.length===0?null:l.jsxs("div",{className:i==="grid"?"grid grid-cols-2 gap-x-4 gap-y-1":"flex flex-col gap-1",children:[l.jsx("div",{className:"flex flex-col gap-0.5",children:y.map((w,v)=>{const k=g(w.statName,w.amount),M=ot[w.statName]||ot.maxHp,T=M.icon,E=M.label,R=w.statName==="attackSpeed"?k.gt(0):k.lt(0);return l.jsx(et,{heading:l.jsxs("span",{className:`${R?"text-red-600 dark:text-red-400":M.colorClass} flex items-center gap-2`,children:[l.jsx(T,{className:"w-4 h-4"}),M.label]}),content:`${M.fullName}
${M.description}`,children:l.jsxs("div",{className:`flex gap-2 items-center ${f?"text-[9.6px]":"text-xs"} font-mono font-bold ${R?"text-red-600 dark:text-red-400":"text-neutral-800 dark:text-neutral-200"} transition-colors cursor-help`,children:[l.jsxs("span",{className:"flex items-center gap-1 opacity-90 transition-opacity",children:[l.jsx(T,{className:`${f?"w-3 h-3":"w-3.5 h-3.5"} ${R?"text-red-600 dark:text-red-400":M.colorClass}`}),E]}),l.jsxs("span",{children:[k.gt(0)?"+":"",ge(k)]})]})},`stat-${v}`)})}),l.jsx("div",{className:"flex flex-col gap-0.5",children:b.map((w,v)=>{const k=x(w.name,w.amount),M=Yx[`${w.name}Icon`],T=Lo[w.name],E=T?.code||w.name,R=T?.label||w.name;return l.jsx(et,{heading:l.jsxs("div",{className:"flex items-center gap-2",children:[M&&l.jsx(M,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),l.jsx("span",{children:R})]}),content:"",children:l.jsxs("div",{className:`flex gap-2 items-center ${f?"text-[9.6px]":"text-xs"} font-mono font-bold text-neutral-800 dark:text-neutral-200 transition-colors cursor-help`,children:[l.jsxs("span",{className:"flex items-center gap-1",children:[M?l.jsx(M,{className:`${f?"w-3 h-3":"w-3.5 h-3.5"} text-neutral-600 dark:text-neutral-400 transition-colors`}):null,E]}),l.jsxs("span",{children:["+",ge(k)]})]})},`curr-${v}`)})})]})};function jt(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=jt(t[n]))!==""&&(r+=(r&&" ")+i);else for(let n in t)t[n]&&(r+=(r&&" ")+n);return r}var Iv={value:()=>{}};function kc(){for(var t=0,r=arguments.length,n={},i;t<r;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ac(n)}function ac(t){this._=t}function Hv(t,r){return t.trim().split(/^|\s+/).map(function(n){var i="",u=n.indexOf(".");if(u>=0&&(i=n.slice(u+1),n=n.slice(0,u)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ac.prototype=kc.prototype={constructor:ac,on:function(t,r){var n=this._,i=Hv(t+"",n),u,d=-1,m=i.length;if(arguments.length<2){for(;++d<m;)if((u=(t=i[d]).type)&&(u=Uv(n[u],t.name)))return u;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++d<m;)if(u=(t=i[d]).type)n[u]=kg(n[u],t.name,r);else if(r==null)for(u in n)n[u]=kg(n[u],t.name,null);return this},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new ac(t)},call:function(t,r){if((u=arguments.length-2)>0)for(var n=new Array(u),i=0,u,d;i<u;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(d=this._[t],i=0,u=d.length;i<u;++i)d[i].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],u=0,d=i.length;u<d;++u)i[u].value.apply(r,n)}};function Uv(t,r){for(var n=0,i=t.length,u;n<i;++n)if((u=t[n]).name===r)return u.value}function kg(t,r,n){for(var i=0,u=t.length;i<u;++i)if(t[i].name===r){t[i]=Iv,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:r,value:n}),t}var S0="http://www.w3.org/1999/xhtml";const vg={svg:"http://www.w3.org/2000/svg",xhtml:S0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vc(t){var r=t+="",n=r.indexOf(":");return n>=0&&(r=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),vg.hasOwnProperty(r)?{space:vg[r],local:t}:t}function Bv(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===S0&&r.documentElement.namespaceURI===S0?r.createElement(t):r.createElementNS(n,t)}}function zv(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qx(t){var r=vc(t);return(r.local?zv:Bv)(r)}function Gv(){}function F0(t){return t==null?Gv:function(){return this.querySelector(t)}}function Vv(t){typeof t!="function"&&(t=F0(t));for(var r=this._groups,n=r.length,i=new Array(n),u=0;u<n;++u)for(var d=r[u],m=d.length,f=i[u]=new Array(m),g,x,y=0;y<m;++y)(g=d[y])&&(x=t.call(g,g.__data__,y,d))&&("__data__"in g&&(x.__data__=g.__data__),f[y]=x);return new xa(i,this._parents)}function Fv(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function qv(){return[]}function Xx(t){return t==null?qv:function(){return this.querySelectorAll(t)}}function $v(t){return function(){return Fv(t.apply(this,arguments))}}function Yv(t){typeof t=="function"?t=$v(t):t=Xx(t);for(var r=this._groups,n=r.length,i=[],u=[],d=0;d<n;++d)for(var m=r[d],f=m.length,g,x=0;x<f;++x)(g=m[x])&&(i.push(t.call(g,g.__data__,x,m)),u.push(g));return new xa(i,u)}function Zx(t){return function(){return this.matches(t)}}function Jx(t){return function(r){return r.matches(t)}}var Wv=Array.prototype.find;function Kv(t){return function(){return Wv.call(this.children,t)}}function Qv(){return this.firstElementChild}function Xv(t){return this.select(t==null?Qv:Kv(typeof t=="function"?t:Jx(t)))}var Zv=Array.prototype.filter;function Jv(){return Array.from(this.children)}function e2(t){return function(){return Zv.call(this.children,t)}}function t2(t){return this.selectAll(t==null?Jv:e2(typeof t=="function"?t:Jx(t)))}function a2(t){typeof t!="function"&&(t=Zx(t));for(var r=this._groups,n=r.length,i=new Array(n),u=0;u<n;++u)for(var d=r[u],m=d.length,f=i[u]=[],g,x=0;x<m;++x)(g=d[x])&&t.call(g,g.__data__,x,d)&&f.push(g);return new xa(i,this._parents)}function ey(t){return new Array(t.length)}function n2(){return new xa(this._enter||this._groups.map(ey),this._parents)}function cc(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}cc.prototype={constructor:cc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function r2(t){return function(){return t}}function o2(t,r,n,i,u,d){for(var m=0,f,g=r.length,x=d.length;m<x;++m)(f=r[m])?(f.__data__=d[m],i[m]=f):n[m]=new cc(t,d[m]);for(;m<g;++m)(f=r[m])&&(u[m]=f)}function s2(t,r,n,i,u,d,m){var f,g,x=new Map,y=r.length,b=d.length,w=new Array(y),v;for(f=0;f<y;++f)(g=r[f])&&(w[f]=v=m.call(g,g.__data__,f,r)+"",x.has(v)?u[f]=g:x.set(v,g));for(f=0;f<b;++f)v=m.call(t,d[f],f,d)+"",(g=x.get(v))?(i[f]=g,g.__data__=d[f],x.delete(v)):n[f]=new cc(t,d[f]);for(f=0;f<y;++f)(g=r[f])&&x.get(w[f])===g&&(u[f]=g)}function i2(t){return t.__data__}function l2(t,r){if(!arguments.length)return Array.from(this,i2);var n=r?s2:o2,i=this._parents,u=this._groups;typeof t!="function"&&(t=r2(t));for(var d=u.length,m=new Array(d),f=new Array(d),g=new Array(d),x=0;x<d;++x){var y=i[x],b=u[x],w=b.length,v=c2(t.call(y,y&&y.__data__,x,i)),k=v.length,M=f[x]=new Array(k),T=m[x]=new Array(k),E=g[x]=new Array(w);n(y,b,M,T,E,v,r);for(var R=0,N=0,j,I;R<k;++R)if(j=M[R]){for(R>=N&&(N=R+1);!(I=T[N])&&++N<k;);j._next=I||null}}return m=new xa(m,i),m._enter=f,m._exit=g,m}function c2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function u2(){return new xa(this._exit||this._groups.map(ey),this._parents)}function d2(t,r,n){var i=this.enter(),u=this,d=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(u=r(u),u&&(u=u.selection())),n==null?d.remove():n(d),i&&u?i.merge(u).order():u}function f2(t){for(var r=t.selection?t.selection():t,n=this._groups,i=r._groups,u=n.length,d=i.length,m=Math.min(u,d),f=new Array(u),g=0;g<m;++g)for(var x=n[g],y=i[g],b=x.length,w=f[g]=new Array(b),v,k=0;k<b;++k)(v=x[k]||y[k])&&(w[k]=v);for(;g<u;++g)f[g]=n[g];return new xa(f,this._parents)}function m2(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var i=t[r],u=i.length-1,d=i[u],m;--u>=0;)(m=i[u])&&(d&&m.compareDocumentPosition(d)^4&&d.parentNode.insertBefore(m,d),d=m);return this}function p2(t){t||(t=h2);function r(b,w){return b&&w?t(b.__data__,w.__data__):!b-!w}for(var n=this._groups,i=n.length,u=new Array(i),d=0;d<i;++d){for(var m=n[d],f=m.length,g=u[d]=new Array(f),x,y=0;y<f;++y)(x=m[y])&&(g[y]=x);g.sort(r)}return new xa(u,this._parents).order()}function h2(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function g2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function x2(){return Array.from(this)}function y2(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],u=0,d=i.length;u<d;++u){var m=i[u];if(m)return m}return null}function b2(){let t=0;for(const r of this)++t;return t}function w2(){return!this.node()}function k2(t){for(var r=this._groups,n=0,i=r.length;n<i;++n)for(var u=r[n],d=0,m=u.length,f;d<m;++d)(f=u[d])&&t.call(f,f.__data__,d,u);return this}function v2(t){return function(){this.removeAttribute(t)}}function C2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function S2(t,r){return function(){this.setAttribute(t,r)}}function N2(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function E2(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function T2(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function M2(t,r){var n=vc(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((r==null?n.local?C2:v2:typeof r=="function"?n.local?T2:E2:n.local?N2:S2)(n,r))}function ty(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _2(t){return function(){this.style.removeProperty(t)}}function A2(t,r,n){return function(){this.style.setProperty(t,r,n)}}function j2(t,r,n){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function R2(t,r,n){return arguments.length>1?this.each((r==null?_2:typeof r=="function"?j2:A2)(t,r,n??"")):Io(this.node(),t)}function Io(t,r){return t.style.getPropertyValue(r)||ty(t).getComputedStyle(t,null).getPropertyValue(r)}function L2(t){return function(){delete this[t]}}function D2(t,r){return function(){this[t]=r}}function O2(t,r){return function(){var n=r.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function P2(t,r){return arguments.length>1?this.each((r==null?L2:typeof r=="function"?O2:D2)(t,r)):this.node()[t]}function ay(t){return t.trim().split(/^|\s+/)}function q0(t){return t.classList||new ny(t)}function ny(t){this._node=t,this._names=ay(t.getAttribute("class")||"")}ny.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ry(t,r){for(var n=q0(t),i=-1,u=r.length;++i<u;)n.add(r[i])}function oy(t,r){for(var n=q0(t),i=-1,u=r.length;++i<u;)n.remove(r[i])}function I2(t){return function(){ry(this,t)}}function H2(t){return function(){oy(this,t)}}function U2(t,r){return function(){(r.apply(this,arguments)?ry:oy)(this,t)}}function B2(t,r){var n=ay(t+"");if(arguments.length<2){for(var i=q0(this.node()),u=-1,d=n.length;++u<d;)if(!i.contains(n[u]))return!1;return!0}return this.each((typeof r=="function"?U2:r?I2:H2)(n,r))}function z2(){this.textContent=""}function G2(t){return function(){this.textContent=t}}function V2(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function F2(t){return arguments.length?this.each(t==null?z2:(typeof t=="function"?V2:G2)(t)):this.node().textContent}function q2(){this.innerHTML=""}function $2(t){return function(){this.innerHTML=t}}function Y2(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function W2(t){return arguments.length?this.each(t==null?q2:(typeof t=="function"?Y2:$2)(t)):this.node().innerHTML}function K2(){this.nextSibling&&this.parentNode.appendChild(this)}function Q2(){return this.each(K2)}function X2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z2(){return this.each(X2)}function J2(t){var r=typeof t=="function"?t:Qx(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function eC(){return null}function tC(t,r){var n=typeof t=="function"?t:Qx(t),i=r==null?eC:typeof r=="function"?r:F0(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function aC(){var t=this.parentNode;t&&t.removeChild(this)}function nC(){return this.each(aC)}function rC(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function oC(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function sC(t){return this.select(t?oC:rC)}function iC(t){return arguments.length?this.property("__data__",t):this.node().__data__}function lC(t){return function(r){t.call(this,r,this.__data__)}}function cC(t){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");return i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),{type:r,name:n}})}function uC(t){return function(){var r=this.__on;if(r){for(var n=0,i=-1,u=r.length,d;n<u;++n)d=r[n],(!t.type||d.type===t.type)&&d.name===t.name?this.removeEventListener(d.type,d.listener,d.options):r[++i]=d;++i?r.length=i:delete this.__on}}}function dC(t,r,n){return function(){var i=this.__on,u,d=lC(r);if(i){for(var m=0,f=i.length;m<f;++m)if((u=i[m]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=d,u.options=n),u.value=r;return}}this.addEventListener(t.type,d,n),u={type:t.type,name:t.name,value:r,listener:d,options:n},i?i.push(u):this.__on=[u]}}function fC(t,r,n){var i=cC(t+""),u,d=i.length,m;if(arguments.length<2){var f=this.node().__on;if(f){for(var g=0,x=f.length,y;g<x;++g)for(u=0,y=f[g];u<d;++u)if((m=i[u]).type===y.type&&m.name===y.name)return y.value}return}for(f=r?dC:uC,u=0;u<d;++u)this.each(f(i[u],r,n));return this}function sy(t,r,n){var i=ty(t),u=i.CustomEvent;typeof u=="function"?u=new u(r,n):(u=i.document.createEvent("Event"),n?(u.initEvent(r,n.bubbles,n.cancelable),u.detail=n.detail):u.initEvent(r,!1,!1)),t.dispatchEvent(u)}function mC(t,r){return function(){return sy(this,t,r)}}function pC(t,r){return function(){return sy(this,t,r.apply(this,arguments))}}function hC(t,r){return this.each((typeof r=="function"?pC:mC)(t,r))}function*gC(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],u=0,d=i.length,m;u<d;++u)(m=i[u])&&(yield m)}var iy=[null];function xa(t,r){this._groups=t,this._parents=r}function ui(){return new xa([[document.documentElement]],iy)}function xC(){return this}xa.prototype=ui.prototype={constructor:xa,select:Vv,selectAll:Yv,selectChild:Xv,selectChildren:t2,filter:a2,data:l2,enter:n2,exit:u2,join:d2,merge:f2,selection:xC,order:m2,sort:p2,call:g2,nodes:x2,node:y2,size:b2,empty:w2,each:k2,attr:M2,style:R2,property:P2,classed:B2,text:F2,html:W2,raise:Q2,lower:Z2,append:J2,insert:tC,remove:nC,clone:sC,datum:iC,on:fC,dispatch:hC,[Symbol.iterator]:gC};function ha(t){return typeof t=="string"?new xa([[document.querySelector(t)]],[document.documentElement]):new xa([[t]],iy)}function yC(t){let r;for(;r=t.sourceEvent;)t=r;return t}function La(t,r){if(t=yC(t),r===void 0&&(r=t.currentTarget),r){var n=r.ownerSVGElement||r;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var u=r.getBoundingClientRect();return[t.clientX-u.left-r.clientLeft,t.clientY-u.top-r.clientTop]}}return[t.pageX,t.pageY]}const bC={passive:!1},Zs={capture:!0,passive:!1};function t0(t){t.stopImmediatePropagation()}function Oo(t){t.preventDefault(),t.stopImmediatePropagation()}function ly(t){var r=t.document.documentElement,n=ha(t).on("dragstart.drag",Oo,Zs);"onselectstart"in r?n.on("selectstart.drag",Oo,Zs):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function cy(t,r){var n=t.document.documentElement,i=ha(t).on("dragstart.drag",null);r&&(i.on("click.drag",Oo,Zs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ql=t=>()=>t;function N0(t,{sourceEvent:r,subject:n,target:i,identifier:u,active:d,x:m,y:f,dx:g,dy:x,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:u,enumerable:!0,configurable:!0},active:{value:d,enumerable:!0,configurable:!0},x:{value:m,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:x,enumerable:!0,configurable:!0},_:{value:y}})}N0.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function wC(t){return!t.ctrlKey&&!t.button}function kC(){return this.parentNode}function vC(t,r){return r??{x:t.x,y:t.y}}function CC(){return navigator.maxTouchPoints||"ontouchstart"in this}function uy(){var t=wC,r=kC,n=vC,i=CC,u={},d=kc("start","drag","end"),m=0,f,g,x,y,b=0;function w(j){j.on("mousedown.drag",v).filter(i).on("touchstart.drag",T).on("touchmove.drag",E,bC).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(j,I){if(!(y||!t.call(this,j,I))){var P=N(this,r.call(this,j,I),j,I,"mouse");P&&(ha(j.view).on("mousemove.drag",k,Zs).on("mouseup.drag",M,Zs),ly(j.view),t0(j),x=!1,f=j.clientX,g=j.clientY,P("start",j))}}function k(j){if(Oo(j),!x){var I=j.clientX-f,P=j.clientY-g;x=I*I+P*P>b}u.mouse("drag",j)}function M(j){ha(j.view).on("mousemove.drag mouseup.drag",null),cy(j.view,x),Oo(j),u.mouse("end",j)}function T(j,I){if(t.call(this,j,I)){var P=j.changedTouches,O=r.call(this,j,I),H=P.length,q,G;for(q=0;q<H;++q)(G=N(this,O,j,I,P[q].identifier,P[q]))&&(t0(j),G("start",j,P[q]))}}function E(j){var I=j.changedTouches,P=I.length,O,H;for(O=0;O<P;++O)(H=u[I[O].identifier])&&(Oo(j),H("drag",j,I[O]))}function R(j){var I=j.changedTouches,P=I.length,O,H;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),O=0;O<P;++O)(H=u[I[O].identifier])&&(t0(j),H("end",j,I[O]))}function N(j,I,P,O,H,q){var G=d.copy(),F=La(q||P,I),Y,J,z;if((z=n.call(j,new N0("beforestart",{sourceEvent:P,target:w,identifier:H,active:m,x:F[0],y:F[1],dx:0,dy:0,dispatch:G}),O))!=null)return Y=z.x-F[0]||0,J=z.y-F[1]||0,function V(S,_,U){var W=F,X;switch(S){case"start":u[H]=V,X=m++;break;case"end":delete u[H],--m;case"drag":F=La(U||_,I),X=m;break}G.call(S,j,new N0(S,{sourceEvent:_,subject:z,target:w,identifier:H,active:X,x:F[0]+Y,y:F[1]+J,dx:F[0]-W[0],dy:F[1]-W[1],dispatch:G}),O)}}return w.filter=function(j){return arguments.length?(t=typeof j=="function"?j:ql(!!j),w):t},w.container=function(j){return arguments.length?(r=typeof j=="function"?j:ql(j),w):r},w.subject=function(j){return arguments.length?(n=typeof j=="function"?j:ql(j),w):n},w.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:ql(!!j),w):i},w.on=function(){var j=d.on.apply(d,arguments);return j===d?w:j},w.clickDistance=function(j){return arguments.length?(b=(j=+j)*j,w):Math.sqrt(b)},w}function $0(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function dy(t,r){var n=Object.create(t.prototype);for(var i in r)n[i]=r[i];return n}function di(){}var Js=.7,uc=1/Js,Po="\\s*([+-]?\\d+)\\s*",ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",SC=/^#([0-9a-f]{3,8})$/,NC=new RegExp(`^rgb\\(${Po},${Po},${Po}\\)$`),EC=new RegExp(`^rgb\\(${Ka},${Ka},${Ka}\\)$`),TC=new RegExp(`^rgba\\(${Po},${Po},${Po},${ei}\\)$`),MC=new RegExp(`^rgba\\(${Ka},${Ka},${Ka},${ei}\\)$`),_C=new RegExp(`^hsl\\(${ei},${Ka},${Ka}\\)$`),AC=new RegExp(`^hsla\\(${ei},${Ka},${Ka},${ei}\\)$`),Cg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$0(di,Hr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Sg,formatHex:Sg,formatHex8:jC,formatHsl:RC,formatRgb:Ng,toString:Ng});function Sg(){return this.rgb().formatHex()}function jC(){return this.rgb().formatHex8()}function RC(){return fy(this).formatHsl()}function Ng(){return this.rgb().formatRgb()}function Hr(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=SC.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?Eg(r):n===3?new sa(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?$l(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?$l(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=NC.exec(t))?new sa(r[1],r[2],r[3],1):(r=EC.exec(t))?new sa(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=TC.exec(t))?$l(r[1],r[2],r[3],r[4]):(r=MC.exec(t))?$l(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=_C.exec(t))?_g(r[1],r[2]/100,r[3]/100,1):(r=AC.exec(t))?_g(r[1],r[2]/100,r[3]/100,r[4]):Cg.hasOwnProperty(t)?Eg(Cg[t]):t==="transparent"?new sa(NaN,NaN,NaN,0):null}function Eg(t){return new sa(t>>16&255,t>>8&255,t&255,1)}function $l(t,r,n,i){return i<=0&&(t=r=n=NaN),new sa(t,r,n,i)}function LC(t){return t instanceof di||(t=Hr(t)),t?(t=t.rgb(),new sa(t.r,t.g,t.b,t.opacity)):new sa}function E0(t,r,n,i){return arguments.length===1?LC(t):new sa(t,r,n,i??1)}function sa(t,r,n,i){this.r=+t,this.g=+r,this.b=+n,this.opacity=+i}$0(sa,E0,dy(di,{brighter(t){return t=t==null?uc:Math.pow(uc,t),new sa(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Js:Math.pow(Js,t),new sa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sa(Lr(this.r),Lr(this.g),Lr(this.b),dc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tg,formatHex:Tg,formatHex8:DC,formatRgb:Mg,toString:Mg}));function Tg(){return`#${jr(this.r)}${jr(this.g)}${jr(this.b)}`}function DC(){return`#${jr(this.r)}${jr(this.g)}${jr(this.b)}${jr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mg(){const t=dc(this.opacity);return`${t===1?"rgb(":"rgba("}${Lr(this.r)}, ${Lr(this.g)}, ${Lr(this.b)}${t===1?")":`, ${t})`}`}function dc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Lr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jr(t){return t=Lr(t),(t<16?"0":"")+t.toString(16)}function _g(t,r,n,i){return i<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new Oa(t,r,n,i)}function fy(t){if(t instanceof Oa)return new Oa(t.h,t.s,t.l,t.opacity);if(t instanceof di||(t=Hr(t)),!t)return new Oa;if(t instanceof Oa)return t;t=t.rgb();var r=t.r/255,n=t.g/255,i=t.b/255,u=Math.min(r,n,i),d=Math.max(r,n,i),m=NaN,f=d-u,g=(d+u)/2;return f?(r===d?m=(n-i)/f+(n<i)*6:n===d?m=(i-r)/f+2:m=(r-n)/f+4,f/=g<.5?d+u:2-d-u,m*=60):f=g>0&&g<1?0:m,new Oa(m,f,g,t.opacity)}function OC(t,r,n,i){return arguments.length===1?fy(t):new Oa(t,r,n,i??1)}function Oa(t,r,n,i){this.h=+t,this.s=+r,this.l=+n,this.opacity=+i}$0(Oa,OC,dy(di,{brighter(t){return t=t==null?uc:Math.pow(uc,t),new Oa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Js:Math.pow(Js,t),new Oa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,u=2*n-i;return new sa(a0(t>=240?t-240:t+120,u,i),a0(t,u,i),a0(t<120?t+240:t-120,u,i),this.opacity)},clamp(){return new Oa(Ag(this.h),Yl(this.s),Yl(this.l),dc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=dc(this.opacity);return`${t===1?"hsl(":"hsla("}${Ag(this.h)}, ${Yl(this.s)*100}%, ${Yl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ag(t){return t=(t||0)%360,t<0?t+360:t}function Yl(t){return Math.max(0,Math.min(1,t||0))}function a0(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}const Y0=t=>()=>t;function PC(t,r){return function(n){return t+n*r}}function IC(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(i){return Math.pow(t+i*r,n)}}function HC(t){return(t=+t)==1?my:function(r,n){return n-r?IC(r,n,t):Y0(isNaN(r)?n:r)}}function my(t,r){var n=r-t;return n?PC(t,n):Y0(isNaN(t)?r:t)}const fc=(function t(r){var n=HC(r);function i(u,d){var m=n((u=E0(u)).r,(d=E0(d)).r),f=n(u.g,d.g),g=n(u.b,d.b),x=my(u.opacity,d.opacity);return function(y){return u.r=m(y),u.g=f(y),u.b=g(y),u.opacity=x(y),u+""}}return i.gamma=t,i})(1);function UC(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,i=r.slice(),u;return function(d){for(u=0;u<n;++u)i[u]=t[u]*(1-d)+r[u]*d;return i}}function BC(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zC(t,r){var n=r?r.length:0,i=t?Math.min(n,t.length):0,u=new Array(i),d=new Array(n),m;for(m=0;m<i;++m)u[m]=Ks(t[m],r[m]);for(;m<n;++m)d[m]=r[m];return function(f){for(m=0;m<i;++m)d[m]=u[m](f);return d}}function GC(t,r){var n=new Date;return t=+t,r=+r,function(i){return n.setTime(t*(1-i)+r*i),n}}function Wa(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}function VC(t,r){var n={},i={},u;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(u in r)u in t?n[u]=Ks(t[u],r[u]):i[u]=r[u];return function(d){for(u in n)i[u]=n[u](d);return i}}var T0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,n0=new RegExp(T0.source,"g");function FC(t){return function(){return t}}function qC(t){return function(r){return t(r)+""}}function py(t,r){var n=T0.lastIndex=n0.lastIndex=0,i,u,d,m=-1,f=[],g=[];for(t=t+"",r=r+"";(i=T0.exec(t))&&(u=n0.exec(r));)(d=u.index)>n&&(d=r.slice(n,d),f[m]?f[m]+=d:f[++m]=d),(i=i[0])===(u=u[0])?f[m]?f[m]+=u:f[++m]=u:(f[++m]=null,g.push({i:m,x:Wa(i,u)})),n=n0.lastIndex;return n<r.length&&(d=r.slice(n),f[m]?f[m]+=d:f[++m]=d),f.length<2?g[0]?qC(g[0].x):FC(r):(r=g.length,function(x){for(var y=0,b;y<r;++y)f[(b=g[y]).i]=b.x(x);return f.join("")})}function Ks(t,r){var n=typeof r,i;return r==null||n==="boolean"?Y0(r):(n==="number"?Wa:n==="string"?(i=Hr(r))?(r=i,fc):py:r instanceof Hr?fc:r instanceof Date?GC:BC(r)?UC:Array.isArray(r)?zC:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?VC:Wa)(t,r)}var jg=180/Math.PI,M0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hy(t,r,n,i,u,d){var m,f,g;return(m=Math.sqrt(t*t+r*r))&&(t/=m,r/=m),(g=t*n+r*i)&&(n-=t*g,i-=r*g),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,g/=f),t*i<r*n&&(t=-t,r=-r,g=-g,m=-m),{translateX:u,translateY:d,rotate:Math.atan2(r,t)*jg,skewX:Math.atan(g)*jg,scaleX:m,scaleY:f}}var Wl;function $C(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?M0:hy(r.a,r.b,r.c,r.d,r.e,r.f)}function YC(t){return t==null||(Wl||(Wl=document.createElementNS("http://www.w3.org/2000/svg","g")),Wl.setAttribute("transform",t),!(t=Wl.transform.baseVal.consolidate()))?M0:(t=t.matrix,hy(t.a,t.b,t.c,t.d,t.e,t.f))}function gy(t,r,n,i){function u(x){return x.length?x.pop()+" ":""}function d(x,y,b,w,v,k){if(x!==b||y!==w){var M=v.push("translate(",null,r,null,n);k.push({i:M-4,x:Wa(x,b)},{i:M-2,x:Wa(y,w)})}else(b||w)&&v.push("translate("+b+r+w+n)}function m(x,y,b,w){x!==y?(x-y>180?y+=360:y-x>180&&(x+=360),w.push({i:b.push(u(b)+"rotate(",null,i)-2,x:Wa(x,y)})):y&&b.push(u(b)+"rotate("+y+i)}function f(x,y,b,w){x!==y?w.push({i:b.push(u(b)+"skewX(",null,i)-2,x:Wa(x,y)}):y&&b.push(u(b)+"skewX("+y+i)}function g(x,y,b,w,v,k){if(x!==b||y!==w){var M=v.push(u(v)+"scale(",null,",",null,")");k.push({i:M-4,x:Wa(x,b)},{i:M-2,x:Wa(y,w)})}else(b!==1||w!==1)&&v.push(u(v)+"scale("+b+","+w+")")}return function(x,y){var b=[],w=[];return x=t(x),y=t(y),d(x.translateX,x.translateY,y.translateX,y.translateY,b,w),m(x.rotate,y.rotate,b,w),f(x.skewX,y.skewX,b,w),g(x.scaleX,x.scaleY,y.scaleX,y.scaleY,b,w),x=y=null,function(v){for(var k=-1,M=w.length,T;++k<M;)b[(T=w[k]).i]=T.x(v);return b.join("")}}}var WC=gy($C,"px, ","px)","deg)"),KC=gy(YC,", ",")",")"),QC=1e-12;function Rg(t){return((t=Math.exp(t))+1/t)/2}function XC(t){return((t=Math.exp(t))-1/t)/2}function ZC(t){return((t=Math.exp(2*t))-1)/(t+1)}const nc=(function t(r,n,i){function u(d,m){var f=d[0],g=d[1],x=d[2],y=m[0],b=m[1],w=m[2],v=y-f,k=b-g,M=v*v+k*k,T,E;if(M<QC)E=Math.log(w/x)/r,T=function(O){return[f+O*v,g+O*k,x*Math.exp(r*O*E)]};else{var R=Math.sqrt(M),N=(w*w-x*x+i*M)/(2*x*n*R),j=(w*w-x*x-i*M)/(2*w*n*R),I=Math.log(Math.sqrt(N*N+1)-N),P=Math.log(Math.sqrt(j*j+1)-j);E=(P-I)/r,T=function(O){var H=O*E,q=Rg(I),G=x/(n*R)*(q*ZC(r*H+I)-XC(I));return[f+G*v,g+G*k,x*q/Rg(r*H+I)]}}return T.duration=E*1e3*r/Math.SQRT2,T}return u.rho=function(d){var m=Math.max(.001,+d),f=m*m,g=f*f;return t(m,f,g)},u})(Math.SQRT2,2,4);var Ho=0,Ys=0,qs=0,xy=1e3,mc,Ws,pc=0,Ur=0,Cc=0,ti=typeof performance=="object"&&performance.now?performance:Date,yy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function W0(){return Ur||(yy(JC),Ur=ti.now()+Cc)}function JC(){Ur=0}function hc(){this._call=this._time=this._next=null}hc.prototype=by.prototype={constructor:hc,restart:function(t,r,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?W0():+n)+(r==null?0:+r),!this._next&&Ws!==this&&(Ws?Ws._next=this:mc=this,Ws=this),this._call=t,this._time=n,_0()},stop:function(){this._call&&(this._call=null,this._time=1/0,_0())}};function by(t,r,n){var i=new hc;return i.restart(t,r,n),i}function eS(){W0(),++Ho;for(var t=mc,r;t;)(r=Ur-t._time)>=0&&t._call.call(void 0,r),t=t._next;--Ho}function Lg(){Ur=(pc=ti.now())+Cc,Ho=Ys=0;try{eS()}finally{Ho=0,aS(),Ur=0}}function tS(){var t=ti.now(),r=t-pc;r>xy&&(Cc-=r,pc=t)}function aS(){for(var t,r=mc,n,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:mc=n);Ws=t,_0(i)}function _0(t){if(!Ho){Ys&&(Ys=clearTimeout(Ys));var r=t-Ur;r>24?(t<1/0&&(Ys=setTimeout(Lg,t-ti.now()-Cc)),qs&&(qs=clearInterval(qs))):(qs||(pc=ti.now(),qs=setInterval(tS,xy)),Ho=1,yy(Lg))}}function Dg(t,r,n){var i=new hc;return r=r==null?0:+r,i.restart(u=>{i.stop(),t(u+r)},r,n),i}var nS=kc("start","end","cancel","interrupt"),rS=[],wy=0,Og=1,A0=2,rc=3,Pg=4,j0=5,oc=6;function Sc(t,r,n,i,u,d){var m=t.__transition;if(!m)t.__transition={};else if(n in m)return;oS(t,n,{name:r,index:i,group:u,on:nS,tween:rS,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:wy})}function K0(t,r){var n=Ha(t,r);if(n.state>wy)throw new Error("too late; already scheduled");return n}function Za(t,r){var n=Ha(t,r);if(n.state>rc)throw new Error("too late; already running");return n}function Ha(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function oS(t,r,n){var i=t.__transition,u;i[r]=n,n.timer=by(d,0,n.time);function d(x){n.state=Og,n.timer.restart(m,n.delay,n.time),n.delay<=x&&m(x-n.delay)}function m(x){var y,b,w,v;if(n.state!==Og)return g();for(y in i)if(v=i[y],v.name===n.name){if(v.state===rc)return Dg(m);v.state===Pg?(v.state=oc,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete i[y]):+y<r&&(v.state=oc,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete i[y])}if(Dg(function(){n.state===rc&&(n.state=Pg,n.timer.restart(f,n.delay,n.time),f(x))}),n.state=A0,n.on.call("start",t,t.__data__,n.index,n.group),n.state===A0){for(n.state=rc,u=new Array(w=n.tween.length),y=0,b=-1;y<w;++y)(v=n.tween[y].value.call(t,t.__data__,n.index,n.group))&&(u[++b]=v);u.length=b+1}}function f(x){for(var y=x<n.duration?n.ease.call(null,x/n.duration):(n.timer.restart(g),n.state=j0,1),b=-1,w=u.length;++b<w;)u[b].call(t,y);n.state===j0&&(n.on.call("end",t,t.__data__,n.index,n.group),g())}function g(){n.state=oc,n.timer.stop(),delete i[r];for(var x in i)return;delete t.__transition}}function sc(t,r){var n=t.__transition,i,u,d=!0,m;if(n){r=r==null?null:r+"";for(m in n){if((i=n[m]).name!==r){d=!1;continue}u=i.state>A0&&i.state<j0,i.state=oc,i.timer.stop(),i.on.call(u?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[m]}d&&delete t.__transition}}function sS(t){return this.each(function(){sc(this,t)})}function iS(t,r){var n,i;return function(){var u=Za(this,t),d=u.tween;if(d!==n){i=n=d;for(var m=0,f=i.length;m<f;++m)if(i[m].name===r){i=i.slice(),i.splice(m,1);break}}u.tween=i}}function lS(t,r,n){var i,u;if(typeof n!="function")throw new Error;return function(){var d=Za(this,t),m=d.tween;if(m!==i){u=(i=m).slice();for(var f={name:r,value:n},g=0,x=u.length;g<x;++g)if(u[g].name===r){u[g]=f;break}g===x&&u.push(f)}d.tween=u}}function cS(t,r){var n=this._id;if(t+="",arguments.length<2){for(var i=Ha(this.node(),n).tween,u=0,d=i.length,m;u<d;++u)if((m=i[u]).name===t)return m.value;return null}return this.each((r==null?iS:lS)(n,t,r))}function Q0(t,r,n){var i=t._id;return t.each(function(){var u=Za(this,i);(u.value||(u.value={}))[r]=n.apply(this,arguments)}),function(u){return Ha(u,i).value[r]}}function ky(t,r){var n;return(typeof r=="number"?Wa:r instanceof Hr?fc:(n=Hr(r))?(r=n,fc):py)(t,r)}function uS(t){return function(){this.removeAttribute(t)}}function dS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fS(t,r,n){var i,u=n+"",d;return function(){var m=this.getAttribute(t);return m===u?null:m===i?d:d=r(i=m,n)}}function mS(t,r,n){var i,u=n+"",d;return function(){var m=this.getAttributeNS(t.space,t.local);return m===u?null:m===i?d:d=r(i=m,n)}}function pS(t,r,n){var i,u,d;return function(){var m,f=n(this),g;return f==null?void this.removeAttribute(t):(m=this.getAttribute(t),g=f+"",m===g?null:m===i&&g===u?d:(u=g,d=r(i=m,f)))}}function hS(t,r,n){var i,u,d;return function(){var m,f=n(this),g;return f==null?void this.removeAttributeNS(t.space,t.local):(m=this.getAttributeNS(t.space,t.local),g=f+"",m===g?null:m===i&&g===u?d:(u=g,d=r(i=m,f)))}}function gS(t,r){var n=vc(t),i=n==="transform"?KC:ky;return this.attrTween(t,typeof r=="function"?(n.local?hS:pS)(n,i,Q0(this,"attr."+t,r)):r==null?(n.local?dS:uS)(n):(n.local?mS:fS)(n,i,r))}function xS(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}function yS(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}function bS(t,r){var n,i;function u(){var d=r.apply(this,arguments);return d!==i&&(n=(i=d)&&yS(t,d)),n}return u._value=r,u}function wS(t,r){var n,i;function u(){var d=r.apply(this,arguments);return d!==i&&(n=(i=d)&&xS(t,d)),n}return u._value=r,u}function kS(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(r==null)return this.tween(n,null);if(typeof r!="function")throw new Error;var i=vc(t);return this.tween(n,(i.local?bS:wS)(i,r))}function vS(t,r){return function(){K0(this,t).delay=+r.apply(this,arguments)}}function CS(t,r){return r=+r,function(){K0(this,t).delay=r}}function SS(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?vS:CS)(r,t)):Ha(this.node(),r).delay}function NS(t,r){return function(){Za(this,t).duration=+r.apply(this,arguments)}}function ES(t,r){return r=+r,function(){Za(this,t).duration=r}}function TS(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?NS:ES)(r,t)):Ha(this.node(),r).duration}function MS(t,r){if(typeof r!="function")throw new Error;return function(){Za(this,t).ease=r}}function _S(t){var r=this._id;return arguments.length?this.each(MS(r,t)):Ha(this.node(),r).ease}function AS(t,r){return function(){var n=r.apply(this,arguments);if(typeof n!="function")throw new Error;Za(this,t).ease=n}}function jS(t){if(typeof t!="function")throw new Error;return this.each(AS(this._id,t))}function RS(t){typeof t!="function"&&(t=Zx(t));for(var r=this._groups,n=r.length,i=new Array(n),u=0;u<n;++u)for(var d=r[u],m=d.length,f=i[u]=[],g,x=0;x<m;++x)(g=d[x])&&t.call(g,g.__data__,x,d)&&f.push(g);return new En(i,this._parents,this._name,this._id)}function LS(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,i=r.length,u=n.length,d=Math.min(i,u),m=new Array(i),f=0;f<d;++f)for(var g=r[f],x=n[f],y=g.length,b=m[f]=new Array(y),w,v=0;v<y;++v)(w=g[v]||x[v])&&(b[v]=w);for(;f<i;++f)m[f]=r[f];return new En(m,this._parents,this._name,this._id)}function DS(t){return(t+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||r==="start"})}function OS(t,r,n){var i,u,d=DS(r)?K0:Za;return function(){var m=d(this,t),f=m.on;f!==i&&(u=(i=f).copy()).on(r,n),m.on=u}}function PS(t,r){var n=this._id;return arguments.length<2?Ha(this.node(),n).on.on(t):this.each(OS(n,t,r))}function IS(t){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}}function HS(){return this.on("end.remove",IS(this._id))}function US(t){var r=this._name,n=this._id;typeof t!="function"&&(t=F0(t));for(var i=this._groups,u=i.length,d=new Array(u),m=0;m<u;++m)for(var f=i[m],g=f.length,x=d[m]=new Array(g),y,b,w=0;w<g;++w)(y=f[w])&&(b=t.call(y,y.__data__,w,f))&&("__data__"in y&&(b.__data__=y.__data__),x[w]=b,Sc(x[w],r,n,w,x,Ha(y,n)));return new En(d,this._parents,r,n)}function BS(t){var r=this._name,n=this._id;typeof t!="function"&&(t=Xx(t));for(var i=this._groups,u=i.length,d=[],m=[],f=0;f<u;++f)for(var g=i[f],x=g.length,y,b=0;b<x;++b)if(y=g[b]){for(var w=t.call(y,y.__data__,b,g),v,k=Ha(y,n),M=0,T=w.length;M<T;++M)(v=w[M])&&Sc(v,r,n,M,w,k);d.push(w),m.push(y)}return new En(d,m,r,n)}var zS=ui.prototype.constructor;function GS(){return new zS(this._groups,this._parents)}function VS(t,r){var n,i,u;return function(){var d=Io(this,t),m=(this.style.removeProperty(t),Io(this,t));return d===m?null:d===n&&m===i?u:u=r(n=d,i=m)}}function vy(t){return function(){this.style.removeProperty(t)}}function FS(t,r,n){var i,u=n+"",d;return function(){var m=Io(this,t);return m===u?null:m===i?d:d=r(i=m,n)}}function qS(t,r,n){var i,u,d;return function(){var m=Io(this,t),f=n(this),g=f+"";return f==null&&(g=f=(this.style.removeProperty(t),Io(this,t))),m===g?null:m===i&&g===u?d:(u=g,d=r(i=m,f))}}function $S(t,r){var n,i,u,d="style."+r,m="end."+d,f;return function(){var g=Za(this,t),x=g.on,y=g.value[d]==null?f||(f=vy(r)):void 0;(x!==n||u!==y)&&(i=(n=x).copy()).on(m,u=y),g.on=i}}function YS(t,r,n){var i=(t+="")=="transform"?WC:ky;return r==null?this.styleTween(t,VS(t,i)).on("end.style."+t,vy(t)):typeof r=="function"?this.styleTween(t,qS(t,i,Q0(this,"style."+t,r))).each($S(this._id,t)):this.styleTween(t,FS(t,i,r),n).on("end.style."+t,null)}function WS(t,r,n){return function(i){this.style.setProperty(t,r.call(this,i),n)}}function KS(t,r,n){var i,u;function d(){var m=r.apply(this,arguments);return m!==u&&(i=(u=m)&&WS(t,m,n)),i}return d._value=r,d}function QS(t,r,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,KS(t,r,n??""))}function XS(t){return function(){this.textContent=t}}function ZS(t){return function(){var r=t(this);this.textContent=r??""}}function JS(t){return this.tween("text",typeof t=="function"?ZS(Q0(this,"text",t)):XS(t==null?"":t+""))}function eN(t){return function(r){this.textContent=t.call(this,r)}}function tN(t){var r,n;function i(){var u=t.apply(this,arguments);return u!==n&&(r=(n=u)&&eN(u)),r}return i._value=t,i}function aN(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,tN(t))}function nN(){for(var t=this._name,r=this._id,n=Cy(),i=this._groups,u=i.length,d=0;d<u;++d)for(var m=i[d],f=m.length,g,x=0;x<f;++x)if(g=m[x]){var y=Ha(g,r);Sc(g,t,n,x,m,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new En(i,this._parents,t,n)}function rN(){var t,r,n=this,i=n._id,u=n.size();return new Promise(function(d,m){var f={value:m},g={value:function(){--u===0&&d()}};n.each(function(){var x=Za(this,i),y=x.on;y!==t&&(r=(t=y).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(g)),x.on=r}),u===0&&d()})}var oN=0;function En(t,r,n,i){this._groups=t,this._parents=r,this._name=n,this._id=i}function Cy(){return++oN}var Sn=ui.prototype;En.prototype={constructor:En,select:US,selectAll:BS,selectChild:Sn.selectChild,selectChildren:Sn.selectChildren,filter:RS,merge:LS,selection:GS,transition:nN,call:Sn.call,nodes:Sn.nodes,node:Sn.node,size:Sn.size,empty:Sn.empty,each:Sn.each,on:PS,attr:gS,attrTween:kS,style:YS,styleTween:QS,text:JS,textTween:aN,remove:HS,tween:cS,delay:SS,duration:TS,ease:_S,easeVarying:jS,end:rN,[Symbol.iterator]:Sn[Symbol.iterator]};function sN(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var iN={time:null,delay:0,duration:250,ease:sN};function lN(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return n}function cN(t){var r,n;t instanceof En?(r=t._id,t=t._name):(r=Cy(),(n=iN).time=W0(),t=t==null?null:t+"");for(var i=this._groups,u=i.length,d=0;d<u;++d)for(var m=i[d],f=m.length,g,x=0;x<f;++x)(g=m[x])&&Sc(g,t,r,x,m,n||lN(g,r));return new En(i,this._parents,t,r)}ui.prototype.interrupt=sS;ui.prototype.transition=cN;const Kl=t=>()=>t;function uN(t,{sourceEvent:r,target:n,transform:i,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:u}})}function Nn(t,r,n){this.k=t,this.x=r,this.y=n}Nn.prototype={constructor:Nn,scale:function(t){return t===1?this:new Nn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new Nn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Nc=new Nn(1,0,0);Sy.prototype=Nn.prototype;function Sy(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Nc;return t.__zoom}function r0(t){t.stopImmediatePropagation()}function $s(t){t.preventDefault(),t.stopImmediatePropagation()}function dN(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function fN(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ig(){return this.__zoom||Nc}function mN(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function pN(){return navigator.maxTouchPoints||"ontouchstart"in this}function hN(t,r,n){var i=t.invertX(r[0][0])-n[0][0],u=t.invertX(r[1][0])-n[1][0],d=t.invertY(r[0][1])-n[0][1],m=t.invertY(r[1][1])-n[1][1];return t.translate(u>i?(i+u)/2:Math.min(0,i)||Math.max(0,u),m>d?(d+m)/2:Math.min(0,d)||Math.max(0,m))}function Ny(){var t=dN,r=fN,n=hN,i=mN,u=pN,d=[0,1/0],m=[[-1/0,-1/0],[1/0,1/0]],f=250,g=nc,x=kc("start","zoom","end"),y,b,w,v=500,k=150,M=0,T=10;function E(z){z.property("__zoom",Ig).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",G).filter(u).on("touchstart.zoom",F).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(z,V,S,_){var U=z.selection?z.selection():z;U.property("__zoom",Ig),z!==U?I(z,V,S,_):U.interrupt().each(function(){P(this,arguments).event(_).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},E.scaleBy=function(z,V,S,_){E.scaleTo(z,function(){var U=this.__zoom.k,W=typeof V=="function"?V.apply(this,arguments):V;return U*W},S,_)},E.scaleTo=function(z,V,S,_){E.transform(z,function(){var U=r.apply(this,arguments),W=this.__zoom,X=S==null?j(U):typeof S=="function"?S.apply(this,arguments):S,D=W.invert(X),$=typeof V=="function"?V.apply(this,arguments):V;return n(N(R(W,$),X,D),U,m)},S,_)},E.translateBy=function(z,V,S,_){E.transform(z,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof S=="function"?S.apply(this,arguments):S),r.apply(this,arguments),m)},null,_)},E.translateTo=function(z,V,S,_,U){E.transform(z,function(){var W=r.apply(this,arguments),X=this.__zoom,D=_==null?j(W):typeof _=="function"?_.apply(this,arguments):_;return n(Nc.translate(D[0],D[1]).scale(X.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof S=="function"?-S.apply(this,arguments):-S),W,m)},_,U)};function R(z,V){return V=Math.max(d[0],Math.min(d[1],V)),V===z.k?z:new Nn(V,z.x,z.y)}function N(z,V,S){var _=V[0]-S[0]*z.k,U=V[1]-S[1]*z.k;return _===z.x&&U===z.y?z:new Nn(z.k,_,U)}function j(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function I(z,V,S,_){z.on("start.zoom",function(){P(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(_).end()}).tween("zoom",function(){var U=this,W=arguments,X=P(U,W).event(_),D=r.apply(U,W),$=S==null?j(D):typeof S=="function"?S.apply(U,W):S,ee=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),A=U.__zoom,Z=typeof V=="function"?V.apply(U,W):V,se=g(A.invert($).concat(ee/A.k),Z.invert($).concat(ee/Z.k));return function(ue){if(ue===1)ue=Z;else{var ie=se(ue),pe=ee/ie[2];ue=new Nn(pe,$[0]-ie[0]*pe,$[1]-ie[1]*pe)}X.zoom(null,ue)}})}function P(z,V,S){return!S&&z.__zooming||new O(z,V)}function O(z,V){this.that=z,this.args=V,this.active=0,this.sourceEvent=null,this.extent=r.apply(z,V),this.taps=0}O.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,V){return this.mouse&&z!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var V=ha(this.that).datum();x.call(z,this.that,new uN(z,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:x}),V)}};function H(z,...V){if(!t.apply(this,arguments))return;var S=P(this,V).event(z),_=this.__zoom,U=Math.max(d[0],Math.min(d[1],_.k*Math.pow(2,i.apply(this,arguments)))),W=La(z);if(S.wheel)(S.mouse[0][0]!==W[0]||S.mouse[0][1]!==W[1])&&(S.mouse[1]=_.invert(S.mouse[0]=W)),clearTimeout(S.wheel);else{if(_.k===U)return;S.mouse=[W,_.invert(W)],sc(this),S.start()}$s(z),S.wheel=setTimeout(X,k),S.zoom("mouse",n(N(R(_,U),S.mouse[0],S.mouse[1]),S.extent,m));function X(){S.wheel=null,S.end()}}function q(z,...V){if(w||!t.apply(this,arguments))return;var S=z.currentTarget,_=P(this,V,!0).event(z),U=ha(z.view).on("mousemove.zoom",$,!0).on("mouseup.zoom",ee,!0),W=La(z,S),X=z.clientX,D=z.clientY;ly(z.view),r0(z),_.mouse=[W,this.__zoom.invert(W)],sc(this),_.start();function $(A){if($s(A),!_.moved){var Z=A.clientX-X,se=A.clientY-D;_.moved=Z*Z+se*se>M}_.event(A).zoom("mouse",n(N(_.that.__zoom,_.mouse[0]=La(A,S),_.mouse[1]),_.extent,m))}function ee(A){U.on("mousemove.zoom mouseup.zoom",null),cy(A.view,_.moved),$s(A),_.event(A).end()}}function G(z,...V){if(t.apply(this,arguments)){var S=this.__zoom,_=La(z.changedTouches?z.changedTouches[0]:z,this),U=S.invert(_),W=S.k*(z.shiftKey?.5:2),X=n(N(R(S,W),_,U),r.apply(this,V),m);$s(z),f>0?ha(this).transition().duration(f).call(I,X,_,z):ha(this).call(E.transform,X,_,z)}}function F(z,...V){if(t.apply(this,arguments)){var S=z.touches,_=S.length,U=P(this,V,z.changedTouches.length===_).event(z),W,X,D,$;for(r0(z),X=0;X<_;++X)D=S[X],$=La(D,this),$=[$,this.__zoom.invert($),D.identifier],U.touch0?!U.touch1&&U.touch0[2]!==$[2]&&(U.touch1=$,U.taps=0):(U.touch0=$,W=!0,U.taps=1+!!y);y&&(y=clearTimeout(y)),W&&(U.taps<2&&(b=$[0],y=setTimeout(function(){y=null},v)),sc(this),U.start())}}function Y(z,...V){if(this.__zooming){var S=P(this,V).event(z),_=z.changedTouches,U=_.length,W,X,D,$;for($s(z),W=0;W<U;++W)X=_[W],D=La(X,this),S.touch0&&S.touch0[2]===X.identifier?S.touch0[0]=D:S.touch1&&S.touch1[2]===X.identifier&&(S.touch1[0]=D);if(X=S.that.__zoom,S.touch1){var ee=S.touch0[0],A=S.touch0[1],Z=S.touch1[0],se=S.touch1[1],ue=(ue=Z[0]-ee[0])*ue+(ue=Z[1]-ee[1])*ue,ie=(ie=se[0]-A[0])*ie+(ie=se[1]-A[1])*ie;X=R(X,Math.sqrt(ue/ie)),D=[(ee[0]+Z[0])/2,(ee[1]+Z[1])/2],$=[(A[0]+se[0])/2,(A[1]+se[1])/2]}else if(S.touch0)D=S.touch0[0],$=S.touch0[1];else return;S.zoom("touch",n(N(X,D,$),S.extent,m))}}function J(z,...V){if(this.__zooming){var S=P(this,V).event(z),_=z.changedTouches,U=_.length,W,X;for(r0(z),w&&clearTimeout(w),w=setTimeout(function(){w=null},v),W=0;W<U;++W)X=_[W],S.touch0&&S.touch0[2]===X.identifier?delete S.touch0:S.touch1&&S.touch1[2]===X.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(X=La(X,this),Math.hypot(b[0]-X[0],b[1]-X[1])<T)){var D=ha(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return E.wheelDelta=function(z){return arguments.length?(i=typeof z=="function"?z:Kl(+z),E):i},E.filter=function(z){return arguments.length?(t=typeof z=="function"?z:Kl(!!z),E):t},E.touchable=function(z){return arguments.length?(u=typeof z=="function"?z:Kl(!!z),E):u},E.extent=function(z){return arguments.length?(r=typeof z=="function"?z:Kl([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),E):r},E.scaleExtent=function(z){return arguments.length?(d[0]=+z[0],d[1]=+z[1],E):[d[0],d[1]]},E.translateExtent=function(z){return arguments.length?(m[0][0]=+z[0][0],m[1][0]=+z[1][0],m[0][1]=+z[0][1],m[1][1]=+z[1][1],E):[[m[0][0],m[0][1]],[m[1][0],m[1][1]]]},E.constrain=function(z){return arguments.length?(n=z,E):n},E.duration=function(z){return arguments.length?(f=+z,E):f},E.interpolate=function(z){return arguments.length?(g=z,E):g},E.on=function(){var z=x.on.apply(x,arguments);return z===x?E:z},E.clickDistance=function(z){return arguments.length?(M=(z=+z)*z,E):Math.sqrt(M)},E.tapDistance=function(z){return arguments.length?(T=+z,E):T},E}const Qa={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ai=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ey=["Enter"," ","Escape"],Ty={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:n})=>`Moved selected node ${t}. New position, x: ${r}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Uo;(function(t){t.Strict="strict",t.Loose="loose"})(Uo||(Uo={}));var Dr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Dr||(Dr={}));var ni;(function(t){t.Partial="partial",t.Full="full"})(ni||(ni={}));const My={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var rr;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(rr||(rr={}));var gc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(gc||(gc={}));var xe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(xe||(xe={}));const Hg={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top};function _y(t){return t===null?null:t?"valid":"invalid"}const Ay=t=>"id"in t&&"source"in t&&"target"in t,gN=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),X0=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),fi=(t,r=[0,0])=>{const{width:n,height:i}=Tn(t),u=t.origin??r,d=n*u[0],m=i*u[1];return{x:t.position.x-d,y:t.position.y-m}},xN=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,u)=>{const d=typeof u=="string";let m=!r.nodeLookup&&!d?u:void 0;r.nodeLookup&&(m=d?r.nodeLookup.get(u):X0(u)?u:r.nodeLookup.get(u.id));const f=m?xc(m,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ec(i,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Tc(n)},mi=(t,r={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(u=>{(r.filter===void 0||r.filter(u))&&(n=Ec(n,xc(u)),i=!0)}),i?Tc(n):{x:0,y:0,width:0,height:0}},Z0=(t,r,[n,i,u]=[0,0,1],d=!1,m=!1)=>{const f={...hi(r,[n,i,u]),width:r.width/u,height:r.height/u},g=[];for(const x of t.values()){const{measured:y,selectable:b=!0,hidden:w=!1}=x;if(m&&!b||w)continue;const v=y.width??x.width??x.initialWidth??null,k=y.height??x.height??x.initialHeight??null,M=ri(f,zo(x)),T=(v??0)*(k??0),E=d&&M>0;(!x.internals.handleBounds||E||M>=T||x.dragging)&&g.push(x)}return g},yN=(t,r)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),r.filter(i=>n.has(i.source)||n.has(i.target))};function bN(t,r){const n=new Map,i=r?.nodes?new Set(r.nodes.map(u=>u.id)):null;return t.forEach(u=>{u.measured.width&&u.measured.height&&(r?.includeHiddenNodes||!u.hidden)&&(!i||i.has(u.id))&&n.set(u.id,u)}),n}async function wN({nodes:t,width:r,height:n,panZoom:i,minZoom:u,maxZoom:d},m){if(t.size===0)return Promise.resolve(!0);const f=bN(t,m),g=mi(f),x=J0(g,r,n,m?.minZoom??u,m?.maxZoom??d,m?.padding??.1);return await i.setViewport(x,{duration:m?.duration,ease:m?.ease,interpolate:m?.interpolate}),Promise.resolve(!0)}function jy({nodeId:t,nextPosition:r,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:u,onError:d}){const m=n.get(t),f=m.parentId?n.get(m.parentId):void 0,{x:g,y:x}=f?f.internals.positionAbsolute:{x:0,y:0},y=m.origin??i;let b=m.extent||u;if(m.extent==="parent"&&!m.expandParent)if(!f)d?.("005",Qa.error005());else{const v=f.measured.width,k=f.measured.height;v&&k&&(b=[[g,x],[g+v,x+k]])}else f&&Go(m.extent)&&(b=[[m.extent[0][0]+g,m.extent[0][1]+x],[m.extent[1][0]+g,m.extent[1][1]+x]]);const w=Go(b)?Br(r,b,m.measured):r;return(m.measured.width===void 0||m.measured.height===void 0)&&d?.("015",Qa.error015()),{position:{x:w.x-g+(m.measured.width??0)*y[0],y:w.y-x+(m.measured.height??0)*y[1]},positionAbsolute:w}}async function kN({nodesToRemove:t=[],edgesToRemove:r=[],nodes:n,edges:i,onBeforeDelete:u}){const d=new Set(t.map(w=>w.id)),m=[];for(const w of n){if(w.deletable===!1)continue;const v=d.has(w.id),k=!v&&w.parentId&&m.find(M=>M.id===w.parentId);(v||k)&&m.push(w)}const f=new Set(r.map(w=>w.id)),g=i.filter(w=>w.deletable!==!1),y=yN(m,g);for(const w of g)f.has(w.id)&&!y.find(k=>k.id===w.id)&&y.push(w);if(!u)return{edges:y,nodes:m};const b=await u({nodes:m,edges:y});return typeof b=="boolean"?b?{edges:y,nodes:m}:{edges:[],nodes:[]}:b}const Bo=(t,r=0,n=1)=>Math.min(Math.max(t,r),n),Br=(t={x:0,y:0},r,n)=>({x:Bo(t.x,r[0][0],r[1][0]-(n?.width??0)),y:Bo(t.y,r[0][1],r[1][1]-(n?.height??0))});function Ry(t,r,n){const{width:i,height:u}=Tn(n),{x:d,y:m}=n.internals.positionAbsolute;return Br(t,[[d,m],[d+i,m+u]],r)}const Ug=(t,r,n)=>t<r?Bo(Math.abs(t-r),1,r)/r:t>n?-Bo(Math.abs(t-n),1,r)/r:0,Ly=(t,r,n=15,i=40)=>{const u=Ug(t.x,i,r.width-i)*n,d=Ug(t.y,i,r.height-i)*n;return[u,d]},Ec=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),R0=({x:t,y:r,width:n,height:i})=>({x:t,y:r,x2:t+n,y2:r+i}),Tc=({x:t,y:r,x2:n,y2:i})=>({x:t,y:r,width:n-t,height:i-r}),zo=(t,r=[0,0])=>{const{x:n,y:i}=X0(t)?t.internals.positionAbsolute:fi(t,r);return{x:n,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},xc=(t,r=[0,0])=>{const{x:n,y:i}=X0(t)?t.internals.positionAbsolute:fi(t,r);return{x:n,y:i,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},Dy=(t,r)=>Tc(Ec(R0(t),R0(r))),ri=(t,r)=>{const n=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(n*i)},Bg=t=>Pa(t.width)&&Pa(t.height)&&Pa(t.x)&&Pa(t.y),Pa=t=>!isNaN(t)&&isFinite(t),vN=(t,r)=>{},pi=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),hi=({x:t,y:r},[n,i,u],d=!1,m=[1,1])=>{const f={x:(t-n)/u,y:(r-i)/u};return d?pi(f,m):f},yc=({x:t,y:r},[n,i,u])=>({x:t*u+n,y:r*u+i});function Mo(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(r*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function CN(t,r,n){if(typeof t=="string"||typeof t=="number"){const i=Mo(t,n),u=Mo(t,r);return{top:i,right:u,bottom:i,left:u,x:u*2,y:i*2}}if(typeof t=="object"){const i=Mo(t.top??t.y??0,n),u=Mo(t.bottom??t.y??0,n),d=Mo(t.left??t.x??0,r),m=Mo(t.right??t.x??0,r);return{top:i,right:m,bottom:u,left:d,x:d+m,y:i+u}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function SN(t,r,n,i,u,d){const{x:m,y:f}=yc(t,[r,n,i]),{x:g,y:x}=yc({x:t.x+t.width,y:t.y+t.height},[r,n,i]),y=u-g,b=d-x;return{left:Math.floor(m),top:Math.floor(f),right:Math.floor(y),bottom:Math.floor(b)}}const J0=(t,r,n,i,u,d)=>{const m=CN(d,r,n),f=(r-m.x)/t.width,g=(n-m.y)/t.height,x=Math.min(f,g),y=Bo(x,i,u),b=t.x+t.width/2,w=t.y+t.height/2,v=r/2-b*y,k=n/2-w*y,M=SN(t,v,k,y,r,n),T={left:Math.min(M.left-m.left,0),top:Math.min(M.top-m.top,0),right:Math.min(M.right-m.right,0),bottom:Math.min(M.bottom-m.bottom,0)};return{x:v-T.left+T.right,y:k-T.top+T.bottom,zoom:y}},oi=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Go(t){return t!=null&&t!=="parent"}function Tn(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function Oy(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function Py(t,r={width:0,height:0},n,i,u){const d={...t},m=i.get(n);if(m){const f=m.origin||u;d.x+=m.internals.positionAbsolute.x-(r.width??0)*f[0],d.y+=m.internals.positionAbsolute.y-(r.height??0)*f[1]}return d}function zg(t,r){if(t.size!==r.size)return!1;for(const n of t)if(!r.has(n))return!1;return!0}function NN(){let t,r;return{promise:new Promise((i,u)=>{t=i,r=u}),resolve:t,reject:r}}function EN(t){return{...Ty,...t||{}}}function Qs(t,{snapGrid:r=[0,0],snapToGrid:n=!1,transform:i,containerBounds:u}){const{x:d,y:m}=Ia(t),f=hi({x:d-(u?.left??0),y:m-(u?.top??0)},i),{x:g,y:x}=n?pi(f,r):f;return{xSnapped:g,ySnapped:x,...f}}const ef=t=>({width:t.offsetWidth,height:t.offsetHeight}),Iy=t=>t?.getRootNode?.()||window?.document,TN=["INPUT","SELECT","TEXTAREA"];function Hy(t){const r=t.composedPath?.()?.[0]||t.target;return r?.nodeType!==1?!1:TN.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const Uy=t=>"clientX"in t,Ia=(t,r)=>{const n=Uy(t),i=n?t.clientX:t.touches?.[0].clientX,u=n?t.clientY:t.touches?.[0].clientY;return{x:i-(r?.left??0),y:u-(r?.top??0)}},Gg=(t,r,n,i,u)=>{const d=r.querySelectorAll(`.${t}`);return!d||!d.length?null:Array.from(d).map(m=>{const f=m.getBoundingClientRect();return{id:m.getAttribute("data-handleid"),type:t,nodeId:u,position:m.getAttribute("data-handlepos"),x:(f.left-n.left)/i,y:(f.top-n.top)/i,...ef(m)}})};function By({sourceX:t,sourceY:r,targetX:n,targetY:i,sourceControlX:u,sourceControlY:d,targetControlX:m,targetControlY:f}){const g=t*.125+u*.375+m*.375+n*.125,x=r*.125+d*.375+f*.375+i*.125,y=Math.abs(g-t),b=Math.abs(x-r);return[g,x,y,b]}function Ql(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Vg({pos:t,x1:r,y1:n,x2:i,y2:u,c:d}){switch(t){case xe.Left:return[r-Ql(r-i,d),n];case xe.Right:return[r+Ql(i-r,d),n];case xe.Top:return[r,n-Ql(n-u,d)];case xe.Bottom:return[r,n+Ql(u-n,d)]}}function tf({sourceX:t,sourceY:r,sourcePosition:n=xe.Bottom,targetX:i,targetY:u,targetPosition:d=xe.Top,curvature:m=.25}){const[f,g]=Vg({pos:n,x1:t,y1:r,x2:i,y2:u,c:m}),[x,y]=Vg({pos:d,x1:i,y1:u,x2:t,y2:r,c:m}),[b,w,v,k]=By({sourceX:t,sourceY:r,targetX:i,targetY:u,sourceControlX:f,sourceControlY:g,targetControlX:x,targetControlY:y});return[`M${t},${r} C${f},${g} ${x},${y} ${i},${u}`,b,w,v,k]}function zy({sourceX:t,sourceY:r,targetX:n,targetY:i}){const u=Math.abs(n-t)/2,d=n<t?n+u:n-u,m=Math.abs(i-r)/2,f=i<r?i+m:i-m;return[d,f,u,m]}function MN({sourceNode:t,targetNode:r,selected:n=!1,zIndex:i=0,elevateOnSelect:u=!1,zIndexMode:d="basic"}){if(d==="manual")return i;const m=u&&n?i+1e3:i,f=Math.max(t.parentId||u&&t.selected?t.internals.z:0,r.parentId||u&&r.selected?r.internals.z:0);return m+f}function _N({sourceNode:t,targetNode:r,width:n,height:i,transform:u}){const d=Ec(xc(t),xc(r));d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const m={x:-u[0]/u[2],y:-u[1]/u[2],width:n/u[2],height:i/u[2]};return ri(m,Tc(d))>0}const AN=({source:t,sourceHandle:r,target:n,targetHandle:i})=>`xy-edge__${t}${r||""}-${n}${i||""}`,jN=(t,r)=>r.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),RN=(t,r,n={})=>{if(!t.source||!t.target)return r;const i=n.getEdgeId||AN;let u;return Ay(t)?u={...t}:u={...t,id:i(t)},jN(u,r)?r:(u.sourceHandle===null&&delete u.sourceHandle,u.targetHandle===null&&delete u.targetHandle,r.concat(u))};function Gy({sourceX:t,sourceY:r,targetX:n,targetY:i}){const[u,d,m,f]=zy({sourceX:t,sourceY:r,targetX:n,targetY:i});return[`M ${t},${r}L ${n},${i}`,u,d,m,f]}const Fg={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},LN=({source:t,sourcePosition:r=xe.Bottom,target:n})=>r===xe.Left||r===xe.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},qg=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function DN({source:t,sourcePosition:r=xe.Bottom,target:n,targetPosition:i=xe.Top,center:u,offset:d,stepPosition:m}){const f=Fg[r],g=Fg[i],x={x:t.x+f.x*d,y:t.y+f.y*d},y={x:n.x+g.x*d,y:n.y+g.y*d},b=LN({source:x,sourcePosition:r,target:y}),w=b.x!==0?"x":"y",v=b[w];let k=[],M,T;const E={x:0,y:0},R={x:0,y:0},[,,N,j]=zy({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(f[w]*g[w]===-1){w==="x"?(M=u.x??x.x+(y.x-x.x)*m,T=u.y??(x.y+y.y)/2):(M=u.x??(x.x+y.x)/2,T=u.y??x.y+(y.y-x.y)*m);const P=[{x:M,y:x.y},{x:M,y:y.y}],O=[{x:x.x,y:T},{x:y.x,y:T}];f[w]===v?k=w==="x"?P:O:k=w==="x"?O:P}else{const P=[{x:x.x,y:y.y}],O=[{x:y.x,y:x.y}];if(w==="x"?k=f.x===v?O:P:k=f.y===v?P:O,r===i){const Y=Math.abs(t[w]-n[w]);if(Y<=d){const J=Math.min(d-1,d-Y);f[w]===v?E[w]=(x[w]>t[w]?-1:1)*J:R[w]=(y[w]>n[w]?-1:1)*J}}if(r!==i){const Y=w==="x"?"y":"x",J=f[w]===g[Y],z=x[Y]>y[Y],V=x[Y]<y[Y];(f[w]===1&&(!J&&z||J&&V)||f[w]!==1&&(!J&&V||J&&z))&&(k=w==="x"?P:O)}const H={x:x.x+E.x,y:x.y+E.y},q={x:y.x+R.x,y:y.y+R.y},G=Math.max(Math.abs(H.x-k[0].x),Math.abs(q.x-k[0].x)),F=Math.max(Math.abs(H.y-k[0].y),Math.abs(q.y-k[0].y));G>=F?(M=(H.x+q.x)/2,T=k[0].y):(M=k[0].x,T=(H.y+q.y)/2)}return[[t,{x:x.x+E.x,y:x.y+E.y},...k,{x:y.x+R.x,y:y.y+R.y},n],M,T,N,j]}function ON(t,r,n,i){const u=Math.min(qg(t,r)/2,qg(r,n)/2,i),{x:d,y:m}=r;if(t.x===d&&d===n.x||t.y===m&&m===n.y)return`L${d} ${m}`;if(t.y===m){const x=t.x<n.x?-1:1,y=t.y<n.y?1:-1;return`L ${d+u*x},${m}Q ${d},${m} ${d},${m+u*y}`}const f=t.x<n.x?1:-1,g=t.y<n.y?-1:1;return`L ${d},${m+u*g}Q ${d},${m} ${d+u*f},${m}`}function L0({sourceX:t,sourceY:r,sourcePosition:n=xe.Bottom,targetX:i,targetY:u,targetPosition:d=xe.Top,borderRadius:m=5,centerX:f,centerY:g,offset:x=20,stepPosition:y=.5}){const[b,w,v,k,M]=DN({source:{x:t,y:r},sourcePosition:n,target:{x:i,y:u},targetPosition:d,center:{x:f,y:g},offset:x,stepPosition:y});return[b.reduce((E,R,N)=>{let j="";return N>0&&N<b.length-1?j=ON(b[N-1],R,b[N+1],m):j=`${N===0?"M":"L"}${R.x} ${R.y}`,E+=j,E},""),w,v,k,M]}function $g(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function PN(t){const{sourceNode:r,targetNode:n}=t;if(!$g(r)||!$g(n))return null;const i=r.internals.handleBounds||Yg(r.handles),u=n.internals.handleBounds||Yg(n.handles),d=Wg(i?.source??[],t.sourceHandle),m=Wg(t.connectionMode===Uo.Strict?u?.target??[]:(u?.target??[]).concat(u?.source??[]),t.targetHandle);if(!d||!m)return t.onError?.("008",Qa.error008(d?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const f=d?.position||xe.Bottom,g=m?.position||xe.Top,x=zr(r,d,f),y=zr(n,m,g);return{sourceX:x.x,sourceY:x.y,targetX:y.x,targetY:y.y,sourcePosition:f,targetPosition:g}}function Yg(t){if(!t)return null;const r=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&n.push(i);return{source:r,target:n}}function zr(t,r,n=xe.Left,i=!1){const u=(r?.x??0)+t.internals.positionAbsolute.x,d=(r?.y??0)+t.internals.positionAbsolute.y,{width:m,height:f}=r??Tn(t);if(i)return{x:u+m/2,y:d+f/2};switch(r?.position??n){case xe.Top:return{x:u+m/2,y:d};case xe.Right:return{x:u+m,y:d+f/2};case xe.Bottom:return{x:u+m/2,y:d+f};case xe.Left:return{x:u,y:d+f/2}}}function Wg(t,r){return t&&(r?t.find(n=>n.id===r):t[0])||null}function D0(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function IN(t,{id:r,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:u}){const d=new Set;return t.reduce((m,f)=>([f.markerStart||i,f.markerEnd||u].forEach(g=>{if(g&&typeof g=="object"){const x=D0(g,r);d.has(x)||(m.push({id:x,color:g.color||n,...g}),d.add(x))}}),m),[]).sort((m,f)=>m.id.localeCompare(f.id))}const Vy=1e3,HN=10,af={nodeOrigin:[0,0],nodeExtent:ai,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},UN={...af,checkEquality:!0};function nf(t,r){const n={...t};for(const i in r)r[i]!==void 0&&(n[i]=r[i]);return n}function BN(t,r,n){const i=nf(af,n);for(const u of t.values())if(u.parentId)of(u,t,r,i);else{const d=fi(u,i.nodeOrigin),m=Go(u.extent)?u.extent:i.nodeExtent,f=Br(d,m,Tn(u));u.internals.positionAbsolute=f}}function zN(t,r){if(!t.handles)return t.measured?r?.internals.handleBounds:void 0;const n=[],i=[];for(const u of t.handles){const d={id:u.id,width:u.width??1,height:u.height??1,nodeId:t.id,x:u.x,y:u.y,position:u.position,type:u.type};u.type==="source"?n.push(d):u.type==="target"&&i.push(d)}return{source:n,target:i}}function rf(t){return t==="manual"}function O0(t,r,n,i={}){const u=nf(UN,i),d={i:0},m=new Map(r),f=u?.elevateNodesOnSelect&&!rf(u.zIndexMode)?Vy:0;let g=t.length>0;r.clear(),n.clear();for(const x of t){let y=m.get(x.id);if(u.checkEquality&&x===y?.internals.userNode)r.set(x.id,y);else{const b=fi(x,u.nodeOrigin),w=Go(x.extent)?x.extent:u.nodeExtent,v=Br(b,w,Tn(x));y={...u.defaults,...x,measured:{width:x.measured?.width,height:x.measured?.height},internals:{positionAbsolute:v,handleBounds:zN(x,y),z:Fy(x,f,u.zIndexMode),userNode:x}},r.set(x.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(g=!1),x.parentId&&of(y,r,n,i,d)}return g}function GN(t,r){if(!t.parentId)return;const n=r.get(t.parentId);n?n.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function of(t,r,n,i,u){const{elevateNodesOnSelect:d,nodeOrigin:m,nodeExtent:f,zIndexMode:g}=nf(af,i),x=t.parentId,y=r.get(x);if(!y){console.warn(`Parent node ${x} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}GN(t,n),u&&!y.parentId&&y.internals.rootParentIndex===void 0&&g==="auto"&&(y.internals.rootParentIndex=++u.i,y.internals.z=y.internals.z+u.i*HN),u&&y.internals.rootParentIndex!==void 0&&(u.i=y.internals.rootParentIndex);const b=d&&!rf(g)?Vy:0,{x:w,y:v,z:k}=VN(t,y,m,f,b,g),{positionAbsolute:M}=t.internals,T=w!==M.x||v!==M.y;(T||k!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:T?{x:w,y:v}:M,z:k}})}function Fy(t,r,n){const i=Pa(t.zIndex)?t.zIndex:0;return rf(n)?i:i+(t.selected?r:0)}function VN(t,r,n,i,u,d){const{x:m,y:f}=r.internals.positionAbsolute,g=Tn(t),x=fi(t,n),y=Go(t.extent)?Br(x,t.extent,g):x;let b=Br({x:m+y.x,y:f+y.y},i,g);t.extent==="parent"&&(b=Ry(b,g,r));const w=Fy(t,u,d),v=r.internals.z??0;return{x:b.x,y:b.y,z:v>=w?v+1:w}}function sf(t,r,n,i=[0,0]){const u=[],d=new Map;for(const m of t){const f=r.get(m.parentId);if(!f)continue;const g=d.get(m.parentId)?.expandedRect??zo(f),x=Dy(g,m.rect);d.set(m.parentId,{expandedRect:x,parent:f})}return d.size>0&&d.forEach(({expandedRect:m,parent:f},g)=>{const x=f.internals.positionAbsolute,y=Tn(f),b=f.origin??i,w=m.x<x.x?Math.round(Math.abs(x.x-m.x)):0,v=m.y<x.y?Math.round(Math.abs(x.y-m.y)):0,k=Math.max(y.width,Math.round(m.width)),M=Math.max(y.height,Math.round(m.height)),T=(k-y.width)*b[0],E=(M-y.height)*b[1];(w>0||v>0||T||E)&&(u.push({id:g,type:"position",position:{x:f.position.x-w+T,y:f.position.y-v+E}}),n.get(g)?.forEach(R=>{t.some(N=>N.id===R.id)||u.push({id:R.id,type:"position",position:{x:R.position.x+w,y:R.position.y+v}})})),(y.width<m.width||y.height<m.height||w||v)&&u.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:k+(w?b[0]*w-T:0),height:M+(v?b[1]*v-E:0)}})}),u}function FN(t,r,n,i,u,d,m){const f=i?.querySelector(".xyflow__viewport");let g=!1;if(!f)return{changes:[],updatedInternals:g};const x=[],y=window.getComputedStyle(f),{m22:b}=new window.DOMMatrixReadOnly(y.transform),w=[];for(const v of t.values()){const k=r.get(v.id);if(!k)continue;if(k.hidden){r.set(k.id,{...k,internals:{...k.internals,handleBounds:void 0}}),g=!0;continue}const M=ef(v.nodeElement),T=k.measured.width!==M.width||k.measured.height!==M.height;if(!!(M.width&&M.height&&(T||!k.internals.handleBounds||v.force))){const R=v.nodeElement.getBoundingClientRect(),N=Go(k.extent)?k.extent:d;let{positionAbsolute:j}=k.internals;k.parentId&&k.extent==="parent"?j=Ry(j,M,r.get(k.parentId)):N&&(j=Br(j,N,M));const I={...k,measured:M,internals:{...k.internals,positionAbsolute:j,handleBounds:{source:Gg("source",v.nodeElement,R,b,k.id),target:Gg("target",v.nodeElement,R,b,k.id)}}};r.set(k.id,I),k.parentId&&of(I,r,n,{nodeOrigin:u,zIndexMode:m}),g=!0,T&&(x.push({id:k.id,type:"dimensions",dimensions:M}),k.expandParent&&k.parentId&&w.push({id:k.id,parentId:k.parentId,rect:zo(I,u)}))}}if(w.length>0){const v=sf(w,r,n,u);x.push(...v)}return{changes:x,updatedInternals:g}}async function qN({delta:t,panZoom:r,transform:n,translateExtent:i,width:u,height:d}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const m=await r.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[u,d]],i),f=!!m&&(m.x!==n[0]||m.y!==n[1]||m.k!==n[2]);return Promise.resolve(f)}function Kg(t,r,n,i,u,d){let m=u;const f=i.get(m)||new Map;i.set(m,f.set(n,r)),m=`${u}-${t}`;const g=i.get(m)||new Map;if(i.set(m,g.set(n,r)),d){m=`${u}-${t}-${d}`;const x=i.get(m)||new Map;i.set(m,x.set(n,r))}}function qy(t,r,n){t.clear(),r.clear();for(const i of n){const{source:u,target:d,sourceHandle:m=null,targetHandle:f=null}=i,g={edgeId:i.id,source:u,target:d,sourceHandle:m,targetHandle:f},x=`${u}-${m}--${d}-${f}`,y=`${d}-${f}--${u}-${m}`;Kg("source",g,y,t,u,m),Kg("target",g,x,t,d,f),r.set(i.id,i)}}function $y(t,r){if(!t.parentId)return!1;const n=r.get(t.parentId);return n?n.selected?!0:$y(n,r):!1}function Qg(t,r,n){let i=t;do{if(i?.matches?.(r))return!0;if(i===n)return!1;i=i?.parentElement}while(i);return!1}function $N(t,r,n,i){const u=new Map;for(const[d,m]of t)if((m.selected||m.id===i)&&(!m.parentId||!$y(m,t))&&(m.draggable||r&&typeof m.draggable>"u")){const f=t.get(d);f&&u.set(d,{id:d,position:f.position||{x:0,y:0},distance:{x:n.x-f.internals.positionAbsolute.x,y:n.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return u}function o0({nodeId:t,dragItems:r,nodeLookup:n,dragging:i=!0}){const u=[];for(const[m,f]of r){const g=n.get(m)?.internals.userNode;g&&u.push({...g,position:f.position,dragging:i})}if(!t)return[u[0],u];const d=n.get(t)?.internals.userNode;return[d?{...d,position:r.get(t)?.position||d.position,dragging:i}:u[0],u]}function YN({dragItems:t,snapGrid:r,x:n,y:i}){const u=t.values().next().value;if(!u)return null;const d={x:n-u.distance.x,y:i-u.distance.y},m=pi(d,r);return{x:m.x-d.x,y:m.y-d.y}}function WN({onNodeMouseDown:t,getStoreItems:r,onDragStart:n,onDrag:i,onDragStop:u}){let d={x:null,y:null},m=0,f=new Map,g=!1,x={x:0,y:0},y=null,b=!1,w=null,v=!1,k=!1,M=null;function T({noDragClassName:R,handleSelector:N,domNode:j,isSelectable:I,nodeId:P,nodeClickDistance:O=0}){w=ha(j);function H({x:Y,y:J}){const{nodeLookup:z,nodeExtent:V,snapGrid:S,snapToGrid:_,nodeOrigin:U,onNodeDrag:W,onSelectionDrag:X,onError:D,updateNodePositions:$}=r();d={x:Y,y:J};let ee=!1;const A=f.size>1,Z=A&&V?R0(mi(f)):null,se=A&&_?YN({dragItems:f,snapGrid:S,x:Y,y:J}):null;for(const[ue,ie]of f){if(!z.has(ue))continue;let pe={x:Y-ie.distance.x,y:J-ie.distance.y};_&&(pe=se?{x:Math.round(pe.x+se.x),y:Math.round(pe.y+se.y)}:pi(pe,S));let be=null;if(A&&V&&!ie.extent&&Z){const{positionAbsolute:ke}=ie.internals,Ce=ke.x-Z.x+V[0][0],Ae=ke.x+ie.measured.width-Z.x2+V[1][0],Le=ke.y-Z.y+V[0][1],st=ke.y+ie.measured.height-Z.y2+V[1][1];be=[[Ce,Le],[Ae,st]]}const{position:we,positionAbsolute:ye}=jy({nodeId:ue,nextPosition:pe,nodeLookup:z,nodeExtent:be||V,nodeOrigin:U,onError:D});ee=ee||ie.position.x!==we.x||ie.position.y!==we.y,ie.position=we,ie.internals.positionAbsolute=ye}if(k=k||ee,!!ee&&($(f,!0),M&&(i||W||!P&&X))){const[ue,ie]=o0({nodeId:P,dragItems:f,nodeLookup:z});i?.(M,f,ue,ie),W?.(M,ue,ie),P||X?.(M,ie)}}async function q(){if(!y)return;const{transform:Y,panBy:J,autoPanSpeed:z,autoPanOnNodeDrag:V}=r();if(!V){g=!1,cancelAnimationFrame(m);return}const[S,_]=Ly(x,y,z);(S!==0||_!==0)&&(d.x=(d.x??0)-S/Y[2],d.y=(d.y??0)-_/Y[2],await J({x:S,y:_})&&H(d)),m=requestAnimationFrame(q)}function G(Y){const{nodeLookup:J,multiSelectionActive:z,nodesDraggable:V,transform:S,snapGrid:_,snapToGrid:U,selectNodesOnDrag:W,onNodeDragStart:X,onSelectionDragStart:D,unselectNodesAndEdges:$}=r();b=!0,(!W||!I)&&!z&&P&&(J.get(P)?.selected||$()),I&&W&&P&&t?.(P);const ee=Qs(Y.sourceEvent,{transform:S,snapGrid:_,snapToGrid:U,containerBounds:y});if(d=ee,f=$N(J,V,ee,P),f.size>0&&(n||X||!P&&D)){const[A,Z]=o0({nodeId:P,dragItems:f,nodeLookup:J});n?.(Y.sourceEvent,f,A,Z),X?.(Y.sourceEvent,A,Z),P||D?.(Y.sourceEvent,Z)}}const F=uy().clickDistance(O).on("start",Y=>{const{domNode:J,nodeDragThreshold:z,transform:V,snapGrid:S,snapToGrid:_}=r();y=J?.getBoundingClientRect()||null,v=!1,k=!1,M=Y.sourceEvent,z===0&&G(Y),d=Qs(Y.sourceEvent,{transform:V,snapGrid:S,snapToGrid:_,containerBounds:y}),x=Ia(Y.sourceEvent,y)}).on("drag",Y=>{const{autoPanOnNodeDrag:J,transform:z,snapGrid:V,snapToGrid:S,nodeDragThreshold:_,nodeLookup:U}=r(),W=Qs(Y.sourceEvent,{transform:z,snapGrid:V,snapToGrid:S,containerBounds:y});if(M=Y.sourceEvent,(Y.sourceEvent.type==="touchmove"&&Y.sourceEvent.touches.length>1||P&&!U.has(P))&&(v=!0),!v){if(!g&&J&&b&&(g=!0,q()),!b){const X=Ia(Y.sourceEvent,y),D=X.x-x.x,$=X.y-x.y;Math.sqrt(D*D+$*$)>_&&G(Y)}(d.x!==W.xSnapped||d.y!==W.ySnapped)&&f&&b&&(x=Ia(Y.sourceEvent,y),H(W))}}).on("end",Y=>{if(!(!b||v)&&(g=!1,b=!1,cancelAnimationFrame(m),f.size>0)){const{nodeLookup:J,updateNodePositions:z,onNodeDragStop:V,onSelectionDragStop:S}=r();if(k&&(z(f,!1),k=!1),u||V||!P&&S){const[_,U]=o0({nodeId:P,dragItems:f,nodeLookup:J,dragging:!1});u?.(Y.sourceEvent,f,_,U),V?.(Y.sourceEvent,_,U),P||S?.(Y.sourceEvent,U)}}}).filter(Y=>{const J=Y.target;return!Y.button&&(!R||!Qg(J,`.${R}`,j))&&(!N||Qg(J,N,j))});w.call(F)}function E(){w?.on(".drag",null)}return{update:T,destroy:E}}function KN(t,r,n){const i=[],u={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const d of r.values())ri(u,zo(d))>0&&i.push(d);return i}const QN=250;function XN(t,r,n,i){let u=[],d=1/0;const m=KN(t,n,r+QN);for(const f of m){const g=[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]];for(const x of g){if(i.nodeId===x.nodeId&&i.type===x.type&&i.id===x.id)continue;const{x:y,y:b}=zr(f,x,x.position,!0),w=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(b-t.y,2));w>r||(w<d?(u=[{...x,x:y,y:b}],d=w):w===d&&u.push({...x,x:y,y:b}))}}if(!u.length)return null;if(u.length>1){const f=i.type==="source"?"target":"source";return u.find(g=>g.type===f)??u[0]}return u[0]}function Yy(t,r,n,i,u,d=!1){const m=i.get(t);if(!m)return null;const f=u==="strict"?m.internals.handleBounds?.[r]:[...m.internals.handleBounds?.source??[],...m.internals.handleBounds?.target??[]],g=(n?f?.find(x=>x.id===n):f?.[0])??null;return g&&d?{...g,...zr(m,g,g.position,!0)}:g}function Wy(t,r){return t||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function ZN(t,r){let n=null;return r?n=!0:t&&!r&&(n=!1),n}const Ky=()=>!0;function JN(t,{connectionMode:r,connectionRadius:n,handleId:i,nodeId:u,edgeUpdaterType:d,isTarget:m,domNode:f,nodeLookup:g,lib:x,autoPanOnConnect:y,flowId:b,panBy:w,cancelConnection:v,onConnectStart:k,onConnect:M,onConnectEnd:T,isValidConnection:E=Ky,onReconnectEnd:R,updateConnection:N,getTransform:j,getFromHandle:I,autoPanSpeed:P,dragThreshold:O=1,handleDomNode:H}){const q=Iy(t.target);let G=0,F;const{x:Y,y:J}=Ia(t),z=Wy(d,H),V=f?.getBoundingClientRect();let S=!1;if(!V||!z)return;const _=Yy(u,z,i,g,r);if(!_)return;let U=Ia(t,V),W=!1,X=null,D=!1,$=null;function ee(){if(!y||!V)return;const[we,ye]=Ly(U,V,P);w({x:we,y:ye}),G=requestAnimationFrame(ee)}const A={..._,nodeId:u,type:z,position:_.position},Z=g.get(u);let ue={inProgress:!0,isValid:null,from:zr(Z,A,xe.Left,!0),fromHandle:A,fromPosition:A.position,fromNode:Z,to:U,toHandle:null,toPosition:Hg[A.position],toNode:null,pointer:U};function ie(){S=!0,N(ue),k?.(t,{nodeId:u,handleId:i,handleType:z})}O===0&&ie();function pe(we){if(!S){const{x:st,y:yt}=Ia(we),Rt=st-Y,vt=yt-J;if(!(Rt*Rt+vt*vt>O*O))return;ie()}if(!I()||!A){be(we);return}const ye=j();U=Ia(we,V),F=XN(hi(U,ye,!1,[1,1]),n,g,A),W||(ee(),W=!0);const ke=Qy(we,{handle:F,connectionMode:r,fromNodeId:u,fromHandleId:i,fromType:m?"target":"source",isValidConnection:E,doc:q,lib:x,flowId:b,nodeLookup:g});$=ke.handleDomNode,X=ke.connection,D=ZN(!!F,ke.isValid);const Ce=g.get(u),Ae=Ce?zr(Ce,A,xe.Left,!0):ue.from,Le={...ue,from:Ae,isValid:D,to:ke.toHandle&&D?yc({x:ke.toHandle.x,y:ke.toHandle.y},ye):U,toHandle:ke.toHandle,toPosition:D&&ke.toHandle?ke.toHandle.position:Hg[A.position],toNode:ke.toHandle?g.get(ke.toHandle.nodeId):null,pointer:U};N(Le),ue=Le}function be(we){if(!("touches"in we&&we.touches.length>0)){if(S){(F||$)&&X&&D&&M?.(X);const{inProgress:ye,...ke}=ue,Ce={...ke,toPosition:ue.toHandle?ue.toPosition:null};T?.(we,Ce),d&&R?.(we,Ce)}v(),cancelAnimationFrame(G),W=!1,D=!1,X=null,$=null,q.removeEventListener("mousemove",pe),q.removeEventListener("mouseup",be),q.removeEventListener("touchmove",pe),q.removeEventListener("touchend",be)}}q.addEventListener("mousemove",pe),q.addEventListener("mouseup",be),q.addEventListener("touchmove",pe),q.addEventListener("touchend",be)}function Qy(t,{handle:r,connectionMode:n,fromNodeId:i,fromHandleId:u,fromType:d,doc:m,lib:f,flowId:g,isValidConnection:x=Ky,nodeLookup:y}){const b=d==="target",w=r?m.querySelector(`.${f}-flow__handle[data-id="${g}-${r?.nodeId}-${r?.id}-${r?.type}"]`):null,{x:v,y:k}=Ia(t),M=m.elementFromPoint(v,k),T=M?.classList.contains(`${f}-flow__handle`)?M:w,E={handleDomNode:T,isValid:!1,connection:null,toHandle:null};if(T){const R=Wy(void 0,T),N=T.getAttribute("data-nodeid"),j=T.getAttribute("data-handleid"),I=T.classList.contains("connectable"),P=T.classList.contains("connectableend");if(!N||!R)return E;const O={source:b?N:i,sourceHandle:b?j:u,target:b?i:N,targetHandle:b?u:j};E.connection=O;const q=I&&P&&(n===Uo.Strict?b&&R==="source"||!b&&R==="target":N!==i||j!==u);E.isValid=q&&x(O),E.toHandle=Yy(N,R,j,y,n,!0)}return E}const P0={onPointerDown:JN,isValid:Qy};function eE({domNode:t,panZoom:r,getTransform:n,getViewScale:i}){const u=ha(t);function d({translateExtent:f,width:g,height:x,zoomStep:y=1,pannable:b=!0,zoomable:w=!0,inversePan:v=!1}){const k=N=>{if(N.sourceEvent.type!=="wheel"||!r)return;const j=n(),I=N.sourceEvent.ctrlKey&&oi()?10:1,P=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*y,O=j[2]*Math.pow(2,P*I);r.scaleTo(O)};let M=[0,0];const T=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(M=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},E=N=>{const j=n();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!r)return;const I=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],P=[I[0]-M[0],I[1]-M[1]];M=I;const O=i()*Math.max(j[2],Math.log(j[2]))*(v?-1:1),H={x:j[0]-P[0]*O,y:j[1]-P[1]*O},q=[[0,0],[g,x]];r.setViewportConstrained({x:H.x,y:H.y,zoom:j[2]},q,f)},R=Ny().on("start",T).on("zoom",b?E:null).on("zoom.wheel",w?k:null);u.call(R,{})}function m(){u.on("zoom",null)}return{update:d,destroy:m,pointer:La}}const Mc=t=>({x:t.x,y:t.y,zoom:t.k}),s0=({x:t,y:r,zoom:n})=>Nc.translate(t,r).scale(n),Ao=(t,r)=>t.target.closest(`.${r}`),Xy=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),tE=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,i0=(t,r=0,n=tE,i=()=>{})=>{const u=typeof r=="number"&&r>0;return u||i(),u?t.transition().duration(r).ease(n).on("end",i):t},Zy=t=>{const r=t.ctrlKey&&oi()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function aE({zoomPanValues:t,noWheelClassName:r,d3Selection:n,d3Zoom:i,panOnScrollMode:u,panOnScrollSpeed:d,zoomOnPinch:m,onPanZoomStart:f,onPanZoom:g,onPanZoomEnd:x}){return y=>{if(Ao(y,r))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const b=n.property("__zoom").k||1;if(y.ctrlKey&&m){const T=La(y),E=Zy(y),R=b*Math.pow(2,E);i.scaleTo(n,R,T,y);return}const w=y.deltaMode===1?20:1;let v=u===Dr.Vertical?0:y.deltaX*w,k=u===Dr.Horizontal?0:y.deltaY*w;!oi()&&y.shiftKey&&u!==Dr.Vertical&&(v=y.deltaY*w,k=0),i.translateBy(n,-(v/b)*d,-(k/b)*d,{internal:!0});const M=Mc(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(g?.(y,M),t.panScrollTimeout=setTimeout(()=>{x?.(y,M),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,f?.(y,M))}}function nE({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:n}){return function(i,u){const d=i.type==="wheel",m=!r&&d&&!i.ctrlKey,f=Ao(i,t);if(i.ctrlKey&&d&&f&&i.preventDefault(),m||f)return null;i.preventDefault(),n.call(this,i,u)}}function rE({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:n}){return i=>{if(i.sourceEvent?.internal)return;const u=Mc(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=u,i.sourceEvent?.type==="mousedown"&&r(!0),n&&n?.(i.sourceEvent,u)}}function oE({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:n,onTransformChange:i,onPanZoom:u}){return d=>{t.usedRightMouseButton=!!(n&&Xy(r,t.mouseButton??0)),d.sourceEvent?.sync||i([d.transform.x,d.transform.y,d.transform.k]),u&&!d.sourceEvent?.internal&&u?.(d.sourceEvent,Mc(d.transform))}}function sE({zoomPanValues:t,panOnDrag:r,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:u,onPaneContextMenu:d}){return m=>{if(!m.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,d&&Xy(r,t.mouseButton??0)&&!t.usedRightMouseButton&&m.sourceEvent&&d(m.sourceEvent),t.usedRightMouseButton=!1,i(!1),u)){const f=Mc(m.transform);t.prevViewport=f,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{u?.(m.sourceEvent,f)},n?150:0)}}}function iE({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:n,panOnDrag:i,panOnScroll:u,zoomOnDoubleClick:d,userSelectionActive:m,noWheelClassName:f,noPanClassName:g,lib:x,connectionInProgress:y}){return b=>{const w=t||r,v=n&&b.ctrlKey,k=b.type==="wheel";if(b.button===1&&b.type==="mousedown"&&(Ao(b,`${x}-flow__node`)||Ao(b,`${x}-flow__edge`)))return!0;if(!i&&!w&&!u&&!d&&!n||m||y&&!k||Ao(b,f)&&k||Ao(b,g)&&(!k||u&&k&&!t)||!n&&b.ctrlKey&&k)return!1;if(!n&&b.type==="touchstart"&&b.touches?.length>1)return b.preventDefault(),!1;if(!w&&!u&&!v&&k||!i&&(b.type==="mousedown"||b.type==="touchstart")||Array.isArray(i)&&!i.includes(b.button)&&b.type==="mousedown")return!1;const M=Array.isArray(i)&&i.includes(b.button)||!b.button||b.button<=1;return(!b.ctrlKey||k)&&M}}function lE({domNode:t,minZoom:r,maxZoom:n,translateExtent:i,viewport:u,onPanZoom:d,onPanZoomStart:m,onPanZoomEnd:f,onDraggingChange:g}){const x={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),b=Ny().scaleExtent([r,n]).translateExtent(i),w=ha(t).call(b);R({x:u.x,y:u.y,zoom:Bo(u.zoom,r,n)},[[0,0],[y.width,y.height]],i);const v=w.on("wheel.zoom"),k=w.on("dblclick.zoom");b.wheelDelta(Zy);function M(F,Y){return w?new Promise(J=>{b?.interpolate(Y?.interpolate==="linear"?Ks:nc).transform(i0(w,Y?.duration,Y?.ease,()=>J(!0)),F)}):Promise.resolve(!1)}function T({noWheelClassName:F,noPanClassName:Y,onPaneContextMenu:J,userSelectionActive:z,panOnScroll:V,panOnDrag:S,panOnScrollMode:_,panOnScrollSpeed:U,preventScrolling:W,zoomOnPinch:X,zoomOnScroll:D,zoomOnDoubleClick:$,zoomActivationKeyPressed:ee,lib:A,onTransformChange:Z,connectionInProgress:se,paneClickDistance:ue,selectionOnDrag:ie}){z&&!x.isZoomingOrPanning&&E();const pe=V&&!ee&&!z;b.clickDistance(ie?1/0:!Pa(ue)||ue<0?0:ue);const be=pe?aE({zoomPanValues:x,noWheelClassName:F,d3Selection:w,d3Zoom:b,panOnScrollMode:_,panOnScrollSpeed:U,zoomOnPinch:X,onPanZoomStart:m,onPanZoom:d,onPanZoomEnd:f}):nE({noWheelClassName:F,preventScrolling:W,d3ZoomHandler:v});if(w.on("wheel.zoom",be,{passive:!1}),!z){const ye=rE({zoomPanValues:x,onDraggingChange:g,onPanZoomStart:m});b.on("start",ye);const ke=oE({zoomPanValues:x,panOnDrag:S,onPaneContextMenu:!!J,onPanZoom:d,onTransformChange:Z});b.on("zoom",ke);const Ce=sE({zoomPanValues:x,panOnDrag:S,panOnScroll:V,onPaneContextMenu:J,onPanZoomEnd:f,onDraggingChange:g});b.on("end",Ce)}const we=iE({zoomActivationKeyPressed:ee,panOnDrag:S,zoomOnScroll:D,panOnScroll:V,zoomOnDoubleClick:$,zoomOnPinch:X,userSelectionActive:z,noPanClassName:Y,noWheelClassName:F,lib:A,connectionInProgress:se});b.filter(we),$?w.on("dblclick.zoom",k):w.on("dblclick.zoom",null)}function E(){b.on("zoom",null)}async function R(F,Y,J){const z=s0(F),V=b?.constrain()(z,Y,J);return V&&await M(V),new Promise(S=>S(V))}async function N(F,Y){const J=s0(F);return await M(J,Y),new Promise(z=>z(J))}function j(F){if(w){const Y=s0(F),J=w.property("__zoom");(J.k!==F.zoom||J.x!==F.x||J.y!==F.y)&&b?.transform(w,Y,null,{sync:!0})}}function I(){const F=w?Sy(w.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function P(F,Y){return w?new Promise(J=>{b?.interpolate(Y?.interpolate==="linear"?Ks:nc).scaleTo(i0(w,Y?.duration,Y?.ease,()=>J(!0)),F)}):Promise.resolve(!1)}function O(F,Y){return w?new Promise(J=>{b?.interpolate(Y?.interpolate==="linear"?Ks:nc).scaleBy(i0(w,Y?.duration,Y?.ease,()=>J(!0)),F)}):Promise.resolve(!1)}function H(F){b?.scaleExtent(F)}function q(F){b?.translateExtent(F)}function G(F){const Y=!Pa(F)||F<0?0:F;b?.clickDistance(Y)}return{update:T,destroy:E,setViewport:N,setViewportConstrained:R,getViewport:I,scaleTo:P,scaleBy:O,setScaleExtent:H,setTranslateExtent:q,syncViewport:j,setClickDistance:G}}var Vo;(function(t){t.Line="line",t.Handle="handle"})(Vo||(Vo={}));function cE({width:t,prevWidth:r,height:n,prevHeight:i,affectsX:u,affectsY:d}){const m=t-r,f=n-i,g=[m>0?1:m<0?-1:0,f>0?1:f<0?-1:0];return m&&u&&(g[0]=g[0]*-1),f&&d&&(g[1]=g[1]*-1),g}function Xg(t){const r=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),u=t.includes("top");return{isHorizontal:r,isVertical:n,affectsX:i,affectsY:u}}function ar(t,r){return Math.max(0,r-t)}function nr(t,r){return Math.max(0,t-r)}function Xl(t,r,n){return Math.max(0,r-t,t-n)}function Zg(t,r){return t?!r:r}function uE(t,r,n,i,u,d,m,f){let{affectsX:g,affectsY:x}=r;const{isHorizontal:y,isVertical:b}=r,w=y&&b,{xSnapped:v,ySnapped:k}=n,{minWidth:M,maxWidth:T,minHeight:E,maxHeight:R}=i,{x:N,y:j,width:I,height:P,aspectRatio:O}=t;let H=Math.floor(y?v-t.pointerX:0),q=Math.floor(b?k-t.pointerY:0);const G=I+(g?-H:H),F=P+(x?-q:q),Y=-d[0]*I,J=-d[1]*P;let z=Xl(G,M,T),V=Xl(F,E,R);if(m){let U=0,W=0;g&&H<0?U=ar(N+H+Y,m[0][0]):!g&&H>0&&(U=nr(N+G+Y,m[1][0])),x&&q<0?W=ar(j+q+J,m[0][1]):!x&&q>0&&(W=nr(j+F+J,m[1][1])),z=Math.max(z,U),V=Math.max(V,W)}if(f){let U=0,W=0;g&&H>0?U=nr(N+H,f[0][0]):!g&&H<0&&(U=ar(N+G,f[1][0])),x&&q>0?W=nr(j+q,f[0][1]):!x&&q<0&&(W=ar(j+F,f[1][1])),z=Math.max(z,U),V=Math.max(V,W)}if(u){if(y){const U=Xl(G/O,E,R)*O;if(z=Math.max(z,U),m){let W=0;!g&&!x||g&&!x&&w?W=nr(j+J+G/O,m[1][1])*O:W=ar(j+J+(g?H:-H)/O,m[0][1])*O,z=Math.max(z,W)}if(f){let W=0;!g&&!x||g&&!x&&w?W=ar(j+G/O,f[1][1])*O:W=nr(j+(g?H:-H)/O,f[0][1])*O,z=Math.max(z,W)}}if(b){const U=Xl(F*O,M,T)/O;if(V=Math.max(V,U),m){let W=0;!g&&!x||x&&!g&&w?W=nr(N+F*O+Y,m[1][0])/O:W=ar(N+(x?q:-q)*O+Y,m[0][0])/O,V=Math.max(V,W)}if(f){let W=0;!g&&!x||x&&!g&&w?W=ar(N+F*O,f[1][0])/O:W=nr(N+(x?q:-q)*O,f[0][0])/O,V=Math.max(V,W)}}}q=q+(q<0?V:-V),H=H+(H<0?z:-z),u&&(w?G>F*O?q=(Zg(g,x)?-H:H)/O:H=(Zg(g,x)?-q:q)*O:y?(q=H/O,x=g):(H=q*O,g=x));const S=g?N+H:N,_=x?j+q:j;return{width:I+(g?-H:H),height:P+(x?-q:q),x:d[0]*H*(g?-1:1)+S,y:d[1]*q*(x?-1:1)+_}}const Jy={width:0,height:0,x:0,y:0},dE={...Jy,pointerX:0,pointerY:0,aspectRatio:1};function fE(t){return[[0,0],[t.measured.width,t.measured.height]]}function mE(t,r,n){const i=r.position.x+t.position.x,u=r.position.y+t.position.y,d=t.measured.width??0,m=t.measured.height??0,f=n[0]*d,g=n[1]*m;return[[i-f,u-g],[i+d-f,u+m-g]]}function pE({domNode:t,nodeId:r,getStoreItems:n,onChange:i,onEnd:u}){const d=ha(t);let m={controlDirection:Xg("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:x,boundaries:y,keepAspectRatio:b,resizeDirection:w,onResizeStart:v,onResize:k,onResizeEnd:M,shouldResize:T}){let E={...Jy},R={...dE};m={boundaries:y,resizeDirection:w,keepAspectRatio:b,controlDirection:Xg(x)};let N,j=null,I=[],P,O,H,q=!1;const G=uy().on("start",F=>{const{nodeLookup:Y,transform:J,snapGrid:z,snapToGrid:V,nodeOrigin:S,paneDomNode:_}=n();if(N=Y.get(r),!N)return;j=_?.getBoundingClientRect()??null;const{xSnapped:U,ySnapped:W}=Qs(F.sourceEvent,{transform:J,snapGrid:z,snapToGrid:V,containerBounds:j});E={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},R={...E,pointerX:U,pointerY:W,aspectRatio:E.width/E.height},P=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(P=Y.get(N.parentId),O=P&&N.extent==="parent"?fE(P):void 0),I=[],H=void 0;for(const[X,D]of Y)if(D.parentId===r&&(I.push({id:X,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const $=mE(D,N,D.origin??S);H?H=[[Math.min($[0][0],H[0][0]),Math.min($[0][1],H[0][1])],[Math.max($[1][0],H[1][0]),Math.max($[1][1],H[1][1])]]:H=$}v?.(F,{...E})}).on("drag",F=>{const{transform:Y,snapGrid:J,snapToGrid:z,nodeOrigin:V}=n(),S=Qs(F.sourceEvent,{transform:Y,snapGrid:J,snapToGrid:z,containerBounds:j}),_=[];if(!N)return;const{x:U,y:W,width:X,height:D}=E,$={},ee=N.origin??V,{width:A,height:Z,x:se,y:ue}=uE(R,m.controlDirection,S,m.boundaries,m.keepAspectRatio,ee,O,H),ie=A!==X,pe=Z!==D,be=se!==U&&ie,we=ue!==W&&pe;if(!be&&!we&&!ie&&!pe)return;if((be||we||ee[0]===1||ee[1]===1)&&($.x=be?se:E.x,$.y=we?ue:E.y,E.x=$.x,E.y=$.y,I.length>0)){const Ae=se-U,Le=ue-W;for(const st of I)st.position={x:st.position.x-Ae+ee[0]*(A-X),y:st.position.y-Le+ee[1]*(Z-D)},_.push(st)}if((ie||pe)&&($.width=ie&&(!m.resizeDirection||m.resizeDirection==="horizontal")?A:E.width,$.height=pe&&(!m.resizeDirection||m.resizeDirection==="vertical")?Z:E.height,E.width=$.width,E.height=$.height),P&&N.expandParent){const Ae=ee[0]*($.width??0);$.x&&$.x<Ae&&(E.x=Ae,R.x=R.x-($.x-Ae));const Le=ee[1]*($.height??0);$.y&&$.y<Le&&(E.y=Le,R.y=R.y-($.y-Le))}const ye=cE({width:E.width,prevWidth:X,height:E.height,prevHeight:D,affectsX:m.controlDirection.affectsX,affectsY:m.controlDirection.affectsY}),ke={...E,direction:ye};T?.(F,ke)!==!1&&(q=!0,k?.(F,ke),i($,_))}).on("end",F=>{q&&(M?.(F,{...E}),u?.({...E}),q=!1)});d.call(G)}function g(){d.on(".drag",null)}return{update:f,destroy:g}}var l0={exports:{}},c0={},u0={exports:{}},d0={};var Jg;function hE(){if(Jg)return d0;Jg=1;var t=ii();function r(b,w){return b===w&&(b!==0||1/b===1/w)||b!==b&&w!==w}var n=typeof Object.is=="function"?Object.is:r,i=t.useState,u=t.useEffect,d=t.useLayoutEffect,m=t.useDebugValue;function f(b,w){var v=w(),k=i({inst:{value:v,getSnapshot:w}}),M=k[0].inst,T=k[1];return d(function(){M.value=v,M.getSnapshot=w,g(M)&&T({inst:M})},[b,v,w]),u(function(){return g(M)&&T({inst:M}),b(function(){g(M)&&T({inst:M})})},[b]),m(v),v}function g(b){var w=b.getSnapshot;b=b.value;try{var v=w();return!n(b,v)}catch{return!0}}function x(b,w){return w()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:f;return d0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,d0}var ex;function gE(){return ex||(ex=1,u0.exports=hE()),u0.exports}var tx;function xE(){if(tx)return c0;tx=1;var t=ii(),r=gE();function n(x,y){return x===y&&(x!==0||1/x===1/y)||x!==x&&y!==y}var i=typeof Object.is=="function"?Object.is:n,u=r.useSyncExternalStore,d=t.useRef,m=t.useEffect,f=t.useMemo,g=t.useDebugValue;return c0.useSyncExternalStoreWithSelector=function(x,y,b,w,v){var k=d(null);if(k.current===null){var M={hasValue:!1,value:null};k.current=M}else M=k.current;k=f(function(){function E(P){if(!R){if(R=!0,N=P,P=w(P),v!==void 0&&M.hasValue){var O=M.value;if(v(O,P))return j=O}return j=P}if(O=j,i(N,P))return O;var H=w(P);return v!==void 0&&v(O,H)?(N=P,O):(N=P,j=H)}var R=!1,N,j,I=b===void 0?null:b;return[function(){return E(y())},I===null?void 0:function(){return E(I())}]},[y,b,w,v]);var T=u(x,k[0],k[1]);return m(function(){M.hasValue=!0,M.value=T},[T]),g(T),T},c0}var ax;function yE(){return ax||(ax=1,l0.exports=xE()),l0.exports}var bE=yE();const wE=H0(bE),kE={},nx=t=>{let r;const n=new Set,i=(y,b)=>{const w=typeof y=="function"?y(r):y;if(!Object.is(w,r)){const v=r;r=b??(typeof w!="object"||w===null)?w:Object.assign({},r,w),n.forEach(k=>k(r,v))}},u=()=>r,g={setState:i,getState:u,getInitialState:()=>x,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(kE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},x=r=t(i,u,g);return g},vE=t=>t?nx(t):nx,{useDebugValue:CE}=ga,{useSyncExternalStoreWithSelector:SE}=wE,NE=t=>t;function eb(t,r=NE,n){const i=SE(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,n);return CE(i),i}const rx=(t,r)=>{const n=vE(t),i=(u,d=r)=>eb(n,u,d);return Object.assign(i,n),i},EE=(t,r)=>t?rx(t,r):rx;function pt(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,u]of t)if(!Object.is(u,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}const _c=B.createContext(null),TE=_c.Provider,tb=Qa.error001();function $e(t,r){const n=B.useContext(_c);if(n===null)throw new Error(tb);return eb(n,t,r)}function ht(){const t=B.useContext(_c);if(t===null)throw new Error(tb);return B.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const ox={display:"none"},ME={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ab="react-flow__node-desc",nb="react-flow__edge-desc",_E="react-flow__aria-live",AE=t=>t.ariaLiveMessage,jE=t=>t.ariaLabelConfig;function RE({rfId:t}){const r=$e(AE);return l.jsx("div",{id:`${_E}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:ME,children:r})}function LE({rfId:t,disableKeyboardA11y:r}){const n=$e(jE);return l.jsxs(l.Fragment,{children:[l.jsx("div",{id:`${ab}-${t}`,style:ox,children:r?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),l.jsx("div",{id:`${nb}-${t}`,style:ox,children:n["edge.a11yDescription.default"]}),!r&&l.jsx(RE,{rfId:t})]})}const Ac=B.forwardRef(({position:t="top-left",children:r,className:n,style:i,...u},d)=>{const m=`${t}`.split("-");return l.jsx("div",{className:jt(["react-flow__panel",n,...m]),style:i,ref:d,...u,children:r})});Ac.displayName="Panel";function DE({proOptions:t,position:r="bottom-right"}){return t?.hideAttribution?null:l.jsx(Ac,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:l.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const OE=t=>{const r=[],n=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&n.push(i);return{selectedNodes:r,selectedEdges:n}},Zl=t=>t.id;function PE(t,r){return pt(t.selectedNodes.map(Zl),r.selectedNodes.map(Zl))&&pt(t.selectedEdges.map(Zl),r.selectedEdges.map(Zl))}function IE({onSelectionChange:t}){const r=ht(),{selectedNodes:n,selectedEdges:i}=$e(OE,PE);return B.useEffect(()=>{const u={nodes:n,edges:i};t?.(u),r.getState().onSelectionChangeHandlers.forEach(d=>d(u))},[n,i,t]),null}const HE=t=>!!t.onSelectionChangeHandlers;function UE({onSelectionChange:t}){const r=$e(HE);return t||r?l.jsx(IE,{onSelectionChange:t}):null}const rb=[0,0],BE={x:0,y:0,zoom:1},zE=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],sx=[...zE,"rfId"],GE=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),ix={translateExtent:ai,nodeOrigin:rb,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function VE(t){const{setNodes:r,setEdges:n,setMinZoom:i,setMaxZoom:u,setTranslateExtent:d,setNodeExtent:m,reset:f,setDefaultNodesAndEdges:g}=$e(GE,pt),x=ht();B.useEffect(()=>(g(t.defaultNodes,t.defaultEdges),()=>{y.current=ix,f()}),[]);const y=B.useRef(ix);return B.useEffect(()=>{for(const b of sx){const w=t[b],v=y.current[b];w!==v&&(typeof t[b]>"u"||(b==="nodes"?r(w):b==="edges"?n(w):b==="minZoom"?i(w):b==="maxZoom"?u(w):b==="translateExtent"?d(w):b==="nodeExtent"?m(w):b==="ariaLabelConfig"?x.setState({ariaLabelConfig:EN(w)}):b==="fitView"?x.setState({fitViewQueued:w}):b==="fitViewOptions"?x.setState({fitViewOptions:w}):x.setState({[b]:w})))}y.current=t},sx.map(b=>t[b])),null}function lx(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function FE(t){const[r,n]=B.useState(t==="system"?null:t);return B.useEffect(()=>{if(t!=="system"){n(t);return}const i=lx(),u=()=>n(i?.matches?"dark":"light");return u(),i?.addEventListener("change",u),()=>{i?.removeEventListener("change",u)}},[t]),r!==null?r:lx()?.matches?"dark":"light"}const cx=typeof document<"u"?document:null;function si(t=null,r={target:cx,actInsideInputWithModifier:!0}){const[n,i]=B.useState(!1),u=B.useRef(!1),d=B.useRef(new Set([])),[m,f]=B.useMemo(()=>{if(t!==null){const x=(Array.isArray(t)?t:[t]).filter(b=>typeof b=="string").map(b=>b.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=x.reduce((b,w)=>b.concat(...w),[]);return[x,y]}return[[],[]]},[t]);return B.useEffect(()=>{const g=r?.target??cx,x=r?.actInsideInputWithModifier??!0;if(t!==null){const y=v=>{if(u.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!u.current||u.current&&!x)&&Hy(v))return!1;const M=dx(v.code,f);if(d.current.add(v[M]),ux(m,d.current,!1)){const T=v.composedPath?.()?.[0]||v.target,E=T?.nodeName==="BUTTON"||T?.nodeName==="A";r.preventDefault!==!1&&(u.current||!E)&&v.preventDefault(),i(!0)}},b=v=>{const k=dx(v.code,f);ux(m,d.current,!0)?(i(!1),d.current.clear()):d.current.delete(v[k]),v.key==="Meta"&&d.current.clear(),u.current=!1},w=()=>{d.current.clear(),i(!1)};return g?.addEventListener("keydown",y),g?.addEventListener("keyup",b),window.addEventListener("blur",w),window.addEventListener("contextmenu",w),()=>{g?.removeEventListener("keydown",y),g?.removeEventListener("keyup",b),window.removeEventListener("blur",w),window.removeEventListener("contextmenu",w)}}},[t,i]),n}function ux(t,r,n){return t.filter(i=>n||i.length===r.size).some(i=>i.every(u=>r.has(u)))}function dx(t,r){return r.includes(t)?"code":"key"}const qE=()=>{const t=ht();return B.useMemo(()=>({zoomIn:r=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomTo:(r,n)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,n)=>{const{transform:[i,u,d],panZoom:m}=t.getState();return m?(await m.setViewport({x:r.x??i,y:r.y??u,zoom:r.zoom??d},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,n,i]=t.getState().transform;return{x:r,y:n,zoom:i}},setCenter:async(r,n,i)=>t.getState().setCenter(r,n,i),fitBounds:async(r,n)=>{const{width:i,height:u,minZoom:d,maxZoom:m,panZoom:f}=t.getState(),g=J0(r,i,u,d,m,n?.padding??.1);return f?(await f.setViewport(g,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,n={})=>{const{transform:i,snapGrid:u,snapToGrid:d,domNode:m}=t.getState();if(!m)return r;const{x:f,y:g}=m.getBoundingClientRect(),x={x:r.x-f,y:r.y-g},y=n.snapGrid??u,b=n.snapToGrid??d;return hi(x,i,b,y)},flowToScreenPosition:r=>{const{transform:n,domNode:i}=t.getState();if(!i)return r;const{x:u,y:d}=i.getBoundingClientRect(),m=yc(r,n);return{x:m.x+u,y:m.y+d}}}),[])};function ob(t,r){const n=[],i=new Map,u=[];for(const d of t)if(d.type==="add"){u.push(d);continue}else if(d.type==="remove"||d.type==="replace")i.set(d.id,[d]);else{const m=i.get(d.id);m?m.push(d):i.set(d.id,[d])}for(const d of r){const m=i.get(d.id);if(!m){n.push(d);continue}if(m[0].type==="remove")continue;if(m[0].type==="replace"){n.push({...m[0].item});continue}const f={...d};for(const g of m)$E(g,f);n.push(f)}return u.length&&u.forEach(d=>{d.index!==void 0?n.splice(d.index,0,{...d.item}):n.push({...d.item})}),n}function $E(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function sb(t,r){return ob(t,r)}function ib(t,r){return ob(t,r)}function _r(t,r){return{id:t,type:"select",selected:r}}function jo(t,r=new Set,n=!1){const i=[];for(const[u,d]of t){const m=r.has(u);!(d.selected===void 0&&!m)&&d.selected!==m&&(n&&(d.selected=m),i.push(_r(d.id,m)))}return i}function fx({items:t=[],lookup:r}){const n=[],i=new Map(t.map(u=>[u.id,u]));for(const[u,d]of t.entries()){const m=r.get(d.id),f=m?.internals?.userNode??m;f!==void 0&&f!==d&&n.push({id:d.id,item:d,type:"replace"}),f===void 0&&n.push({item:d,type:"add",index:u})}for(const[u]of r)i.get(u)===void 0&&n.push({id:u,type:"remove"});return n}function mx(t){return{id:t.id,type:"remove"}}const px=t=>gN(t),YE=t=>Ay(t);function lb(t){return B.forwardRef(t)}const WE=typeof window<"u"?B.useLayoutEffect:B.useEffect;function hx(t){const[r,n]=B.useState(BigInt(0)),[i]=B.useState(()=>KE(()=>n(u=>u+BigInt(1))));return WE(()=>{const u=i.get();u.length&&(t(u),i.reset())},[r]),i}function KE(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:n=>{r.push(n),t()}}}const cb=B.createContext(null);function QE({children:t}){const r=ht(),n=B.useCallback(f=>{const{nodes:g=[],setNodes:x,hasDefaultNodes:y,onNodesChange:b,nodeLookup:w,fitViewQueued:v,onNodesChangeMiddlewareMap:k}=r.getState();let M=g;for(const E of f)M=typeof E=="function"?E(M):E;let T=fx({items:M,lookup:w});for(const E of k.values())T=E(T);y&&x(M),T.length>0?b?.(T):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:E,nodes:R,setNodes:N}=r.getState();E&&N(R)})},[]),i=hx(n),u=B.useCallback(f=>{const{edges:g=[],setEdges:x,hasDefaultEdges:y,onEdgesChange:b,edgeLookup:w}=r.getState();let v=g;for(const k of f)v=typeof k=="function"?k(v):k;y?x(v):b&&b(fx({items:v,lookup:w}))},[]),d=hx(u),m=B.useMemo(()=>({nodeQueue:i,edgeQueue:d}),[]);return l.jsx(cb.Provider,{value:m,children:t})}function XE(){const t=B.useContext(cb);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const ZE=t=>!!t.panZoom;function lf(){const t=qE(),r=ht(),n=XE(),i=$e(ZE),u=B.useMemo(()=>{const d=b=>r.getState().nodeLookup.get(b),m=b=>{n.nodeQueue.push(b)},f=b=>{n.edgeQueue.push(b)},g=b=>{const{nodeLookup:w,nodeOrigin:v}=r.getState(),k=px(b)?b:w.get(b.id),M=k.parentId?Py(k.position,k.measured,k.parentId,w,v):k.position,T={...k,position:M,width:k.measured?.width??k.width,height:k.measured?.height??k.height};return zo(T)},x=(b,w,v={replace:!1})=>{m(k=>k.map(M=>{if(M.id===b){const T=typeof w=="function"?w(M):w;return v.replace&&px(T)?T:{...M,...T}}return M}))},y=(b,w,v={replace:!1})=>{f(k=>k.map(M=>{if(M.id===b){const T=typeof w=="function"?w(M):w;return v.replace&&YE(T)?T:{...M,...T}}return M}))};return{getNodes:()=>r.getState().nodes.map(b=>({...b})),getNode:b=>d(b)?.internals.userNode,getInternalNode:d,getEdges:()=>{const{edges:b=[]}=r.getState();return b.map(w=>({...w}))},getEdge:b=>r.getState().edgeLookup.get(b),setNodes:m,setEdges:f,addNodes:b=>{const w=Array.isArray(b)?b:[b];n.nodeQueue.push(v=>[...v,...w])},addEdges:b=>{const w=Array.isArray(b)?b:[b];n.edgeQueue.push(v=>[...v,...w])},toObject:()=>{const{nodes:b=[],edges:w=[],transform:v}=r.getState(),[k,M,T]=v;return{nodes:b.map(E=>({...E})),edges:w.map(E=>({...E})),viewport:{x:k,y:M,zoom:T}}},deleteElements:async({nodes:b=[],edges:w=[]})=>{const{nodes:v,edges:k,onNodesDelete:M,onEdgesDelete:T,triggerNodeChanges:E,triggerEdgeChanges:R,onDelete:N,onBeforeDelete:j}=r.getState(),{nodes:I,edges:P}=await kN({nodesToRemove:b,edgesToRemove:w,nodes:v,edges:k,onBeforeDelete:j}),O=P.length>0,H=I.length>0;if(O){const q=P.map(mx);T?.(P),R(q)}if(H){const q=I.map(mx);M?.(I),E(q)}return(H||O)&&N?.({nodes:I,edges:P}),{deletedNodes:I,deletedEdges:P}},getIntersectingNodes:(b,w=!0,v)=>{const k=Bg(b),M=k?b:g(b),T=v!==void 0;return M?(v||r.getState().nodes).filter(E=>{const R=r.getState().nodeLookup.get(E.id);if(R&&!k&&(E.id===b.id||!R.internals.positionAbsolute))return!1;const N=zo(T?E:R),j=ri(N,M);return w&&j>0||j>=N.width*N.height||j>=M.width*M.height}):[]},isNodeIntersecting:(b,w,v=!0)=>{const M=Bg(b)?b:g(b);if(!M)return!1;const T=ri(M,w);return v&&T>0||T>=w.width*w.height||T>=M.width*M.height},updateNode:x,updateNodeData:(b,w,v={replace:!1})=>{x(b,k=>{const M=typeof w=="function"?w(k):w;return v.replace?{...k,data:M}:{...k,data:{...k.data,...M}}},v)},updateEdge:y,updateEdgeData:(b,w,v={replace:!1})=>{y(b,k=>{const M=typeof w=="function"?w(k):w;return v.replace?{...k,data:M}:{...k,data:{...k.data,...M}}},v)},getNodesBounds:b=>{const{nodeLookup:w,nodeOrigin:v}=r.getState();return xN(b,{nodeLookup:w,nodeOrigin:v})},getHandleConnections:({type:b,id:w,nodeId:v})=>Array.from(r.getState().connectionLookup.get(`${v}-${b}${w?`-${w}`:""}`)?.values()??[]),getNodeConnections:({type:b,handleId:w,nodeId:v})=>Array.from(r.getState().connectionLookup.get(`${v}${b?w?`-${b}-${w}`:`-${b}`:""}`)?.values()??[]),fitView:async b=>{const w=r.getState().fitViewResolver??NN();return r.setState({fitViewQueued:!0,fitViewOptions:b,fitViewResolver:w}),n.nodeQueue.push(v=>[...v]),w.promise}}},[]);return B.useMemo(()=>({...u,...t,viewportInitialized:i}),[i])}const gx=t=>t.selected,JE=typeof window<"u"?window:void 0;function e5({deleteKeyCode:t,multiSelectionKeyCode:r}){const n=ht(),{deleteElements:i}=lf(),u=si(t,{actInsideInputWithModifier:!1}),d=si(r,{target:JE});B.useEffect(()=>{if(u){const{edges:m,nodes:f}=n.getState();i({nodes:f.filter(gx),edges:m.filter(gx)}),n.setState({nodesSelectionActive:!1})}},[u]),B.useEffect(()=>{n.setState({multiSelectionActive:d})},[d])}function t5(t){const r=ht();B.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const i=ef(t.current);(i.height===0||i.width===0)&&r.getState().onError?.("004",Qa.error004()),r.setState({width:i.width||500,height:i.height||500})};if(t.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(t.current),()=>{window.removeEventListener("resize",n),i&&t.current&&i.unobserve(t.current)}}},[])}const jc={position:"absolute",width:"100%",height:"100%",top:0,left:0},a5=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function n5({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:u=.5,panOnScrollMode:d=Dr.Free,zoomOnDoubleClick:m=!0,panOnDrag:f=!0,defaultViewport:g,translateExtent:x,minZoom:y,maxZoom:b,zoomActivationKeyCode:w,preventScrolling:v=!0,children:k,noWheelClassName:M,noPanClassName:T,onViewportChange:E,isControlledViewport:R,paneClickDistance:N,selectionOnDrag:j}){const I=ht(),P=B.useRef(null),{userSelectionActive:O,lib:H,connectionInProgress:q}=$e(a5,pt),G=si(w),F=B.useRef();t5(P);const Y=B.useCallback(J=>{E?.({x:J[0],y:J[1],zoom:J[2]}),R||I.setState({transform:J})},[E,R]);return B.useEffect(()=>{if(P.current){F.current=lE({domNode:P.current,minZoom:y,maxZoom:b,translateExtent:x,viewport:g,onDraggingChange:S=>I.setState({paneDragging:S}),onPanZoomStart:(S,_)=>{const{onViewportChangeStart:U,onMoveStart:W}=I.getState();W?.(S,_),U?.(_)},onPanZoom:(S,_)=>{const{onViewportChange:U,onMove:W}=I.getState();W?.(S,_),U?.(_)},onPanZoomEnd:(S,_)=>{const{onViewportChangeEnd:U,onMoveEnd:W}=I.getState();W?.(S,_),U?.(_)}});const{x:J,y:z,zoom:V}=F.current.getViewport();return I.setState({panZoom:F.current,transform:[J,z,V],domNode:P.current.closest(".react-flow")}),()=>{F.current?.destroy()}}},[]),B.useEffect(()=>{F.current?.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:u,panOnScrollMode:d,zoomOnDoubleClick:m,panOnDrag:f,zoomActivationKeyPressed:G,preventScrolling:v,noPanClassName:T,userSelectionActive:O,noWheelClassName:M,lib:H,onTransformChange:Y,connectionInProgress:q,selectionOnDrag:j,paneClickDistance:N})},[t,r,n,i,u,d,m,f,G,v,T,O,M,H,Y,q,j,N]),l.jsx("div",{className:"react-flow__renderer",ref:P,style:jc,children:k})}const r5=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function o5(){const{userSelectionActive:t,userSelectionRect:r}=$e(r5,pt);return t&&r?l.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const f0=(t,r)=>n=>{n.target===r.current&&t?.(n)},s5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function i5({isSelecting:t,selectionKeyPressed:r,selectionMode:n=ni.Full,panOnDrag:i,paneClickDistance:u,selectionOnDrag:d,onSelectionStart:m,onSelectionEnd:f,onPaneClick:g,onPaneContextMenu:x,onPaneScroll:y,onPaneMouseEnter:b,onPaneMouseMove:w,onPaneMouseLeave:v,children:k}){const M=ht(),{userSelectionActive:T,elementsSelectable:E,dragging:R,connectionInProgress:N}=$e(s5,pt),j=E&&(t||T),I=B.useRef(null),P=B.useRef(),O=B.useRef(new Set),H=B.useRef(new Set),q=B.useRef(!1),G=U=>{if(q.current||N){q.current=!1;return}g?.(U),M.getState().resetSelectedElements(),M.setState({nodesSelectionActive:!1})},F=U=>{if(Array.isArray(i)&&i?.includes(2)){U.preventDefault();return}x?.(U)},Y=y?U=>y(U):void 0,J=U=>{q.current&&(U.stopPropagation(),q.current=!1)},z=U=>{const{domNode:W}=M.getState();if(P.current=W?.getBoundingClientRect(),!P.current)return;const X=U.target===I.current;if(!X&&!!U.target.closest(".nokey")||!t||!(d&&X||r)||U.button!==0||!U.isPrimary)return;U.target?.setPointerCapture?.(U.pointerId),q.current=!1;const{x:ee,y:A}=Ia(U.nativeEvent,P.current);M.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:A,x:ee,y:A}}),X||(U.stopPropagation(),U.preventDefault())},V=U=>{const{userSelectionRect:W,transform:X,nodeLookup:D,edgeLookup:$,connectionLookup:ee,triggerNodeChanges:A,triggerEdgeChanges:Z,defaultEdgeOptions:se,resetSelectedElements:ue}=M.getState();if(!P.current||!W)return;const{x:ie,y:pe}=Ia(U.nativeEvent,P.current),{startX:be,startY:we}=W;if(!q.current){const Le=r?0:u;if(Math.hypot(ie-be,pe-we)<=Le)return;ue(),m?.(U)}q.current=!0;const ye={startX:be,startY:we,x:ie<be?ie:be,y:pe<we?pe:we,width:Math.abs(ie-be),height:Math.abs(pe-we)},ke=O.current,Ce=H.current;O.current=new Set(Z0(D,ye,X,n===ni.Partial,!0).map(Le=>Le.id)),H.current=new Set;const Ae=se?.selectable??!0;for(const Le of O.current){const st=ee.get(Le);if(st)for(const{edgeId:yt}of st.values()){const Rt=$.get(yt);Rt&&(Rt.selectable??Ae)&&H.current.add(yt)}}if(!zg(ke,O.current)){const Le=jo(D,O.current,!0);A(Le)}if(!zg(Ce,H.current)){const Le=jo($,H.current);Z(Le)}M.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},S=U=>{U.button===0&&(U.target?.releasePointerCapture?.(U.pointerId),!T&&U.target===I.current&&M.getState().userSelectionRect&&G?.(U),M.setState({userSelectionActive:!1,userSelectionRect:null}),q.current&&(f?.(U),M.setState({nodesSelectionActive:O.current.size>0})))},_=i===!0||Array.isArray(i)&&i.includes(0);return l.jsxs("div",{className:jt(["react-flow__pane",{draggable:_,dragging:R,selection:t}]),onClick:j?void 0:f0(G,I),onContextMenu:f0(F,I),onWheel:f0(Y,I),onPointerEnter:j?void 0:b,onPointerMove:j?V:w,onPointerUp:j?S:void 0,onPointerDownCapture:j?z:void 0,onClickCapture:j?J:void 0,onPointerLeave:v,ref:I,style:jc,children:[k,l.jsx(o5,{})]})}function I0({id:t,store:r,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:u,unselectNodesAndEdges:d,multiSelectionActive:m,nodeLookup:f,onError:g}=r.getState(),x=f.get(t);if(!x){g?.("012",Qa.error012(t));return}r.setState({nodesSelectionActive:!1}),x.selected?(n||x.selected&&m)&&(d({nodes:[x],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):u([t])}function ub({nodeRef:t,disabled:r=!1,noDragClassName:n,handleSelector:i,nodeId:u,isSelectable:d,nodeClickDistance:m}){const f=ht(),[g,x]=B.useState(!1),y=B.useRef();return B.useEffect(()=>{y.current=WN({getStoreItems:()=>f.getState(),onNodeMouseDown:b=>{I0({id:b,store:f,nodeRef:t})},onDragStart:()=>{x(!0)},onDragStop:()=>{x(!1)}})},[]),B.useEffect(()=>{if(r)y.current?.destroy();else if(t.current)return y.current?.update({noDragClassName:n,handleSelector:i,domNode:t.current,isSelectable:d,nodeId:u,nodeClickDistance:m}),()=>{y.current?.destroy()}},[n,i,r,d,t,u]),g}const l5=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function db(){const t=ht();return B.useCallback(n=>{const{nodeExtent:i,snapToGrid:u,snapGrid:d,nodesDraggable:m,onError:f,updateNodePositions:g,nodeLookup:x,nodeOrigin:y}=t.getState(),b=new Map,w=l5(m),v=u?d[0]:5,k=u?d[1]:5,M=n.direction.x*v*n.factor,T=n.direction.y*k*n.factor;for(const[,E]of x){if(!w(E))continue;let R={x:E.internals.positionAbsolute.x+M,y:E.internals.positionAbsolute.y+T};u&&(R=pi(R,d));const{position:N,positionAbsolute:j}=jy({nodeId:E.id,nextPosition:R,nodeLookup:x,nodeExtent:i,nodeOrigin:y,onError:f});E.position=N,E.internals.positionAbsolute=j,b.set(E.id,E)}g(b)},[])}const cf=B.createContext(null),c5=cf.Provider;cf.Consumer;const fb=()=>B.useContext(cf),u5=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),d5=(t,r,n)=>i=>{const{connectionClickStartHandle:u,connectionMode:d,connection:m}=i,{fromHandle:f,toHandle:g,isValid:x}=m,y=g?.nodeId===t&&g?.id===r&&g?.type===n;return{connectingFrom:f?.nodeId===t&&f?.id===r&&f?.type===n,connectingTo:y,clickConnecting:u?.nodeId===t&&u?.id===r&&u?.type===n,isPossibleEndHandle:d===Uo.Strict?f?.type!==n:t!==f?.nodeId||r!==f?.id,connectionInProcess:!!f,clickConnectionInProcess:!!u,valid:y&&x}};function f5({type:t="source",position:r=xe.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:u=!0,isConnectableEnd:d=!0,id:m,onConnect:f,children:g,className:x,onMouseDown:y,onTouchStart:b,...w},v){const k=m||null,M=t==="target",T=ht(),E=fb(),{connectOnClick:R,noPanClassName:N,rfId:j}=$e(u5,pt),{connectingFrom:I,connectingTo:P,clickConnecting:O,isPossibleEndHandle:H,connectionInProcess:q,clickConnectionInProcess:G,valid:F}=$e(d5(E,k,t),pt);E||T.getState().onError?.("010",Qa.error010());const Y=V=>{const{defaultEdgeOptions:S,onConnect:_,hasDefaultEdges:U}=T.getState(),W={...S,...V};if(U){const{edges:X,setEdges:D}=T.getState();D(RN(W,X))}_?.(W),f?.(W)},J=V=>{if(!E)return;const S=Uy(V.nativeEvent);if(u&&(S&&V.button===0||!S)){const _=T.getState();P0.onPointerDown(V.nativeEvent,{handleDomNode:V.currentTarget,autoPanOnConnect:_.autoPanOnConnect,connectionMode:_.connectionMode,connectionRadius:_.connectionRadius,domNode:_.domNode,nodeLookup:_.nodeLookup,lib:_.lib,isTarget:M,handleId:k,nodeId:E,flowId:_.rfId,panBy:_.panBy,cancelConnection:_.cancelConnection,onConnectStart:_.onConnectStart,onConnectEnd:_.onConnectEnd,updateConnection:_.updateConnection,onConnect:Y,isValidConnection:n||_.isValidConnection,getTransform:()=>T.getState().transform,getFromHandle:()=>T.getState().connection.fromHandle,autoPanSpeed:_.autoPanSpeed,dragThreshold:_.connectionDragThreshold})}S?y?.(V):b?.(V)},z=V=>{const{onClickConnectStart:S,onClickConnectEnd:_,connectionClickStartHandle:U,connectionMode:W,isValidConnection:X,lib:D,rfId:$,nodeLookup:ee,connection:A}=T.getState();if(!E||!U&&!u)return;if(!U){S?.(V.nativeEvent,{nodeId:E,handleId:k,handleType:t}),T.setState({connectionClickStartHandle:{nodeId:E,type:t,id:k}});return}const Z=Iy(V.target),se=n||X,{connection:ue,isValid:ie}=P0.isValid(V.nativeEvent,{handle:{nodeId:E,id:k,type:t},connectionMode:W,fromNodeId:U.nodeId,fromHandleId:U.id||null,fromType:U.type,isValidConnection:se,flowId:$,doc:Z,lib:D,nodeLookup:ee});ie&&ue&&Y(ue);const pe=structuredClone(A);delete pe.inProgress,pe.toPosition=pe.toHandle?pe.toHandle.position:null,_?.(V,pe),T.setState({connectionClickStartHandle:null})};return l.jsx("div",{"data-handleid":k,"data-nodeid":E,"data-handlepos":r,"data-id":`${j}-${E}-${k}-${t}`,className:jt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",N,x,{source:!M,target:M,connectable:i,connectablestart:u,connectableend:d,clickconnecting:O,connectingfrom:I,connectingto:P,valid:F,connectionindicator:i&&(!q||H)&&(q||G?d:u)}]),onMouseDown:J,onTouchStart:J,onClick:R?z:void 0,ref:v,...w,children:g})}const rt=B.memo(lb(f5));function m5({data:t,isConnectable:r,sourcePosition:n=xe.Bottom}){return l.jsxs(l.Fragment,{children:[t?.label,l.jsx(rt,{type:"source",position:n,isConnectable:r})]})}function p5({data:t,isConnectable:r,targetPosition:n=xe.Top,sourcePosition:i=xe.Bottom}){return l.jsxs(l.Fragment,{children:[l.jsx(rt,{type:"target",position:n,isConnectable:r}),t?.label,l.jsx(rt,{type:"source",position:i,isConnectable:r})]})}function h5(){return null}function g5({data:t,isConnectable:r,targetPosition:n=xe.Top}){return l.jsxs(l.Fragment,{children:[l.jsx(rt,{type:"target",position:n,isConnectable:r}),t?.label]})}const bc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},xx={input:m5,default:p5,output:g5,group:h5};function x5(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const y5=t=>{const{width:r,height:n,x:i,y:u}=mi(t.nodeLookup,{filter:d=>!!d.selected});return{width:Pa(r)?r:null,height:Pa(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${u}px)`}};function b5({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:n}){const i=ht(),{width:u,height:d,transformString:m,userSelectionActive:f}=$e(y5,pt),g=db(),x=B.useRef(null);if(B.useEffect(()=>{n||x.current?.focus({preventScroll:!0})},[n]),ub({nodeRef:x}),f||!u||!d)return null;const y=t?w=>{const v=i.getState().nodes.filter(k=>k.selected);t(w,v)}:void 0,b=w=>{Object.prototype.hasOwnProperty.call(bc,w.key)&&(w.preventDefault(),g({direction:bc[w.key],factor:w.shiftKey?4:1}))};return l.jsx("div",{className:jt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:m},children:l.jsx("div",{ref:x,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:u,height:d}})})}const yx=typeof window<"u"?window:void 0,w5=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function mb({children:t,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:u,onPaneContextMenu:d,onPaneScroll:m,paneClickDistance:f,deleteKeyCode:g,selectionKeyCode:x,selectionOnDrag:y,selectionMode:b,onSelectionStart:w,onSelectionEnd:v,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:T,elementsSelectable:E,zoomOnScroll:R,zoomOnPinch:N,panOnScroll:j,panOnScrollSpeed:I,panOnScrollMode:P,zoomOnDoubleClick:O,panOnDrag:H,defaultViewport:q,translateExtent:G,minZoom:F,maxZoom:Y,preventScrolling:J,onSelectionContextMenu:z,noWheelClassName:V,noPanClassName:S,disableKeyboardA11y:_,onViewportChange:U,isControlledViewport:W}){const{nodesSelectionActive:X,userSelectionActive:D}=$e(w5,pt),$=si(x,{target:yx}),ee=si(M,{target:yx}),A=ee||H,Z=ee||j,se=y&&A!==!0,ue=$||D||se;return e5({deleteKeyCode:g,multiSelectionKeyCode:k}),l.jsx(n5,{onPaneContextMenu:d,elementsSelectable:E,zoomOnScroll:R,zoomOnPinch:N,panOnScroll:Z,panOnScrollSpeed:I,panOnScrollMode:P,zoomOnDoubleClick:O,panOnDrag:!$&&A,defaultViewport:q,translateExtent:G,minZoom:F,maxZoom:Y,zoomActivationKeyCode:T,preventScrolling:J,noWheelClassName:V,noPanClassName:S,onViewportChange:U,isControlledViewport:W,paneClickDistance:f,selectionOnDrag:se,children:l.jsxs(i5,{onSelectionStart:w,onSelectionEnd:v,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:u,onPaneContextMenu:d,onPaneScroll:m,panOnDrag:A,isSelecting:!!ue,selectionMode:b,selectionKeyPressed:$,paneClickDistance:f,selectionOnDrag:se,children:[t,X&&l.jsx(b5,{onSelectionContextMenu:z,noPanClassName:S,disableKeyboardA11y:_})]})})}mb.displayName="FlowRenderer";const k5=B.memo(mb),v5=t=>r=>t?Z0(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(n=>n.id):Array.from(r.nodeLookup.keys());function C5(t){return $e(B.useCallback(v5(t),[t]),pt)}const S5=t=>t.updateNodeInternals;function N5(){const t=$e(S5),[r]=B.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(u=>{const d=u.target.getAttribute("data-id");i.set(d,{id:d,nodeElement:u.target,force:!0})}),t(i)}));return B.useEffect(()=>()=>{r?.disconnect()},[r]),r}function E5({node:t,nodeType:r,hasDimensions:n,resizeObserver:i}){const u=ht(),d=B.useRef(null),m=B.useRef(null),f=B.useRef(t.sourcePosition),g=B.useRef(t.targetPosition),x=B.useRef(r),y=n&&!!t.internals.handleBounds;return B.useEffect(()=>{d.current&&!t.hidden&&(!y||m.current!==d.current)&&(m.current&&i?.unobserve(m.current),i?.observe(d.current),m.current=d.current)},[y,t.hidden]),B.useEffect(()=>()=>{m.current&&(i?.unobserve(m.current),m.current=null)},[]),B.useEffect(()=>{if(d.current){const b=x.current!==r,w=f.current!==t.sourcePosition,v=g.current!==t.targetPosition;(b||w||v)&&(x.current=r,f.current=t.sourcePosition,g.current=t.targetPosition,u.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:d.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),d}function T5({id:t,onClick:r,onMouseEnter:n,onMouseMove:i,onMouseLeave:u,onContextMenu:d,onDoubleClick:m,nodesDraggable:f,elementsSelectable:g,nodesConnectable:x,nodesFocusable:y,resizeObserver:b,noDragClassName:w,noPanClassName:v,disableKeyboardA11y:k,rfId:M,nodeTypes:T,nodeClickDistance:E,onError:R}){const{node:N,internals:j,isParent:I}=$e(ie=>{const pe=ie.nodeLookup.get(t),be=ie.parentLookup.has(t);return{node:pe,internals:pe.internals,isParent:be}},pt);let P=N.type||"default",O=T?.[P]||xx[P];O===void 0&&(R?.("003",Qa.error003(P)),P="default",O=T?.default||xx.default);const H=!!(N.draggable||f&&typeof N.draggable>"u"),q=!!(N.selectable||g&&typeof N.selectable>"u"),G=!!(N.connectable||x&&typeof N.connectable>"u"),F=!!(N.focusable||y&&typeof N.focusable>"u"),Y=ht(),J=Oy(N),z=E5({node:N,nodeType:P,hasDimensions:J,resizeObserver:b}),V=ub({nodeRef:z,disabled:N.hidden||!H,noDragClassName:w,handleSelector:N.dragHandle,nodeId:t,isSelectable:q,nodeClickDistance:E}),S=db();if(N.hidden)return null;const _=Tn(N),U=x5(N),W=q||H||r||n||i||u,X=n?ie=>n(ie,{...j.userNode}):void 0,D=i?ie=>i(ie,{...j.userNode}):void 0,$=u?ie=>u(ie,{...j.userNode}):void 0,ee=d?ie=>d(ie,{...j.userNode}):void 0,A=m?ie=>m(ie,{...j.userNode}):void 0,Z=ie=>{const{selectNodesOnDrag:pe,nodeDragThreshold:be}=Y.getState();q&&(!pe||!H||be>0)&&I0({id:t,store:Y,nodeRef:z}),r&&r(ie,{...j.userNode})},se=ie=>{if(!(Hy(ie.nativeEvent)||k)){if(Ey.includes(ie.key)&&q){const pe=ie.key==="Escape";I0({id:t,store:Y,unselect:pe,nodeRef:z})}else if(H&&N.selected&&Object.prototype.hasOwnProperty.call(bc,ie.key)){ie.preventDefault();const{ariaLabelConfig:pe}=Y.getState();Y.setState({ariaLiveMessage:pe["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~j.positionAbsolute.x,y:~~j.positionAbsolute.y})}),S({direction:bc[ie.key],factor:ie.shiftKey?4:1})}}},ue=()=>{if(k||!z.current?.matches(":focus-visible"))return;const{transform:ie,width:pe,height:be,autoPanOnNodeFocus:we,setCenter:ye}=Y.getState();if(!we)return;Z0(new Map([[t,N]]),{x:0,y:0,width:pe,height:be},ie,!0).length>0||ye(N.position.x+_.width/2,N.position.y+_.height/2,{zoom:ie[2]})};return l.jsx("div",{className:jt(["react-flow__node",`react-flow__node-${P}`,{[v]:H},N.className,{selected:N.selected,selectable:q,parent:I,draggable:H,dragging:V}]),ref:z,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:W?"all":"none",visibility:J?"visible":"hidden",...N.style,...U},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:X,onMouseMove:D,onMouseLeave:$,onContextMenu:ee,onClick:Z,onDoubleClick:A,onKeyDown:F?se:void 0,tabIndex:F?0:void 0,onFocus:F?ue:void 0,role:N.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":k?void 0:`${ab}-${M}`,"aria-label":N.ariaLabel,...N.domAttributes,children:l.jsx(c5,{value:t,children:l.jsx(O,{id:t,data:N.data,type:P,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:N.selected??!1,selectable:q,draggable:H,deletable:N.deletable??!0,isConnectable:G,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:V,dragHandle:N.dragHandle,zIndex:j.z,parentId:N.parentId,..._})})})}var M5=B.memo(T5);const _5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function pb(t){const{nodesDraggable:r,nodesConnectable:n,nodesFocusable:i,elementsSelectable:u,onError:d}=$e(_5,pt),m=C5(t.onlyRenderVisibleElements),f=N5();return l.jsx("div",{className:"react-flow__nodes",style:jc,children:m.map(g=>l.jsx(M5,{id:g,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:n,nodesFocusable:i,elementsSelectable:u,nodeClickDistance:t.nodeClickDistance,onError:d},g))})}pb.displayName="NodeRenderer";const A5=B.memo(pb);function j5(t){return $e(B.useCallback(n=>{if(!t)return n.edges.map(u=>u.id);const i=[];if(n.width&&n.height)for(const u of n.edges){const d=n.nodeLookup.get(u.source),m=n.nodeLookup.get(u.target);d&&m&&_N({sourceNode:d,targetNode:m,width:n.width,height:n.height,transform:n.transform})&&i.push(u.id)}return i},[t]),pt)}const R5=({color:t="none",strokeWidth:r=1})=>{const n={strokeWidth:r,...t&&{stroke:t}};return l.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},L5=({color:t="none",strokeWidth:r=1})=>{const n={strokeWidth:r,...t&&{stroke:t,fill:t}};return l.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},bx={[gc.Arrow]:R5,[gc.ArrowClosed]:L5};function D5(t){const r=ht();return B.useMemo(()=>Object.prototype.hasOwnProperty.call(bx,t)?bx[t]:(r.getState().onError?.("009",Qa.error009(t)),null),[t])}const O5=({id:t,type:r,color:n,width:i=12.5,height:u=12.5,markerUnits:d="strokeWidth",strokeWidth:m,orient:f="auto-start-reverse"})=>{const g=D5(r);return g?l.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${u}`,viewBox:"-10 -10 20 20",markerUnits:d,orient:f,refX:"0",refY:"0",children:l.jsx(g,{color:n,strokeWidth:m})}):null},hb=({defaultColor:t,rfId:r})=>{const n=$e(d=>d.edges),i=$e(d=>d.defaultEdgeOptions),u=B.useMemo(()=>IN(n,{id:r,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[n,i,r,t]);return u.length?l.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:l.jsx("defs",{children:u.map(d=>l.jsx(O5,{id:d.id,type:d.type,color:d.color,width:d.width,height:d.height,markerUnits:d.markerUnits,strokeWidth:d.strokeWidth,orient:d.orient},d.id))})}):null};hb.displayName="MarkerDefinitions";var P5=B.memo(hb);function gb({x:t,y:r,label:n,labelStyle:i,labelShowBg:u=!0,labelBgStyle:d,labelBgPadding:m=[2,4],labelBgBorderRadius:f=2,children:g,className:x,...y}){const[b,w]=B.useState({x:1,y:0,width:0,height:0}),v=jt(["react-flow__edge-textwrapper",x]),k=B.useRef(null);return B.useEffect(()=>{if(k.current){const M=k.current.getBBox();w({x:M.x,y:M.y,width:M.width,height:M.height})}},[n]),n?l.jsxs("g",{transform:`translate(${t-b.width/2} ${r-b.height/2})`,className:v,visibility:b.width?"visible":"hidden",...y,children:[u&&l.jsx("rect",{width:b.width+2*m[0],x:-m[0],y:-m[1],height:b.height+2*m[1],className:"react-flow__edge-textbg",style:d,rx:f,ry:f}),l.jsx("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:k,style:i,children:n}),g]}):null}gb.displayName="EdgeText";const I5=B.memo(gb);function gi({path:t,labelX:r,labelY:n,label:i,labelStyle:u,labelShowBg:d,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:g,interactionWidth:x=20,...y}){return l.jsxs(l.Fragment,{children:[l.jsx("path",{...y,d:t,fill:"none",className:jt(["react-flow__edge-path",y.className])}),x?l.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}):null,i&&Pa(r)&&Pa(n)?l.jsx(I5,{x:r,y:n,label:i,labelStyle:u,labelShowBg:d,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:g}):null]})}function wx({pos:t,x1:r,y1:n,x2:i,y2:u}){return t===xe.Left||t===xe.Right?[.5*(r+i),n]:[r,.5*(n+u)]}function xb({sourceX:t,sourceY:r,sourcePosition:n=xe.Bottom,targetX:i,targetY:u,targetPosition:d=xe.Top}){const[m,f]=wx({pos:n,x1:t,y1:r,x2:i,y2:u}),[g,x]=wx({pos:d,x1:i,y1:u,x2:t,y2:r}),[y,b,w,v]=By({sourceX:t,sourceY:r,targetX:i,targetY:u,sourceControlX:m,sourceControlY:f,targetControlX:g,targetControlY:x});return[`M${t},${r} C${m},${f} ${g},${x} ${i},${u}`,y,b,w,v]}function yb(t){return B.memo(({id:r,sourceX:n,sourceY:i,targetX:u,targetY:d,sourcePosition:m,targetPosition:f,label:g,labelStyle:x,labelShowBg:y,labelBgStyle:b,labelBgPadding:w,labelBgBorderRadius:v,style:k,markerEnd:M,markerStart:T,interactionWidth:E})=>{const[R,N,j]=xb({sourceX:n,sourceY:i,sourcePosition:m,targetX:u,targetY:d,targetPosition:f}),I=t.isInternal?void 0:r;return l.jsx(gi,{id:I,path:R,labelX:N,labelY:j,label:g,labelStyle:x,labelShowBg:y,labelBgStyle:b,labelBgPadding:w,labelBgBorderRadius:v,style:k,markerEnd:M,markerStart:T,interactionWidth:E})})}const H5=yb({isInternal:!1}),bb=yb({isInternal:!0});H5.displayName="SimpleBezierEdge";bb.displayName="SimpleBezierEdgeInternal";function wb(t){return B.memo(({id:r,sourceX:n,sourceY:i,targetX:u,targetY:d,label:m,labelStyle:f,labelShowBg:g,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:b,style:w,sourcePosition:v=xe.Bottom,targetPosition:k=xe.Top,markerEnd:M,markerStart:T,pathOptions:E,interactionWidth:R})=>{const[N,j,I]=L0({sourceX:n,sourceY:i,sourcePosition:v,targetX:u,targetY:d,targetPosition:k,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),P=t.isInternal?void 0:r;return l.jsx(gi,{id:P,path:N,labelX:j,labelY:I,label:m,labelStyle:f,labelShowBg:g,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:b,style:w,markerEnd:M,markerStart:T,interactionWidth:R})})}const kb=wb({isInternal:!1}),vb=wb({isInternal:!0});kb.displayName="SmoothStepEdge";vb.displayName="SmoothStepEdgeInternal";function Cb(t){return B.memo(({id:r,...n})=>{const i=t.isInternal?void 0:r;return l.jsx(kb,{...n,id:i,pathOptions:B.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const U5=Cb({isInternal:!1}),Sb=Cb({isInternal:!0});U5.displayName="StepEdge";Sb.displayName="StepEdgeInternal";function Nb(t){return B.memo(({id:r,sourceX:n,sourceY:i,targetX:u,targetY:d,label:m,labelStyle:f,labelShowBg:g,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:b,style:w,markerEnd:v,markerStart:k,interactionWidth:M})=>{const[T,E,R]=Gy({sourceX:n,sourceY:i,targetX:u,targetY:d}),N=t.isInternal?void 0:r;return l.jsx(gi,{id:N,path:T,labelX:E,labelY:R,label:m,labelStyle:f,labelShowBg:g,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:b,style:w,markerEnd:v,markerStart:k,interactionWidth:M})})}const B5=Nb({isInternal:!1}),Eb=Nb({isInternal:!0});B5.displayName="StraightEdge";Eb.displayName="StraightEdgeInternal";function Tb(t){return B.memo(({id:r,sourceX:n,sourceY:i,targetX:u,targetY:d,sourcePosition:m=xe.Bottom,targetPosition:f=xe.Top,label:g,labelStyle:x,labelShowBg:y,labelBgStyle:b,labelBgPadding:w,labelBgBorderRadius:v,style:k,markerEnd:M,markerStart:T,pathOptions:E,interactionWidth:R})=>{const[N,j,I]=tf({sourceX:n,sourceY:i,sourcePosition:m,targetX:u,targetY:d,targetPosition:f,curvature:E?.curvature}),P=t.isInternal?void 0:r;return l.jsx(gi,{id:P,path:N,labelX:j,labelY:I,label:g,labelStyle:x,labelShowBg:y,labelBgStyle:b,labelBgPadding:w,labelBgBorderRadius:v,style:k,markerEnd:M,markerStart:T,interactionWidth:R})})}const z5=Tb({isInternal:!1}),Mb=Tb({isInternal:!0});z5.displayName="BezierEdge";Mb.displayName="BezierEdgeInternal";const kx={default:Mb,straight:Eb,step:Sb,smoothstep:vb,simplebezier:bb},vx={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},G5=(t,r,n)=>n===xe.Left?t-r:n===xe.Right?t+r:t,V5=(t,r,n)=>n===xe.Top?t-r:n===xe.Bottom?t+r:t,Cx="react-flow__edgeupdater";function Sx({position:t,centerX:r,centerY:n,radius:i=10,onMouseDown:u,onMouseEnter:d,onMouseOut:m,type:f}){return l.jsx("circle",{onMouseDown:u,onMouseEnter:d,onMouseOut:m,className:jt([Cx,`${Cx}-${f}`]),cx:G5(r,i,t),cy:V5(n,i,t),r:i,stroke:"transparent",fill:"transparent"})}function F5({isReconnectable:t,reconnectRadius:r,edge:n,sourceX:i,sourceY:u,targetX:d,targetY:m,sourcePosition:f,targetPosition:g,onReconnect:x,onReconnectStart:y,onReconnectEnd:b,setReconnecting:w,setUpdateHover:v}){const k=ht(),M=(j,I)=>{if(j.button!==0)return;const{autoPanOnConnect:P,domNode:O,isValidConnection:H,connectionMode:q,connectionRadius:G,lib:F,onConnectStart:Y,onConnectEnd:J,cancelConnection:z,nodeLookup:V,rfId:S,panBy:_,updateConnection:U}=k.getState(),W=I.type==="target",X=(ee,A)=>{w(!1),b?.(ee,n,I.type,A)},D=ee=>x?.(n,ee),$=(ee,A)=>{w(!0),y?.(j,n,I.type),Y?.(ee,A)};P0.onPointerDown(j.nativeEvent,{autoPanOnConnect:P,connectionMode:q,connectionRadius:G,domNode:O,handleId:I.id,nodeId:I.nodeId,nodeLookup:V,isTarget:W,edgeUpdaterType:I.type,lib:F,flowId:S,cancelConnection:z,panBy:_,isValidConnection:H,onConnect:D,onConnectStart:$,onConnectEnd:J,onReconnectEnd:X,updateConnection:U,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,dragThreshold:k.getState().connectionDragThreshold,handleDomNode:j.currentTarget})},T=j=>M(j,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),E=j=>M(j,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),R=()=>v(!0),N=()=>v(!1);return l.jsxs(l.Fragment,{children:[(t===!0||t==="source")&&l.jsx(Sx,{position:f,centerX:i,centerY:u,radius:r,onMouseDown:T,onMouseEnter:R,onMouseOut:N,type:"source"}),(t===!0||t==="target")&&l.jsx(Sx,{position:g,centerX:d,centerY:m,radius:r,onMouseDown:E,onMouseEnter:R,onMouseOut:N,type:"target"})]})}function q5({id:t,edgesFocusable:r,edgesReconnectable:n,elementsSelectable:i,onClick:u,onDoubleClick:d,onContextMenu:m,onMouseEnter:f,onMouseMove:g,onMouseLeave:x,reconnectRadius:y,onReconnect:b,onReconnectStart:w,onReconnectEnd:v,rfId:k,edgeTypes:M,noPanClassName:T,onError:E,disableKeyboardA11y:R}){let N=$e(ye=>ye.edgeLookup.get(t));const j=$e(ye=>ye.defaultEdgeOptions);N=j?{...j,...N}:N;let I=N.type||"default",P=M?.[I]||kx[I];P===void 0&&(E?.("011",Qa.error011(I)),I="default",P=M?.default||kx.default);const O=!!(N.focusable||r&&typeof N.focusable>"u"),H=typeof b<"u"&&(N.reconnectable||n&&typeof N.reconnectable>"u"),q=!!(N.selectable||i&&typeof N.selectable>"u"),G=B.useRef(null),[F,Y]=B.useState(!1),[J,z]=B.useState(!1),V=ht(),{zIndex:S,sourceX:_,sourceY:U,targetX:W,targetY:X,sourcePosition:D,targetPosition:$}=$e(B.useCallback(ye=>{const ke=ye.nodeLookup.get(N.source),Ce=ye.nodeLookup.get(N.target);if(!ke||!Ce)return{zIndex:N.zIndex,...vx};const Ae=PN({id:t,sourceNode:ke,targetNode:Ce,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:ye.connectionMode,onError:E});return{zIndex:MN({selected:N.selected,zIndex:N.zIndex,sourceNode:ke,targetNode:Ce,elevateOnSelect:ye.elevateEdgesOnSelect,zIndexMode:ye.zIndexMode}),...Ae||vx}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),pt),ee=B.useMemo(()=>N.markerStart?`url('#${D0(N.markerStart,k)}')`:void 0,[N.markerStart,k]),A=B.useMemo(()=>N.markerEnd?`url('#${D0(N.markerEnd,k)}')`:void 0,[N.markerEnd,k]);if(N.hidden||_===null||U===null||W===null||X===null)return null;const Z=ye=>{const{addSelectedEdges:ke,unselectNodesAndEdges:Ce,multiSelectionActive:Ae}=V.getState();q&&(V.setState({nodesSelectionActive:!1}),N.selected&&Ae?(Ce({nodes:[],edges:[N]}),G.current?.blur()):ke([t])),u&&u(ye,N)},se=d?ye=>{d(ye,{...N})}:void 0,ue=m?ye=>{m(ye,{...N})}:void 0,ie=f?ye=>{f(ye,{...N})}:void 0,pe=g?ye=>{g(ye,{...N})}:void 0,be=x?ye=>{x(ye,{...N})}:void 0,we=ye=>{if(!R&&Ey.includes(ye.key)&&q){const{unselectNodesAndEdges:ke,addSelectedEdges:Ce}=V.getState();ye.key==="Escape"?(G.current?.blur(),ke({edges:[N]})):Ce([t])}};return l.jsx("svg",{style:{zIndex:S},children:l.jsxs("g",{className:jt(["react-flow__edge",`react-flow__edge-${I}`,N.className,T,{selected:N.selected,animated:N.animated,inactive:!q&&!u,updating:F,selectable:q}]),onClick:Z,onDoubleClick:se,onContextMenu:ue,onMouseEnter:ie,onMouseMove:pe,onMouseLeave:be,onKeyDown:O?we:void 0,tabIndex:O?0:void 0,role:N.ariaRole??(O?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":O?`${nb}-${k}`:void 0,ref:G,...N.domAttributes,children:[!J&&l.jsx(P,{id:t,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:q,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:_,sourceY:U,targetX:W,targetY:X,sourcePosition:D,targetPosition:$,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:ee,markerEnd:A,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),H&&l.jsx(F5,{edge:N,isReconnectable:H,reconnectRadius:y,onReconnect:b,onReconnectStart:w,onReconnectEnd:v,sourceX:_,sourceY:U,targetX:W,targetY:X,sourcePosition:D,targetPosition:$,setUpdateHover:Y,setReconnecting:z})]})})}var $5=B.memo(q5);const Y5=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function _b({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:n,edgeTypes:i,noPanClassName:u,onReconnect:d,onEdgeContextMenu:m,onEdgeMouseEnter:f,onEdgeMouseMove:g,onEdgeMouseLeave:x,onEdgeClick:y,reconnectRadius:b,onEdgeDoubleClick:w,onReconnectStart:v,onReconnectEnd:k,disableKeyboardA11y:M}){const{edgesFocusable:T,edgesReconnectable:E,elementsSelectable:R,onError:N}=$e(Y5,pt),j=j5(r);return l.jsxs("div",{className:"react-flow__edges",children:[l.jsx(P5,{defaultColor:t,rfId:n}),j.map(I=>l.jsx($5,{id:I,edgesFocusable:T,edgesReconnectable:E,elementsSelectable:R,noPanClassName:u,onReconnect:d,onContextMenu:m,onMouseEnter:f,onMouseMove:g,onMouseLeave:x,onClick:y,reconnectRadius:b,onDoubleClick:w,onReconnectStart:v,onReconnectEnd:k,rfId:n,onError:N,edgeTypes:i,disableKeyboardA11y:M},I))]})}_b.displayName="EdgeRenderer";const W5=B.memo(_b),K5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Q5({children:t}){const r=$e(K5);return l.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function X5(t){const r=lf(),n=B.useRef(!1);B.useEffect(()=>{!n.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),n.current=!0)},[t,r.viewportInitialized])}const Z5=t=>t.panZoom?.syncViewport;function J5(t){const r=$e(Z5),n=ht();return B.useEffect(()=>{t&&(r?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function e3(t){return t.connection.inProgress?{...t.connection,to:hi(t.connection.to,t.transform)}:{...t.connection}}function t3(t){return e3}function a3(t){const r=t3();return $e(r,pt)}const n3=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function r3({containerStyle:t,style:r,type:n,component:i}){const{nodesConnectable:u,width:d,height:m,isValid:f,inProgress:g}=$e(n3,pt);return!(d&&u&&g)?null:l.jsx("svg",{style:t,width:d,height:m,className:"react-flow__connectionline react-flow__container",children:l.jsx("g",{className:jt(["react-flow__connection",_y(f)]),children:l.jsx(Ab,{style:r,type:n,CustomComponent:i,isValid:f})})})}const Ab=({style:t,type:r=rr.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:u,from:d,fromNode:m,fromHandle:f,fromPosition:g,to:x,toNode:y,toHandle:b,toPosition:w,pointer:v}=a3();if(!u)return;if(n)return l.jsx(n,{connectionLineType:r,connectionLineStyle:t,fromNode:m,fromHandle:f,fromX:d.x,fromY:d.y,toX:x.x,toY:x.y,fromPosition:g,toPosition:w,connectionStatus:_y(i),toNode:y,toHandle:b,pointer:v});let k="";const M={sourceX:d.x,sourceY:d.y,sourcePosition:g,targetX:x.x,targetY:x.y,targetPosition:w};switch(r){case rr.Bezier:[k]=tf(M);break;case rr.SimpleBezier:[k]=xb(M);break;case rr.Step:[k]=L0({...M,borderRadius:0});break;case rr.SmoothStep:[k]=L0(M);break;default:[k]=Gy(M)}return l.jsx("path",{d:k,fill:"none",className:"react-flow__connection-path",style:t})};Ab.displayName="ConnectionLine";const o3={};function Nx(t=o3){B.useRef(t),ht(),B.useEffect(()=>{},[t])}function s3(){ht(),B.useRef(!1),B.useEffect(()=>{},[])}function jb({nodeTypes:t,edgeTypes:r,onInit:n,onNodeClick:i,onEdgeClick:u,onNodeDoubleClick:d,onEdgeDoubleClick:m,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:x,onNodeContextMenu:y,onSelectionContextMenu:b,onSelectionStart:w,onSelectionEnd:v,connectionLineType:k,connectionLineStyle:M,connectionLineComponent:T,connectionLineContainerStyle:E,selectionKeyCode:R,selectionOnDrag:N,selectionMode:j,multiSelectionKeyCode:I,panActivationKeyCode:P,zoomActivationKeyCode:O,deleteKeyCode:H,onlyRenderVisibleElements:q,elementsSelectable:G,defaultViewport:F,translateExtent:Y,minZoom:J,maxZoom:z,preventScrolling:V,defaultMarkerColor:S,zoomOnScroll:_,zoomOnPinch:U,panOnScroll:W,panOnScrollSpeed:X,panOnScrollMode:D,zoomOnDoubleClick:$,panOnDrag:ee,onPaneClick:A,onPaneMouseEnter:Z,onPaneMouseMove:se,onPaneMouseLeave:ue,onPaneScroll:ie,onPaneContextMenu:pe,paneClickDistance:be,nodeClickDistance:we,onEdgeContextMenu:ye,onEdgeMouseEnter:ke,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ae,reconnectRadius:Le,onReconnect:st,onReconnectStart:yt,onReconnectEnd:Rt,noDragClassName:vt,noWheelClassName:Lt,noPanClassName:Dt,disableKeyboardA11y:de,nodeExtent:Ee,rfId:Ge,viewport:Ye,onViewportChange:Te}){return Nx(t),Nx(r),s3(),X5(n),J5(Ye),l.jsx(k5,{onPaneClick:A,onPaneMouseEnter:Z,onPaneMouseMove:se,onPaneMouseLeave:ue,onPaneContextMenu:pe,onPaneScroll:ie,paneClickDistance:be,deleteKeyCode:H,selectionKeyCode:R,selectionOnDrag:N,selectionMode:j,onSelectionStart:w,onSelectionEnd:v,multiSelectionKeyCode:I,panActivationKeyCode:P,zoomActivationKeyCode:O,elementsSelectable:G,zoomOnScroll:_,zoomOnPinch:U,zoomOnDoubleClick:$,panOnScroll:W,panOnScrollSpeed:X,panOnScrollMode:D,panOnDrag:ee,defaultViewport:F,translateExtent:Y,minZoom:J,maxZoom:z,onSelectionContextMenu:b,preventScrolling:V,noDragClassName:vt,noWheelClassName:Lt,noPanClassName:Dt,disableKeyboardA11y:de,onViewportChange:Te,isControlledViewport:!!Ye,children:l.jsxs(Q5,{children:[l.jsx(W5,{edgeTypes:r,onEdgeClick:u,onEdgeDoubleClick:m,onReconnect:st,onReconnectStart:yt,onReconnectEnd:Rt,onlyRenderVisibleElements:q,onEdgeContextMenu:ye,onEdgeMouseEnter:ke,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ae,reconnectRadius:Le,defaultMarkerColor:S,noPanClassName:Dt,disableKeyboardA11y:de,rfId:Ge}),l.jsx(r3,{style:M,type:k,component:T,containerStyle:E}),l.jsx("div",{className:"react-flow__edgelabel-renderer"}),l.jsx(A5,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:x,onNodeContextMenu:y,nodeClickDistance:we,onlyRenderVisibleElements:q,noPanClassName:Dt,noDragClassName:vt,disableKeyboardA11y:de,nodeExtent:Ee,rfId:Ge}),l.jsx("div",{className:"react-flow__viewport-portal"})]})})}jb.displayName="GraphView";const i3=B.memo(jb),Ex=({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,width:u,height:d,fitView:m,fitViewOptions:f,minZoom:g=.5,maxZoom:x=2,nodeOrigin:y,nodeExtent:b,zIndexMode:w="basic"}={})=>{const v=new Map,k=new Map,M=new Map,T=new Map,E=i??r??[],R=n??t??[],N=y??[0,0],j=b??ai;qy(M,T,E);const I=O0(R,v,k,{nodeOrigin:N,nodeExtent:j,zIndexMode:w});let P=[0,0,1];if(m&&u&&d){const O=mi(v,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:H,y:q,zoom:G}=J0(O,u,d,g,x,f?.padding??.1);P=[H,q,G]}return{rfId:"1",width:u??0,height:d??0,transform:P,nodes:R,nodesInitialized:I,nodeLookup:v,parentLookup:k,edges:E,edgeLookup:T,connectionLookup:M,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:g,maxZoom:x,translateExtent:ai,nodeExtent:j,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Uo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:m??!1,fitViewOptions:f,fitViewResolver:null,connection:{...My},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:vN,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Ty,zIndexMode:w,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},l3=({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,width:u,height:d,fitView:m,fitViewOptions:f,minZoom:g,maxZoom:x,nodeOrigin:y,nodeExtent:b,zIndexMode:w})=>EE((v,k)=>{async function M(){const{nodeLookup:T,panZoom:E,fitViewOptions:R,fitViewResolver:N,width:j,height:I,minZoom:P,maxZoom:O}=k();E&&(await wN({nodes:T,width:j,height:I,panZoom:E,minZoom:P,maxZoom:O},R),N?.resolve(!0),v({fitViewResolver:null}))}return{...Ex({nodes:t,edges:r,width:u,height:d,fitView:m,fitViewOptions:f,minZoom:g,maxZoom:x,nodeOrigin:y,nodeExtent:b,defaultNodes:n,defaultEdges:i,zIndexMode:w}),setNodes:T=>{const{nodeLookup:E,parentLookup:R,nodeOrigin:N,elevateNodesOnSelect:j,fitViewQueued:I,zIndexMode:P}=k(),O=O0(T,E,R,{nodeOrigin:N,nodeExtent:b,elevateNodesOnSelect:j,checkEquality:!0,zIndexMode:P});I&&O?(M(),v({nodes:T,nodesInitialized:O,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:T,nodesInitialized:O})},setEdges:T=>{const{connectionLookup:E,edgeLookup:R}=k();qy(E,R,T),v({edges:T})},setDefaultNodesAndEdges:(T,E)=>{if(T){const{setNodes:R}=k();R(T),v({hasDefaultNodes:!0})}if(E){const{setEdges:R}=k();R(E),v({hasDefaultEdges:!0})}},updateNodeInternals:T=>{const{triggerNodeChanges:E,nodeLookup:R,parentLookup:N,domNode:j,nodeOrigin:I,nodeExtent:P,debug:O,fitViewQueued:H,zIndexMode:q}=k(),{changes:G,updatedInternals:F}=FN(T,R,N,j,I,P,q);F&&(BN(R,N,{nodeOrigin:I,nodeExtent:P,zIndexMode:q}),H?(M(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),G?.length>0&&(O&&console.log("React Flow: trigger node changes",G),E?.(G)))},updateNodePositions:(T,E=!1)=>{const R=[];let N=[];const{nodeLookup:j,triggerNodeChanges:I,connection:P,updateConnection:O,onNodesChangeMiddlewareMap:H}=k();for(const[q,G]of T){const F=j.get(q),Y=!!(F?.expandParent&&F?.parentId&&G?.position),J={id:q,type:"position",position:Y?{x:Math.max(0,G.position.x),y:Math.max(0,G.position.y)}:G.position,dragging:E};if(F&&P.inProgress&&P.fromNode.id===F.id){const z=zr(F,P.fromHandle,xe.Left,!0);O({...P,from:z})}Y&&F.parentId&&R.push({id:q,parentId:F.parentId,rect:{...G.internals.positionAbsolute,width:G.measured.width??0,height:G.measured.height??0}}),N.push(J)}if(R.length>0){const{parentLookup:q,nodeOrigin:G}=k(),F=sf(R,j,q,G);N.push(...F)}for(const q of H.values())N=q(N);I(N)},triggerNodeChanges:T=>{const{onNodesChange:E,setNodes:R,nodes:N,hasDefaultNodes:j,debug:I}=k();if(T?.length){if(j){const P=sb(T,N);R(P)}I&&console.log("React Flow: trigger node changes",T),E?.(T)}},triggerEdgeChanges:T=>{const{onEdgesChange:E,setEdges:R,edges:N,hasDefaultEdges:j,debug:I}=k();if(T?.length){if(j){const P=ib(T,N);R(P)}I&&console.log("React Flow: trigger edge changes",T),E?.(T)}},addSelectedNodes:T=>{const{multiSelectionActive:E,edgeLookup:R,nodeLookup:N,triggerNodeChanges:j,triggerEdgeChanges:I}=k();if(E){const P=T.map(O=>_r(O,!0));j(P);return}j(jo(N,new Set([...T]),!0)),I(jo(R))},addSelectedEdges:T=>{const{multiSelectionActive:E,edgeLookup:R,nodeLookup:N,triggerNodeChanges:j,triggerEdgeChanges:I}=k();if(E){const P=T.map(O=>_r(O,!0));I(P);return}I(jo(R,new Set([...T]))),j(jo(N,new Set,!0))},unselectNodesAndEdges:({nodes:T,edges:E}={})=>{const{edges:R,nodes:N,nodeLookup:j,triggerNodeChanges:I,triggerEdgeChanges:P}=k(),O=T||N,H=E||R,q=O.map(F=>{const Y=j.get(F.id);return Y&&(Y.selected=!1),_r(F.id,!1)}),G=H.map(F=>_r(F.id,!1));I(q),P(G)},setMinZoom:T=>{const{panZoom:E,maxZoom:R}=k();E?.setScaleExtent([T,R]),v({minZoom:T})},setMaxZoom:T=>{const{panZoom:E,minZoom:R}=k();E?.setScaleExtent([R,T]),v({maxZoom:T})},setTranslateExtent:T=>{k().panZoom?.setTranslateExtent(T),v({translateExtent:T})},resetSelectedElements:()=>{const{edges:T,nodes:E,triggerNodeChanges:R,triggerEdgeChanges:N,elementsSelectable:j}=k();if(!j)return;const I=E.reduce((O,H)=>H.selected?[...O,_r(H.id,!1)]:O,[]),P=T.reduce((O,H)=>H.selected?[...O,_r(H.id,!1)]:O,[]);R(I),N(P)},setNodeExtent:T=>{const{nodes:E,nodeLookup:R,parentLookup:N,nodeOrigin:j,elevateNodesOnSelect:I,nodeExtent:P,zIndexMode:O}=k();T[0][0]===P[0][0]&&T[0][1]===P[0][1]&&T[1][0]===P[1][0]&&T[1][1]===P[1][1]||(O0(E,R,N,{nodeOrigin:j,nodeExtent:T,elevateNodesOnSelect:I,checkEquality:!1,zIndexMode:O}),v({nodeExtent:T}))},panBy:T=>{const{transform:E,width:R,height:N,panZoom:j,translateExtent:I}=k();return qN({delta:T,panZoom:j,transform:E,translateExtent:I,width:R,height:N})},setCenter:async(T,E,R)=>{const{width:N,height:j,maxZoom:I,panZoom:P}=k();if(!P)return Promise.resolve(!1);const O=typeof R?.zoom<"u"?R.zoom:I;return await P.setViewport({x:N/2-T*O,y:j/2-E*O,zoom:O},{duration:R?.duration,ease:R?.ease,interpolate:R?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...My}})},updateConnection:T=>{v({connection:T})},reset:()=>v({...Ex()})}},Object.is);function c3({initialNodes:t,initialEdges:r,defaultNodes:n,defaultEdges:i,initialWidth:u,initialHeight:d,initialMinZoom:m,initialMaxZoom:f,initialFitViewOptions:g,fitView:x,nodeOrigin:y,nodeExtent:b,zIndexMode:w,children:v}){const[k]=B.useState(()=>l3({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,width:u,height:d,fitView:x,minZoom:m,maxZoom:f,fitViewOptions:g,nodeOrigin:y,nodeExtent:b,zIndexMode:w}));return l.jsx(TE,{value:k,children:l.jsx(QE,{children:v})})}function u3({children:t,nodes:r,edges:n,defaultNodes:i,defaultEdges:u,width:d,height:m,fitView:f,fitViewOptions:g,minZoom:x,maxZoom:y,nodeOrigin:b,nodeExtent:w,zIndexMode:v}){return B.useContext(_c)?l.jsx(l.Fragment,{children:t}):l.jsx(c3,{initialNodes:r,initialEdges:n,defaultNodes:i,defaultEdges:u,initialWidth:d,initialHeight:m,fitView:f,initialFitViewOptions:g,initialMinZoom:x,initialMaxZoom:y,nodeOrigin:b,nodeExtent:w,zIndexMode:v,children:t})}const d3={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function f3({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,className:u,nodeTypes:d,edgeTypes:m,onNodeClick:f,onEdgeClick:g,onInit:x,onMove:y,onMoveStart:b,onMoveEnd:w,onConnect:v,onConnectStart:k,onConnectEnd:M,onClickConnectStart:T,onClickConnectEnd:E,onNodeMouseEnter:R,onNodeMouseMove:N,onNodeMouseLeave:j,onNodeContextMenu:I,onNodeDoubleClick:P,onNodeDragStart:O,onNodeDrag:H,onNodeDragStop:q,onNodesDelete:G,onEdgesDelete:F,onDelete:Y,onSelectionChange:J,onSelectionDragStart:z,onSelectionDrag:V,onSelectionDragStop:S,onSelectionContextMenu:_,onSelectionStart:U,onSelectionEnd:W,onBeforeDelete:X,connectionMode:D,connectionLineType:$=rr.Bezier,connectionLineStyle:ee,connectionLineComponent:A,connectionLineContainerStyle:Z,deleteKeyCode:se="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:ie=!1,selectionMode:pe=ni.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:we=oi()?"Meta":"Control",zoomActivationKeyCode:ye=oi()?"Meta":"Control",snapToGrid:ke,snapGrid:Ce,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Le,nodesDraggable:st,autoPanOnNodeFocus:yt,nodesConnectable:Rt,nodesFocusable:vt,nodeOrigin:Lt=rb,edgesFocusable:Dt,edgesReconnectable:de,elementsSelectable:Ee=!0,defaultViewport:Ge=BE,minZoom:Ye=.5,maxZoom:Te=2,translateExtent:je=ai,preventScrolling:He=!0,nodeExtent:ct,defaultMarkerColor:Ct="#b1b1b7",zoomOnScroll:Re=!0,zoomOnPinch:St=!0,panOnScroll:bt=!1,panOnScrollSpeed:Vt=.5,panOnScrollMode:lt=Dr.Free,zoomOnDoubleClick:Ft=!0,panOnDrag:ya=!0,onPaneClick:Gr,onPaneMouseEnter:Ua,onPaneMouseMove:Ba,onPaneMouseLeave:Vr,onPaneScroll:Ja,onPaneContextMenu:Fr,paneClickDistance:lr=1,nodeClickDistance:Rc=0,children:xi,onReconnect:Ko,onReconnectStart:cr,onReconnectEnd:Lc,onEdgeContextMenu:yi,onEdgeDoubleClick:bi,onEdgeMouseEnter:wi,onEdgeMouseMove:Qo,onEdgeMouseLeave:Xo,reconnectRadius:ki=10,onNodesChange:vi,onEdgesChange:za,noDragClassName:Ot="nodrag",noWheelClassName:qt="nowheel",noPanClassName:en="nopan",fitView:qr,fitViewOptions:Ci,connectOnClick:Dc,attributionPosition:Si,proOptions:ur,defaultEdgeOptions:Zo,elevateNodesOnSelect:Mn=!0,elevateEdgesOnSelect:_n=!1,disableKeyboardA11y:An=!1,autoPanOnConnect:jn,autoPanOnNodeDrag:Nt,autoPanSpeed:Ni,connectionRadius:Ei,isValidConnection:tn,onError:Rn,style:Oc,id:Jo,nodeDragThreshold:Ti,connectionDragThreshold:Pc,viewport:$r,onViewportChange:Yr,width:Ma,height:Qt,colorMode:Mi="light",debug:Ic,onScroll:Wr,ariaLabelConfig:_i,zIndexMode:dr="basic",...Hc},Xt){const fr=Jo||"1",Ai=FE(Mi),es=B.useCallback(an=>{an.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Wr?.(an)},[Wr]);return l.jsx("div",{"data-testid":"rf__wrapper",...Hc,onScroll:es,style:{...Oc,...d3},ref:Xt,className:jt(["react-flow",u,Ai]),id:Jo,role:"application",children:l.jsxs(u3,{nodes:t,edges:r,width:Ma,height:Qt,fitView:qr,fitViewOptions:Ci,minZoom:Ye,maxZoom:Te,nodeOrigin:Lt,nodeExtent:ct,zIndexMode:dr,children:[l.jsx(i3,{onInit:x,onNodeClick:f,onEdgeClick:g,onNodeMouseEnter:R,onNodeMouseMove:N,onNodeMouseLeave:j,onNodeContextMenu:I,onNodeDoubleClick:P,nodeTypes:d,edgeTypes:m,connectionLineType:$,connectionLineStyle:ee,connectionLineComponent:A,connectionLineContainerStyle:Z,selectionKeyCode:ue,selectionOnDrag:ie,selectionMode:pe,deleteKeyCode:se,multiSelectionKeyCode:we,panActivationKeyCode:be,zoomActivationKeyCode:ye,onlyRenderVisibleElements:Ae,defaultViewport:Ge,translateExtent:je,minZoom:Ye,maxZoom:Te,preventScrolling:He,zoomOnScroll:Re,zoomOnPinch:St,zoomOnDoubleClick:Ft,panOnScroll:bt,panOnScrollSpeed:Vt,panOnScrollMode:lt,panOnDrag:ya,onPaneClick:Gr,onPaneMouseEnter:Ua,onPaneMouseMove:Ba,onPaneMouseLeave:Vr,onPaneScroll:Ja,onPaneContextMenu:Fr,paneClickDistance:lr,nodeClickDistance:Rc,onSelectionContextMenu:_,onSelectionStart:U,onSelectionEnd:W,onReconnect:Ko,onReconnectStart:cr,onReconnectEnd:Lc,onEdgeContextMenu:yi,onEdgeDoubleClick:bi,onEdgeMouseEnter:wi,onEdgeMouseMove:Qo,onEdgeMouseLeave:Xo,reconnectRadius:ki,defaultMarkerColor:Ct,noDragClassName:Ot,noWheelClassName:qt,noPanClassName:en,rfId:fr,disableKeyboardA11y:An,nodeExtent:ct,viewport:$r,onViewportChange:Yr}),l.jsx(VE,{nodes:t,edges:r,defaultNodes:n,defaultEdges:i,onConnect:v,onConnectStart:k,onConnectEnd:M,onClickConnectStart:T,onClickConnectEnd:E,nodesDraggable:st,autoPanOnNodeFocus:yt,nodesConnectable:Rt,nodesFocusable:vt,edgesFocusable:Dt,edgesReconnectable:de,elementsSelectable:Ee,elevateNodesOnSelect:Mn,elevateEdgesOnSelect:_n,minZoom:Ye,maxZoom:Te,nodeExtent:ct,onNodesChange:vi,onEdgesChange:za,snapToGrid:ke,snapGrid:Ce,connectionMode:D,translateExtent:je,connectOnClick:Dc,defaultEdgeOptions:Zo,fitView:qr,fitViewOptions:Ci,onNodesDelete:G,onEdgesDelete:F,onDelete:Y,onNodeDragStart:O,onNodeDrag:H,onNodeDragStop:q,onSelectionDrag:V,onSelectionDragStart:z,onSelectionDragStop:S,onMove:y,onMoveStart:b,onMoveEnd:w,noPanClassName:en,nodeOrigin:Lt,rfId:fr,autoPanOnConnect:jn,autoPanOnNodeDrag:Nt,autoPanSpeed:Ni,onError:Rn,connectionRadius:Ei,isValidConnection:tn,selectNodesOnDrag:Le,nodeDragThreshold:Ti,connectionDragThreshold:Pc,onBeforeDelete:X,debug:Ic,ariaLabelConfig:_i,zIndexMode:dr}),l.jsx(UE,{onSelectionChange:J}),xi,l.jsx(DE,{proOptions:ur,position:Si}),l.jsx(LE,{rfId:fr,disableKeyboardA11y:An})]})})}var m3=lb(f3);function p3(t){const[r,n]=B.useState(t),i=B.useCallback(u=>n(d=>sb(u,d)),[]);return[r,n,i]}function h3(t){const[r,n]=B.useState(t),i=B.useCallback(u=>n(d=>ib(u,d)),[]);return[r,n,i]}function g3({dimensions:t,lineWidth:r,variant:n,className:i}){return l.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:jt(["react-flow__background-pattern",n,i])})}function x3({radius:t,className:r}){return l.jsx("circle",{cx:t,cy:t,r:t,className:jt(["react-flow__background-pattern","dots",r])})}var or;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(or||(or={}));const y3={[or.Dots]:1,[or.Lines]:1,[or.Cross]:6},b3=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Rb({id:t,variant:r=or.Dots,gap:n=20,size:i,lineWidth:u=1,offset:d=0,color:m,bgColor:f,style:g,className:x,patternClassName:y}){const b=B.useRef(null),{transform:w,patternId:v}=$e(b3,pt),k=i||y3[r],M=r===or.Dots,T=r===or.Cross,E=Array.isArray(n)?n:[n,n],R=[E[0]*w[2]||1,E[1]*w[2]||1],N=k*w[2],j=Array.isArray(d)?d:[d,d],I=T?[N,N]:R,P=[j[0]*w[2]||1+I[0]/2,j[1]*w[2]||1+I[1]/2],O=`${v}${t||""}`;return l.jsxs("svg",{className:jt(["react-flow__background",x]),style:{...g,...jc,"--xy-background-color-props":f,"--xy-background-pattern-color-props":m},ref:b,"data-testid":"rf__background",children:[l.jsx("pattern",{id:O,x:w[0]%R[0],y:w[1]%R[1],width:R[0],height:R[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`,children:M?l.jsx(x3,{radius:N/2,className:y}):l.jsx(g3,{dimensions:I,lineWidth:u,variant:r,className:y})}),l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${O})`})]})}Rb.displayName="Background";const w3=B.memo(Rb);function k3(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:l.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function v3(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:l.jsx("path",{d:"M0 0h32v4.2H0z"})})}function C3(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:l.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function S3(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function N3(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Jl({children:t,className:r,...n}){return l.jsx("button",{type:"button",className:jt(["react-flow__controls-button",r]),...n,children:t})}const E3=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function Lb({style:t,showZoom:r=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:u,onZoomIn:d,onZoomOut:m,onFitView:f,onInteractiveChange:g,className:x,children:y,position:b="bottom-left",orientation:w="vertical","aria-label":v}){const k=ht(),{isInteractive:M,minZoomReached:T,maxZoomReached:E,ariaLabelConfig:R}=$e(E3,pt),{zoomIn:N,zoomOut:j,fitView:I}=lf(),P=()=>{N(),d?.()},O=()=>{j(),m?.()},H=()=>{I(u),f?.()},q=()=>{k.setState({nodesDraggable:!M,nodesConnectable:!M,elementsSelectable:!M}),g?.(!M)},G=w==="horizontal"?"horizontal":"vertical";return l.jsxs(Ac,{className:jt(["react-flow__controls",G,x]),position:b,style:t,"data-testid":"rf__controls","aria-label":v??R["controls.ariaLabel"],children:[r&&l.jsxs(l.Fragment,{children:[l.jsx(Jl,{onClick:P,className:"react-flow__controls-zoomin",title:R["controls.zoomIn.ariaLabel"],"aria-label":R["controls.zoomIn.ariaLabel"],disabled:E,children:l.jsx(k3,{})}),l.jsx(Jl,{onClick:O,className:"react-flow__controls-zoomout",title:R["controls.zoomOut.ariaLabel"],"aria-label":R["controls.zoomOut.ariaLabel"],disabled:T,children:l.jsx(v3,{})})]}),n&&l.jsx(Jl,{className:"react-flow__controls-fitview",onClick:H,title:R["controls.fitView.ariaLabel"],"aria-label":R["controls.fitView.ariaLabel"],children:l.jsx(C3,{})}),i&&l.jsx(Jl,{className:"react-flow__controls-interactive",onClick:q,title:R["controls.interactive.ariaLabel"],"aria-label":R["controls.interactive.ariaLabel"],children:M?l.jsx(N3,{}):l.jsx(S3,{})}),y]})}Lb.displayName="Controls";const T3=B.memo(Lb);function M3({id:t,x:r,y:n,width:i,height:u,style:d,color:m,strokeColor:f,strokeWidth:g,className:x,borderRadius:y,shapeRendering:b,selected:w,onClick:v}){const{background:k,backgroundColor:M}=d||{},T=m||k||M;return l.jsx("rect",{className:jt(["react-flow__minimap-node",{selected:w},x]),x:r,y:n,rx:y,ry:y,width:i,height:u,style:{fill:T,stroke:f,strokeWidth:g},shapeRendering:b,onClick:v?E=>v(E,t):void 0})}const _3=B.memo(M3),A3=t=>t.nodes.map(r=>r.id),m0=t=>t instanceof Function?t:()=>t;function j3({nodeStrokeColor:t,nodeColor:r,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:u,nodeComponent:d=_3,onClick:m}){const f=$e(A3,pt),g=m0(r),x=m0(t),y=m0(n),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return l.jsx(l.Fragment,{children:f.map(w=>l.jsx(L3,{id:w,nodeColorFunc:g,nodeStrokeColorFunc:x,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:u,NodeComponent:d,onClick:m,shapeRendering:b},w))})}function R3({id:t,nodeColorFunc:r,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:u,nodeStrokeWidth:d,shapeRendering:m,NodeComponent:f,onClick:g}){const{node:x,x:y,y:b,width:w,height:v}=$e(k=>{const{internals:M}=k.nodeLookup.get(t),T=M.userNode,{x:E,y:R}=M.positionAbsolute,{width:N,height:j}=Tn(T);return{node:T,x:E,y:R,width:N,height:j}},pt);return!x||x.hidden||!Oy(x)?null:l.jsx(f,{x:y,y:b,width:w,height:v,style:x.style,selected:!!x.selected,className:i(x),color:r(x),borderRadius:u,strokeColor:n(x),strokeWidth:d,shapeRendering:m,onClick:g,id:x.id})}const L3=B.memo(R3);var D3=B.memo(j3);const O3=200,P3=150,I3=t=>!t.hidden,H3=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?Dy(mi(t.nodeLookup,{filter:I3}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},U3="react-flow__minimap-desc";function Db({style:t,className:r,nodeStrokeColor:n,nodeColor:i,nodeClassName:u="",nodeBorderRadius:d=5,nodeStrokeWidth:m,nodeComponent:f,bgColor:g,maskColor:x,maskStrokeColor:y,maskStrokeWidth:b,position:w="bottom-right",onClick:v,onNodeClick:k,pannable:M=!1,zoomable:T=!1,ariaLabel:E,inversePan:R,zoomStep:N=1,offsetScale:j=5}){const I=ht(),P=B.useRef(null),{boundingRect:O,viewBB:H,rfId:q,panZoom:G,translateExtent:F,flowWidth:Y,flowHeight:J,ariaLabelConfig:z}=$e(H3,pt),V=t?.width??O3,S=t?.height??P3,_=O.width/V,U=O.height/S,W=Math.max(_,U),X=W*V,D=W*S,$=j*W,ee=O.x-(X-O.width)/2-$,A=O.y-(D-O.height)/2-$,Z=X+$*2,se=D+$*2,ue=`${U3}-${q}`,ie=B.useRef(0),pe=B.useRef();ie.current=W,B.useEffect(()=>{if(P.current&&G)return pe.current=eE({domNode:P.current,panZoom:G,getTransform:()=>I.getState().transform,getViewScale:()=>ie.current}),()=>{pe.current?.destroy()}},[G]),B.useEffect(()=>{pe.current?.update({translateExtent:F,width:Y,height:J,inversePan:R,pannable:M,zoomStep:N,zoomable:T})},[M,T,R,N,F,Y,J]);const be=v?ke=>{const[Ce,Ae]=pe.current?.pointer(ke)||[0,0];v(ke,{x:Ce,y:Ae})}:void 0,we=k?B.useCallback((ke,Ce)=>{const Ae=I.getState().nodeLookup.get(Ce).internals.userNode;k(ke,Ae)},[]):void 0,ye=E??z["minimap.ariaLabel"];return l.jsx(Ac,{position:w,style:{...t,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof b=="number"?b*W:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof m=="number"?m:void 0},className:jt(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:l.jsxs("svg",{width:V,height:S,viewBox:`${ee} ${A} ${Z} ${se}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:P,onClick:be,children:[ye&&l.jsx("title",{id:ue,children:ye}),l.jsx(D3,{onClick:we,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:d,nodeClassName:u,nodeStrokeWidth:m,nodeComponent:f}),l.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-$},${A-$}h${Z+$*2}v${se+$*2}h${-Z-$*2}z
        M${H.x},${H.y}h${H.width}v${H.height}h${-H.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Db.displayName="MiniMap";B.memo(Db);const B3=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,z3={[Vo.Line]:"right",[Vo.Handle]:"bottom-right"};function G3({nodeId:t,position:r,variant:n=Vo.Handle,className:i,style:u=void 0,children:d,color:m,minWidth:f=10,minHeight:g=10,maxWidth:x=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:b=!1,resizeDirection:w,autoScale:v=!0,shouldResize:k,onResizeStart:M,onResize:T,onResizeEnd:E}){const R=fb(),N=typeof t=="string"?t:R,j=ht(),I=B.useRef(null),P=n===Vo.Handle,O=$e(B.useCallback(B3(P&&v),[P,v]),pt),H=B.useRef(null),q=r??z3[n];B.useEffect(()=>{if(!(!I.current||!N))return H.current||(H.current=pE({domNode:I.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:F,transform:Y,snapGrid:J,snapToGrid:z,nodeOrigin:V,domNode:S}=j.getState();return{nodeLookup:F,transform:Y,snapGrid:J,snapToGrid:z,nodeOrigin:V,paneDomNode:S}},onChange:(F,Y)=>{const{triggerNodeChanges:J,nodeLookup:z,parentLookup:V,nodeOrigin:S}=j.getState(),_=[],U={x:F.x,y:F.y},W=z.get(N);if(W&&W.expandParent&&W.parentId){const X=W.origin??S,D=F.width??W.measured.width??0,$=F.height??W.measured.height??0,ee={id:W.id,parentId:W.parentId,rect:{width:D,height:$,...Py({x:F.x??W.position.x,y:F.y??W.position.y},{width:D,height:$},W.parentId,z,X)}},A=sf([ee],z,V,S);_.push(...A),U.x=F.x?Math.max(X[0]*D,F.x):void 0,U.y=F.y?Math.max(X[1]*$,F.y):void 0}if(U.x!==void 0&&U.y!==void 0){const X={id:N,type:"position",position:{...U}};_.push(X)}if(F.width!==void 0&&F.height!==void 0){const D={id:N,type:"dimensions",resizing:!0,setAttributes:w?w==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};_.push(D)}for(const X of Y){const D={...X,type:"position"};_.push(D)}J(_)},onEnd:({width:F,height:Y})=>{const J={id:N,type:"dimensions",resizing:!1,dimensions:{width:F,height:Y}};j.getState().triggerNodeChanges([J])}})),H.current.update({controlPosition:q,boundaries:{minWidth:f,minHeight:g,maxWidth:x,maxHeight:y},keepAspectRatio:b,resizeDirection:w,onResizeStart:M,onResize:T,onResizeEnd:E,shouldResize:k}),()=>{H.current?.destroy()}},[q,f,g,x,y,b,M,T,E,k]);const G=q.split("-");return l.jsx("div",{className:jt(["react-flow__resize-control","nodrag",...G,n,i]),ref:I,style:{...u,scale:O,...m&&{[P?"backgroundColor":"borderColor"]:m}},children:d})}B.memo(G3);const V3={ROUGH_CHANCE:"roughRarity",FRAMED_CHANCE:"framedRarity",OPUS_CHANCE:"opusRarity",MASTERPIECE_CHANCE:"masterpieceRarity",ROUGH_SKETCHES:"roughSketches",FRAMED_SKETCHES:"framedSketches",OPUS_SKETCHES:"opusSketches",MASTERPIECE_SKETCHES:"masterpieceSketches",ATK_PERCENT:"attackIncrease",HP_PERCENT:"hpIncrease",REGEN_PERCENT:"regenIncrease",ARMOR_PERCENT:"armorIncrease",DODGE_PERCENT:"dodgeIncrease",MIN_DAMAGE_PERCENT:"minDamageIncrease",MAX_DAMAGE_PERCENT:"maxDamageIncrease",ARMOR_PEN_PERCENT:"armorPenIncrease",LIFESTEAL_PERCENT:"lifestealIncrease",EXECUTE_PERCENT:"executeIncrease",BLOCK_CHANCE_PERCENT:"blockChanceIncrease",BLOCK_AMOUNT_PERCENT:"blockAmountIncrease",ACCURACY_PERCENT:"accuracyIncrease",BLEED_CHANCE_PERCENT:"bleedChanceIncrease",PLAGUE_CHANCE_PERCENT:"plagueChanceIncrease",BURN_CHANCE_PERCENT:"burnChanceIncrease",BURN_DAMAGE_PERCENT:"burnDamageIncrease",ELECTROCUTE_CHANCE_PERCENT:"electrocuteChanceIncrease",CURSE_CHANCE_PERCENT:"curseChanceIncrease",ATK_SPEED:"attackDelay",DECAY_FACTOR:"rewardDecay",FLEE_PENALTY:"fleePenalty",DEATH_PENALTY:"deathRecovery",LOOKAHEAD_BONUS:"lookahead",TIME_ACCELERATION_BONUS:"timeAcceleration",OVERKILL_BONUS:"overkillMultiplier",QUINTESSENCE_GAIN:"quintessenceGain",QUINTESSENCE_PINNACLE:"quintessencePinnacle",FREE_TOOLS:"freeTools",AUTO_ENABLE_TOOLS:"autoEnableTools",GENERATOR_MULTIPLIER_EXPONENT:"generatorMultiplier",GRAPHITE_UPGRADE_COST:"graphiteUpgradeCost",WAX_UPGRADE_COST:"waxUpgradeCost",CHARCOAL_UPGRADE_COST:"charcoalUpgradeCost",COFFEE_UPGRADE_COST:"coffeeUpgradeCost",INK_UPGRADE_COST:"inkUpgradeCost",MARKER_UPGRADE_COST:"markerUpgradeCost",ACRYLIC_UPGRADE_COST:"acrylicUpgradeCost",SPRAY_UPGRADE_COST:"sprayUpgradeCost",PHOTON_UPGRADE_COST:"photonUpgradeCost",GOLD_LEAF_UPGRADE_COST:"goldLeafUpgradeCost",GRAPHITE_REWARD:"graphiteRewardMultiplier",WAX_REWARD:"waxRewardMultiplier",CHARCOAL_REWARD:"charcoalRewardMultiplier",COFFEE_REWARD:"coffeeRewardMultiplier",INK_REWARD:"inkRewardMultiplier",MARKER_REWARD:"markerRewardMultiplier",ACRYLIC_REWARD:"acrylicRewardMultiplier",SPRAY_REWARD:"sprayRewardMultiplier",PHOTON_REWARD:"photonRewardMultiplier",GOLD_LEAF_REWARD:"goldLeafRewardMultiplier",GRAPHITE_REWARD_EXPONENT:"graphiteRewardExponent",WAX_REWARD_EXPONENT:"waxRewardExponent",CHARCOAL_REWARD_EXPONENT:"charcoalRewardExponent",COFFEE_REWARD_EXPONENT:"coffeeRewardExponent",INK_REWARD_EXPONENT:"inkRewardExponent",MARKER_REWARD_EXPONENT:"markerRewardExponent",ACRYLIC_REWARD_EXPONENT:"acrylicRewardExponent",SPRAY_REWARD_EXPONENT:"sprayRewardExponent",PHOTON_REWARD_EXPONENT:"photonRewardExponent",GOLD_LEAF_REWARD_EXPONENT:"goldLeafRewardExponent",GRAPHITE_GENERATOR_MULTIPLIER:"graphiteGeneratorMultiplier",WAX_GENERATOR_MULTIPLIER:"waxGeneratorMultiplier",CHARCOAL_GENERATOR_MULTIPLIER:"charcoalGeneratorMultiplier",COFFEE_GENERATOR_MULTIPLIER:"coffeeGeneratorMultiplier",INK_GENERATOR_MULTIPLIER:"inkGeneratorMultiplier",MARKER_GENERATOR_MULTIPLIER:"markerGeneratorMultiplier",ACRYLIC_GENERATOR_MULTIPLIER:"acrylicGeneratorMultiplier",SPRAY_GENERATOR_MULTIPLIER:"sprayGeneratorMultiplier",PHOTON_GENERATOR_MULTIPLIER:"photonGeneratorMultiplier",GOLD_LEAF_GENERATOR_MULTIPLIER:"goldLeafGeneratorMultiplier",WAX_CONCEPT_PRODUCTION:"waxConceptBoost",CHARCOAL_CONCEPT_PRODUCTION:"charcoalConceptBoost",COFFEE_CONCEPT_PRODUCTION:"coffeeConceptBoost",INK_CONCEPT_PRODUCTION:"inkConceptBoost",MARKER_CONCEPT_PRODUCTION:"markerConceptBoost",ACRYLIC_CONCEPT_PRODUCTION:"acrylicConceptBoost",SPRAY_CONCEPT_PRODUCTION:"sprayConceptBoost",PHOTON_CONCEPT_PRODUCTION:"photonConceptBoost",GOLD_LEAF_CONCEPT_PRODUCTION:"goldLeafConceptBoost"},F3=new Map(Dx.map(t=>[t.key,{label:t.label,description:t.description}])),q3=(t,r,n)=>{if(t==="BUY_MAX_SKILL_TREE")return{heading:r,content:`${n}

Unlocks the "Max" button on all skill tree nodes.`};if(t==="BUY_PERCENT_SKILL_TREE")return{heading:r,content:`${n}

Unlocks a customizable "% Buy" button that spends a fixed portion of your total Quintessence.`};if(t==="AUTO_START_ON_REDRAW")return{heading:r,content:`${n}

Automatically starts combat after a Redraw.`};const i=V3[t];if(i){const u=F3.get(i);if(u)return{heading:r,content:`${n}

${u.label}: ${u.description}`}}return{heading:r,content:n}},$3=(t,r,n)=>{if(!t)return"Current: 0";const{effectType:i,displayFormat:u}=t,d=n.toNumber();if(u)return u.type==="generator_exp"?`Current: ${ge(Math.pow(2,d))}`:u.type==="generator_mult"?`Current: ${ge(Math.pow(10,d))}x`:u.type==="exponent"?`Current: ^${ge(1+r)}`:`Current: ${u.sign}${ge(r)}${u.suffix}`;if(i==="GENERATOR_MULTIPLIER_EXPONENT")return`Current: ${ge(Math.pow(2,d))}`;if(i.endsWith("_GENERATOR_MULTIPLIER"))return`Current: ${ge(Math.pow(10,d))}x`;if(i.endsWith("_EXPONENT"))return`Current: ^${ge(1+r)}`;const f=i.includes("_PENALTY")||i.includes("_COST")||i==="ATK_SPEED"?"-":"+";let g="";return i.includes("_PERCENT")||i.includes("_CHANCE")?g="%":(i==="FLEE_PENALTY"||i==="DEATH_PENALTY")&&(g="s"),`Current: ${f}${ge(r)}${g}`},Y3=t=>{const{sourceX:r,sourceY:n,targetX:i,targetY:u,sourcePosition:d,targetPosition:m,animated:f,selectable:g,deletable:x,pathOptions:y,style:b,data:w,sourceHandleId:v,targetHandleId:k,...M}=t,{sourceNodeId:T}=w||{},E=le(I=>(I.skillLevels[T]??At).gte(1)),R=le(I=>I.darkMode),N=E?R?"#a3a3a3":"#737373":R?"#404040":"#e5e7eb",[j]=tf({sourceX:r,sourceY:n,targetX:i,targetY:u,sourcePosition:d,targetPosition:m});return l.jsx(gi,{path:j,...M,style:{...b,stroke:N,strokeWidth:2,opacity:E?1:.4,transition:"stroke 0.3s, opacity 0.3s"},className:E?"skill-edge-animated":"",interactionWidth:0})},W3=B.memo(({data:t})=>{const{nodeId:r}=t,n=B.useMemo(()=>li(r),[r]),i=le(S=>S.skillLevels[r]??At),u=le(S=>!ec(r,S.skillLevels)),d=le(S=>S.quintessence),m=le(S=>S.skillTreeBuyMaxUnlocked),f=le(S=>S.skillTreeBuyPercentUnlocked),g=le(S=>S.percentBuyAmount),x=le(S=>S.setPercentBuyAmount),y=le(S=>S.glossaryUnlocks),b=le(S=>S.devSettings),w=le(S=>S.disabledSkills[r]||!1),v=le(S=>S.toggleSkill),k=le(S=>S.purchaseAllMaxSkills),M=le(S=>S.purchaseAllPercentSkills);if(!n)return null;const T=Ox(n,i),E=i.gte(n.maxLevel);let R=!1;const N=x0(r,y,b.bypassRarityLock);!u&&!E&&(R=N&&d.gte(T));const j=n.effectPerLevel*i.toNumber(),I=hk[n.category],P=()=>{le.getState().purchaseSkillNode(r)},O=()=>{le.getState().purchaseMaxSkillNode(r)},H=()=>{le.getState().purchasePercentSkillNode(r)},q=()=>{k()},G=()=>{M()},{name:F,maxLevel:Y,description:J,category:z}=n;if(u)return l.jsxs("div",{className:"w-48 h-36 rounded-lg border-2 border-neutral-300 dark:border-neutral-700 border-dashed bg-neutral-100 dark:bg-neutral-900 flex items-center justify-center opacity-60 transition-colors cursor-default",children:[l.jsx(rt,{type:"target",position:xe.Top,id:"top",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Bottom,id:"bottom",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Left,id:"left",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Right,id:"right",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Top,id:"top",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Bottom,id:"bottom",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Left,id:"left",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Right,id:"right",className:"opacity-0"}),l.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 text-4xl font-black italic",children:"?"})]});if(!N&&n.rarityLock){const S=y.filter(_=>Xe.find(U=>U.id===_)?.rarity===n.rarityLock?.rarity).length;return l.jsxs("div",{className:"w-48 h-36 p-3 rounded-lg border-2 border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900 flex flex-col items-center justify-center gap-2 opacity-80 transition-colors cursor-default",children:[l.jsx(rt,{type:"target",position:xe.Top,id:"top",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Bottom,id:"bottom",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Left,id:"left",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Right,id:"right",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Top,id:"top",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Bottom,id:"bottom",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Left,id:"left",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Right,id:"right",className:"opacity-0"}),l.jsx("div",{className:"text-3xl",children:""}),l.jsxs("div",{className:"text-xs font-bold text-neutral-500 uppercase text-center",children:["Requires ",n.rarityLock.count," ",n.rarityLock.rarity," ",n.rarityLock.count===1?"Sketch":"Sketches"," in Glossary"]}),l.jsxs("div",{className:"text-[10px] text-neutral-400",children:["Current: ",S," / ",n.rarityLock.count]})]})}const V=q3(n.effectType,F,J);return l.jsx(et,{heading:V.heading,content:V.content,children:l.jsxs("div",{className:`
                w-48 h-36 p-3 rounded-lg border-2 shadow-lg transition-all cursor-default
                ${u?"bg-neutral-100 dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 opacity-60":E&&n.id!=="fund-buy-all"?"bg-neutral-50 dark:bg-neutral-900/50 border-neutral-200 dark:border-neutral-800 opacity-60":`${I.bg} ${I.border} hover:shadow-xl`}
            `,children:[l.jsx(rt,{type:"target",position:xe.Top,id:"top",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Bottom,id:"bottom",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Left,id:"left",className:"opacity-0"}),l.jsx(rt,{type:"target",position:xe.Right,id:"right",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Top,id:"top",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Bottom,id:"bottom",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Left,id:"left",className:"opacity-0"}),l.jsx(rt,{type:"source",position:xe.Right,id:"right",className:"opacity-0"}),l.jsxs("div",{className:`text-[10px] font-bold uppercase tracking-wider mb-1 ${E?"text-neutral-400":I.accent}`,children:[z,"  Lv. ",ge(i),"/",Y]}),l.jsx("div",{className:`font-black text-sm leading-tight mb-1 ${E?"text-neutral-400 dark:text-neutral-600":"text-neutral-800 dark:text-neutral-100"}`,children:F}),l.jsx("div",{className:"text-[10px] md:text-xs text-neutral-500 dark:text-neutral-400 mb-1 italic",children:J}),i.gt(0)&&l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.maxLevel>1?l.jsx("div",{className:`text-[11px] font-semibold ${E?"text-neutral-400":I.accent}`,children:$3(n,j,i)}):l.jsx("div",{}),n.isToggleable&&l.jsx("button",{onClick:S=>{S.stopPropagation(),v(r)},className:`text-[9px] px-1.5 py-0.5 rounded font-bold uppercase transition-colors ${w?"bg-red-100 dark:bg-red-950/30 text-red-600 dark:text-red-500 border border-red-300 dark:border-red-500/50 hover:bg-red-200 dark:hover:bg-red-900/40":"bg-green-100 dark:bg-green-950/30 text-green-600 dark:text-green-500 border border-green-300 dark:border-green-500/50 hover:bg-green-200 dark:hover:bg-green-900/40"}`,children:w?"OFF":"ON"})]}),r==="fund-buy-percent"&&i.gt(0)&&l.jsxs("div",{className:"mb-2 px-1 flex items-center gap-2 nodrag nopan nowheel",children:[l.jsxs("div",{className:"text-[10px] font-bold uppercase text-neutral-500 whitespace-nowrap",children:["Buy ",g,"%"]}),l.jsx("input",{type:"range",min:"1",max:"9",step:"1",value:g,onPointerDown:S=>S.stopPropagation(),onMouseDown:S=>S.stopPropagation(),onClick:S=>S.stopPropagation(),onChange:S=>x(parseInt(S.target.value)),className:"flex-grow h-1.5 bg-neutral-200 dark:bg-neutral-800 rounded-lg appearance-none cursor-pointer accent-purple-600 nodrag nopan nowheel"})]}),!E&&(f?l.jsxs("div",{className:"flex gap-1 w-full",children:[l.jsxs("button",{onClick:P,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:!R||u,className:`
                                cursor-pointer flex-[3] basis-0 py-2 px-1 rounded-l text-xs font-bold uppercase tracking-tight
                                flex items-center justify-center gap-1 transition-colors
                                ${R&&!u?"bg-purple-600 text-white hover:bg-purple-700 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.4)]":"bg-neutral-200 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                            `,children:[l.jsx(Rr,{className:"w-3 h-3 flex-shrink-0"}),ge(T)]}),l.jsxs("button",{onClick:H,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:!R||u,title:`Buy with ${g}% of current Quintessence`,className:`
                                cursor-pointer flex-[1] basis-0 py-2 px-0 rounded text-[10px] font-bold uppercase tracking-tighter
                                flex items-center justify-center transition-colors
                                ${R&&!u?"bg-purple-700 text-white hover:bg-purple-800 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.4)]":"bg-neutral-250 dark:bg-neutral-750 text-neutral-400 dark:text-neutral-650 cursor-not-allowed"}
                            `,children:[g,"%"]}),l.jsx("button",{onClick:O,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:!R||u,className:`
                                cursor-pointer flex-[1] basis-0 py-2 px-1 rounded-r text-xs font-bold uppercase tracking-tighter
                                flex items-center justify-center transition-colors
                                ${R&&!u?"bg-purple-800 text-white hover:bg-purple-900 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.4)]":"bg-neutral-300 dark:bg-neutral-700 text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                            `,children:"Max"})]}):m?l.jsxs("div",{className:"flex gap-1 w-full",children:[l.jsxs("button",{onClick:P,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:!R||u,className:`
                                cursor-pointer flex-[3] basis-0 py-2 px-2 rounded-l text-xs font-bold uppercase tracking-wide
                                flex items-center justify-center gap-1 transition-colors
                                ${R&&!u?"bg-purple-600 text-white hover:bg-purple-700 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.4)]":"bg-neutral-200 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                            `,children:[l.jsx(Rr,{className:"w-3 h-3"}),ge(T)]}),l.jsx("button",{onClick:O,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:!R||u,className:`
                                cursor-pointer flex-[1] basis-0 py-2 px-2 rounded-r text-xs font-bold uppercase tracking-wide
                                flex items-center justify-center transition-colors
                                ${R&&!u?"bg-purple-800 text-white hover:bg-purple-900 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.4)]":"bg-neutral-300 dark:bg-neutral-700 text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                            `,children:"Max"})]}):l.jsxs("button",{onClick:P,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:!R||u,className:`
                            cursor-pointer w-full py-2 px-3 rounded text-xs font-bold uppercase tracking-wide
                            flex items-center justify-center gap-1 transition-colors
                            ${R&&!u?"bg-purple-600 text-white hover:bg-purple-700 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.4)]":"bg-neutral-200 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                        `,children:[l.jsx(Rr,{className:"w-3 h-3"}),ge(T)]})),r==="fund-buy-all"&&i.gt(0)&&l.jsxs("div",{className:"flex gap-1 w-full mt-2",children:[l.jsxs("button",{onClick:G,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:u,className:`
                                cursor-pointer flex-[1] py-1.5 px-1 rounded text-[10px] font-bold uppercase tracking-tighter
                                flex items-center justify-center transition-all bg-gradient-to-br from-cyan-500 to-emerald-600 text-white
                                hover:from-cyan-400 hover:to-emerald-500 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.3)]
                                active:shadow-none active:translate-x-[1px] active:translate-y-[1px]
                                ${u?"opacity-50 cursor-not-allowed grayscale":""}
                            `,children:["All ",g,"%"]}),l.jsx("button",{onClick:q,onPointerDown:S=>S.stopPropagation(),onTouchStart:S=>S.stopPropagation(),disabled:u,className:`
                                cursor-pointer flex-[1] py-1.5 px-1 rounded text-[10px] font-bold uppercase tracking-tighter
                                flex items-center justify-center transition-all bg-gradient-to-br from-emerald-500 to-teal-600 text-white
                                hover:from-emerald-400 hover:to-teal-500 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.3)]
                                active:shadow-none active:translate-x-[1px] active:translate-y-[1px]
                                ${u?"opacity-50 cursor-not-allowed grayscale":""}
                            `,children:"All Max"})]}),E&&l.jsx("div",{className:"w-full py-2 px-3 rounded text-xs font-bold uppercase tracking-wide text-center bg-neutral-200 dark:bg-neutral-900 text-neutral-500 dark:text-neutral-600",children:"Maxed"})]})})}),K3={skillNode:W3},Q3={skillEdge:Y3},X3=()=>{const t=B.useRef(null);B.useEffect(()=>()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]);const r=le(y=>y.darkMode),{flowNodes:n,flowEdges:i}=B.useMemo(()=>{const y=Ya.filter(v=>tc(v.id)),b=y.map(v=>({id:v.id,type:"skillNode",position:v.position,data:{nodeId:v.id},draggable:!1})),w=y.filter(v=>v.parentId!==null).map(v=>{const k=li(v.parentId)||Ya[0],M=gk(k,v);return{id:`${v.parentId}-${v.id}`,type:"skillEdge",source:v.parentId,target:v.id,sourceHandle:M.sourceHandle,targetHandle:M.targetHandle,data:{category:v.category,sourceNodeId:v.parentId,targetNodeId:v.id},animated:!1}});return{flowNodes:b,flowEdges:w}},[]),[u,d,m]=p3(n),[f,g,x]=h3(i);return B.useEffect(()=>{d(n),g(i)},[n,i,d,g]),l.jsx("div",{className:"w-full h-full min-h-[500px] bg-neutral-50 dark:bg-neutral-900 rounded-lg border-2 border-neutral-200 dark:border-neutral-800 transition-colors",children:l.jsxs(m3,{nodes:u,edges:f,onNodesChange:m,onEdgesChange:x,edgeTypes:Q3,colorMode:r?"dark":"light",connectionLineStyle:{stroke:r?"#404040":"#d1d5db",strokeWidth:2},fitView:!0,fitViewOptions:{padding:.2},proOptions:{hideAttribution:!0},zoomOnDoubleClick:!1,onInit:y=>{t.current=setTimeout(()=>{t.current=null;const w=le.getState().lastPurchasedSkill,v=y.getNodes();if(w){const M=v.find(T=>T.id===w);if(M){y.fitView({nodes:[M],padding:3,duration:800});return}}else{const M=v.find(T=>T.id==="root");if(M){y.fitView({nodes:[M],padding:3,duration:800});return}}const k=v.filter(M=>!M.data.isHidden);k.length>0&&y.fitView({nodes:k,padding:.35,duration:800})},100)},nodeTypes:K3,minZoom:.25,maxZoom:2,defaultViewport:{x:0,y:0,zoom:1},nodesDraggable:!1,nodesConnectable:!1,children:[l.jsx(w3,{color:r?"#333333":"#e5e5e5",gap:20}),l.jsx(T3,{position:"bottom-right",showInteractive:!1,className:"!bg-white dark:!bg-neutral-800 !border-neutral-300 dark:!border-neutral-700 !shadow-lg"})]})})};var Z3=function(){};function Fo(t,r,n){var i=B.useRef(Z3);B.useEffect(function(){i.current=t}),B.useEffect(function(){},[n]),B.useEffect(function(){if(!(r===null||r===!1)){var u=function(){return i.current()},d=setInterval(u,r);return function(){return clearInterval(d)}}},[r])}const J3=({onComplete:t})=>{const[r,n]=B.useState("fade-in");return B.useEffect(()=>{const i=setTimeout(()=>{n("text")},500),u=setTimeout(()=>{n("fade-out"),t()},2500);return()=>{clearTimeout(i),clearTimeout(u)}},[t]),Xs.createPortal(l.jsx("div",{className:`
                fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none
                transition-opacity duration-1000 ease-in-out bg-white dark:bg-neutral-950
                ${r==="fade-out"?"opacity-0":"opacity-100"}
            `,children:l.jsx("div",{className:`
                    text-4xl md:text-6xl font-black uppercase tracking-[0.2em] text-center
                    transition-all duration-1000 transform
                    ${r==="text"?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4"}
                `,children:l.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-neutral-900 to-neutral-600 dark:from-neutral-100 dark:to-neutral-400",children:"The World Is Being Drawn Anew"})})}),document.body)},Tx=["The golden ratio","Number of colors in an RGB display","Number of base pairs in the human genome","Synaptic connections in the human brain","Planck's constant","Number of particles in the observable universe","Largest number that can be stored in 64-bits of memory (standard computer format)","Return to the golden ratio"],e4=()=>{const{activeTab:t,setActiveTab:r,hasSeenTutorials:n,startTutorial:i,tutorialStep:u,tutorialResetCount:d,setHasAffordableMasterpiece:m,quintessence:f}=le(ft(v=>({activeTab:v.archiveActiveSubTab,setActiveTab:v.setArchiveActiveSubTab,hasSeenTutorials:v.hasSeenTutorials,startTutorial:v.startTutorial,tutorialStep:v.tutorialStep,tutorialResetCount:v.tutorialResetCount,setHasAffordableMasterpiece:v.setHasAffordableMasterpiece,quintessence:v.quintessence})));B.useEffect(()=>{t==="masterpiece"&&m(!1)},[t,m]),B.useEffect(()=>{let v=null;t==="synthesis"?v="Synthesis":t==="masterpiece"?v="Masterpiece":t==="glossary"&&(v="Glossary");const M=le.getState().activeTutorialSegment!==v;v&&!n[v]&&(u===null||M)&&i(v)},[t,n,u,d,i]),B.useEffect(()=>{window.innerWidth<768&&t==="glossary"&&r("synthesis")},[]);const[g,x]=B.useState(null),y=v=>{r(v),x(null)},b=()=>{x("redraw")},w=g||t;return l.jsxs("div",{className:"h-full p-2 md:p-4 overflow-hidden flex flex-col bg-white dark:bg-neutral-950 transition-colors",children:[l.jsx("header",{className:"mb-1 md:mb-4 border-b-2 border-neutral-200 dark:border-neutral-800 pb-1 md:pb-3 shrink-0 transition-colors",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex gap-1.5 md:gap-4 overflow-x-auto overflow-y-visible no-scrollbar shrink-0 pr-2 md:pr-4 pt-1",children:[l.jsxs("button",{onClick:()=>y("glossary"),className:`
                                cursor-pointer px-1.5 md:px-3 py-1 md:py-2 font-bold uppercase tracking-wide border-b-[3px] md:border-b-4 transition-colors relative whitespace-nowrap text-[8px] md:text-sm
                                ${w==="glossary"?"border-neutral-800 dark:border-neutral-100 text-neutral-900 dark:text-neutral-100":"border-transparent text-neutral-400 dark:text-neutral-600 hover:text-neutral-600 dark:hover:text-neutral-400"}
                            `,children:["Glossary",l.jsx(n4,{})]}),l.jsxs("button",{onClick:()=>y("synthesis"),className:`
                                cursor-pointer px-1.5 md:px-3 py-1 md:py-2 font-bold uppercase tracking-wide border-b-[3px] md:border-b-4 transition-colors relative whitespace-nowrap text-[8px] md:text-sm
                                ${w==="synthesis"?"border-neutral-800 dark:border-neutral-100 text-neutral-900 dark:text-neutral-100":"border-transparent text-neutral-400 dark:text-neutral-600 hover:text-neutral-600 dark:hover:text-neutral-400"}
                            `,children:["Conceptual Synthesizer",l.jsx(t4,{})]}),l.jsx("button",{onClick:b,className:`
                                cursor-pointer lg:hidden px-1.5 py-1 font-bold uppercase tracking-wide border-b-[3px] transition-colors relative whitespace-nowrap text-[8px]
                                ${w==="redraw"?"border-neutral-800 dark:border-neutral-100 text-neutral-900 dark:text-neutral-100":"border-transparent text-neutral-400 dark:text-neutral-600 hover:text-neutral-600 dark:hover:text-neutral-400"}
                            `,children:"Redraw"}),l.jsxs("button",{onClick:()=>y("masterpiece"),className:`
                                cursor-pointer px-1.5 md:px-3 py-1 md:py-2 font-bold uppercase tracking-wide border-b-[3px] md:border-b-4 transition-colors relative whitespace-nowrap text-[8px] md:text-sm
                                ${w==="masterpiece"?"border-neutral-800 dark:border-neutral-100 text-neutral-900 dark:text-neutral-100":"border-transparent text-neutral-400 dark:text-neutral-600 hover:text-neutral-600 dark:hover:text-neutral-400"}
                            `,children:["Masterpiece Archive",l.jsx(a4,{})]})]})})}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[(w==="synthesis"||w==="redraw")&&l.jsx("div",{id:"tutorial-archive-synthesizer",children:l.jsx(o4,{showRedrawOnly:w==="redraw"})}),w==="masterpiece"&&l.jsxs("div",{id:"tutorial-archive-masterpiece",className:"h-full fixed inset-0 z-50 bg-white dark:bg-neutral-950 md:relative md:z-auto md:bg-transparent",children:[l.jsxs("div",{className:"md:hidden absolute top-4 right-4 z-[60] flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-full shadow-sm",children:[l.jsx(Rr,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"}),l.jsx("span",{className:"text-[11px] font-black text-purple-700 dark:text-purple-300",children:ge(f)})]}),l.jsx("button",{onClick:()=>r("synthesis"),className:"w-8 h-8 flex items-center justify-center bg-black dark:bg-white text-white dark:text-black rounded-full border-2 border-white dark:border-black shadow-lg",children:l.jsx("span",{className:"text-xl font-bold",children:""})})]}),l.jsx(X3,{})]}),t==="glossary"&&l.jsx("div",{id:"tutorial-archive-glossary",children:l.jsx(i4,{setArchiveTab:r})})]})]})},t4=()=>{const{totalEarnedCurrencies:t,conceptMilestones:r}=le(ft(i=>({totalEarnedCurrencies:i.totalEarnedCurrencies,conceptMilestones:i.conceptMilestones})));return Yt.some(i=>{const u=t[i]||At,d=r[i]||0,m=Do[d];return m&&u.gte(m)})?l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}):null},a4=()=>le(r=>r.hasAffordableMasterpiece)?l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-purple-500"})]}):null,n4=()=>{const{glossaryUnlocks:t,seenGlossaryItems:r}=le(ft(n=>({glossaryUnlocks:n.glossaryUnlocks,seenGlossaryItems:n.seenGlossaryItems})));return t.length<=r.length?null:l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})]})},r4=({isOpen:t,onClose:r,onConfirm:n,pendingQuintessence:i})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:l.jsxs("div",{className:"bg-white dark:bg-neutral-800 max-w-md w-full p-8 shadow-2xl border-4 border-purple-600 dark:border-purple-800 relative animate-in fade-in zoom-in-95 duration-200 transition-colors",children:[l.jsx("h3",{className:"text-2xl font-black uppercase text-purple-900 dark:text-purple-100 mb-4 tracking-tight",children:"Confirm Redraw"}),l.jsxs("div",{className:"space-y-4 mb-8 text-sm text-neutral-600 dark:text-neutral-400 font-serif",children:[l.jsxs("p",{children:["You are about to ",l.jsx("strong",{className:"text-purple-700",children:"Redraw the World"}),"."]}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-red-600",children:"RESET:"})," Gallery Progress"]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-red-600",children:"RESET:"})," Shop Tools & Upgrades"]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-red-600",children:"RESET:"})," Conceptual Synthesizer"]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-green-600",children:"PRESERVED:"})," Masterpiece Archive (Skills)"]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-green-600",children:"PRESERVED:"})," Glossary Unlocks"]})]}),l.jsxs("p",{className:"border-t border-purple-100 dark:border-neutral-700 pt-3 mt-3",children:["You will gain ",l.jsxs("strong",{className:"text-purple-600 dark:text-purple-400 text-lg",children:["+",ge(i)," Quintessence"]})," to spend on permanent upgrades."]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:r,className:"cursor-pointer flex-1 py-3 font-bold uppercase tracking-wider text-xs border-2 border-neutral-200 dark:border-neutral-700 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-neutral-700 hover:border-neutral-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:n,className:"cursor-pointer flex-1 py-3 bg-purple-600 text-white font-black uppercase tracking-wider text-xs border-2 border-purple-800 hover:bg-purple-700 shadow-md hover:-translate-y-0.5 transition-all",children:"Confirm Redraw"})]})]})}):null,o4=({showRedrawOnly:t=!1})=>{const r=le(ft(G=>({advanceMilestone:G.advanceMilestone,prestige:G.prestige,skipRedrawConfirmation:G.skipRedrawConfirmation,totalQuintessenceGained:G.totalQuintessenceGained,setLastSeenSoftcapTier:G.setLastSeenSoftcapTier,fundamentals:G.fundamentals,graphiteGeneratorUnlocked:G.graphiteGeneratorUnlocked,graphiteDiscountUnlocked:G.graphiteDiscountUnlocked,waxGeneratorUnlocked:G.waxGeneratorUnlocked,charcoalOverdriveUnlocked:G.charcoalOverdriveUnlocked,coffeeGeneratorUnlocked:G.coffeeGeneratorUnlocked,markerGeneratorUnlocked:G.markerGeneratorUnlocked,inkGeneratorUnlocked:G.inkGeneratorUnlocked,graphitePlusUnlocked:G.graphitePlusUnlocked,waxOverdriveUnlocked:G.waxOverdriveUnlocked,maxedSketchesThisRedraw:G.maxedSketchesThisRedraw,quintessencePinnacleMultiplier:G.quintessencePinnacleMultiplier}))),[n,i]=B.useState(()=>{const G=le.getState();return{totalEarnedCurrencies:G.totalEarnedCurrencies,concepts:G.concepts,conceptMilestones:G.conceptMilestones,pendingQuintessence:G.pendingQuintessence,totalBattleEarnedCurrencies:G.totalBattleEarnedCurrencies}});Fo(()=>{const G=le.getState();i({totalEarnedCurrencies:G.totalEarnedCurrencies,concepts:G.concepts,conceptMilestones:G.conceptMilestones,pendingQuintessence:G.pendingQuintessence,totalBattleEarnedCurrencies:G.totalBattleEarnedCurrencies})},100);const{totalEarnedCurrencies:u,concepts:d,conceptMilestones:m,pendingQuintessence:f,totalBattleEarnedCurrencies:g}=n,{advanceMilestone:x,prestige:y,skipRedrawConfirmation:b,totalQuintessenceGained:w,setLastSeenSoftcapTier:v,fundamentals:k}=r,M=B.useMemo(()=>{const G={...r,totalEarnedCurrencies:u,totalBattleEarnedCurrencies:g,concepts:d};return wc(G)},[r,n]);B.useEffect(()=>{const G=o.max(1e3,w);if(f.lt(G))return;const F=f.div(G),Y=Math.floor(Math.log2(o.max(1,F).toNumber()))+1;v(Y)},[f,w,v]);const[T,E]=B.useState(null);Fo(()=>{const G=o.max(1e3,w);if(f.gte(G)){T!==null&&E(null);return}const F={...r,...n},Y=d.Graphite;if((m.Graphite||0)===0||Y.lte(0)){const _=new o(31536e7);(!T||!T.eq(_))&&E(_);return}const z=bv(F,G),V=new o(31536e7),S=z||V;T&&S.eq(T)||E(S)},1e3);const[R,N]=B.useState(!1),[j,I]=B.useState(!1),P=f.gte(300),O=()=>{N(!1),I(!0)},H=()=>{P&&(b?O():N(!0))},q=B.useCallback(()=>{y(),setTimeout(()=>{I(!1)},1e3)},[y]);return l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 md:gap-8 h-full pb-8",children:[j&&l.jsx(J3,{onComplete:q}),l.jsx(r4,{isOpen:R,onClose:()=>N(!1),onConfirm:O,pendingQuintessence:f}),l.jsx("div",{className:`flex-1 overflow-x-auto bg-white dark:bg-neutral-800 border-2 border-neutral-200 dark:border-neutral-700 transition-colors ${t?"hidden lg:block":""}`,children:l.jsxs("table",{className:"w-full text-left min-w-[600px] table-fixed",children:[l.jsx("thead",{className:"bg-neutral-100 dark:bg-black border-b-2 border-neutral-200 dark:border-neutral-700 sticky top-0 z-10 transition-colors",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-1.5 md:p-3 text-[10px] md:text-xs font-bold uppercase text-neutral-500 dark:text-neutral-500 tracking-widest",style:{width:"25%"},children:"Concept"}),l.jsx("th",{className:"p-1.5 md:p-3 text-[10px] md:text-xs font-bold uppercase text-neutral-500 dark:text-neutral-500 tracking-widest",style:{width:"15%"},children:"Total"}),l.jsx("th",{className:"p-1.5 md:p-3 text-[10px] md:text-xs font-bold uppercase text-neutral-500 dark:text-neutral-500 tracking-widest",style:{width:"30%"},children:"Milestone"}),l.jsx("th",{className:"p-1.5 md:p-3 text-[10px] md:text-xs font-bold uppercase text-neutral-500 dark:text-neutral-500 tracking-widest text-right",style:{width:"15%"},children:"Count"}),l.jsx("th",{className:"p-1.5 md:p-3 text-[10px] md:text-xs font-bold uppercase text-neutral-500 dark:text-neutral-500 tracking-widest text-right",style:{width:"15%"},children:"Producing"})]})}),l.jsx("tbody",{children:Yt.map((G,F)=>{const Y=Lo[G],J=Yx[`${G.replace(" ","")}Icon`]||sr,z=u[G]||At,V=d[G]||At,S=m[G]||0,_=Do[S],U=_&&z.gte(_),W=!_,D=(Ce=>{if(Ce<=1)return new o(1);let Ae=new o(1);for(let Le=2;Le<=Ce;Le++)Le<=4?Ae=Ae.times(1e3):Le<=7?Ae=Ae.times(1e6):Le===8&&(Ae=Ae.times(1e9));return Ae})(S),$=F===0?"Quintessence Gain":`Produces ${Yt[F-1]} Concept`;let ee=V.times(D),A=0;if(F===0?A=k.quintessenceGain:F===1?A=k.waxConceptBoost:F===2?A=k.charcoalConceptBoost:F===3?A=k.coffeeConceptBoost:F===4?A=k.inkConceptBoost:F===5?A=k.markerConceptBoost:F===6?A=k.acrylicConceptBoost:F===7?A=k.sprayConceptBoost:F===8?A=k.photonConceptBoost:F===9&&(A=k.goldLeafConceptBoost),A>0){const Ce=new o(1).plus(new o(A).div(100));ee=ee.times(Ce)}let Z=1,se=0;const ue=new o(r.quintessencePinnacleMultiplier);if(F===0){ee=ee.times(ue);const Ce=o.max(1e3,w);if(f.gte(Ce)){const Ae=f.div(Ce);se=Math.floor(Math.log2(o.max(1,Ae).toNumber()))+1,Z=Math.pow(.5,se+Math.floor(se/10)),ee=ee.times(Z)}}const ie=F===0&&se>0,pe=u[G]?.gt(0)||["Graphite","Wax"].includes(G),be=l.jsxs("span",{className:"flex items-center gap-2 text-purple-400",children:[l.jsx(J,{className:"w-5 h-5",title:""}),Y.label," Concept"]}),we=l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{children:["Concepts are the physical manifestation of your artistic progress. They are gained by reaching milestones with total earned ",Y.label," throughout this run."]}),l.jsxs("div",{className:"p-2 bg-neutral-100 dark:bg-neutral-800 rounded border border-neutral-200 dark:border-neutral-700 font-mono text-[10px]",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-bold text-neutral-500",children:"Milestones:"}),l.jsx("span",{className:"font-bold text-neutral-900 dark:text-neutral-100",children:S})]}),!W&&l.jsxs("div",{className:"flex flex-col mt-2 pt-2 border-t border-neutral-300 dark:border-neutral-700",children:[l.jsxs("div",{className:"flex justify-between w-full",children:[l.jsx("span",{className:"font-bold text-neutral-500",children:"Next At:"}),l.jsx("span",{className:"font-bold text-neutral-400",children:ge(_)})]}),Tx[S]&&l.jsx("span",{className:"text-[9px] mt-1 text-neutral-500 italic text-right self-end leading-tight max-w-[200px]",children:Tx[S]})]})]}),l.jsx("p",{className:"italic text-neutral-500",children:"Milestones:  1 = start production | 2-4 = 1,000x | 5-7 = 1,000,000x | 8 = 1,000,000,000x"})]}),ye=l.jsxs("span",{className:"flex items-center gap-2 text-green-400",children:[l.jsx(J,{className:"w-5 h-5",title:""}),"Production Breakdown"]}),ke=l.jsx("div",{className:"space-y-2",children:l.jsxs("div",{className:"p-2 bg-neutral-100 dark:bg-neutral-800 rounded border border-neutral-200 dark:border-neutral-700 font-mono text-[10px]",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-neutral-500",children:"Base Amount:"}),l.jsx("span",{className:"text-neutral-900 dark:text-neutral-100",children:ge(V)})]}),S>0&&l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsx("span",{className:"text-neutral-500",children:"Milestone Multiplier:"}),l.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["x",ge(D)]})]}),A>0&&l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsxs("span",{className:"text-neutral-500",children:[F===0?"Quintessence Gain":"Concept Boost",":"]}),l.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["x",ge(1+A/100)]})]}),F===0&&ue.gt(1)&&l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsx("span",{className:"text-neutral-500",children:"Quintessence Pinnacle:"}),l.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["x",ge(ue)]})]}),ie&&l.jsxs("div",{className:"flex justify-between mt-1 text-red-500",children:[l.jsx("span",{children:"Softcap penalty:"}),l.jsxs("span",{children:["x",ge(Z*100),"%"]})]}),l.jsxs("div",{className:"flex justify-between mt-2 pt-2 border-t border-neutral-300 dark:border-neutral-700 font-bold",children:[l.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Total Output:"}),l.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[ge(ee),"/s"]})]})]})});return l.jsxs("tr",{id:F===0?"tutorial-archive-graphite-row":F===1?"tutorial-archive-secondary-concepts":void 0,className:`border-b border-neutral-100 dark:border-neutral-800 hover:bg-neutral-50 dark:hover:bg-neutral-700/40 transition-all ${pe?"":"blur-sm pointer-events-none opacity-40 select-none grayscale"}`,children:[l.jsx("td",{className:"p-1 md:p-3",children:l.jsx(et,{heading:be,content:we,className:"block w-full h-full",children:l.jsxs("div",{className:"flex items-center gap-2 md:gap-3 cursor-pointer group/label",children:[l.jsx("div",{className:"p-1 md:p-1.5 bg-black dark:bg-neutral-900 rounded-full border border-neutral-800 dark:border-neutral-700 shrink-0 transition-transform group-hover/label:scale-110",children:l.jsx(J,{className:"w-4 h-4 md:w-6 md:h-6",color:"#C084FC",title:""})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-neutral-800 dark:text-neutral-100 leading-none text-xs md:text-sm truncate group-hover/label:text-purple-400 transition-colors",children:Y.label}),l.jsx("div",{className:"text-[9px] md:text-[10px] text-neutral-400 dark:text-neutral-500 font-mono mt-0.5 md:mt-1 truncate",children:$})]})]})})}),l.jsx("td",{className:"p-1 md:p-3 font-mono font-bold text-neutral-600 dark:text-neutral-400 text-xs md:text-sm",children:l.jsx(et,{heading:be,content:we,className:"flex items-center w-full h-full cursor-help min-h-[30px] md:min-h-[40px]",children:ge(z)})}),l.jsx("td",{className:"p-1 md:p-3",children:l.jsx(et,{heading:be,content:we,className:"flex flex-col justify-center w-full h-full min-h-[30px] md:min-h-[40px]",hideOnClick:!0,children:W?l.jsx("span",{className:"text-[10px] md:text-xs font-bold text-green-600 uppercase tracking-wider",children:"Maxed"}):l.jsx("div",{className:"flex items-center gap-2 w-full",children:l.jsxs("div",{className:"flex-1 min-w-[80px] md:min-w-[120px]",children:[l.jsxs("div",{className:"flex justify-between items-end mb-0.5 md:mb-1",children:[l.jsx("div",{className:"text-[12px] md:text-[14px] font-mono font-bold text-neutral-300 dark:text-neutral-300",children:ge(_)}),!U&&l.jsx("div",{className:"text-[10px] md:text-[12px] font-mono text-green-500 font-bold",children:(()=>{const Ce=M[G];if(!Ce||Ce.lte(0))return"";const Ae=_.minus(z);return ig(Ae.div(Ce))})()})]}),U?l.jsx("button",{onClick:()=>x(G),className:`\r
                                                                    cursor-pointer w-full py-0.5 md:py-1 px-1 md:px-2 bg-green-500 hover:bg-green-600 text-white \r
                                                                    text-[9px] md:text-xs font-bold uppercase rounded shadow-sm transition-colors\r
                                                                    animate-pulse\r
                                                                `,children:"Advance"}):l.jsx("div",{className:"w-full h-1 md:h-1.5 bg-neutral-100 dark:bg-neutral-900 rounded-full overflow-hidden transition-colors",children:l.jsx("div",{className:"h-full bg-neutral-300 dark:bg-neutral-600",style:{width:`${Math.min(100,z.div(_).times(100).toNumber())}% `}})})]})})})}),l.jsx("td",{className:"p-1 md:p-3 text-right",children:l.jsx(et,{heading:ye,content:ke,className:"flex items-center justify-end w-full h-full cursor-help min-h-[30px] md:min-h-[40px]",children:l.jsx("div",{className:"font-mono font-bold text-neutral-600 dark:text-neutral-400 text-xs md:text-sm",children:ge(V)})})}),l.jsx("td",{className:"p-1 md:p-3 text-right",children:l.jsxs(et,{heading:ye,content:ke,className:"flex flex-col items-end justify-center w-full h-full cursor-help min-h-[30px] md:min-h-[40px]",children:[l.jsx("div",{className:"font-mono font-black text-sm md:text-lg text-neutral-800 dark:text-neutral-100 leading-none",children:ge(ee)}),F===0&&se>0&&l.jsxs("div",{className:"text-[10px] text-red-500 font-bold uppercase mt-1 animate-pulse",title:"Production reduced due to unspent Quintessence (caps every 10x max).",children:["Softcap",l.jsx("sup",{children:se}),": ",ge(Z*100),"%"]})]})})]},G)})})]})}),l.jsxs("div",{id:"tutorial-archive-prestige-panel",className:`w-full lg:w-80 bg-neutral-50 dark:bg-black/20 border-2 border-neutral-200 dark:border-neutral-800 p-2 md:p-8 flex flex-col items-center justify-center text-center shrink-0 transition-colors ${t?"flex":"hidden lg:flex"}`,children:[l.jsxs("div",{className:"mb-2 md:mb-8 flex flex-row lg:flex-col items-center gap-2",children:[l.jsx(Rr,{className:"w-10 h-10 md:w-24 md:h-24 text-purple-200 dark:text-purple-400/20 md:mx-auto md:mb-4 dark:drop-shadow-[0_0_15px_rgba(192,132,252,0.5)] shrink-0"}),l.jsx("p",{className:"text-neutral-500 dark:text-neutral-500 italic text-[9px] md:text-sm transition-colors text-left lg:text-center mt-0",children:"Synthesize conceptual understanding into Quintessence. The world will be redrawn anew."})]}),l.jsxs("div",{className:"bg-white dark:bg-neutral-800 p-2 md:p-6 border-2 border-purple-100 dark:border-purple-900 shadow-sm w-full mb-3 md:mb-8 transition-colors flex flex-row lg:flex-col items-center lg:items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold uppercase text-purple-400 dark:text-purple-500 tracking-widest mb-0.5 md:mb-1",children:"Pending Quintessence"}),l.jsxs("div",{className:"text-xl md:text-4xl font-black text-purple-600 dark:text-purple-400 tracking-tighter break-all leading-none",children:["+",ge(f)]})]}),T&&l.jsxs("div",{className:"text-[12px] text-neutral-400 dark:text-neutral-500 font-mono mt-1 font-bold italic",children:["Lifetime Total in: ",ig(T)]}),l.jsxs("div",{className:"mt-0 lg:mt-4 pt-0 lg:pt-4 lg:border-t border-purple-50 dark:border-neutral-700/50 text-right lg:text-center pl-2 lg:pl-0 border-l lg:border-l-0 border-neutral-200 dark:border-neutral-700",children:[l.jsx("div",{className:"text-[9px] font-bold uppercase text-neutral-400 dark:text-neutral-500 tracking-widest mb-0.5 md:mb-1",children:"Lifetime Total"}),l.jsx("div",{className:"text-sm font-bold text-neutral-600 dark:text-neutral-400 leading-none",children:ge(w)})]})]}),l.jsx("button",{disabled:!P,onClick:H,className:`
                        py-2 md:py-4 font-black text-sm md:text-lg uppercase tracking-widest
                        border-2 flex items-center gap-2 md:gap-3 w-full justify-center transition-colors
                        ${P?"bg-purple-600 hover:bg-purple-700 text-white border-purple-800 cursor-pointer shadow-md":"bg-neutral-200 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-600 border-neutral-300 dark:border-neutral-700 cursor-not-allowed"}
                    `,children:l.jsx("span",{children:"Redraw World"})}),!P&&l.jsx("div",{className:"mt-2 text-[10px] md:text-xs font-bold uppercase text-red-500/60 dark:text-red-400/40 tracking-widest animate-pulse",children:"Requires 300 Pending Quintessence"})]})]})},p0=t=>{const r="/rejected_draft/",n=r.endsWith("/")?r:`${r}/`,i=t.startsWith("/")?t.slice(1):t;return`${n}${i}`},s4=({sketch:t,isMobile:r=!1,isDefeated:n,isSeen:i,markSeen:u})=>{const[d,m]=B.useState(!1);return l.jsx("div",{className:"perspective-1000 h-full w-full",onClick:f=>{window.innerWidth<768&&n&&(f.stopPropagation(),console.log("Flipping card:",t.name,!d),m(!d))},children:l.jsxs("div",{className:`bg-white dark:bg-neutral-900 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.1)] dark:shadow-none dark:border dark:border-neutral-800 rarity-${t.rarity} flex flex-col h-full min-h-[14rem] md:min-h-[16rem] relative transition-all duration-500 preserve-3d group cursor-help ${d?"rotate-y-180":""}`,onMouseEnter:()=>{n&&!i&&u(t.id)},children:[l.jsxs("div",{className:`flex flex-col h-full backface-hidden transition-all duration-300 ${d?"opacity-0 scale-90 pointer-events-none":"opacity-100 scale-100"}`,children:[n&&!i&&l.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow animate-bounce z-20",children:"NEW!"}),!d&&n&&l.jsx("div",{className:"absolute inset-0 group-hover:opacity-0 transition-opacity duration-300 flex items-center justify-center pointer-events-none z-10",children:l.jsx("img",{src:p0(t.imagePath),alt:t.name,className:"w-full h-full object-contain sketch-render transform scale-[0.98] group-hover:scale-105 transition-transform duration-500 ease-out"})}),l.jsx("div",{className:`flex flex-col h-full transition-opacity duration-300 relative z-20 p-2 md:py-3 md:px-4 ${n?"opacity-0 group-hover:opacity-100":""}`,children:n?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-2 md:gap-3 mb-2 md:mb-3",children:[l.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 shrink-0 bg-neutral-50 dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-700 flex items-center justify-center overflow-hidden",children:l.jsx("img",{src:p0(t.imagePath),alt:t.name,className:"w-full h-full object-contain sketch-render opacity-90 transition-all"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-black uppercase text-neutral-800 dark:text-neutral-100 leading-tight text-xs md:text-sm break-words",children:t.name}),l.jsx("p",{className:"text-[8px] md:text-[9px] text-neutral-500 dark:text-neutral-400 font-serif italic line-clamp-2 min-h-[2.5em]",children:t.flavorText}),l.jsx("div",{className:"text-[9px] text-neutral-400 dark:text-neutral-500 font-bold uppercase mt-1",children:t.rarity})]})]}),l.jsxs("div",{className:"mt-auto border-t border-neutral-100 dark:border-neutral-800 pt-2 hidden md:block",children:[l.jsx("div",{className:"text-[9px] font-bold uppercase tracking-widest text-neutral-400 dark:text-neutral-500 mb-1",children:"Base Rewards"}),l.jsx(lc,{rewards:t.rewards,currencyRewards:t.currencyRewards,multiplier:new o(1),layout:"grid"})]}),l.jsx("div",{className:"md:hidden mt-auto text-[8px] font-bold text-neutral-400 text-center animate-pulse",children:"Tap to view stats"})]}):l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-6",children:[l.jsx("h4",{className:"font-black uppercase text-neutral-400 dark:text-neutral-600 leading-tight text-sm mb-3 tracking-widest text-center",children:U0(t.name)}),l.jsx("div",{className:"w-16 h-16 bg-neutral-100 dark:bg-neutral-900 border-2 border-dashed border-neutral-300 dark:border-neutral-700 rounded flex items-center justify-center mb-2",children:l.jsx("span",{className:"text-4xl font-black text-neutral-300 dark:text-neutral-700",children:"?"})}),l.jsx("div",{className:"text-[9px] text-neutral-400 dark:text-neutral-600 font-bold uppercase",children:t.rarity}),l.jsx("p",{className:"text-[9px] text-neutral-400 dark:text-neutral-600 mt-2",children:"Defeat to reveal"})]})})]}),l.jsxs("div",{className:`absolute inset-0 p-2 md:p-4 rotate-y-180 backface-hidden flex flex-col bg-white dark:bg-neutral-900 border-2 border-neutral-800 pointer-events-none overflow-y-auto no-scrollbar transition-all duration-300 ${d?"opacity-100 scale-100 pointer-events-auto":"opacity-0 scale-90"}`,children:[l.jsxs("div",{className:"flex gap-2 mb-2 pb-2 border-b border-neutral-100 dark:border-neutral-800",children:[l.jsx("div",{className:"w-10 h-10 shrink-0 bg-neutral-50 dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-700 flex items-center justify-center overflow-hidden",children:l.jsx("img",{src:p0(t.imagePath),alt:t.name,className:"w-full h-full object-contain sketch-render opacity-90"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-black uppercase text-neutral-800 dark:text-neutral-100 leading-tight text-[10px] break-words",children:t.name}),l.jsx("div",{className:"text-[8px] text-neutral-400 dark:text-neutral-500 font-bold uppercase",children:t.rarity})]})]}),l.jsx("div",{className:"text-[9px] font-bold uppercase tracking-widest text-neutral-400 dark:text-neutral-500 mb-1",children:"Stats"}),l.jsx("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mb-3",children:Object.values(ot).map(f=>{const g=t.stats[f.key];if(g==null)return null;const x=g instanceof o;return f.key==="minDamage"&&x&&g.eq(75)||f.key==="maxDamage"&&x&&g.eq(125)||(x?g.eq(0):g===0)&&f.key!=="maxHp"&&f.key!=="attack"&&f.key!=="attackSpeed"?null:l.jsx(et,{heading:l.jsxs("span",{className:"flex items-center gap-2 text-white",children:[l.jsx(f.icon,{className:"w-4 h-4"}),f.label]}),content:`${f.fullName}
${f.description}`,children:l.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] font-bold text-neutral-600 dark:text-neutral-400",onClick:b=>b.stopPropagation(),children:[l.jsx(f.icon,{className:`w-3 h-3 ${f.colorClass}`}),ge(g,f.format.decimals),f.format.suffix]})},f.key)})}),l.jsxs("div",{className:"mt-auto border-t border-neutral-100 dark:border-neutral-800 pt-2",children:[l.jsx("div",{className:"text-[9px] font-bold uppercase tracking-widest text-neutral-400 dark:text-neutral-500 mb-1",children:"Base Rewards"}),l.jsx("div",{onClick:f=>f.stopPropagation(),children:l.jsx(lc,{rewards:t.rewards,currencyRewards:t.currencyRewards,multiplier:new o(1),layout:"grid",compact:r})})]})]})]})})},Mx=B.memo(s4),i4=({setArchiveTab:t})=>{const{glossaryUnlocks:r,seenGlossaryItems:n,glossaryMultiplier:i,markSeen:u}=le(ft(k=>({glossaryUnlocks:k.glossaryUnlocks,seenGlossaryItems:k.seenGlossaryItems,glossaryMultiplier:k.glossaryMultiplier,markSeen:k.markGlossaryItemAsSeen}))),[d,m]=B.useState("all"),[f,g]=B.useState(18),x=B.useMemo(()=>Xe.filter(k=>d==="all"||k.rarity===d),[d]);B.useEffect(()=>{if(f<x.length){const k=setTimeout(()=>g(M=>Math.min(M+30,x.length)),50);return()=>clearTimeout(k)}},[f,x.length]),B.useEffect(()=>{g(18)},[d]);const y=B.useMemo(()=>{const k={};return Xe.forEach(M=>{k[M.rarity]||(k[M.rarity]={unlocked:0,total:0}),k[M.rarity].total++,r.includes(M.id)&&k[M.rarity].unlocked++}),k},[r]),b={};let w=0;r.forEach(k=>{if(!n.includes(k)){const M=Xe.find(T=>T.id===k);M&&(b[M.rarity]=(b[M.rarity]||0)+1,w++)}});const v=[{id:"all",label:"All",count:r.length,total:Xe.length,newCount:w},{id:"scrap",label:"Scrap",count:y.scrap?.unlocked||0,total:y.scrap?.total||0,newCount:b.scrap||0},{id:"rough",label:"Rough",count:y.rough?.unlocked||0,total:y.rough?.total||0,newCount:b.rough||0},{id:"framed",label:"Framed",count:y.framed?.unlocked||0,total:y.framed?.total||0,newCount:b.framed||0},{id:"opus",label:"Opus",count:y.opus?.unlocked||0,total:y.opus?.total||0,newCount:b.opus||0},{id:"masterpiece",label:"Masterpiece",count:y.masterpiece?.unlocked||0,total:y.masterpiece?.total||0,newCount:b.masterpiece||0}];return l.jsxs("div",{id:"tutorial-archive-glossary-content",className:"flex flex-col h-full",children:[l.jsxs("div",{className:"hidden md:flex flex-row justify-between items-center gap-4 sticky top-0 bg-white dark:bg-neutral-950 z-30 pb-4 border-b border-neutral-200 dark:border-neutral-800",children:[l.jsx("div",{className:"",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(k=>l.jsxs("button",{onClick:()=>m(k.id),className:`
                                    cursor-pointer relative px-4 py-2 text-xs font-bold uppercase tracking-wider rounded-t-lg transition-all
                                    border-t-2 border-x-2 -mb-[3px] z-10 whitespace-nowrap
                                    ${d===k.id?"bg-white dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-[0_-2px_5px_rgba(0,0,0,0.02)]":"bg-neutral-50 dark:bg-neutral-900 border-transparent text-neutral-400 dark:text-neutral-600 hover:text-neutral-600 dark:hover:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800"}
                                `,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:k.label}),l.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[9px] ${d===k.id?"bg-neutral-100 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300":"bg-neutral-200 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-500"}`,children:[k.count,"/",k.total]})]}),k.newCount>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full border-2 border-white dark:border-neutral-900"})]},k.id))})}),l.jsxs("div",{className:"text-right pl-4",children:[l.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-neutral-400 dark:text-neutral-500 leading-none",children:"Mult."}),l.jsxs("div",{className:"text-2xl font-black text-neutral-800 dark:text-neutral-100",children:[ge(i),"x"]})]})]}),l.jsxs("div",{className:"md:hidden fixed inset-0 z-[60] bg-white dark:bg-neutral-950 flex flex-col p-2 overflow-y-auto no-scrollbar",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 shrink-0",children:[l.jsx("div",{className:"flex-1 flex gap-1 overflow-x-auto no-scrollbar",children:v.map(k=>l.jsxs("button",{onClick:()=>m(k.id),className:`cursor-pointer px-2 py-1 text-[9px] font-bold uppercase rounded transition-all whitespace-nowrap relative ${d===k.id?"bg-neutral-800 dark:bg-neutral-200 text-white dark:text-neutral-900 shadow-sm":"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 text-neutral-500 dark:text-neutral-500"}`,children:[k.label,k.newCount>0&&l.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-orange-500 rounded-full"})]},k.id))}),l.jsxs("div",{className:"flex items-center gap-2 px-2 border-l border-neutral-200 dark:border-neutral-800",children:[l.jsxs("div",{className:"text-[10px] font-black text-neutral-800 dark:text-neutral-100 whitespace-nowrap",children:[ge(i),"x"]}),l.jsx("button",{onClick:()=>t("synthesis"),className:"p-1 border-2 border-neutral-800 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-800 dark:text-neutral-100 font-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none transition-all",children:l.jsx(jv,{className:"w-4 h-4"})})]})]}),l.jsx("div",{className:"grid grid-cols-3 gap-1.5 pb-12",children:x.slice(0,f).map(k=>l.jsx(Mx,{sketch:k,isMobile:!0,isDefeated:r.includes(k.id),isSeen:n.includes(k.id),markSeen:u},k.id))})]}),l.jsx("div",{className:"hidden md:grid grid-cols-[repeat(auto-fill,minmax(220px,1fr))] gap-4 pt-4 pb-24 pr-4",children:x.slice(0,f).map(k=>l.jsx(Mx,{sketch:k,isMobile:!1,isDefeated:r.includes(k.id),isSeen:n.includes(k.id),markSeen:u},k.id))})]})},l4=B.memo(({event:t})=>{const{left:r,top:n,bottom:i}=B.useMemo(()=>{const m=t.id.split("").reduce((x,y)=>x+y.charCodeAt(0),0),f=Math.abs(Math.sin(m*123.45)),g=Math.abs(Math.cos(m*678.9));return t.target==="enemy"?{left:`${35+f*30}%`,top:`${20+g*25}%`,bottom:"auto"}:{left:`${f*85}%`,top:`${67+g*8}%`,bottom:"auto"}},[t.id,t.target]);let u="",d="";return t.type==="heal"?t.value==="Cleanse"||t.value==="Remedy"?(u="text-teal-400 font-bold text-2xl",d=""):(u="text-green-500",d="+"):t.type==="lifesteal"?(u="text-purple-500",d="+"):t.type==="dodge"?u="text-neutral-400 italic text-2xl":t.type==="bleed"?u="text-red-500 font-bold":t.type==="burn"?u="text-orange-500 font-bold":t.type==="plague"?u="text-lime-700 font-bold text-2xl":t.type==="poison"?u="text-fuchsia-600 font-bold":t.type==="hypnotize"?u="text-pink-500 font-extrabold text-2xl":t.type==="freeze"?u="text-cyan-400 font-extrabold pb-8":t.type==="electrocute"?u="text-yellow-500 font-bold text-2xl":t.type==="curse"?u="text-purple-900 font-bold text-2xl":t.type==="leap"?u="text-teal-400 font-bold":t.type==="balloon"?u="text-sky-300 font-black text-2xl":t.type==="hotPotato"?u="text-orange-600 font-extrabold text-3xl italic animate-pulse":t.type==="brittle"?u="text-neutral-400 font-black tracking-widest":t.type==="blackFlame"?u="text-slate-950 font-black text-4xl":t.type==="bananaPeel"?u="text-yellow-600 font-extrabold text-2xl":t.type==="energyWave"?u="text-cyan-300 font-extrabold text-2xl":t.type==="varnish"?u="text-amber-400 font-bold drop-shadow-[0_0_8px_rgba(251,191,36,0.8)]":t.type==="surreal"?u="text-indigo-400 font-black text-4xl italic tracking-widest":t.type==="thorns"?u="text-green-600 font-bold italic tracking-wider":t.type==="goldenCrit"?u="text-yellow-400 font-black text-5xl uppercase tracking-widest drop-shadow-[0_0_12px_rgba(250,204,21,1)]":t.type==="irradiate"?u="text-lime-400 font-bold animate-pulse text-2xl":t.isCrit?u="text-orange-600 font-extrabold text-4xl":u="text-neutral-900",l.jsxs("div",{className:`
                absolute font-black text-3xl tracking-tighter animate-float-damage
                ${u}
            `,style:{left:r,top:n!=="auto"?n:void 0,bottom:i!=="auto"?i:void 0,textShadow:t.type==="damage"?"2px 2px 0px rgba(255,255,255,1)":"none"},children:[d,t.value,t.isCrit?"!":""]})}),c4=()=>{const[t,r]=B.useState([]),n=B.useRef("");return B.useEffect(()=>{let i;const u=()=>{const d=Date.now(),f=le.getState().damageEvents.filter(x=>d-x.timestamp<800),g=f.map(x=>x.id).join(",");g!==n.current&&(n.current=g,r(f)),i=requestAnimationFrame(u)};return i=requestAnimationFrame(u),()=>cancelAnimationFrame(i)},[]),l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-20",children:t.map(i=>l.jsx(l4,{event:i},i.id))})},u4={Bleed:"bg-red-100 border-red-300 text-red-800 dark:bg-red-900/30 dark:border-red-800 dark:text-red-300",Burn:"bg-orange-100 border-orange-300 text-orange-800 dark:bg-orange-900/30 dark:border-orange-800 dark:text-orange-300",Plague:"bg-lime-100 border-lime-300 text-lime-800 dark:bg-lime-900/30 dark:border-lime-800 dark:text-lime-300",Poison:"bg-fuchsia-100 border-fuchsia-300 text-fuchsia-800 dark:bg-fuchsia-900/30 dark:border-fuchsia-800 dark:text-fuchsia-300",Hypnotize:"bg-pink-100 border-pink-300 text-pink-800 dark:bg-pink-900/30 dark:border-pink-800 dark:text-pink-300",Slow:"bg-indigo-100 border-indigo-300 text-indigo-800 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-300",Frailty:"bg-emerald-100 border-emerald-300 text-emerald-900 dark:bg-emerald-900/30 dark:border-emerald-800 dark:text-emerald-300",Freeze:"bg-cyan-100 border-cyan-300 text-cyan-800 dark:bg-cyan-900/30 dark:border-cyan-800 dark:text-cyan-300",Hinder:"bg-neutral-100 border-neutral-300 text-neutral-800 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-300",Electrocute:"bg-yellow-100 border-yellow-300 text-yellow-800 dark:bg-yellow-900/30 dark:border-yellow-800 dark:text-yellow-300",Curse:"bg-violet-100 border-violet-300 text-violet-800 dark:bg-violet-900/30 dark:border-violet-800 dark:text-violet-300",Haste:"bg-amber-100 border-amber-300 text-amber-800 dark:bg-amber-900/30 dark:border-amber-800 dark:text-amber-300",BlackFlame:"bg-slate-200 border-slate-400 text-slate-900 dark:bg-slate-800/60 dark:border-slate-700 dark:text-slate-100",BananaPeel:"bg-amber-100/20 border-amber-400 text-yellow-950 dark:bg-amber-200/20 dark:border-yellow-400 dark:text-yellow-200",Inspiration:"bg-stone-50 border-stone-300 text-amber-900 dark:bg-stone-800/60 dark:border-stone-500 dark:text-amber-100",Leap:"bg-teal-100 border-teal-300 text-teal-800 dark:bg-teal-900/30 dark:border-teal-800 dark:text-teal-300",EnergyWave:"bg-blue-100 border-blue-300 text-blue-800 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300",Balloon:"bg-sky-100 border-sky-300 text-sky-800 dark:bg-sky-900/30 dark:border-sky-800 dark:text-sky-300",HotPotato:"bg-orange-100 border-orange-300 text-orange-800 dark:bg-orange-900/30 dark:border-orange-800 dark:text-orange-300",Brittle:"bg-neutral-200 border-neutral-400 text-neutral-800 dark:bg-neutral-700/60 dark:border-neutral-600 dark:text-neutral-300",Thorns:"bg-green-100 border-green-400 text-green-900 dark:bg-green-900/40 dark:border-green-700 dark:text-green-200",Irradiate:"bg-lime-100 border-lime-400 text-lime-900 dark:bg-lime-950/40 dark:border-lime-700 dark:text-lime-200"},d4=t=>{const r=`${t.toLowerCase()}Chance`;return ot[r]?r:t==="BlackFlame"?"blackFlameChance":t==="BananaPeel"?"bananaPeelChance":t==="EnergyWave"?"energyWaveChance":t==="Inspiration"?"inspirationChance":t==="HotPotato"?"hotPotatoChance":t==="Damage"&&ot.attack?"attack":null};function f4(t){const r=ga.useRef({}),n=B.useCallback(u=>le.subscribe(u),[]),i=B.useCallback(()=>{const u=le.getState().combatState.statuses[t],d=r.current,m=Object.keys(u).filter(g=>u[g]>0&&g!=="BananaSlip"),f=Object.keys(d).filter(g=>d[g]>0&&g!=="BananaSlip");return m.length===f.length&&m.every(g=>u[g]===d[g])?d:(r.current=u,u)},[t]);return B.useSyncExternalStore(n,i)}const _x=({owner:t,className:r="",variant:n="default"})=>{const i=f4(t),u=Object.entries(i).filter(([d,m])=>m>0&&d!=="BananaSlip");return u.length===0?l.jsx("div",{className:r}):l.jsx("div",{className:`flex flex-wrap gap-1 md:gap-2 ${r}`,children:u.map(([d,m])=>{const f=d4(d),g=f?ot[f]:null,x=g?.icon,y=u4[d]||"bg-gray-100 border-gray-300 text-gray-800",b=l.jsxs("div",{className:`
                            flex items-center gap-1 px-1.5 md:px-2 py-0.5 rounded-full border font-bold
                            ${n==="compact"?"py-0 px-1 text-[8px]":"text-[10px] md:text-xs"}
                            ${y}
                        `,children:[x&&l.jsx(x,{className:"w-2.5 h-2.5 md:w-3.5 md:h-3.5"}),l.jsx("span",{children:ge(m,0)})]},d);return g?l.jsx(et,{heading:l.jsx("span",{className:g.colorClass,children:d}),content:g.description,children:b},d):b})})},m4=()=>{const t=ot.maxHp.icon,{enemyId:r,isFighting:n,activeTab:i,getRewardMultiplier:u,sketchVictories:d,fundamentals:m,shopLevels:f,glossaryMultiplier:g,isPlayerDefeated:x}=le(ft(V=>({enemyId:V.combatState.enemyId,isFighting:V.combatState.isFighting,activeTab:V.activeTab,getRewardMultiplier:V.getRewardMultiplier,sketchVictories:V.sketchVictories,fundamentals:V.fundamentals,shopLevels:V.shopLevels,glossaryMultiplier:V.glossaryMultiplier,isPlayerDefeated:V.combatState.isPlayerDefeated}))),y=Xe.find(V=>V.id===r),b=B.useRef(null),w=B.useRef(null),v=B.useRef(null),k=B.useRef(null),M=B.useRef(null),T=B.useRef(null),[E,R]=B.useState(!1),[N,j]=B.useState([]),I=y?y.stats.attackSpeed:3e3;B.useEffect(()=>{r&&(j([]),R(!1))},[r]),B.useEffect(()=>{if(!n||!y)return;let V="",S="",_=-1,U=-1,W=-1,X=-1;return le.subscribe($=>{const ee=$.combatState,A=$.playerStats,Z=$.fundamentals;if(!ee.isFighting)return;const se=Date.now(),ue=A.maxHp,ie=ee.enemyMaxHp,pe=ee.currentPlayerHp,be=ee.currentEnemyHp,we=ue.eq(0)?0:Math.max(0,Math.min(100,pe.div(ue).times(100).toNumber())),ye=ie.eq(0)?0:Math.max(0,Math.min(100,be.div(ie).times(100).toNumber())),ke=`${ge(pe)} / ${ge(ue)}`,Ce=`${ge(be)} / ${ge(ie)}`;we!==_&&b.current&&(b.current.style.width=`${we}%`,_=we),ye!==U&&w.current&&(w.current.style.width=`${ye}%`,U=ye),ke!==V&&v.current&&(v.current.textContent=ke,V=ke),Ce!==S&&k.current&&(k.current.textContent=Ce,S=Ce);const Ae=Z.timeAcceleration||1,Le=ee.statuses.player.Slow||0,st=ee.statuses.player.Haste||0,yt=ee.statuses.player.BananaSlip||0,Rt=A.attackSpeed.toNumber()/Ae*(1+Le*.001)*(1/(1+st*.001))*(yt>0?2:1),vt=Math.min(100,(se-ee.lastPlayerAttackTime)/Rt*100),Lt=ee.statuses.enemy.Slow||0,Dt=ee.statuses.enemy.Haste||0,de=ee.statuses.enemy.BananaSlip||0,Ee=I/Ae*(1+Lt*.001)*(1/(1+Dt*.001))*(de>0?2:1),Ge=Math.min(100,(se-ee.lastEnemyAttackTime)/Ee*100);vt!==W&&M.current&&(M.current.style.width=`${vt}%`,W=vt),Ge!==X&&T.current&&(T.current.style.width=`${Ge}%`,X=Ge)})},[n,y,I]);const P=le(V=>V.combatState.lastVictory),O=B.useRef(P?.time||0),H=B.useRef(null),q=B.useRef(null),G=B.useRef(null);B.useEffect(()=>{if(P&&P.time>O.current){O.current=P.time;const V=Xe.find(S=>S.id===P.enemyId);if(V){const S={id:P.enemyId,image:V.imagePath,key:P.time};j(_=>[..._,S]),q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{j(_=>_.filter(U=>U.key!==S.key))},250),le.getState().autoChallengeActive||(G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{const _=le.getState();!_.combatState.isFighting&&_.activeTab==="Ink War"&&le.getState().setActiveTab("Gallery")},200))}}return()=>{q.current&&clearTimeout(q.current),G.current&&clearTimeout(G.current)}},[P]),B.useEffect(()=>{const V=le.getState().combatState.currentEnemyHp;V.lte(0)&&n&&!E&&R(!0),V.gt(0)&&E&&R(!1)},[n,E]),B.useEffect(()=>{r&&r!==H.current&&R(!1),H.current=r||H.current},[r]);const F=V=>{const S="/rejected_draft/",_=S.endsWith("/")?S:`${S}/`,U=V.startsWith("/")?V.slice(1):V;return`${_}${U}`};B.useEffect(()=>{!y&&N.length===0&&!x&&i==="Ink War"&&le.getState().setActiveTab("Gallery")},[y,N.length,x,i]);const Y=y||Xe.find(V=>V.id===H.current),J=Y?u(Y.id):new o(1),z=Y&&d[Y.id]||0;return l.jsx("div",{className:"h-full w-full overflow-y-auto bg-white dark:bg-neutral-950 transition-colors fixed inset-0 z-[60] md:relative md:z-0 md:inset-auto",children:l.jsxs("div",{className:"flex flex-col items-center justify-start min-h-full gap-1 md:gap-4 py-2 md:py-8 px-2 md:px-8 max-w-5xl mx-auto relative",children:[l.jsx(c4,{}),l.jsxs("div",{className:"md:hidden absolute top-4 right-4 z-[70] flex items-center gap-2",children:[l.jsx("button",{onClick:()=>le.getState().fleeBattle(),disabled:x,className:`px-3 py-1 text-[10px] font-black uppercase tracking-tight border-2 transition-all shadow-sm active:translate-y-px 
                            ${x?"opacity-50 cursor-not-allowed border-neutral-300 text-neutral-400 bg-neutral-100":"bg-red-50 border-red-600 text-red-600 hover:bg-red-600 hover:text-white dark:bg-red-950/20"}
                        `,children:"Flee"}),l.jsxs("button",{onClick:()=>le.getState().setActiveTab("Gallery"),className:"w-12 h-8 flex flex-col items-center justify-center bg-black dark:bg-white text-white dark:text-black rounded border-2 border-white dark:border-black shadow-lg group relative",title:"Minimize (Battle continues in background)",children:[l.jsx("span",{className:"text-xl leading-none font-black",children:""}),l.jsx("span",{className:"text-[7px] font-black uppercase -mt-1.5",children:"Min"})]})]}),x&&l.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 animate-in fade-in duration-300",children:l.jsx("div",{className:"text-6xl md:text-8xl font-black text-red-600 uppercase tracking-tighter drop-shadow-[0_4px_4px_rgba(0,0,0,0.5)] animate-bounce",children:"You Died"})}),l.jsxs("div",{className:"w-full text-center",children:[l.jsxs("div",{className:"flex flex-row md:flex-col items-center md:items-center justify-center gap-1 md:gap-0.5 mb-0.5 md:mb-1",children:[l.jsx("h2",{className:"text-lg md:text-3xl font-black uppercase tracking-tighter text-neutral-800 dark:text-neutral-100 transition-colors",children:(y||Y)?.name}),(y||Y)?.flavorText&&l.jsxs("div",{className:"text-[9px] md:text-sm italic text-neutral-400 dark:text-neutral-500 line-clamp-1 md:line-clamp-none",children:['"',(y||Y)?.flavorText,'"']})]}),l.jsxs("div",{className:"flex flex-col landscape:flex-row md:flex-row items-center justify-center gap-2 md:gap-6 mb-2 md:mb-6 lg:items-start w-full mx-auto",children:[l.jsxs("div",{className:"w-full landscape:w-[35%] md:w-64 landscape:md:w-64 border-2 border-neutral-800 dark:border-neutral-700 bg-white dark:bg-neutral-900/50 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.8)] md:shadow-[3px_3px_0px_0px_rgba(0,0,0,0.8)] p-2 md:p-4 order-2 md:order-1 transition-colors",children:[l.jsx("div",{className:"text-[9px] md:text-xs font-bold uppercase tracking-widest text-neutral-500 dark:text-neutral-400 mb-1.5 md:mb-3 border-b border-neutral-200 dark:border-neutral-800 pb-1 md:pb-2",children:"Stats"}),l.jsx("div",{className:`grid grid-cols-3 gap-1 md:gap-2 ${Object.values(ot).filter(V=>{if(V.key==="maxHp")return!1;const S=Y?Y.stats[V.key]:void 0;if(S==null)return!1;const _=S instanceof o;return!(V.key==="minDamage"&&_&&S.eq(75)||V.key==="maxDamage"&&_&&S.eq(125)||(_?S.eq(0):S===0)&&V.key!=="attack"&&V.key!=="attackSpeed")}).length>8?"md:grid-cols-3":"md:grid-cols-2"}`,children:Object.values(ot).map(V=>{if(V.key==="maxHp")return null;const S=Y?Y.stats[V.key]:void 0;if(S==null)return null;const _=S instanceof o;return V.key==="minDamage"&&_&&S.eq(75)||V.key==="maxDamage"&&_&&S.eq(125)||(_?S.eq(0):S===0)&&V.key!=="attack"&&V.key!=="attackSpeed"?null:l.jsx(V0,{icon:l.jsx(V.icon,{className:`w-3 h-3 md:w-4 md:h-4 ${V.colorClass}`}),label:V.label,value:`${ge(S,V.format.decimals)}${V.format.suffix}`,colorClass:V.colorClass,tooltipHeading:V.label,tooltipContent:`${V.fullName}
${V.description}`,variant:"small"},V.key)})})]}),l.jsxs("div",{className:"w-32 h-32 landscape:w-32 landscape:h-32 md:w-96 md:h-96 landscape:md:w-96 landscape:md:h-96 relative flex items-center justify-center order-1 md:order-2 shrink-0 my-1 md:my-0",children:[N.map(V=>l.jsx("img",{src:F(V.image),className:"absolute inset-0 w-full h-full object-contain sketch-render animate-enemy-die pointer-events-none",alt:"Dying enemy"},V.key)),y&&l.jsx("img",{src:F(y.imagePath),alt:y.name,className:`
                                    w-full h-full object-contain sketch-render transition-all duration-75
                                    ${E?"animate-enemy-die":""}
                                `})]}),l.jsxs("div",{className:"w-full landscape:w-[45%] md:w-72 landscape:md:w-72 border-2 border-neutral-800 dark:border-neutral-700 bg-white dark:bg-neutral-900/50 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.8)] md:shadow-[3px_3px_0px_0px_rgba(0,0,0,0.8)] p-2 md:p-4 order-3 transition-colors",children:[l.jsxs("div",{className:"flex justify-between items-baseline text-[9px] md:text-xs font-bold uppercase tracking-widest text-neutral-500 dark:text-neutral-400 mb-1.5 md:mb-3 border-b border-neutral-200 dark:border-neutral-800 pb-1 md:pb-2",children:[l.jsx("span",{children:"Rewards"}),z>0&&(z>=m.maxVictories?l.jsxs("div",{className:"text-[9px] font-bold text-red-600 whitespace-nowrap",children:[z," MAXED"]}):l.jsxs("div",{className:"relative px-2 py-0.5 rounded overflow-hidden flex items-center justify-center text-[9px] md:text-[10px] font-bold text-neutral-600 dark:text-neutral-300 bg-neutral-100 dark:bg-neutral-800/50 min-w-[70px] whitespace-nowrap",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 bg-neutral-200 dark:bg-neutral-700 transition-all duration-300 ease-out",style:{width:`${Math.min(100,z/m.maxVictories*100)}%`}}),l.jsxs("span",{className:"relative z-10 text-[9px] md:text-[10px] text-neutral-600 dark:text-neutral-300 font-bold",children:[z," ",z===1?"Victory":"Victories"]})]}))]}),Y&&l.jsx(lc,{rewards:Y.rewards,currencyRewards:Y.currencyRewards,multiplier:J,layout:"grid",shopLevels:f,fundamentals:m,glossaryMultiplier:g})]})]}),l.jsx(_x,{owner:"enemy",className:"justify-center mb-2 min-h-[20px] md:min-h-[24px]"}),l.jsx("div",{className:"w-2/3 md:w-1/2 max-w-lg mx-auto h-1 md:h-2 bg-neutral-200 dark:bg-neutral-800 rounded-full overflow-hidden mb-1 md:mb-2",children:l.jsx("div",{ref:T,className:"h-full bg-red-500",style:{width:"0%"}})}),l.jsxs("div",{className:"flex justify-center items-center gap-1.5 md:gap-2 font-mono font-bold text-xs md:text-xl mb-1 md:mb-2 dark:text-neutral-100 transition-colors",children:[l.jsx(t,{className:"w-3 h-3 md:w-6 md:h-6 text-black dark:text-white"}),l.jsx("span",{ref:k,children:"0 / 0"})]}),l.jsx("div",{className:"w-full max-w-2xl mx-auto h-4 md:h-8 bg-white dark:bg-neutral-800 border-2 border-black dark:border-neutral-700 rounded-full relative overflow-hidden mb-2 md:mb-2",children:l.jsx("div",{ref:w,className:"h-full bg-red-600 transition-all duration-75",style:{width:"100%"}})})]}),l.jsxs("div",{className:"w-full text-center border-t md:border-t-0 border-neutral-200 dark:border-neutral-800 pt-2 md:pt-0",children:[l.jsx(_x,{owner:"player",className:"justify-center mb-2 min-h-[20px] md:min-h-[24px]"}),l.jsx("div",{className:"w-full max-w-2xl mx-auto h-4 md:h-8 bg-white dark:bg-neutral-800 border-2 border-black dark:border-neutral-700 rounded-full relative overflow-hidden mb-1 md:mb-2",children:l.jsx("div",{ref:b,className:"h-full bg-green-600 transition-all duration-75",style:{width:"100%"}})}),l.jsxs("div",{className:"flex justify-center items-center gap-1.5 md:gap-2 font-mono font-bold text-xs md:text-xl mb-1 md:mb-2 text-neutral-800 dark:text-neutral-100 transition-colors",children:[l.jsx(t,{className:"w-3 h-3 md:w-6 md:h-6 text-black dark:text-white"}),l.jsx("span",{ref:v,children:"0 / 0"})]}),l.jsx("div",{className:"w-2/3 md:w-1/2 max-w-lg mx-auto h-1 md:h-2 bg-neutral-200 dark:bg-neutral-800 rounded-full overflow-hidden mb-1 md:mb-2",children:l.jsx("div",{ref:M,className:"h-full bg-blue-500",style:{width:"0%"}})}),l.jsxs("div",{className:"hidden md:block mt-1 md:mt-2",children:[l.jsx("button",{onClick:()=>le.getState().fleeBattle(),disabled:x,className:`
                            px-3 md:px-6 py-1 md:py-2 bg-white dark:bg-neutral-800 border-2 border-black dark:border-neutral-700 text-black dark:text-neutral-200 font-bold uppercase tracking-wider transition-colors text-[10px] md:text-sm
                            ${x?"opacity-50 cursor-not-allowed":"hover:bg-neutral-100 dark:hover:bg-neutral-700"}
                        `,children:"Flee"}),le.getState().fundamentals.fleePenalty>0&&l.jsxs("span",{className:"block mt-1 md:mt-1 text-[10px] md:text-xs font-mono text-neutral-500",children:["Cooldown: ",ge(le.getState().fundamentals.fleePenalty,1),"s"]})]})]})]})})},p4=()=>{const t=le(_=>_.resetGame),r=B.useRef(null),n=le(_=>_.tipInterval),i=le(_=>_.enabledTipCategories),u=le(_=>_.darkMode),d=le(_=>_.toggleDarkMode),m=le(_=>_.showProtocolSidebar),f=le(_=>_.toggleProtocolSidebar),g=le(_=>_.showDevTools),x=le(_=>_.toggleDevTools),y=le(_=>_.skipRedrawConfirmation),b=le(_=>_.setSkipRedrawConfirmation),w=le(_=>_.resetTutorials),v=le(_=>_.addNotification),k=le(_=>_.notificationSettings),M=le(_=>_.toggleNotificationSetting),T=le(_=>_.keepAwake),E=le(_=>_.toggleKeepAwake),[R,N]=B.useState(()=>!!document.fullscreenElement);B.useEffect(()=>{const _=()=>{N(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",_),()=>document.removeEventListener("fullscreenchange",_)},[]);const j=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(_=>{q("Failed to enter fullscreen: "+_.message,"error")})},[I,P]=B.useState(""),[O,H]=B.useState(null),q=(_,U)=>{H({msg:_,type:U}),setTimeout(()=>H(null),3e3)},G=()=>{w(),v("All tutorials have been reset!","SYSTEM_UNLOCK")},F=()=>{const _=localStorage.getItem("unnamed-battler-save");if(!_)return null;try{return btoa(_)}catch(U){return console.error("Encoding error",U),null}},Y=()=>{const _=F();_?navigator.clipboard.writeText(_).then(()=>{q("Save string copied to clipboard!","success")}):q("No save data found.","error")},J=()=>{const _=F();if(_){const U=new Blob([_],{type:"text/plain"}),W=URL.createObjectURL(U),X=document.createElement("a");X.href=W;const D=le.getState(),$=D.totalQuintessenceGained,ee=D.glossaryUnlocks.length,A=new Date().toISOString().split("T")[0];X.download=`rejected-draft-save-Q${ge($)}-G${ee}-${A}.txt`,X.click(),URL.revokeObjectURL(W),q("Save file downloaded!","success")}else q("No save data found.","error")},z=_=>{try{const U=atob(_);JSON.parse(U),localStorage.setItem("unnamed-battler-save",U),window.location.reload()}catch(U){console.error(U),q("Invalid save data string.","error")}},V=_=>{const U=_.target.files?.[0];if(!U)return;const W=new FileReader;W.onload=X=>{const D=X.target?.result;z(D.trim())},W.readAsText(U)},S=()=>{confirm("Are you sure you want to wipe your save and restart? This cannot be undone.")&&t()};return l.jsxs("div",{className:"h-full p-4 pb-24 md:p-8 overflow-y-auto bg-white dark:bg-neutral-950 transition-colors",children:[O&&l.jsx("div",{className:`fixed top-4 right-4 px-6 py-3 rounded shadow-lg font-bold border-2 z-50 transition-all ${O.type==="success"?"bg-green-100 text-green-800 border-green-300":"bg-red-100 text-red-800 border-red-300"}`,children:O.msg}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("section",{className:"bg-white dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-800 p-5 shadow-sm transition-colors flex flex-col",children:[l.jsxs("h3",{className:"text-lg font-black uppercase text-neutral-800 dark:text-neutral-100 mb-4 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Interface"]}),l.jsxs("div",{className:"space-y-4 flex-1",children:[l.jsx("div",{children:l.jsx("button",{onClick:d,className:`
                                    cursor-pointer w-full py-2 px-4 font-bold uppercase text-xs tracking-widest border-2 transition-all
                                    ${u?"bg-neutral-100 text-neutral-900 border-neutral-300 hover:bg-white":"bg-neutral-900 text-white border-black hover:bg-neutral-800 shadow-md"}
                                `,children:u?" Normal Mode":" Dark Mode"})}),l.jsx("div",{children:l.jsx("button",{onClick:j,className:"cursor-pointer w-full py-2 px-4 font-bold uppercase text-xs tracking-widest border-2 transition-all bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 border-neutral-300 dark:border-neutral-700 hover:bg-white dark:hover:bg-neutral-700",children:R?" Exit Fullscreen":" Enter Fullscreen"})}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer select-none group",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:f,className:"mt-1 w-5 h-5 text-black rounded focus:ring-black accent-black dark:accent-neutral-100"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold uppercase text-xs text-neutral-700 dark:text-neutral-300 group-hover:text-black dark:group-hover:text-white transition-colors",children:"Show Protocol Sidebar"}),l.jsx("span",{className:"text-[10px] text-neutral-400 font-serif italic",children:"Display active protocols on the right."})]})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer select-none group",children:[l.jsx("input",{type:"checkbox",checked:T,onChange:E,className:"mt-1 w-5 h-5 text-black rounded focus:ring-black accent-black dark:accent-neutral-100"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold uppercase text-xs text-neutral-700 dark:text-neutral-300 group-hover:text-black dark:group-hover:text-white transition-colors",children:"Prevent Screen Sleep"}),l.jsx("span",{className:"text-[10px] text-neutral-400 font-serif italic",children:"Keep the screen active while the game is open."})]})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer select-none group",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:_=>b(_.target.checked),className:"mt-1 w-5 h-5 text-black rounded focus:ring-black accent-black dark:accent-neutral-100"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold uppercase text-xs text-neutral-700 dark:text-neutral-300 group-hover:text-black dark:group-hover:text-white transition-colors",children:"Skip Redraw Confirmation"}),l.jsx("span",{className:"text-[10px] text-neutral-400 font-serif italic",children:"No dialog for Redraw animation."})]})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer select-none group",children:[l.jsx("input",{type:"checkbox",checked:g,onChange:x,className:"mt-1 w-5 h-5 text-black rounded focus:ring-black accent-black dark:accent-neutral-100"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold uppercase text-xs text-neutral-700 dark:text-neutral-300 group-hover:text-black dark:group-hover:text-white transition-colors",children:"Add Dev Tools"}),l.jsx("span",{className:"text-[10px] text-neutral-400 font-serif italic",children:"Enables the developer dashboard in the header. (Hidden by default)"})]})]}),l.jsxs("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800 flex flex-col gap-1.5",children:[l.jsx("label",{className:"font-bold uppercase text-[12px] text-neutral-400",children:"Battle Tab Navigation"}),l.jsxs("select",{value:le(_=>_.autoSwitchToBattle),onChange:_=>le.getState().setAutoSwitchToBattle(_.target.value),className:"cursor-pointer w-full bg-white dark:bg-neutral-800 border-2 border-neutral-200 dark:border-neutral-700 px-3 py-1.5 text-xs font-bold font-mono focus:border-black dark:focus:border-white outline-none transition-colors",children:[l.jsx("option",{value:"default",children:"Manual Challenge Only"}),l.jsx("option",{value:"always",children:"Always Switch (Even Auto-Challenge)"}),l.jsx("option",{value:"never",children:"Never Switch (Only on Tab Click)"})]})]}),l.jsx("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800",children:l.jsx("button",{onClick:G,className:"cursor-pointer w-full px-4 py-2 bg-amber-50 dark:bg-amber-900/10 border-2 border-amber-200 dark:border-amber-800/40 text-amber-800 dark:text-amber-400 font-bold uppercase text-[10px] tracking-wider hover:bg-amber-100 dark:hover:bg-amber-900/20 active:bg-amber-200 dark:active:bg-amber-900/30 active:scale-95 transition-all",children:"Reset Tutorials"})})]})]}),l.jsxs("section",{className:"bg-white dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-800 p-5 shadow-sm transition-colors",children:[l.jsxs("h3",{className:"text-lg font-black uppercase text-neutral-800 dark:text-neutral-100 mb-4 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Sticky Notes"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:["COMBAT_VICTORY","COMBAT_DEFEAT","COMBAT_FLEE","SHOP_ERROR","SHOP_AFFORDABLE","SYSTEM_UNLOCK"].map(_=>l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer select-none group p-1.5 hover:bg-neutral-50 dark:hover:bg-neutral-800/50 rounded transition-colors",children:[l.jsx("input",{type:"checkbox",checked:k?.[_]??!0,onChange:()=>M(_),className:"w-4 h-4 text-black dark:text-white rounded focus:ring-black dark:focus:ring-white accent-black dark:accent-neutral-100"}),l.jsx("span",{className:"font-bold uppercase text-[10px] md:text-xs text-neutral-600 dark:text-neutral-400 group-hover:text-black dark:group-hover:text-white mt-0.5",children:_.replace(/_/g," ")})]},_))}),l.jsxs("div",{className:"mt-6 pt-5 border-t border-neutral-100 dark:border-neutral-800",children:[l.jsxs("h3",{className:"text-lg font-black uppercase text-neutral-800 dark:text-neutral-100 mb-4 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Scrolling Tips"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"font-bold uppercase text-[12px] text-neutral-400",children:"Tip Frequency"}),l.jsxs("select",{value:n,onChange:_=>le.getState().setTipInterval(Number(_.target.value)),className:"cursor-pointer w-full bg-white dark:bg-neutral-800 border-2 border-neutral-200 dark:border-neutral-700 px-3 py-1.5 text-xs font-bold font-mono focus:border-black dark:focus:border-white outline-none transition-colors",children:[l.jsx("option",{value:-1,children:"Continuous"}),l.jsx("option",{value:15,children:"Every 15s"}),l.jsx("option",{value:30,children:"Every 30s (Default)"}),l.jsx("option",{value:60,children:"Every 1m"}),l.jsx("option",{value:0,children:"Never"})]})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"font-bold uppercase text-[12px] text-neutral-400",children:"Scroll Speed"}),l.jsxs("select",{value:le(_=>_.tipScrollSpeed),onChange:_=>le.getState().setTipScrollSpeed(Number(_.target.value)),className:"cursor-pointer w-full bg-white dark:bg-neutral-800 border-2 border-neutral-200 dark:border-neutral-700 px-3 py-1.5 text-xs font-bold font-mono focus:border-black dark:focus:border-white outline-none transition-colors",children:[l.jsx("option",{value:14,children:"~60 WPM [Slowest]"}),l.jsx("option",{value:12,children:"~75 WPM [Slow]"}),l.jsx("option",{value:10,children:"~90 WPM [Normal]"}),l.jsx("option",{value:8,children:"~110 WPM [Fast]"}),l.jsx("option",{value:6,children:"~140 WPM [Fastest]"})]})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"font-bold uppercase text-[12px] text-neutral-400",children:"Categories"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Gx.map(_=>{const U=!!i[_];return l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none group p-1 hover:bg-neutral-50 dark:hover:bg-neutral-800/50 rounded transition-colors",children:[l.jsx("input",{type:"checkbox",checked:U,onChange:()=>le.getState().toggleTipCategory(_),className:"w-3.5 h-3.5 text-black dark:text-white rounded focus:ring-black dark:focus:ring-white accent-black dark:accent-neutral-100"}),l.jsx("span",{className:"font-bold uppercase text-[11px] text-neutral-600 dark:text-neutral-400 group-hover:text-black dark:group-hover:text-white mt-0.5",children:_})]},_)})})]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-800 p-5 shadow-sm transition-colors flex flex-col",children:[l.jsxs("h3",{className:"text-lg font-black uppercase text-neutral-800 dark:text-neutral-100 mb-4 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Data Management"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"block text-[12px] font-bold uppercase text-neutral-400 mb-2",children:"Save"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:Y,className:"cursor-pointer px-2 py-2 bg-neutral-100 dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 font-bold uppercase text-[13px] tracking-tight hover:bg-white dark:hover:bg-neutral-700 hover:text-black dark:hover:text-white transition-all",children:"Copy String"}),l.jsx("button",{onClick:J,className:"cursor-pointer px-2 py-2 bg-neutral-100 dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 font-bold uppercase text-[13px] tracking-tight hover:bg-white dark:hover:bg-neutral-700 hover:text-black dark:hover:text-white transition-all",children:"Save File"})]}),l.jsxs("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800",children:[l.jsx("label",{className:"block text-[12px] font-bold uppercase text-neutral-400 mb-2",children:"Load"}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"text",value:I,onChange:_=>P(_.target.value),placeholder:"Paste string...",className:"flex-1 px-2 py-1.5 border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-[12px] focus:border-black dark:focus:border-white outline-none text-neutral-900 dark:text-neutral-100 transition-colors"}),l.jsx("button",{onClick:()=>z(I),disabled:!I,className:"cursor-pointer px-3 py-1.5 bg-black dark:bg-white text-white dark:text-black font-bold uppercase text-[12px] hover:opacity-80 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Load String"})]}),l.jsx("input",{type:"file",ref:r,accept:".txt",onChange:V,className:"hidden"}),l.jsx("button",{onClick:()=>r.current?.click(),className:"cursor-pointer w-full px-2 py-2 bg-neutral-100 dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 font-bold uppercase text-[12px] tracking-tight hover:bg-white dark:hover:bg-neutral-700 hover:text-black dark:hover:text-white transition-all shadow-sm",children:"Select File"})]}),l.jsxs("div",{className:"pt-6 border-t-2 border-red-100 dark:border-red-900/30 mt-4",children:[l.jsx("label",{className:"block text-[12px] font-black text-red-800 dark:text-red-400 uppercase mb-1",children:"Danger Zone"}),l.jsx("p",{className:"text-red-600/70 dark:text-red-500/50 mb-3 font-serif italic text-[11px]",children:"Wipe your save and restart. irreversible."}),l.jsx("button",{onClick:S,className:"cursor-pointer w-full py-2 bg-red-600 dark:bg-red-700/80 text-white border-2 border-transparent hover:bg-red-700 dark:hover:bg-red-600 transition-all shadow-sm group",children:l.jsx("span",{className:"block font-bold uppercase tracking-widest text-[12px] group-active:translate-y-0.5 transition-transform",children:"Hard Reset Game"})})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-800 p-5 shadow-sm transition-colors flex flex-col",children:[l.jsxs("h3",{className:"text-lg font-black uppercase text-neutral-800 dark:text-neutral-100 mb-4 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),"Community & Feedback"]}),l.jsxs("div",{className:"space-y-4 flex-1 flex flex-col",children:[l.jsx("p",{className:"text-xs md:text-sm text-neutral-600 dark:text-neutral-400 font-serif italic leading-relaxed",children:"This project is in very early development. I'm currently pushing 1-2 updates a day. Join our small tester community to track changes, suggest new features, and help refine the grind."}),l.jsx("div",{className:"pt-2",children:l.jsx("a",{href:"https://discord.gg/GxSWGPEEqZ",target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer block w-full py-3 px-4 bg-[#5865F2] hover:opacity-90 text-white font-bold uppercase text-xs tracking-widest text-center transition-all shadow-md active:scale-95",children:"Join Discord"})})]})]})]}),l.jsx("div",{className:"mt-8 text-center text-[10px] text-neutral-400 font-mono tracking-widest opacity-50",children:"VERSION - v0.26"})]})},h4=()=>{const t=le(y=>y.challengeCooldownUntil),r=le(y=>y.autoRetryActive),n=le(y=>y.lastEnemyId),i=le(y=>y.abandonAutoRetry),[u,d]=B.useState(Date.now()),m=t>u,f=r&&!!n;Fo(()=>{d(Date.now())},m?100:null);const g=B.useMemo(()=>Array.from({length:20},()=>({left:`${Math.random()*100}%`,width:`${2+Math.random()*6}px`,height:`${2+Math.random()*6}px`,opacity:.3+Math.random()*.4,animationDelay:`${Math.random()*2}s`,animationDuration:`${1+Math.random()*1.5}s`})),[]);if(!m)return null;const x=Math.max(0,(t-u)/1e3).toFixed(1);return l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center overflow-hidden",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-48 h-48 bg-black rounded-full flex flex-col items-center justify-center z-10 relative",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-[10px] md:text-xs uppercase tracking-widest text-neutral-400 font-bold mt-1",children:"Ink Drying..."}),l.jsx("div",{className:"font-mono text-4xl md:text-6xl font-black text-white",children:x}),l.jsx("div",{className:"text-[10px] md:text-xs uppercase tracking-widest text-neutral-400 font-bold mt-1",children:"seconds"})]})}),l.jsx("div",{className:"absolute top-24 inset-x-0 pointer-events-none flex justify-center",children:l.jsx("div",{className:"relative w-48 h-[400px]",children:g.map((y,b)=>l.jsx("div",{className:"absolute bg-black rounded-full animate-ink-fall",style:y},b))})})]}),l.jsx("div",{className:"absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center md:flex-row gap-4",children:f&&l.jsx("button",{onClick:i,className:"pointer-events-auto px-4 md:px-6 py-2 bg-red-600 dark:bg-red-800 border-2 border-black dark:border-white text-white font-black uppercase text-[10px] md:text-[13px] tracking-tight hover:bg-red-500 hover:text-white transition-all active:scale-95 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] dark:shadow-none group",children:l.jsx("span",{className:"group-active:translate-y-px block tracking-widest",children:"Abandon Auto-Retry"})})})]})},g4=({draft:t,multiplier:r,victories:n,maxVictories:i,isHidden:u,isFighting:d,currentEnemyId:m,onChallenge:f,onToggleHide:g,tutorialIdStats:x,tutorialIdRewards:y,tutorialIdChallenge:b,tutorialIdCard:w,shopLevels:v,fundamentals:k,glossaryMultiplier:M,sketchHidingUnlocked:T,preBattleMeditationUnlocked:E,preciseEraserUnlocked:R,erasedSketchIds:N,onErase:j,onMeditate:I,meditationOnCooldown:P,meditationCooldownStart:O,meditationCooldownMax:H,challengeCooldownUntil:q=0,isNew:G=!1})=>{const[F,Y]=ga.useState(Date.now()),J=q>F;ga.useEffect(()=>{if(!P&&!J)return;const A=setInterval(()=>Y(Date.now()),1e3);return()=>clearInterval(A)},[P,J]);const z=n>=i,V=t.name,S={contentVisibility:"auto",containIntrinsicSize:"0 300px"},_=A=>{if(!A)return"";const Z="/rejected_draft/",se=Z.endsWith("/")?Z:`${Z}/`,ue=A.startsWith("/")?A.slice(1):A;return`${se}${ue}`},U=d&&m===t.id,W=z||d;let X="Challenge",D="cursor-pointer bg-white dark:bg-neutral-800 text-black dark:text-white border-black dark:border-neutral-600 hover:bg-black dark:hover:bg-neutral-100 hover:text-white dark:hover:text-black";z?(X="MAXED",D="bg-red-50 dark:bg-red-900/20 text-red-400 dark:text-red-500/60 border-red-200 dark:border-red-900/40 cursor-not-allowed"):U?(X="IN BATTLE",D="bg-red-600 text-white border-red-800 animate-pulse cursor-not-allowed"):d&&(X="WAIT",D="bg-neutral-100 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-500 border-neutral-200 dark:border-neutral-700 cursor-not-allowed");const $=U?"ring-4 ring-red-500 dark:ring-red-600 shadow-[0_0_20px_rgba(239,68,68,0.4)] z-10 scale-[1.02]":"",ee=A=>{A.stopPropagation(),I?.()};return l.jsxs("div",{id:w||`sketch-card-${t.id}`,className:`bg-white dark:bg-neutral-800 p-2 md:p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)] dark:shadow-none dark:border-2 dark:border-neutral-700 hover:shadow-[6px_6px_0px_0px_rgba(0,0,0,0.15)] transition-all flex flex-col relative h-full rarity-${t.rarity} ${u?"opacity-60 grayscale":""} ${$}`,style:S,children:[l.jsxs("div",{id:x,className:"flex gap-2 md:gap-4 h-[120px]",children:[l.jsxs("div",{className:"w-16 h-16 md:w-22 md:h-22 shrink-0 bg-neutral-50 dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 flex items-center justify-center relative overflow-hidden group/image",children:[l.jsx("img",{src:_(t.imagePath),alt:t.name,loading:"lazy",className:"w-full h-full object-contain sketch-render opacity-90 transition-all group-hover/image:scale-110 duration-500"}),G&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-[1px] border-2 border-dashed border-white/30 animate-pulse",children:l.jsx("div",{className:"bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 bg-[length:200%_auto] animate-gradient text-white text-[8px] md:text-[10px] font-black px-1 md:px-2 py-0.5 shadow-lg border border-white/50 transform -rotate-12",children:"NEW"})})]}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col min-h-[80px]",children:[l.jsxs("div",{className:"mb-2 border-b border-neutral-200 dark:border-neutral-700 pb-1",children:[l.jsx("h3",{className:"font-black uppercase text-neutral-800 dark:text-neutral-100 leading-tight md:leading-none text-[10px] md:text-lg break-words",children:V}),l.jsx("div",{className:"flex justify-between items-baseline mt-1",children:l.jsx("p",{className:"text-[7.5px] md:text-[10px] text-neutral-500 dark:text-neutral-400 font-serif italic truncate mr-2",children:t.flavorText})})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Object.values(ot).map(A=>{const Z=t?.stats?.[A.key];if(Z==null)return null;const se=Z instanceof o;if(A.key==="minDamage"&&se&&Z.eq(75)||A.key==="maxDamage"&&se&&Z.eq(125)||(se?Z.eq(0):Z===0)&&A.key!=="maxHp"&&A.key!=="attack"&&A.key!=="attackSpeed")return null;let ie=Z,pe=A.colorClass,be=`w-3 h-3 ${pe}`;const we=A.key==="maxHp"&&N?.includes(t.id);return we&&se&&(ie=Z.div(2).floor(),pe="text-pink-500",be="w-3 h-3 text-pink-500"),l.jsx(V0,{icon:l.jsx(A.icon,{className:be}),label:A.label,value:we?l.jsx("span",{className:"text-pink-500 font-black drop-shadow-sm",children:`${ge(ie,A.format.decimals)}${A.format.suffix}`}):`${ge(ie,A.format.decimals)}${A.format.suffix}`,colorClass:pe,tooltipHeading:A.label,tooltipContent:we?`Precise Eraser Applied!
Original HP: ${ge(Z,A.format.decimals)}`:`${A.fullName}
${A.description}`,variant:"compact"},A.key)})})]})]}),l.jsxs("div",{id:y,className:"mt-auto border-t border-neutral-200 dark:border-neutral-700 pt-2 h-auto md:h-[60px]",children:[l.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[l.jsxs("div",{className:"text-[8px] md:text-[10px] font-bold uppercase tracking-widest text-neutral-400",children:["Rewards",n>0&&l.jsxs("span",{className:"ml-1 text-neutral-500",children:["",ge(r,3)]})]}),n>0&&(z?l.jsxs("div",{className:"text-[8px] md:text-[10px] font-bold text-red-600",children:[n," MAXED"]}):l.jsxs("div",{className:"relative px-2 py-0.5 rounded overflow-hidden flex items-center justify-center text-[8px] md:text-[10px] font-bold text-neutral-600 dark:text-neutral-300 bg-neutral-100 dark:bg-neutral-800/50",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 bg-neutral-200 dark:bg-neutral-700 transition-all duration-300 ease-out",style:{width:`${Math.min(100,n/i*100)}%`}}),l.jsxs("span",{className:"relative z-10 text-[8px] md:text-[10px] text-neutral-600 dark:text-neutral-300 font-bold",children:[n," ",n===1?"Victory":"Victories"]})]}))]}),l.jsx(lc,{rewards:t.rewards,currencyRewards:t.currencyRewards,multiplier:r,layout:"grid",shopLevels:v,fundamentals:k,glossaryMultiplier:M})]}),E?l.jsxs("div",{className:"flex gap-2 mt-3 w-full",children:[l.jsx("button",{id:b,onClick:()=>f(t.id),disabled:W||J,className:`
                            flex-1 py-1.5 border-2 transition-all group
                            ${W||J?"bg-neutral-100 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-500 border-neutral-200 dark:border-neutral-700 cursor-not-allowed opacity-50":D}
                        `,children:l.jsx("span",{className:`block text-[8px] md:text-xs font-bold uppercase tracking-wider transition-transform ${W||J?"":"group-active:translate-y-1"}`,children:X})}),l.jsx(et,{heading:"Pre-Battle Meditation",content:P?(()=>{const Z=Math.max(6e4,(H||1800)*1e3)-(F-(O||0)),se=Math.max(0,Math.floor(Z/1e3)),ue=Math.floor(se/60),ie=se%60;return`Meditation is on cooldown. Recharges in: ${se>0?ue+":"+ie.toString().padStart(2,"0"):"Soon..."}`})():J?"Ink is still drying from the last battle. Wait a moment.":`Focus your mind before battle. Land in the teal zone for +5% or the gold zone for +10% to a random stat.
Buff lasts for the duration of this combat (including auto-challenge).
Cooldown: ${Math.max(1,(H||1800)/60)} minutes`,children:l.jsx("button",{onClick:ee,disabled:W||P||J,className:`
                                px-2 md:px-3 py-1.5 border-2 transition-all group shrink-0
                                ${W||P||J?"bg-neutral-100 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-500 border-neutral-200 dark:border-neutral-700 cursor-not-allowed opacity-50":D}
                            `,children:l.jsx("span",{className:`block text-[8px] md:text-xs font-bold uppercase tracking-wider transition-transform ${W||P||J?"":"group-active:translate-y-1"}`,children:l.jsx(Wx,{className:"w-4 h-4 md:w-5 md:h-5 mx-auto text-teal-600 dark:text-teal-400"})})})})]}):l.jsx("button",{id:b,onClick:()=>f(t.id),disabled:W,className:`
                        w-full mt-3 py-1 md:py-1.5 border-2 transition-all group
                        ${D}
                    `,children:l.jsx("span",{className:`block text-[10px] md:text-xs font-bold uppercase tracking-wider transition-transform ${W?"":"group-active:translate-y-1"}`,children:X})}),T&&l.jsx("div",{className:"absolute top-1.5 left-1.5 z-20",children:l.jsx(et,{heading:u?"Unhide Sketch":"Hide Sketch",content:u?"Bring it back. Maybe it wasn't that bad.":"Bury this one. I can't look at it anymore.",children:l.jsx("button",{onClick:A=>{A.stopPropagation(),g(t.id)},className:"cursor-pointer p-1.5 bg-white dark:bg-neutral-800 bg-opacity-90 rounded-full shadow-sm border border-neutral-200 dark:border-neutral-700 text-neutral-400 hover:text-red-600 hover:border-red-300 transition-all",children:u?l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[l.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),l.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.414-1.414A9 9 0 0010 10a8.975 8.975 0 00-1.414.114l-.32-.32A11.05 11.05 0 0110 8c4.478 0 8.268 2.943 9.542 7a11.01 11.01 0 01-2.903 4.205l-1.34-1.34A9.01 9.01 0 0019.542 10 9.01 9.01 0 0010 11.83 5.01 5.01 0 007.414 8.586l-2-2A8.995 8.995 0 00.458 10a11.05 11.05 0 012.396-4.996l-1.12-1.12a1 1 0 001.414 0l1.122 1.12.853.854zM6.586 10l-1.414 1.414A6.973 6.973 0 0010 14a7.01 7.01 0 003.743-1.086l-1.366-1.366A4.985 4.985 0 0110 12a5.006 5.006 0 01-3.414-2zm5.828 0a3.004 3.004 0 01-5.656 0l2.828 2.828L12.414 10z",clipRule:"evenodd"})})})})}),R&&(N?.length||0)<1+(k?.preciseEraserUses||0)&&!N?.includes(t.id)&&["scrap","rough","framed",...k?.opusEraser?["opus"]:[]].includes(t.rarity)&&l.jsx("div",{className:"absolute top-1.5 right-1.5 z-20",children:l.jsx(et,{heading:"Precise Eraser",content:`Permanently halves this sketch's Max HP for the rest of this Redraw. Uses left: ${1+(k?.preciseEraserUses||0)-(N?.length||0)}`,children:l.jsx("button",{onClick:A=>{A.stopPropagation(),j?.(t.id)},className:"cursor-pointer p-1.5 bg-white dark:bg-neutral-800 bg-opacity-90 rounded-full shadow-sm border border-neutral-200 dark:border-neutral-700 text-pink-400 hover:text-pink-600 hover:border-pink-300 transition-all",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),l.jsx("path",{d:"M22 21H7"}),l.jsx("path",{d:"m5 11 9 9"})]})})})})]})},x4=B.memo(g4),y4=({onClose:t,isOpen:r})=>{const{triggerMeditationMinigame:n,playerStats:i,activeMeditationBuffs:u,fundamentals:d}=le(ft(U=>({triggerMeditationMinigame:U.triggerMeditationMinigame,playerStats:U.playerStats,activeMeditationBuffs:U.activeMeditationBuffs,meditationsUsedThisSession:U.meditationsUsedThisSession,fundamentals:U.fundamentals}))),[m,f]=B.useState("maxHp"),[g,x]=B.useState(!1),[y,b]=B.useState(null),[w,v]=B.useState(0),[k,M]=B.useState(!0),[T,E]=B.useState(2),R=B.useRef(0),[N,j]=B.useState(40),[I,P]=B.useState(20),[O,H]=B.useState(48),[q,G]=B.useState(4);B.useEffect(()=>{if(r&&!g&&y===null){const U=Object.entries(ot).filter(([ee,A])=>{if(A.isDecayImmune||u.some(se=>se.stat===A.key))return!1;const Z=i[A.key]||A.baseValue;return A.displayCondition&&!A.displayCondition(Z)?!1:Z instanceof o?Z.gt(0):Number(Z)>0}).map(([ee])=>ee);if(U.length>0){const ee=U[Math.floor(Math.random()*U.length)];f(ee)}const W=15,X=100-W,D=Math.random()*X;j(D),P(W);const $=3;H(D+W/2-$/2),G($),v(0),M(Math.random()>.5),E(1+Math.random()),b(null),x(!0)}},[r,g,y,i,u]),B.useEffect(()=>{r||(x(!1),b(null))},[r]),B.useEffect(()=>{if(!r||!g)return;let U=performance.now();const W=X=>{const D=X-U;U=X;const $=D/16.6;v(ee=>{let A=ee+(k?T:-T)*$;return A>=100?(A=100-(A-100),M(!1)):A<=0&&(A=-A,M(!0)),A}),R.current=requestAnimationFrame(W)};return R.current=requestAnimationFrame(W),()=>{R.current&&cancelAnimationFrame(R.current)}},[r,g,k,T]);const F=()=>{if(!g)return;x(!1),R.current&&cancelAnimationFrame(R.current);const U=w;let W="miss";U>=O&&U<=O+q?W="perfect":U>=N&&U<=N+I&&(W="hit"),b(W),n(m,W);const X=le.getState().meditationsUsedThisSession,D=1+(d.meditationExtraSlots||0);setTimeout(()=>{X>=D?t():(x(!1),b(null))},1500)};if(!r)return null;const Y=ot[m],J=Y.icon,z=5+(d.meditationTealZoneBonus||0),V=10+(d.meditationGoldZoneBonus||0);let S="Focus...",_="text-neutral-500";return y==="perfect"?(S=`Perfect Clarity! +${V}%`,_="text-amber-500"):y==="hit"?(S=`Focused! +${z}%`,_="text-teal-500"):y==="miss"&&(S="Distracted...",_="text-red-500"),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-800 p-6 max-w-sm w-full relative overflow-hidden flex flex-col items-center",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"font-serif text-xl font-bold italic text-neutral-900 dark:text-neutral-100",children:"Pre-Battle Meditation"}),l.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1 uppercase font-bold tracking-widest",children:"Align the current"})]}),l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-neutral-50 dark:bg-neutral-800 w-full mb-4 border border-neutral-200 dark:border-neutral-700",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(J,{className:`w-6 h-6 ${Y.colorClass}`}),l.jsx("span",{className:`font-black uppercase tracking-wider ${Y.colorClass}`,children:Y.fullName})]}),l.jsxs("div",{className:"flex flex-col gap-1 text-center",children:[l.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Land in the ",l.jsx("span",{className:"font-bold text-teal-600 dark:text-teal-400",children:"teal zone"})," for ",l.jsxs("span",{className:"font-bold text-teal-600 dark:text-teal-400",children:["+",z,"% ",Y.label]})]}),l.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Land in the ",l.jsx("span",{className:"font-bold text-amber-500",children:"gold zone"})," for ",l.jsxs("span",{className:"font-bold text-amber-500",children:["+",V,"% ",Y.label]})]})]})]}),l.jsxs("div",{className:"w-full h-8 bg-neutral-200 dark:bg-neutral-800 relative mb-2 overflow-hidden border border-neutral-300 dark:border-neutral-700",children:[l.jsx("div",{className:"absolute top-0 bottom-0 bg-teal-500/30 border-x border-teal-500",style:{left:`${N}%`,width:`${I}%`}}),l.jsx("div",{className:"absolute top-0 bottom-0 bg-amber-500",style:{left:`${O}%`,width:`${q}%`}}),l.jsx("div",{className:"absolute top-[-4px] bottom-[-4px] w-1 bg-neutral-900 dark:bg-neutral-100 transition-transform",style:{left:`${w}%`,transform:"translateX(-50%)"}})]}),l.jsxs("div",{className:"w-full flex justify-between items-center mb-6 px-1",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-neutral-400",children:"Breathe In"}),l.jsx("span",{className:`text-xs font-black uppercase ${_}`,children:S}),l.jsx("span",{className:"text-[10px] font-bold uppercase text-neutral-400",children:"Breathe Out"})]}),l.jsx("button",{onClick:F,disabled:!g,className:`w-full py-3 font-black uppercase tracking-widest text-sm transition-all border-2
                        ${g?"bg-neutral-900 text-white border-neutral-900 hover:bg-neutral-800 dark:bg-neutral-100 dark:text-neutral-900 dark:border-neutral-100 dark:hover:bg-neutral-200 cursor-pointer":"bg-neutral-100 text-neutral-400 border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 cursor-not-allowed"}
                    `,children:g?"Focus":"Done"})]})})},b4={Graphite:{Icon:sr,colorClass:"text-neutral-500"},Wax:{Icon:Or,colorClass:"text-amber-600"},Charcoal:{Icon:Pr,colorClass:"text-neutral-800 dark:text-neutral-400"},Coffee:{Icon:Ir,colorClass:"text-orange-900 dark:text-orange-500"},Ink:{Icon:oa,colorClass:"text-blue-900 dark:text-blue-400"},Marker:{Icon:ir,colorClass:"text-teal-600"},Acrylic:{Icon:qo,colorClass:"text-purple-600"},Spray:{Icon:$o,colorClass:"text-cyan-600"},Photon:{Icon:Yo,colorClass:"text-yellow-400"},"Gold Leaf":{Icon:Wo,colorClass:"text-amber-500"}},Ax=()=>{const{sketchVictories:t,availableSketchIds:r,fundamentals:n,redrawCount:i}=le(ft(de=>({sketchVictories:de.sketchVictories,availableSketchIds:de.availableSketches,fundamentals:de.fundamentals,redrawCount:de.redrawCount}))),{isFighting:u,currentEnemyId:d,challengeCooldownUntil:m}=le(ft(de=>({isFighting:de.combatState.isFighting,currentEnemyId:de.combatState.enemyId,challengeCooldownUntil:de.challengeCooldownUntil}))),{hiddenSketches:f,activeRarityFilters:g,sketchHidingUnlocked:x,galleryRewardsFilterUnlocked:y,rarityFiltersUnlocked:b,preBattleMeditationUnlocked:w,meditationCooldownStart:v,preciseEraserUnlocked:k,erasedSketchIds:M,glossaryUnlocks:T}=le(ft(de=>({hiddenSketches:de.hiddenSketches,activeRarityFilters:de.activeRarityFilters,sketchHidingUnlocked:de.sketchHidingUnlocked,galleryRewardsFilterUnlocked:de.galleryRewardsFilterUnlocked,rarityFiltersUnlocked:de.rarityFiltersUnlocked,preBattleMeditationUnlocked:de.preBattleMeditationUnlocked,meditationCooldownStart:de.meditationCooldownStart,preciseEraserUnlocked:de.preciseEraserUnlocked,erasedSketchIds:de.erasedSketchIds,glossaryUnlocks:de.glossaryUnlocks}))),{challengeSketch:E,getRewardMultiplier:R,toggleHideSketch:N,hideSketchesAbove:j,unhideSketchesBelow:I,startTutorial:P,toggleRarityFilter:O,bulkHideSketches:H,bulkUnhideSketches:q,usePreciseEraser:G,setGalleryScrollPosition:F}=le(ft(de=>({challengeSketch:de.challengeSketch,getRewardMultiplier:de.getRewardMultiplier,toggleHideSketch:de.toggleHideSketch,hideSketchesAbove:de.hideSketchesAbove,unhideSketchesBelow:de.unhideSketchesBelow,startTutorial:de.startTutorial,toggleRarityFilter:de.toggleRarityFilter,bulkHideSketches:de.bulkHideSketches,bulkUnhideSketches:de.bulkUnhideSketches,usePreciseEraser:de.usePreciseEraser,setGalleryScrollPosition:de.setGalleryScrollPosition}))),{hasSeenTutorials:Y,tutorialStep:J,activeTutorialSegment:z,themeChosen:V,viewedStories:S,tutorialResetCount:_,shopLevels:U,glossaryMultiplier:W}=le(ft(de=>({hasSeenTutorials:de.hasSeenTutorials,tutorialStep:de.tutorialStep,activeTutorialSegment:de.activeTutorialSegment,themeChosen:de.themeChosen,viewedStories:de.viewedStories,tutorialResetCount:de.tutorialResetCount,shopLevels:de.shopLevels,glossaryMultiplier:de.glossaryMultiplier})));B.useEffect(()=>{const de=S.length>0,Ee=V&&de,Ge=Object.values(Y).some(He=>He===!0),Ye=z!=="Gallery";if(!Y.Gallery&&(J===null||Ye)&&(Ee||Ge)){P("Gallery");return}i===2&&!Y["Rough Rarity Intro"]&&(J===null||Ye)&&P("Rough Rarity Intro")},[Y,J,z,P,V,S,_,i]);const[X,D]=B.useState(!1),[$,ee]=B.useState(null),[A,Z]=B.useState(null),[se,ue]=B.useState(!1),[ie,pe]=B.useState(null),[be,we]=B.useState(15),ye=Math.max(6e4,n.meditationCooldownMax*1e3),ke=v!==null&&Date.now()-v<ye,Ce=de=>{const Ee=g[de]??!0,Ge=Xe.filter(Ye=>r.includes(Ye.id)&&Ye.rarity===de).map(Ye=>Ye.id);if(O(de),Ee)H(Ge);else{const Ye=Xe.filter(Te=>r.includes(Te.id)&&Te.rarity===de&&(t[Te.id]||0)<n.maxVictories).map(Te=>Te.id);q(Ye)}},Ae=()=>{ue(!1),ie&&(E(ie),pe(null))},Le=B.useMemo(()=>Xe.filter(de=>r.includes(de.id)),[r]),st=B.useMemo(()=>{let de=-1;for(let Ge=0;Ge<Le.length;Ge++)(t[Le[Ge].id]||0)>0&&(de=Ge);const Ee=de+1+n.lookahead;return Le.slice(0,Ee)},[Le,t,n.lookahead]),yt=B.useMemo(()=>st.filter(de=>X||!f.includes(de.id)),[st,X,f]),Rt=B.useMemo(()=>Array.from(new Set(yt.flatMap(de=>de.rewards.map(Ee=>Ee.statName)))).sort((de,Ee)=>{const Ge=Object.keys(ot);return Ge.indexOf(de)-Ge.indexOf(Ee)}),[yt]),vt=B.useMemo(()=>Array.from(new Set(yt.flatMap(de=>de.currencyRewards?.map(Ee=>Ee.name)||[]))).sort((de,Ee)=>Yt.indexOf(de)-Yt.indexOf(Ee)),[yt]),Lt=B.useMemo(()=>st.filter(de=>{const Ee=X||!f.includes(de.id),Ge=!$||de.rewards.some(Te=>Te.statName===$),Ye=!A||de.currencyRewards?.some(Te=>Te.name===A);return Ee&&Ge&&Ye}),[st,X,f,$,A]);B.useEffect(()=>{if(be<Lt.length){const de=setTimeout(()=>{we(Ee=>Math.min(Ee+20,Lt.length))},50);return()=>clearTimeout(de)}},[be,Lt.length]),B.useEffect(()=>{we(15)},[$,A,X,g]),B.useEffect(()=>{const de=document.getElementById("tutorial-gallery");de&&(de.scrollTop=le.getState().galleryScrollPosition)},[]);const Dt=de=>{F(de.currentTarget.scrollTop)};return l.jsxs("div",{id:"tutorial-gallery",onScroll:Dt,className:"h-full p-2 md:p-4 overflow-y-auto relative bg-white dark:bg-neutral-950 transition-colors",children:[l.jsx(h4,{}),l.jsxs("header",{className:"mb-2 md:mb-4 border-b-2 border-neutral-200 dark:border-neutral-800 pb-1.5 md:pb-3 flex justify-between items-start gap-2 md:gap-4 transition-colors",children:[l.jsxs("div",{className:"flex flex-col gap-1 md:gap-2 flex-1 min-w-0 md:pt-1",children:[!y&&l.jsx("p",{className:"text-[10px] md:text-sm text-neutral-500 dark:text-neutral-400 font-serif italic",children:"Art is pain. Inflict it and reclaim your glory."}),y&&l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"flex flex-wrap gap-1.5 items-start",children:l.jsxs("div",{className:"flex flex-wrap gap-1 flex-1",children:[Rt.map(de=>{const Ee=ot[de];if(!Ee)return null;const Ge=Ee.icon,Ye=$===de;return l.jsx(et,{heading:Ee.fullName,content:Ee.description,children:l.jsx("button",{onClick:()=>ee(Ye?null:de),className:`p-1 rounded transition-all cursor-pointer ${Ye?"bg-neutral-900 dark:bg-neutral-100 ring-2 ring-neutral-900 dark:ring-neutral-100":"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 hover:border-neutral-400 dark:hover:border-neutral-600"}`,children:l.jsx(Ge,{className:`w-3.5 h-3.5 ${Ye?"invert dark:invert-0":Ee.colorClass}`})})},de)}),$&&l.jsx("button",{onClick:()=>ee(null),className:"px-1.5 py-0.5 text-[9px] font-bold uppercase text-neutral-400 hover:text-red-500 transition-colors cursor-pointer",children:"Clear"})]})}),vt.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1.5 items-start",children:l.jsxs("div",{className:"flex flex-wrap gap-1 flex-1",children:[vt.map(de=>{const Ee=Lo[de],Ge=b4[de];if(!Ee||!Ge)return null;const{Icon:Ye,colorClass:Te}=Ge,je=A===de;return l.jsx(et,{heading:de,content:`Filter by sketches rewarding ${de}.`,children:l.jsx("button",{onClick:()=>Z(je?null:de),className:`p-1 rounded transition-all cursor-pointer ${je?"bg-neutral-900 dark:bg-neutral-100 ring-2 ring-neutral-900 dark:ring-neutral-100":"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 hover:border-neutral-400 dark:hover:border-neutral-600"}`,children:l.jsx(Ye,{className:`w-3.5 h-3.5 ${je?"invert dark:invert-0":Te}`})})},de)}),A&&l.jsx("button",{onClick:()=>Z(null),className:"px-1.5 py-0.5 text-[9px] font-bold uppercase text-neutral-400 hover:text-red-500 transition-colors cursor-pointer",children:"Clear"})]})})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 items-end shrink-0",children:[x&&l.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[l.jsx(et,{heading:"Unhide Active",content:"Drag the non-maxed sketches back into view.",children:l.jsx("button",{onClick:()=>I(n.maxVictories),className:"cursor-pointer px-1.5 md:px-2 py-0.5 md:py-1 text-[8px] md:text-[10px] font-bold uppercase text-neutral-400 dark:text-neutral-600 hover:text-neutral-900 dark:hover:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-900 rounded transition-all",children:"Unhide Active"})}),l.jsx(et,{heading:"Cull Perfected",content:"Hide all maxed out sketches. They serve no further purpose.",children:l.jsx("button",{onClick:()=>j(n.maxVictories),className:"cursor-pointer px-1.5 md:px-2 py-0.5 md:py-1 text-[8px] md:text-[10px] font-bold uppercase text-neutral-400 dark:text-neutral-600 hover:text-neutral-900 dark:hover:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-900 rounded transition-all",children:"Hide Max"})}),l.jsx("div",{className:"w-px h-3 md:h-4 bg-neutral-300 dark:bg-neutral-700 mx-0.5 md:mx-1"}),l.jsxs("label",{className:"flex items-center gap-1 md:gap-2 text-[8px] md:text-[10px] font-bold uppercase text-neutral-500 dark:text-neutral-400 cursor-pointer select-none hover:text-neutral-800 dark:hover:text-neutral-100 transition-colors bg-neutral-100 dark:bg-neutral-900 px-1.5 md:px-2 py-0.5 md:py-1 rounded",children:[l.jsx("input",{type:"checkbox",checked:X,onChange:de=>D(de.target.checked),className:"w-2.5 h-2.5 md:w-3 md:h-3 accent-neutral-900 dark:accent-neutral-100"}),"Show Hidden"]})]}),b&&l.jsx("div",{className:"flex items-center gap-1.5",children:["scrap","rough","framed","opus","masterpiece"].map(de=>{const Ee=g[de]??!0,Ge=de==="scrap"?"text-neutral-500":de==="rough"?"text-green-500":de==="framed"?"text-blue-500":de==="opus"?"text-purple-500":"text-amber-500";return l.jsx(et,{heading:`${de.charAt(0).toUpperCase()+de.slice(1)} Visibility`,content:`${Ee?"Hide":"Unhide"} all ${de} rarity sketches.`,children:l.jsx("button",{onClick:()=>Ce(de),className:`cursor-pointer px-1.5 md:px-2 py-0.5 md:py-1 rounded border text-[8px] md:text-[10px] font-black uppercase transition-all ${Ee?"bg-neutral-100 dark:bg-neutral-800 border-neutral-300 dark:border-neutral-600 text-neutral-800 dark:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-700":"bg-transparent border-dashed border-neutral-200 dark:border-neutral-800 text-neutral-400 dark:text-neutral-600 opacity-50 hover:opacity-100"}`,children:l.jsx("span",{className:Ee?Ge:"",children:de.slice(0,1).toUpperCase()})})},de)})})]})]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-2 md:gap-6 pb-24",children:Lt.slice(0,be).map((de,Ee)=>{const Ge=R(de.id),Ye=t[de.id]||0,Te=f.includes(de.id),je=!T.includes(de.id);return l.jsx(x4,{draft:de,multiplier:Ge,victories:Ye,maxVictories:n.maxVictories,isHidden:Te,isNew:je,isFighting:u,currentEnemyId:d,onChallenge:E,onToggleHide:N,tutorialIdCard:Ee===0?"tutorial-gallery-sketch-card":void 0,shopLevels:U,fundamentals:n,glossaryMultiplier:W,sketchHidingUnlocked:x,preBattleMeditationUnlocked:w,preciseEraserUnlocked:k,erasedSketchIds:M,onErase:G,onMeditate:()=>{pe(de.id),ue(!0)},meditationOnCooldown:ke,meditationCooldownStart:v,meditationCooldownMax:n.meditationCooldownMax,challengeCooldownUntil:m},de.id)})}),be<Lt.length&&l.jsx("div",{className:"py-8 text-center text-neutral-400 font-bold uppercase tracking-widest animate-pulse",children:"Drafting more sketches..."}),l.jsx(y4,{isOpen:se,onClose:Ae})]})},w4=()=>{const{notifications:t,removeNotification:r}=le(ft(u=>({notifications:u.notifications,removeNotification:u.removeNotification}))),n=B.useRef(t),i=B.useRef(r);return n.current=t,i.current=r,B.useEffect(()=>{const u=setInterval(()=>{const d=n.current;if(d.length===0)return;const m=Date.now();d.forEach(f=>{m-f.timestamp>4e3&&i.current(f.id)})},1e3);return()=>clearInterval(u)},[]),l.jsx("div",{className:"fixed bottom-4 right-4 z-[60] flex flex-col-reverse gap-2 pointer-events-none",children:t.map(u=>l.jsxs("div",{onClick:()=>r(u.id),className:`\r
                        bg-yellow-100 dark:bg-yellow-900 border-2 border-neutral-900 dark:border-yellow-700 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.8)] dark:shadow-none \r
                        p-2 md:p-4 w-32 md:w-64 transform transition-all duration-300 animate-in slide-in-from-right fade-in\r
                        rotate-1 font-serif text-neutral-900 dark:text-yellow-100 pointer-events-auto transition-colors cursor-pointer hover:scale-[1.02] active:scale-[0.98]\r
                    `,children:[l.jsx("div",{className:"flex justify-between items-start mb-0.5 md:mb-1 transition-colors",children:l.jsx("span",{className:"font-bold uppercase text-[7px] md:text-xs tracking-wider border-b border-neutral-900 dark:border-yellow-700",children:String(u.type).replace(/_/g," ")})}),l.jsx("p",{className:"font-bold text-[8px] md:text-sm leading-snug whitespace-pre-wrap",children:typeof u.message=="string"?u.message:String(u.message)})]},u.id))})},k4=()=>{B.useEffect(()=>{const r=setInterval(()=>{performance&&performance.clearMeasures&&(performance.clearMeasures(),performance.clearMarks())},6e4);return()=>clearInterval(r)},[]);const t=B.useRef(!1);return Fo(()=>{const r=le.getState(),n=Date.now();if(r.combatState.isFighting&&r.processCombatEffects(),r.tick(n),r.autoRetryActive&&r.autoRetryUnlocked&&r.lastEnemyId&&!r.combatState.isFighting&&r.challengeCooldownUntil<=n){const{autoAdvanceActive:i,autoAdvanceUnlocked:u,randomizerActive:d,randomizerUnlocked:m,sketchVictories:f,fundamentals:g,hiddenSketches:x,availableSketches:y,challengeSketch:b}=r,w=f[r.lastEnemyId]||0,v=Xe.filter(O=>y.includes(O.id));let k=-1;for(let O=0;O<v.length;O++)(f[v[O].id]||0)>0&&(k=O);const M=k+1+g.lookahead,E=v.slice(0,M).filter(O=>!x.includes(O.id)&&(f[O.id]||0)<g.maxVictories),R=d&&m,N=r.reviewAuditUnlocked,j=r.reviewAuditLimit;let I=E;N&&(I=E.filter(O=>(f[O.id]||0)<j),I.length===0&&(I=E));const P=N?j:g.maxVictories;if(w>=P&&i&&u)I.length>0&&b(I[0].id,!0);else if(R){if(E.length>0){const O=E[Math.floor(Math.random()*E.length)];b(O.id,!0)}}else b(r.lastEnemyId,!0)}Math.random()<.008&&(r.checkToolAffordability(),r.checkMasterpieceAffordability()),r.combatState.isPlayerDefeated&&n>=r.challengeCooldownUntil&&(le.setState(i=>({combatState:{...i.combatState,isPlayerDefeated:!1,isFighting:!1},activeTab:i.activeTab==="Ink War"?"Gallery":i.activeTab})),t.current=!1)},16),B.useEffect(()=>le.subscribe((n,i)=>{if(n.combatState===i.combatState)return;const u=n.combatState;if(!u.isFighting){t.current=!1;return}const d=u.currentEnemyHp.lte(0),m=u.currentPlayerHp.lte(0);if(u.currentEnemyHp.gt(0)&&(t.current=!1),d){if(t.current)return;t.current=!0;const{enemyId:f}=u,{addNotification:g,autoChallengeActive:x,challengeSketch:y,endCombat:b,triggerDefeat:w,fundamentals:v}=le.getState(),k=Xe.find(M=>M.id===f);k?Xs.unstable_batchedUpdates(()=>{const M=le.getState().sketchVictories[k.id]||0,T=Math.max(0,v.maxVictories-M);let E=1;if(u.currentEnemyHp.lt(0)&&v.overkillMultiplier>0){const q=u.currentEnemyHp.abs().times(v.overkillMultiplier),G=u.enemyMaxHp.gt(0)?u.enemyMaxHp:new o(1),F=q.div(G).floor().toNumber();E+=Math.min(F,T+1,1e3)}const R={},N={},j=Math.min(E,T);if(j>0){const H=M,q=j,G=v.rewardDecay,F=G instanceof o?G:new o(G||1),Y=_=>{if(_<.001)return new o(q);if(q<=100){let X=0;for(let D=0;D<q;D++)X+=1/(1+(H+D)*_);return new o(X)}const U=Math.log(1+(H+q)*_),W=Math.log(1+H*_);return new o((U-W)/_)},J=F.toNumber(),z=Y(J),S=k.rewards.some(_=>ot[_.statName]?.isDecayImmune)&&J!==1?Y(1):z;k.rewards.forEach(_=>{const X=ot[_.statName]?.isDecayImmune?S:z,D=_.amount.times(X);R[_.statName]=(R[_.statName]||At).plus(D)}),k.currencyRewards&&k.currencyRewards.forEach(_=>{let U=_.amount.times(z);U=Kx(U,_.name,v),N[_.name]=(N[_.name]||At).plus(U)})}j>0&&le.getState().processCombatRewards(k.id,j,R,N);const I=[];Object.entries(R).forEach(([H,q])=>{if(!q.eq(0)){const{shopLevels:G,fundamentals:F,glossaryMultiplier:Y}=le.getState(),J=Bx(H,G,F,Y),z=ot[H]?.label||H,V=q.times(J),S=V.gt(0)?"+":"";I.push(`${S}${ge(V)} ${z}`)}}),Object.entries(N).forEach(([H,q])=>{q.gt(0)&&I.push(`+${ge(q)} ${H}`)});const P=I.length>0?`
Rewards:
${I.join(`
`)}`:"";let O=j>1?` (Overkill: +${j-1} victories!)`:"";if(g(`${k.name} defeated!${O} ${P}`,"COMBAT_VICTORY"),m){const H=v.deathRecovery;g(`...But you succumbed to ${k.name}! (${ge(H)}s cooldown)`,"COMBAT_DEFEAT"),w(H);return}if(x){const{sketchVictories:H,fundamentals:q,autoAdvanceActive:G,autoAdvanceUnlocked:F,hiddenSketches:Y,availableSketches:J,reviewAuditUnlocked:z,reviewAuditLimit:V}=le.getState(),S=z,_=V,U=S?_:q.maxVictories;if(H[k.id]>=U){const W=Xe.filter(A=>J.includes(A.id));let X=-1;for(let A=0;A<W.length;A++)(H[W[A].id]||0)>0&&(X=A);const D=X+1+q.lookahead,ee=W.slice(0,D).filter(A=>!Y.includes(A.id)&&(H[A.id]||0)<q.maxVictories);if(ee.length>0)if(G&&F){let A=ee[0].id;if(S){const Z=ee.find(se=>(H[se.id]||0)<_);Z&&(A=Z.id)}y(A,!0),t.current=!1}else g("Target Victories reached. Auto-challenge paused.","COMBAT_FLEE"),b(0,!1);else g("All visible sketches maxed! Auto-challenge stopped.","COMBAT_FLEE"),le.setState({autoChallengeActive:!1}),b(0,!1)}else y(k.id,!0),t.current=!1}else b(0,!1)}):b()}else if(m){if(t.current)return;t.current=!0,Xs.unstable_batchedUpdates(()=>{const{fundamentals:f,addNotification:g,triggerDefeat:x}=le.getState(),y=Xe.find(w=>w.id===u.enemyId),b=f.deathRecovery;g(`Defeated by ${y?y.name:"the enemy"}! ${ge(b)} second cooldown.`,"COMBAT_DEFEAT"),x(b)})}}),[]),null};function v4(){const{viewedStories:t,themeChosen:r,markThemeChosen:n,setDarkMode:i}=le(ft(d=>({viewedStories:d.viewedStories,themeChosen:d.themeChosen,markThemeChosen:d.markThemeChosen,setDarkMode:d.setDarkMode})));if(!t.includes("THE_PREMISE")||r)return null;const u=d=>{i(d),n()};return l.jsxs("div",{className:"fixed inset-0 z-[110] flex flex-col items-center justify-center bg-black transition-all",children:[l.jsxs("div",{className:"absolute inset-0 flex flex-row",children:[l.jsxs("button",{onClick:()=>u(!1),className:"flex-1 bg-neutral-100 hover:bg-white transition-colors flex flex-col items-center justify-center p-8 group overflow-hidden relative",children:[l.jsx("div",{className:"absolute top-8 left-1/2 -translate-x-1/2 opacity-20 group-hover:opacity-40 transition-opacity whitespace-nowrap",children:l.jsx("span",{className:"text-8xl font-black uppercase tracking-tighter text-neutral-400",children:"Pristine"})}),l.jsxs("div",{className:"z-10 text-center",children:[l.jsx("h2",{className:"text-5xl md:text-7xl font-black uppercase tracking-tighter text-neutral-900 mb-4 group-hover:scale-110 transition-transform",children:"Normal"}),l.jsx("p",{className:"text-neutral-500 font-serif italic text-lg max-w-xs mx-auto",children:"The Artist's light. Blinding. Honest."})]}),l.jsx("div",{className:"mt-8 border-4 border-black px-6 py-2 bg-white text-black font-bold uppercase tracking-widest group-hover:bg-black group-hover:text-white transition-all shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]",children:"Select"})]}),l.jsxs("button",{onClick:()=>u(!0),className:"flex-1 bg-neutral-900 hover:bg-black transition-colors flex flex-col items-center justify-center p-8 group overflow-hidden relative",children:[l.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 opacity-20 group-hover:opacity-40 transition-opacity whitespace-nowrap",children:l.jsx("span",{className:"text-8xl font-black uppercase tracking-tighter text-neutral-600",children:"Void"})}),l.jsxs("div",{className:"z-10 text-center",children:[l.jsx("h2",{className:"text-5xl md:text-7xl font-black uppercase tracking-tighter text-white mb-4 group-hover:scale-110 transition-transform",children:"Dark"}),l.jsx("p",{className:"text-neutral-400 font-serif italic text-lg max-w-xs mx-auto",children:"The wastebasket's comfort. Cool. Quiet."})]}),l.jsx("div",{className:"mt-8 border-4 border-white px-6 py-2 bg-black text-white font-bold uppercase tracking-widest group-hover:bg-white group-hover:text-black transition-all shadow-[8px_8px_0px_0px_rgba(255,255,255,0.5)]",children:"Select"})]})]}),l.jsxs("div",{className:"z-20 pointer-events-none absolute bottom-12 text-center bg-black/50 backdrop-blur-md border-2 border-white/20 px-8 py-4 rounded-full",children:[l.jsx("p",{className:"text-white font-bold uppercase tracking-widest text-sm md:text-base",children:"Select your preferred theme"}),l.jsx("p",{className:"text-neutral-400 text-[12px] uppercase tracking-tighter mt-1",children:"This can be changed in settings at any point"})]})]})}const C4=()=>{const{isFighting:t,activeTab:r,setActiveTab:n,fleeBattle:i,floatingStatusPosition:u,setFloatingStatusPosition:d,isPlayerDefeated:m}=le(ft(G=>({isFighting:G.combatState.isFighting,activeTab:G.activeTab,setActiveTab:G.setActiveTab,fleeBattle:G.fleeBattle,floatingStatusPosition:G.floatingStatusPosition,setFloatingStatusPosition:G.setFloatingStatusPosition,isPlayerDefeated:G.combatState.isPlayerDefeated}))),[f,g]=B.useState(!1),x=B.useRef(null),y=B.useRef(null),b=B.useRef(null),w=B.useRef(null),v=B.useRef(null),k=B.useRef(null),M=B.useRef(null),T=B.useRef(null),E=B.useRef(null),R=B.useRef(null),N=B.useRef(u||{x:window.innerWidth/2,y:window.innerHeight/2}),j=B.useRef({x:0,y:0}),I=B.useRef(null);B.useEffect(()=>{const G=()=>{if(I.current){const Y=I.current.offsetWidth||340,J=I.current.offsetHeight||160;let z=u?.x,V=u?.y;(!z||!V||z<0||V<0||z>window.innerWidth||V>window.innerHeight)&&(z=window.innerWidth/2,V=window.innerHeight/2);const S=window.innerWidth<768?.65:1,_=Y*S,U=J*S,W=Math.max(_/2,Math.min(window.innerWidth-_/2,z)),X=Math.max(0,Math.min(window.innerHeight-U,V));N.current={x:W,y:X},I.current.style.left=`${W}px`,I.current.style.top=`${X}px`,u||d({x:W,y:X})}},F=setTimeout(G,100);return window.addEventListener("resize",G),()=>{clearTimeout(F),window.removeEventListener("resize",G)}},[u,d]);const P=G=>{const F="/rejected_draft/",Y=F.endsWith("/")?F:`${F}/`,J=G.startsWith("/")?G.slice(1):G;return`${Y}${J}`};B.useEffect(()=>{if(!t||r==="Ink War")return;let G="",F="",Y=-1,J=-1,z=null,V=-1,S=-1;const _=le.getState(),U=_.combatState.enemyId;if(U){z=U;const X=Kt[U];v.current&&(v.current.textContent=X?.name||"Enemy"),k.current&&X&&(k.current.src=P(X.imagePath),k.current.style.display="");const D=_.sketchVictories[U]||0;V=D,S=_.fundamentals.maxVictories,M.current&&R.current&&T.current&&E.current&&(D>0?(M.current.style.display="flex",D>=S?(R.current.textContent=`${D} MAXED`,R.current.className="relative z-10 w-full text-center text-red-600",T.current.className="relative px-1.5 py-0.5 rounded flex items-center justify-center text-[9px] font-bold w-full bg-transparent",E.current.style.display="none"):(R.current.textContent=`${D} V`,R.current.className="relative z-10 w-full text-center text-neutral-600 dark:text-neutral-300",T.current.className="relative px-1.5 py-0.5 rounded overflow-hidden flex items-center justify-center text-[9px] font-bold bg-neutral-100 dark:bg-neutral-800/50 w-full",E.current.style.display="block",E.current.style.width=`${Math.min(100,D/S*100)}%`)):M.current.style.display="none")}return le.subscribe(X=>{const D=X.combatState,$=X.playerStats;if(!D.isFighting)return;const ee=D.enemyId;if(ee!==z){z=ee;const Ce=Kt[ee||""];v.current&&(v.current.textContent=Ce?.name||"Enemy"),k.current&&Ce&&(k.current.src=P(Ce.imagePath),k.current.style.display=""),J=-1,F=""}const A=X.sketchVictories[ee||""]||0,Z=X.fundamentals.maxVictories;(A!==V||Z!==S)&&(V=A,S=Z,M.current&&R.current&&T.current&&E.current&&(A>0?(M.current.style.display="flex",A>=Z?(R.current.textContent=`${A} MAXED`,R.current.className="relative z-10 w-full text-center text-red-600",T.current.className="relative px-1.5 py-0.5 rounded flex items-center justify-center text-[9px] font-bold w-full bg-transparent",E.current.style.display="none"):(R.current.textContent=`${A} V`,R.current.className="relative z-10 w-full text-center text-neutral-600 dark:text-neutral-300",T.current.className="relative px-1.5 py-0.5 rounded overflow-hidden flex items-center justify-center text-[9px] font-bold bg-neutral-100 dark:bg-neutral-800/50 w-full",E.current.style.display="block",E.current.style.width=`${Math.min(100,A/Z*100)}%`)):M.current.style.display="none"));const se=$.maxHp,ue=D.enemyMaxHp,ie=D.currentPlayerHp,pe=D.currentEnemyHp,be=se.eq(0)?0:Math.max(0,Math.min(100,ie.div(se).times(100).toNumber())),we=ue.eq(0)?0:Math.max(0,Math.min(100,pe.div(ue).times(100).toNumber())),ye=ge(ie),ke=ge(pe);be!==Y&&x.current&&(x.current.style.width=`${be}%`,Y=be),we!==J&&y.current&&(y.current.style.width=`${we}%`,J=we),ye!==G&&b.current&&(b.current.textContent=ye,G=ye),ke!==F&&w.current&&(w.current.textContent=ke,F=ke)})},[t,r]);const O=G=>{I.current&&(g(!0),G.target.setPointerCapture(G.pointerId),j.current={x:G.clientX-N.current.x,y:G.clientY-N.current.y})},H=G=>{if(!f||!I.current)return;let F=G.clientX-j.current.x,Y=G.clientY-j.current.y;const J=I.current.offsetWidth,z=I.current.offsetHeight,V=window.innerWidth<768?.65:1,S=J*V,_=z*V;F=Math.max(S/2,Math.min(window.innerWidth-S/2,F)),Y=Math.max(0,Math.min(window.innerHeight-_,Y)),N.current={x:F,y:Y},I.current.style.left=`${N.current.x}px`,I.current.style.top=`${N.current.y}px`},q=G=>{f&&(g(!1),G.target.releasePointerCapture(G.pointerId),d(N.current))};return!t||r==="Ink War"?null:l.jsxs("div",{ref:I,className:`
                fixed z-[70] flex flex-col gap-2 p-3 rounded-xl shadow-2xl transition-shadow select-none touch-none
                bg-white/95 dark:bg-neutral-900/95 backdrop-blur-md border border-neutral-200 dark:border-neutral-700
                ${f?"shadow-blue-500/20 ring-2 ring-blue-500/50":""}
                w-[340px]
            `,style:{left:N.current.x,top:N.current.y,transform:`translate(-50%, 0) scale(${window.innerWidth<768?.65:1})`,transformOrigin:"top center"},onPointerDown:O,onPointerMove:H,onPointerUp:q,children:[l.jsxs("div",{className:`
                absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-0.5 rounded-full border border-neutral-200 dark:border-neutral-700
                bg-white dark:bg-neutral-800 text-[9px] font-bold uppercase tracking-widest text-neutral-400 dark:text-neutral-500
                shadow-sm transition-all flex items-center gap-1.5
                ${f?"opacity-100 scale-110 -top-4 text-blue-500 border-blue-500/50":"opacity-60 group-hover:opacity-100"}
            `,children:[l.jsx("div",{className:"flex gap-0.5",children:[1,2,3].map(G=>l.jsx("div",{className:"w-0.5 h-0.5 rounded-full bg-current"},G))}),l.jsx("span",{children:"Reposition"})]}),l.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-3 items-center",children:[l.jsx("div",{className:"w-[100px] h-[100px] bg-neutral-50 dark:bg-black/20 rounded-xl border border-neutral-200 dark:border-neutral-700 p-2 flex items-center justify-center relative shadow-inner overflow-hidden",children:l.jsx("img",{ref:k,src:void 0,className:"w-full h-full object-contain drop-shadow-md contrast-125 dark:contrast-100 dark:invert dark:hue-rotate-180 transition-all duration-500",alt:"",onError:G=>{G.currentTarget.style.display="none"}})}),l.jsx("div",{className:"grid grid-cols-1 min-w-0 overflow-hidden",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsxs("div",{className:"grid grid-cols-[1fr_auto] grid-rows-2 px-1 h-[28px] leading-none gap-x-2",children:[l.jsx("div",{className:"row-start-1 row-end-3 h-[28px] flex flex-col justify-end min-w-0",children:l.jsx("span",{ref:v,className:"text-[15px] font-black text-red-500 uppercase tracking-tighter leading-[15px] block line-clamp-2 break-words",children:"Enemy"})}),l.jsx("div",{className:"flex justify-end items-start h-[16px] min-w-[36px] max-w-[40px] w-full ml-auto relative",ref:M,style:{display:"none"},children:l.jsxs("div",{className:"relative px-1 py-0.5 rounded flex items-center justify-center text-[9px] font-bold w-full",ref:T,children:[l.jsx("div",{ref:E,className:"absolute left-0 top-0 bottom-0 bg-neutral-200 dark:bg-neutral-700 transition-all duration-300 ease-out",style:{width:"0%",display:"none"}}),l.jsx("span",{ref:R,className:"relative z-10 w-full text-center text-neutral-400 dark:text-neutral-500 whitespace-nowrap"})]})}),l.jsx("div",{className:"flex justify-end items-end h-[14px] min-w-[60px]",children:l.jsx("span",{ref:w,className:"text-[14px] font-mono font-black text-neutral-700 dark:text-neutral-300 whitespace-nowrap",children:"0"})})]}),l.jsx("div",{className:"w-full h-3 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden shadow-inner border border-neutral-200 dark:border-neutral-700",children:l.jsx("div",{ref:y,className:"h-full bg-red-500 transition-all duration-300 ease-out shadow-[0_0_8px_rgba(239,68,68,0.4)]",style:{width:"100%"}})})]}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsxs("div",{className:"flex justify-between items-end px-1 leading-none gap-2 relative",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"text-[14px] font-black text-green-500 uppercase tracking-tighter shrink-0",children:"You"})}),l.jsx("span",{ref:b,className:"text-[14px] font-mono font-black text-neutral-700 dark:text-neutral-300 whitespace-nowrap",children:"0"})]}),l.jsx("div",{className:"w-full h-3 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden shadow-inner border border-neutral-200 dark:border-neutral-700",children:l.jsx("div",{ref:x,className:"h-full bg-green-500 transition-all duration-300 ease-out shadow-[0_0_8px_rgba(34,197,94,0.4)]",style:{width:"100%"}})})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1 pt-1.5 border-t border-neutral-100 dark:border-neutral-800",children:[l.jsx("button",{onPointerDown:G=>G.stopPropagation(),onClick:()=>n("Ink War"),className:"py-2 px-3 border-2 border-neutral-800 dark:border-neutral-700 bg-white dark:bg-neutral-800 hover:bg-neutral-900 dark:hover:bg-neutral-100 hover:text-white dark:hover:text-black transition-all text-[11px] font-black uppercase tracking-tight shadow-sm active:translate-y-0.5 active:shadow-none",children:"To Battle"}),l.jsx("button",{onPointerDown:G=>G.stopPropagation(),onClick:()=>i(),disabled:m,className:`
                        py-2 px-3 border-2 border-red-600/50 text-red-600 transition-all text-[11px] font-black uppercase tracking-tight shadow-sm active:translate-y-0.5 active:shadow-none
                        ${m?"opacity-50 cursor-not-allowed":"hover:bg-red-600 hover:text-white"}
                    `,children:"Flee"})]})]})},S4=ga.memo(()=>{const t=le(y=>y.tipInterval),r=le(y=>y.tipScrollSpeed),n=le(y=>y.enabledTipCategories),[i,u]=B.useState(null),[d,m]=B.useState(!1),f=B.useRef(!0),g=B.useRef(null);B.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]);const x=()=>{if(!f.current||t===0)return;const y=wv.filter(w=>n[w.category]);if(y.length===0)return;const b=y[Math.floor(Math.random()*y.length)];u(b.text),m(!0),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{f.current&&(m(!1),u(null),le.getState().tipInterval===-1&&(g.current=setTimeout(()=>{f.current&&le.getState().tipInterval===-1&&x()},100)))},r*1e3)};return Fo(()=>{!d&&f.current&&x()},t>0?t*1e3:null),B.useEffect(()=>{const y=setTimeout(()=>{f.current&&le.getState().tipInterval!==0&&x()},2e3);return()=>{clearTimeout(y),g.current&&clearTimeout(g.current)}},[]),B.useEffect(()=>{t===-1&&!d&&f.current&&x()},[t]),l.jsx("div",{className:"flex items-center justify-center w-full h-8 overflow-hidden relative mx-1 md:mx-2 pointer-events-none self-center",children:l.jsx("div",{className:"w-full h-full absolute inset-0 [mask-image:linear-gradient(to_right,transparent,black_5%,black_95%,transparent)] flex items-center",children:d&&i&&l.jsx("div",{className:"whitespace-nowrap font-sans font-medium tracking-tight text-[11px] md:text-[14px] text-neutral-600 dark:text-neutral-300 animate-evaporate-scroll will-change-transform",style:{animationDuration:`${r}s`},children:String(i||"")})})})}),N4=({navigation:t,tips:r})=>{const n=le(ft(H=>({fundamentals:H.fundamentals,skillLevels:H.skillLevels,shopLevels:H.shopLevels,totalQuintessenceGained:H.totalQuintessenceGained,graphiteDiscountUnlocked:H.graphiteDiscountUnlocked,charcoalDiscountUnlocked:H.charcoalDiscountUnlocked,waxDiscountUnlocked:H.waxDiscountUnlocked,coffeeDiscountUnlocked:H.coffeeDiscountUnlocked,inkDiscountUnlocked:H.inkDiscountUnlocked,autoChallengeUnlocked:H.autoChallengeUnlocked,autoRetryUnlocked:H.autoRetryUnlocked,buyMaxUnlocked:H.buyMaxUnlocked,autoBuyUnlocked:H.autoBuyUnlocked,autoAdvanceUnlocked:H.autoAdvanceUnlocked,autoHideMaxedUnlocked:H.autoHideMaxedUnlocked,conceptualBridgeUnlocked:H.conceptualBridgeUnlocked,graphiteGeneratorUnlocked:H.graphiteGeneratorUnlocked,waxGeneratorUnlocked:H.waxGeneratorUnlocked,graphitePlusUnlocked:H.graphitePlusUnlocked,waxOverdriveUnlocked:H.waxOverdriveUnlocked,charcoalOverdriveUnlocked:H.charcoalOverdriveUnlocked,coffeeGeneratorUnlocked:H.coffeeGeneratorUnlocked,markerGeneratorUnlocked:H.markerGeneratorUnlocked,inkGeneratorUnlocked:H.inkGeneratorUnlocked,setActiveTab:H.setActiveTab,setArchiveActiveSubTab:H.setArchiveActiveSubTab,tipInterval:H.tipInterval}))),{setActiveTab:i,setArchiveActiveSubTab:u}=n,[d,m]=B.useState(()=>{const H=le.getState();return{currencies:H.currencies,totalEarnedCurrencies:H.totalEarnedCurrencies,quintessence:H.quintessence,pendingQuintessence:H.pendingQuintessence,totalBattleEarnedCurrencies:H.totalBattleEarnedCurrencies}}),f=B.useRef(d);Fo(()=>{const H=le.getState(),q=f.current;if(H.currencies===q.currencies&&H.totalEarnedCurrencies===q.totalEarnedCurrencies&&H.quintessence.eq(q.quintessence)&&H.pendingQuintessence.eq(q.pendingQuintessence)&&H.totalBattleEarnedCurrencies===q.totalBattleEarnedCurrencies)return;const G={currencies:H.currencies,totalEarnedCurrencies:H.totalEarnedCurrencies,quintessence:H.quintessence,pendingQuintessence:H.pendingQuintessence,totalBattleEarnedCurrencies:H.totalBattleEarnedCurrencies};f.current=G,m(G)},100);const{currencies:g,totalEarnedCurrencies:x,quintessence:y,pendingQuintessence:b}=d,w=B.useMemo(()=>{const H=o.max(1e3,n.totalQuintessenceGained||At);if(b.lt(H))return 0;const q=b.div(H);return Math.floor(Math.log2(o.max(1,q).toNumber()))+1},[b,n.totalQuintessenceGained]),v=B.useMemo(()=>{const H={...n,currencies:g,totalEarnedCurrencies:x,totalBattleEarnedCurrencies:d.totalBattleEarnedCurrencies,concepts:le.getState().concepts};return wc(H)},[n,d]),k={Graphite:sr,Wax:Or,Charcoal:Pr,Coffee:Ir,Ink:oa,Marker:ir,Acrylic:qo,Spray:$o,Photon:Yo,"Gold Leaf":Wo},M=H=>{const q=k[H]||oa,G=g[H]||At,F=v[H];return x[H]?.gt(0)||["Graphite","Wax"].includes(H)?l.jsx(et,{heading:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(q,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),l.jsx("span",{children:H})]}),content:"",children:l.jsxs("div",{className:`flex items-center gap-1 px-1 md:px-1.5 py-0 border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 rounded-sm shadow-sm transition-all duration-300 ${j?"min-w-[105px] h-7":"min-w-[102px] h-8"}`,children:[l.jsx(q,{className:`${j?"w-4 h-4":"w-5 h-5"} text-neutral-400 dark:text-neutral-500 shrink-0 transition-all duration-300`}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:`${j?"text-[12px]":"text-[13.5px]"} font-mono font-bold leading-none tracking-tighter truncate text-neutral-800 dark:text-neutral-100 transition-all duration-300`,children:ge(G)}),F&&F.gt(0)&&l.jsxs("div",{className:`${j?"text-[9px]":"text-[11px]"} text-green-500 font-mono font-bold leading-tight truncate transition-all duration-300`,children:["+",ge(F),"/s"]})]})]})},H):l.jsxs("div",{className:`flex items-center gap-1 px-1 md:px-1.5 py-0 border border-dashed border-neutral-300 dark:border-neutral-800 bg-neutral-100 dark:bg-neutral-900/50 rounded-sm opacity-60 cursor-help select-none transition-all duration-300 ${j?"min-w-[105px] h-7":"min-w-[102px] h-8"}`,children:[l.jsx("div",{className:`${j?"w-4 h-4 text-[10px]":"w-5 h-5 text-xs"} flex items-center justify-center text-neutral-400 shrink-0 font-bold transition-all duration-300`,children:"?"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:`${j?"text-[12px]":"text-[13.5px]"} font-mono font-bold leading-none tracking-tighter truncate text-neutral-400 dark:text-neutral-600 transition-all duration-300`,children:"???"})})]},H)},[T,E]=B.useState(0),R=B.useRef(null);B.useEffect(()=>{if(!R.current)return;const H=new ResizeObserver(q=>{q[0]&&E(q[0].contentRect.width)});return H.observe(R.current),()=>H.disconnect()},[]);const N=T>0&&T<1250,j=N,I=T>0&&T<900,P=Yt.slice(0,5),O=Yt.slice(5,10);return l.jsx("div",{id:"tutorial-resource-header",ref:R,className:"bg-neutral-50 dark:bg-neutral-950 transition-colors overflow-hidden min-h-0 w-full",children:l.jsxs("div",{className:`grid w-full items-stretch transition-all duration-300 ${N?"grid-cols-1":"grid-cols-[1fr_auto_min-content]"}`,children:[l.jsx("div",{className:`${N?"order-1 hover-scrollbar-x":"contents"} border-b ${N?"border-neutral-200 dark:border-neutral-800/50":"border-none"}`,children:l.jsxs("div",{className:`${N?"flex min-w-max":"contents"}`,children:[l.jsxs("div",{className:N?"flex flex-col flex-1 min-w-0":"contents",children:[l.jsx("div",{className:`flex items-center justify-end ${N?"px-2":"px-2 md:px-4 h-8 col-start-2 row-start-1"}`,children:l.jsx("div",{className:"flex gap-1 md:gap-2",children:P.map(M)})}),l.jsx("div",{className:`flex items-center justify-end ${N?"px-2":"px-2 md:px-4 h-8 col-start-2 row-start-2"}`,children:l.jsx("div",{className:"flex gap-1 md:gap-2",children:O.map(M)})})]}),l.jsxs("div",{id:"tutorial-resource-quintessence",onClick:()=>{i("Archive"),u("synthesis")},className:`flex flex-col items-center justify-center gap-1 bg-purple-50/50 dark:bg-purple-900/5 px-3 border-l border-neutral-200 dark:border-neutral-800 cursor-pointer hover:bg-purple-100 dark:hover:bg-purple-900/20 active:translate-y-0.5 group shrink-0 ${j?I?"min-w-[120px]":"min-w-[140px]":"min-w-[170px]"} ${N?"":"col-start-3 row-start-1 row-span-2"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Rr,{className:`${I?"w-5 h-5":j?"w-6 h-6":"w-8 h-8"} text-purple-600 dark:text-purple-400 drop-shadow-[0_0_8px_rgba(147,51,234,0.3)] transition-all group-hover:scale-110`}),l.jsx("div",{className:`${I?"text-[14px]":j?"text-[16px]":"text-[20px]"} font-black font-mono text-purple-700 dark:text-purple-300 leading-none`,children:ge(y)})]}),b.gt(0)&&l.jsxs("div",{className:"flex flex-col items-center leading-none",children:[l.jsxs("span",{className:`${I?"text-[10px]":j?"text-[11px]":"text-[12px]"} font-bold text-purple-400 dark:text-purple-500`,children:["+",ge(b)]}),w>0&&l.jsxs("span",{className:"text-[7.5px] font-black text-red-500 dark:text-red-400 uppercase mt-0.5",children:["SOFTCAP ",w]})]})]})]})}),l.jsxs("div",{className:`${N?"order-2 flex items-center justify-between w-full border-b border-neutral-200 dark:border-neutral-800/50 px-2":"contents"}`,children:[l.jsx("div",{className:`flex items-center shrink-0 ${N?"h-8":"px-2 md:px-4 h-9 md:h-8 col-start-1 row-start-2 w-full justify-start"}`,children:t}),(!N||n.tipInterval!==0)&&l.jsx("div",{className:`flex items-center overflow-hidden ${N?"flex-1 h-8 pl-2":"px-4 h-7 md:h-8 col-start-1 row-start-1 border-none w-full"}`,children:l.jsx("div",{className:"flex-1 min-w-0",children:r})})]})]})})};function E4(){const{unlockedStories:t,viewedStories:r,completeStory:n}=le(ft(y=>({unlockedStories:y.unlockedStories,viewedStories:y.viewedStories,completeStory:y.completeStory}))),[i,u]=B.useState(""),d=B.useRef(null),m=$x.find(y=>t.includes(y.id)&&!r.includes(y.id));if(B.useEffect(()=>{if(!m)return;u("");const y=m.text;let b=0;return d.current=setInterval(()=>{b<y.length?(u(y.slice(0,b+1)),b++):d.current&&(clearInterval(d.current),d.current=null)},30),()=>{d.current&&(clearInterval(d.current),d.current=null)}},[m]),!m)return null;const f=()=>{d.current&&(clearInterval(d.current),d.current=null),u(m.text)},g=()=>{n(m.id)},x=i===m.text;return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm transition-colors",children:l.jsxs("div",{className:"bg-white dark:bg-neutral-900 border-4 border-black dark:border-neutral-800 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-8 max-w-2xl w-full mx-8 transition-colors",children:[l.jsx("h2",{className:"text-4xl italic text-neutral-800 dark:text-neutral-100 mb-6 border-b-2 border-neutral-200 dark:border-neutral-800 pb-4 transition-colors",style:{fontFamily:"Crimson Text, serif",fontWeight:600},children:m.title}),l.jsx("div",{className:"mb-8 min-h-[120px]",children:l.jsxs("p",{className:"text-2xl italic text-neutral-700 dark:text-neutral-300 leading-relaxed transition-colors",style:{fontFamily:"Crimson Text, serif",visibility:i?"visible":"hidden"},children:[i,!x&&l.jsx("span",{className:"animate-pulse",children:"|"})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[!x&&l.jsx("button",{onClick:f,className:"px-6 py-2 text-sm font-bold uppercase tracking-wider border-2 border-neutral-300 dark:border-neutral-700 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all",children:"Skip"}),x&&l.jsx("button",{onClick:g,className:"px-6 py-2 text-sm font-bold uppercase tracking-wider border-2 border-black dark:border-neutral-700 bg-white dark:bg-neutral-800 text-black dark:text-neutral-100 hover:bg-black dark:hover:bg-neutral-700 hover:text-white dark:hover:text-white transition-all",children:"Continue"})]})]})})}const T4=[{targetId:"tutorial-resource-header",title:"The Gallery",text:"Welcome to Rejected Draft! The top bar tracks your core currencies. You are currently on the Gallery screen. As you navigate to other tabs like the Shop or Archive, new tutorials will trigger to explain them.",tab:"Gallery",position:"bottom"},{targetId:"tutorial-sidebar-portrait",title:"Your Progression",text:"This sidebar tracks your growth. It displays your current draft, Battle Stats, and Fundamentals. Defeating enemies will improve these stats! Hover over stats and fundamentals to get more information about what they do.",tab:"Gallery",position:"right",scrollBlock:"start"},{targetId:"tutorial-gallery-sketch-card",title:"The Challenge",tab:"Gallery",position:"right",text:"Each sketch grants specific Stat and Currency rewards upon victory! Click Challenge to enter battle. Combat runs in the background, allowing you to freely navigate to other tabs. Rewards diminish with each repeated victory, so find other victims!",noScroll:!0},{targetId:"tutorial-tab-shop",title:"The Shop",text:"This is where you spend your all your currencies. The first one you will find is Graphite.",tab:"Shop",position:"bottom"},{targetId:"tutorial-shop-market",title:"The Market",text:"Purchase special tools here. These are one-time unlocks that provide powerful capabilities like automation or passive income.",tab:"Shop",subTab:"tools",position:"left",noScroll:!0,dialogueVAlign:"top"},{targetId:"tutorial-shop-protocols",title:"Active Protocols",text:"Some unlocked tools appear here as toggleable protocols. Be sure to toggle them in a way that helps optimize your progress!",tab:"Shop",subTab:"tools",position:"left",noScroll:!0,dialogueVAlign:"top"},{targetId:"tutorial-shop-upgrades",title:"Stat Upgrades",text:"Infinitely scaling upgrades for your battle stats. Focus on these to push past tougher enemies. Leveling them may require some clicking but you will soon automate them!",tab:"Shop",subTab:"upgrades",position:"left",dialogueVAlign:"top",scrollBlock:"start"},{targetId:"tutorial-tab-archive",title:"The Archive",text:"The Archive is where you reflect on your progress and unlock global improvements.",tab:"Archive",position:"bottom"},{targetId:"tutorial-archive-synthesizer",title:"Conceptual Synthesizer",text:"View your milestones and concepts here. This is the heart of your prestige progression. Milestones are driven by your total currency gained, so don't be afraid to spend in the Shop!",tab:"Archive",subTab:"synthesis",position:"left",dialogueVAlign:"top"},{targetId:"tutorial-archive-graphite-row",title:"Milestones & Concepts",text:"Your first milestone will come at 1618 total Graphite gained. This will turn on the Graphite Concept production which generates Quintessence. Each milestone after that will increase production per count by 1000x!",tab:"Archive",subTab:"synthesis",position:"bottom",scrollBlock:"center"},{targetId:"tutorial-archive-secondary-concepts",title:"Exponential Growth",text:"Wax and subsequent Concepts work differently. Rather than generating Quintessence, they generate count for the Concept immediately above them. This leads to truly exponential gains!",tab:"Archive",subTab:"synthesis",position:"bottom"},{targetId:"tutorial-archive-prestige-panel",title:"The Redraw (Prestige)",text:"Pending Quintessence accumulates here and can be claimed by pressing Redraw. Note that efficiency drops once you exceed your Lifetime Total (or 1000 initially) in a single run. Redrawing locks in gains and pushes that threshold higher. Aim for 1000+ initially.",tab:"Archive",subTab:"synthesis",position:"left"},{targetId:"tutorial-archive-masterpiece",title:"Masterpiece Archive",text:"The Skill Tree! There are only good choices and better choices. This one will make a lot more sense after your first Redraw. Most skills take effect immediately, but some like Rarities ones require a Redraw to take effect.",tab:"Archive",subTab:"masterpiece",position:"left",dialogueVAlign:"top"},{title:"The Glossary",targetId:"tutorial-archive-glossary",tab:"Archive",subTab:"glossary",position:"left",text:"On the Glossary you can view all sketches. Each sketch you are victorious over will be permanently shown here (preserved across Prestiges) and will increase your Glossary Multiplier (boosting HP & ATK). Higher rarity sketches give a bigger boost!",noScroll:!0},{targetId:"sketch-card-v-wing_bat",title:"Shift Your Perspective",text:"Sometimes challenging enemies out of order can help you progress. Try a different path!",tab:"Gallery",position:"left"},{targetId:"tutorial-resource-quintessence",title:"The Soft Truth",text:"You've hit your first softcap! In this game, your pending Quintessence starts becoming less efficient once it reaches your current Lifetime Total. But don't fretit's called a SOFT-cap for a reason. You can still push through it, and reaching higher milestones will eventually double this threshold again. It's all part of the flow.",tab:"Archive",subTab:"synthesis",position:"bottom"},{targetId:"sketch-card-fountain_pen_duelist",title:"Rough Rarity Encounter",text:`You've encountered your first Rough rarity sketch! These are significantly tougher than Scraps. If you find yourself hitting a wall, don't hesitate to farm other sketches to build up your stats first.

Defeating higher rarity sketches is crucial, as they are required for advanced Masterpiece Archive unlocks, as well as provide significantly more currencies and sometimes unique stats. Want to find them more often? The chance to encounter higher rarities is driven directly by specific nodes in your Skill Tree!`,tab:"Gallery",position:"right",scrollBlock:"center"}],M4={Gallery:{start:0,end:2},Tools:{start:3,end:5},Upgrades:{start:6,end:6},Synthesis:{start:7,end:11},Masterpiece:{start:12,end:12},Glossary:{start:13,end:13},"Path to Victory":{start:14,end:14},"Softcap Explained":{start:15,end:15},"Rough Rarity Intro":{start:16,end:16}},_4=()=>{const{tutorialStep:t,setTutorialStep:r,activeTutorialSegment:n,setActiveTab:i,setArchiveActiveSubTab:u,setShopActiveSubTab:d}=le(ft(G=>({tutorialStep:G.tutorialStep,activeTutorialSegment:G.activeTutorialSegment,setTutorialStep:G.setTutorialStep,setActiveTab:G.setActiveTab,setArchiveActiveSubTab:G.setArchiveActiveSubTab,setShopActiveSubTab:G.setShopActiveSubTab}))),m=n?M4[n]:null,f=m&&t?m.start+t-1:null,g=f!==null?T4[f]:null,x=t===1,y=m&&t?t===m.end-m.start+1:!1,b=m?m.end-m.start+1:0,[w,v]=B.useState(null),k=B.useRef(null),[M,T]=B.useState({x:0,y:0}),E=B.useRef({x:0,y:0,w:0,h:0});if(B.useEffect(()=>{T({x:0,y:0})},[t]),B.useLayoutEffect(()=>{if(!k.current||!w||!g)return;const G=k.current.getBoundingClientRect(),F=window.innerWidth,Y=window.innerHeight,J=16;let z=0,V=0;G.left<J?z=J-G.left:G.right>F-J&&(z=F-J-G.right),G.top<J?V=J-G.top:G.bottom>Y-J&&(V=Y-J-G.bottom),g.position==="top"&&V>0&&(V=0),g.position==="bottom"&&V<0&&(V=0),(Math.abs(z)>.5||Math.abs(V)>.5)&&T(S=>({x:S.x+z,y:S.y+V}))},[w,t,g,M.x,M.y]),B.useEffect(()=>{if(t===null||!g){v(null),T({x:0,y:0});return}v(null),T({x:0,y:0}),i(g.tab),g.subTab&&(g.tab==="Archive"?u(g.subTab):g.tab==="Shop"&&d(g.subTab));let G=!0,F,Y,J;const z=()=>{if(!G)return;const S=document.getElementById(g.targetId);if(S){const _=S.getBoundingClientRect(),U=Math.abs(_.left-E.current.x),W=Math.abs(_.top-E.current.y),X=Math.abs(_.width-E.current.w),D=Math.abs(_.height-E.current.h);(U>.5||W>.5||X>.5||D>.5)&&(v({x:_.left,y:_.top,w:_.width,h:_.height}),E.current={x:_.left,y:_.top,w:_.width,h:_.height})}G&&(F=requestAnimationFrame(z))},V=g.targetId==="tutorial-sidebar-portrait";return Y=setTimeout(()=>{if(G)if(V){const S=document.getElementById("tutorial-sidebar-scroll-container");S&&S.scrollTo({top:0,behavior:"smooth"})}else{const S=document.getElementById(g.targetId);S&&!g.noScroll&&S.scrollIntoView({behavior:"smooth",block:g.scrollBlock||"center"})}},150),J=setTimeout(()=>{G&&(F=requestAnimationFrame(z))},V?500:200),()=>{G=!1,F&&cancelAnimationFrame(F),clearTimeout(Y),clearTimeout(J)}},[t,g,i,u,d]),t===null||!w||!g)return null;const R=()=>{y?(r(null),n&&le.setState(G=>({hasSeenTutorials:{...G.hasSeenTutorials,[n]:!0}}))):r((t||0)+1)},N=()=>{x||r((t||1)-1)},j=()=>{r(null),n&&le.setState(G=>({hasSeenTutorials:{...G.hasSeenTutorials,[n]:!0}}))};let I={};const P=20,O=(G,F)=>G.dialogueVAlign==="top"?0:G.dialogueVAlign==="bottom"?F.h:F.h/2,H=G=>G.dialogueVAlign==="top"?"none":G.dialogueVAlign==="bottom"?"translateY(-100%)":"translateY(-50%)",q=typeof window<"u"&&window.innerWidth<768;return q?I={left:"50%",bottom:"20px",transform:"translateX(-50%)",width:"90%",maxWidth:"400px"}:g.position==="right"?I={left:w.x+w.w+P,top:w.y+O(g,w),transform:H(g)}:g.position==="left"?I={left:w.x-P,top:w.y+O(g,w),transform:`translate(-100%, ${g.dialogueVAlign==="top"?"0":g.dialogueVAlign==="bottom"?"-100%":"-50%"})`}:g.position==="bottom"?I={left:w.x+w.w/2,top:w.y+w.h+P/2,transform:"translateX(-50%)"}:g.position==="top"?I={left:w.x+w.w/2,top:w.y-P/2,transform:"translate(-50%, -100%)"}:I={left:"50%",top:"50%",transform:"translate(-50%, -50%)"},(M.x!==0||M.y!==0)&&(typeof I.left=="number"?I.left+=M.x:I.left=`calc(${I.left} + ${M.x}px)`,typeof I.top=="number"?I.top+=M.y:I.top=`calc(${I.top} + ${M.y}px)`),l.jsxs("div",{className:"fixed inset-0 z-[200] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 transition-opacity duration-300",style:{clipPath:`polygon(
                        0% 0%, 0% 100%, ${w.x}px 100%, 
                        ${w.x}px ${w.y}px, 
                        ${w.x+w.w}px ${w.y}px, 
                        ${w.x+w.w}px ${w.y+w.h}px, 
                        ${w.x}px ${w.y+w.h}px, 
                        ${w.x}px 100%, 100% 100%, 100% 0%
                    )`}}),l.jsx("div",{className:"absolute border-4 border-amber-400 rounded-lg shadow-[0_0_20px_rgba(251,191,36,0.5)] transition-all duration-300",style:{left:w.x-4,top:w.y-4,width:w.w+8,height:w.h+8}}),l.jsxs("div",{ref:k,className:"absolute bg-white dark:bg-neutral-900 border-4 border-black dark:border-neutral-800 p-4 md:p-6 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] w-full md:w-80 pointer-events-auto animate-in fade-in slide-in-from-bottom-4 duration-300 z-[210] transition-colors",style:I,children:[l.jsxs("div",{className:"text-amber-600 font-bold uppercase text-[10px] md:text-xs tracking-widest mb-1",children:[n," Tutorial: ",t," / ",b]}),l.jsx("h3",{className:"text-lg md:text-xl font-black uppercase text-neutral-800 dark:text-neutral-100 mb-2 md:mb-3 leading-tight font-sans transition-colors",children:g.title}),l.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 font-serif italic text-xs md:text-sm leading-relaxed mb-4 md:mb-6 transition-colors",children:g.text}),l.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[l.jsx("button",{onClick:N,disabled:x,className:`cursor-pointer text-[10px] md:text-xs font-bold uppercase tracking-wider transition-colors ${x?"text-neutral-300 dark:text-neutral-700 cursor-not-allowed":"text-neutral-500 dark:text-neutral-400 hover:text-black dark:hover:text-white"}`,children:"Previous"}),l.jsx("button",{onClick:R,className:"cursor-pointer px-4 md:px-6 py-2 bg-black dark:bg-neutral-800 text-white text-[10px] md:text-xs font-bold uppercase tracking-widest hover:bg-neutral-800 dark:hover:bg-neutral-700 transition-colors shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] dark:shadow-none",children:y?"Finish":"Next"})]}),l.jsxs("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800 flex flex-col items-center transition-colors",children:[l.jsx("button",{onClick:j,className:"cursor-pointer text-red-600 dark:text-red-500 font-bold uppercase text-[12px] hover:bg-red-50 dark:hover:bg-red-950/30 px-2 py-1 rounded transition-colors",children:"Skip Tutorial"}),l.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 font-serif italic mt-1 transition-colors",children:"(Tutorial can be reset from Settings)"})]}),!q&&l.jsx("div",{className:`absolute w-0 h-0 border-transparent transition-all
                        ${g.position==="right"?"border-r-white dark:border-r-neutral-900 border-[10px] -left-5 top-1/2 -translate-y-1/2":""}
                        ${g.position==="left"?"border-l-white dark:border-l-neutral-900 border-[10px] -right-5 top-1/2 -translate-y-1/2":""}
                        ${g.position==="top"?"border-t-white dark:border-t-neutral-900 border-[10px] -bottom-5 left-1/2 -translate-x-1/2":""}
                        ${g.position==="bottom"?"border-b-white dark:border-b-neutral-900 border-[10px] -top-5 left-1/2 -translate-x-1/2":""}
                    `})]})]})},jx={Graphite:sr,Wax:Or,Charcoal:Pr,Coffee:Ir,Ink:oa,Marker:ir,Acrylic:qo,Spray:$o,Photon:Yo,"Gold Leaf":Wo},A4=({gains:t,conceptGains:r,elapsedSeconds:n,onClose:i})=>{const u=Object.entries(t).filter(([w,v])=>v.gt(0)),d=Object.entries(r).filter(([w,v])=>v.gt(0)),m=Math.floor(n/86400),f=Math.floor(n%86400/3600),g=Math.floor(n%3600/60),x=Math.floor(n%60),y=[];m>0&&y.push(`${m}d`),f>0&&y.push(`${f}h`),g>0&&y.push(`${g}m`),(x>0||y.length===0)&&y.push(`${x}s`);const b=y.join(" ");return u.length===0&&d.length===0?null:l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-80 backdrop-blur-sm p-2 md:p-4 animate-in fade-in duration-300 transition-colors",children:l.jsxs("div",{className:"bg-white dark:bg-neutral-900 max-w-4xl w-full border-4 border-black dark:border-neutral-800 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-4 md:p-6 relative animate-in zoom-in-95 duration-300 flex flex-col max-h-[95vh] landscape:max-h-full transition-colors",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tighter mb-0.5 md:mb-2 text-center text-neutral-900 dark:text-neutral-100",children:"Welcome Back"}),l.jsxs("p",{className:"text-[10px] md:text-sm text-neutral-500 dark:text-neutral-400 font-serif italic text-center mb-2 md:mb-6 leading-tight",children:["While you were away for ",l.jsx("span",{className:"font-bold not-italic text-black dark:text-neutral-100",children:b}),", your currency generators and conceptual synthesizer continued their work."]}),l.jsxs("div",{className:"grid grid-cols-1 landscape:grid-cols-2 md:grid-cols-2 gap-4 md:gap-8 mb-4 md:mb-8 overflow-hidden min-h-0 flex-1",children:[l.jsxs("div",{className:"flex flex-col min-h-0",children:[l.jsx("h4",{className:"text-[10px] md:text-xs font-bold uppercase text-neutral-500 dark:text-neutral-400 tracking-widest mb-1 md:mb-3 pb-1 md:pb-2 border-b-2 border-neutral-100 dark:border-neutral-800 flex items-center justify-between transition-colors",children:l.jsx("span",{children:"Currency Generation"})}),u.length>0?l.jsx("div",{className:"border border-neutral-200 dark:border-neutral-800 rounded-lg overflow-hidden overflow-y-auto scrollbar-thin scrollbar-thumb-neutral-300 dark:scrollbar-thumb-neutral-700 flex-1 transition-colors",children:u.map(([w,v],k)=>{const M=jx[w]||oa;return l.jsxs("div",{className:`flex items-center justify-between p-2 md:p-4 bg-white dark:bg-neutral-800 ${k!==u.length-1?"border-b border-neutral-100 dark:border-neutral-700":""} transition-colors`,children:[l.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[l.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-neutral-100 dark:bg-neutral-900 flex items-center justify-center text-neutral-500 dark:text-neutral-400 transition-colors",children:l.jsx(M,{className:"w-4 h-4 md:w-6 md:h-6"})}),l.jsx("span",{className:"font-bold uppercase tracking-wider text-[10px] md:text-sm text-neutral-600 dark:text-neutral-300 transition-colors",children:w})]}),l.jsxs("span",{className:"font-black font-mono text-base md:text-xl text-neutral-900 dark:text-neutral-100 transition-colors",children:["+",ge(v)]})]},w)})}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500 italic font-serif bg-neutral-50 dark:bg-neutral-950/50 rounded-lg border border-neutral-100 dark:border-neutral-800 border-dashed transition-colors",children:"No currency gains"})]}),l.jsxs("div",{className:"flex flex-col min-h-0",children:[l.jsx("h4",{className:"text-[10px] md:text-xs font-bold uppercase text-neutral-500 dark:text-neutral-400 tracking-widest mb-1 md:mb-3 pb-1 md:pb-2 border-b-2 border-neutral-100 dark:border-neutral-800 flex items-center justify-between transition-colors",children:l.jsx("span",{children:"Conceptual Synthesis"})}),d.length>0?l.jsx("div",{className:"border border-neutral-200 dark:border-neutral-800 rounded-lg overflow-hidden overflow-y-auto scrollbar-thin scrollbar-thumb-neutral-300 dark:scrollbar-thumb-neutral-700 flex-1 transition-colors",children:d.map(([w,v],k)=>{const M=w==="Quintessence"||w==="Pending Quintessence",T=M?Rr:jx[w]||oa;return l.jsxs("div",{className:`flex items-center justify-between p-2 md:p-4 bg-white dark:bg-neutral-800 ${k!==d.length-1?"border-b border-neutral-100 dark:border-neutral-700":""} transition-colors`,children:[l.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[l.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-black dark:bg-neutral-950 flex items-center justify-center transition-colors",children:l.jsx(T,{className:`w-4 h-4 md:w-6 md:h-6 ${M?"text-purple-400 dark:text-purple-300":""}`,color:M?void 0:"#C084FC"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-bold uppercase tracking-wider text-[10px] md:text-sm text-neutral-900 dark:text-neutral-100 transition-colors",children:M?"QE Gain":`${w}`}),!M&&l.jsx("div",{className:"text-[8px] uppercase font-bold text-neutral-400 dark:text-neutral-500 transition-colors",children:"Concept"})]})]}),l.jsxs("span",{className:"font-black font-mono text-base md:text-xl text-neutral-900 dark:text-neutral-100 transition-colors",children:["+",ge(v)]})]},w)})}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-500 italic font-serif bg-neutral-50 dark:bg-neutral-950/50 rounded-lg border border-neutral-100 dark:border-neutral-800 border-dashed transition-colors",children:"No concept gains"})]})]}),l.jsx("button",{onClick:i,className:"cursor-pointer w-full py-2 md:py-3 bg-black dark:bg-neutral-700 text-white font-black uppercase tracking-widest hover:bg-neutral-800 dark:hover:bg-neutral-600 transition-colors border-2 border-transparent hover:border-black dark:hover:border-neutral-500 text-xs md:text-base",children:"Collect Resources"})]})})},j4=()=>{const t=le(u=>u.keepAwake),r=B.useRef(null),n=B.useCallback(async()=>{if("wakeLock"in navigator)try{r.current=await navigator.wakeLock.request("screen"),r.current.addEventListener("release",()=>{})}catch(u){console.warn("Wake Lock request failed:",u)}},[]),i=B.useCallback(async()=>{r.current&&(await r.current.release(),r.current=null)},[]);return B.useEffect(()=>{t?n():i();const u=async()=>{document.visibilityState==="visible"&&t&&await n()};return document.addEventListener("visibilitychange",u),()=>{document.removeEventListener("visibilitychange",u),i()}},[t,n,i]),B.useEffect(()=>{if(!t||!("wakeLock"in navigator))return;const u=async()=>{t&&!r.current&&(await n(),r.current&&(window.removeEventListener("click",u),window.removeEventListener("touchstart",u)))};return window.addEventListener("click",u,{once:!1}),window.addEventListener("touchstart",u,{once:!1}),()=>{window.removeEventListener("click",u),window.removeEventListener("touchstart",u)}},[t,n]),{requestWakeLock:n,releaseWakeLock:i}},R4=()=>(B.useEffect(()=>{const t=i=>{const u="/rejected_draft/",d=u.endsWith("/")?u:`${u}/`,m=i.startsWith("/")?i.slice(1):i;return`${d}${m}`},n=setTimeout(()=>{(window.requestIdleCallback||(u=>setTimeout(u,1e3)))(()=>{Xe.forEach(u=>{const d=new Image;d.src=t(u.imagePath)})})},2e3);return()=>clearTimeout(n)},[]),null),L4=()=>{const[t,r]=B.useState(null);if(B.useEffect(()=>{const i=()=>{const d=le.getState(),{hasAffordableMasterpiece:m,totalEarnedCurrencies:f,conceptMilestones:g,glossaryUnlocks:x,seenGlossaryItems:y}=d,b=Yt.some(v=>{const k=f[v]||At,M=g[v]||0,T=Do[M];return T&&k.gte(T)}),w=x.length>(y?.length||0);r(b?"bg-green-500":w?"bg-orange-500":m?"bg-purple-500":null)};i();const u=setInterval(i,500);return()=>clearInterval(u)},[]),!t)return null;const n=t.replace("500","400");return l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[l.jsx("span",{className:`animate-pulse absolute inline-flex h-full w-full rounded-full ${n} opacity-75`}),l.jsx("span",{className:`relative inline-flex rounded-full h-3 w-3 ${t}`})]})},D4=()=>{const[t,r]=B.useState(null);if(B.useEffect(()=>{const i=()=>{const d=le.getState(),{currencies:m,shopLevels:f,fundamentals:g,totalEarnedCurrencies:x,mutedStatUpgrades:y}=d,b=Ta.some(k=>{if(!!d[k.unlockKey]||k.currency!=="Graphite"&&(x[k.currency]?.eq(0)??!0))return!1;const E=m[k.currency]||At,R=Da(k.cost,k.currency,g);return E.gte(R)}),w=y||[],v=pa.some(k=>{if(w.includes(k.id))return!1;const M=f[k.id]?.toNumber()||0,T=Da(Ro(k,new o(M),{graphiteDiscountUnlocked:d.graphiteDiscountUnlocked,charcoalDiscountUnlocked:d.charcoalDiscountUnlocked,waxDiscountUnlocked:d.waxDiscountUnlocked,coffeeDiscountUnlocked:d.coffeeDiscountUnlocked,inkDiscountUnlocked:d.inkDiscountUnlocked}),k.currency,g),E=m[k.currency]||At;return k.currency!=="Graphite"&&(x[k.currency]?.eq(0)??!0)?!1:E.gte(T)});r(b?"bg-green-500":v?"bg-amber-500":null)};i();const u=setInterval(i,500);return()=>clearInterval(u)},[]),!t)return null;const n=t.replace("500","400");return l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[l.jsx("span",{className:`animate-ping absolute inline-flex h-full w-full rounded-full ${n} opacity-75`}),l.jsx("span",{className:`relative inline-flex rounded-full h-3 w-3 ${t}`})]})},O4=()=>{const{cheatAddResource:t,devSettings:r,toggleDevSetting:n,cheatGainStat:i}=le(ft(T=>({cheatAddResource:T.cheatAddResource,devSettings:T.devSettings,toggleDevSetting:T.toggleDevSetting,cheatGainStat:T.gainStat}))),[u,d]=B.useState("currency"),[m,f]=B.useState("Graphite"),[g,x]=B.useState("1618"),[y,b]=B.useState("attack"),[w,v]=B.useState("100"),k=()=>{const T=new o(g);!Number.isFinite(T.mantissa)||!Number.isFinite(T.exponent)||T.lte(0)||t(u,m,T)},M=()=>{const T=new o(w);!Number.isFinite(T.mantissa)||!Number.isFinite(T.exponent)||i(y,T)};return l.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-amber-50 dark:bg-amber-950 border-2 border-amber-200 dark:border-amber-800 rounded shadow-xl animate-in slide-in-from-top-2 duration-200 pointer-events-auto",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[l.jsx("button",{onClick:()=>n("timeAcceleration"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.timeAcceleration?"bg-amber-500 text-white border-amber-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Time Accel (20x)"}),l.jsx("button",{onClick:()=>n("deathRecovery"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.deathRecovery?"bg-amber-500 text-white border-amber-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Instant Revive"}),l.jsx("button",{onClick:()=>n("fleePenalty"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.fleePenalty?"bg-amber-500 text-white border-amber-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Instant Flee"}),l.jsx("button",{onClick:()=>n("infiniteLookahead"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.infiniteLookahead?"bg-amber-500 text-white border-amber-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Inf. Lookahead"}),l.jsx("button",{onClick:()=>n("maxVictories"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.maxVictories?"bg-amber-500 text-white border-amber-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Max Victories (10k)"}),l.jsx("button",{onClick:()=>n("buffFundamentals"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.buffFundamentals?"bg-amber-500 text-white border-amber-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Buff All (+10000%)"}),l.jsx("button",{onClick:()=>n("insaneOverkill"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.insaneOverkill?"bg-amber-500 text-white border-amber-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Insane Overkill"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 pt-2 border-t border-amber-200 dark:border-amber-800/50",children:[l.jsx("button",{onClick:()=>n("forceRough"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.forceRough?"bg-neutral-500 text-white border-neutral-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Force Rough"}),l.jsx("button",{onClick:()=>n("forceFramed"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.forceFramed?"bg-green-500 text-white border-green-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Force Framed"}),l.jsx("button",{onClick:()=>n("forceOpus"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.forceOpus?"bg-blue-500 text-white border-blue-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Force Opus"}),l.jsx("button",{onClick:()=>n("forceMasterpiece"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.forceMasterpiece?"bg-purple-500 text-white border-purple-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Force Masterpiece"}),l.jsx("button",{onClick:()=>n("bypassRarityLock"),className:`cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border ${r.bypassRarityLock?"bg-red-500 text-white border-red-600":"bg-neutral-200 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-300 dark:border-neutral-700"}`,children:"Bypass Rarity Lock"}),l.jsx("button",{onClick:()=>{const T=le.getState();ng(()=>Promise.resolve().then(()=>xg),void 0).then(E=>{E.checkOfflineGains(T,3600)})},className:"cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border bg-neutral-800 text-white border-black hover:bg-black",children:"Test Offline (1h)"}),l.jsx("button",{onClick:()=>{const T=le.getState();ng(()=>Promise.resolve().then(()=>xg),void 0).then(E=>{E.checkOfflineGains(T,2592e3)})},className:"cursor-pointer px-2 py-1 text-[10px] uppercase font-bold rounded border bg-red-900 text-white border-black hover:bg-red-950",children:"Test Offline (30d)"})]}),l.jsx("div",{className:"h-px bg-amber-200 dark:bg-amber-800/50 my-1"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:u,onChange:T=>d(T.target.value),className:"bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-[10px] dark:text-neutral-200 p-1 rounded font-mono focus:ring-1 focus:ring-amber-500 outline-none",children:[l.jsx("option",{value:"currency",children:"Currency"}),l.jsx("option",{value:"concept",children:"Concept"}),l.jsx("option",{value:"quintessence",children:"QE (Total)"}),l.jsx("option",{value:"pending",children:"QE (Pending)"})]}),(u==="currency"||u==="concept")&&l.jsx("select",{value:m,onChange:T=>f(T.target.value),className:"bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-[10px] dark:text-neutral-200 p-1 rounded font-mono focus:ring-1 focus:ring-amber-500 outline-none",children:Yt.map(T=>l.jsx("option",{value:T,children:T},T))}),l.jsx("input",{type:"text",value:g,onChange:T=>x(T.target.value),placeholder:"Amt",className:"w-16 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-[10px] dark:text-neutral-200 p-1 rounded font-mono focus:ring-1 focus:ring-amber-500 outline-none"}),l.jsx("button",{onClick:k,className:"cursor-pointer bg-amber-500 hover:bg-amber-600 text-white text-[10px] font-black uppercase px-3 py-1 rounded transition-all shadow-sm active:translate-y-0.5",children:"Add"})]}),l.jsx("div",{className:"h-px bg-amber-200 dark:bg-amber-800/50 my-1"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("select",{value:y,onChange:T=>b(T.target.value),className:"flex-1 max-w-[183px] bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-[10px] dark:text-neutral-200 p-1 rounded font-mono focus:ring-1 focus:ring-amber-500 outline-none",children:hv.map(T=>l.jsxs("option",{value:T.key,children:[T.label," - ",T.fullName]},T.key))}),l.jsx("input",{type:"text",value:w,onChange:T=>v(T.target.value),placeholder:"Amt",className:"w-16 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 text-[10px] dark:text-neutral-200 p-1 rounded font-mono focus:ring-1 focus:ring-amber-500 outline-none"}),l.jsx("button",{onClick:M,className:"cursor-pointer bg-green-600 hover:bg-green-700 text-white text-[10px] font-black uppercase px-3 py-1 rounded transition-all shadow-sm active:translate-y-0.5",children:"Add"})]})]})},P4=()=>{const t=le(f=>Object.values(f.devSettings||{}).some(g=>g===!0)),[r,n]=B.useState(!1),i=le(f=>f.addNotification),u=le(f=>f.unlockDevMode),d=le(f=>f.devModeUnlocked),m=async()=>{if(d)n(!r);else{const f=window.prompt("Enter Dev Password:");if(!f)return;const g=new TextEncoder().encode(f),x=await crypto.subtle.digest("SHA-256",g);Array.from(new Uint8Array(x)).map(v=>v.toString(16).padStart(2,"0")).join("")==="3c0ac4d88104886bebf8a3128a71153b0cafd1029e0c20ac5baa184463e1d9ac"?(u(),n(!0),i("Dev Mode Unlocked!","SYSTEM_UNLOCK")):i("Incorrect Password.","SHOP_ERROR")}};return l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:m,className:`
          cursor-pointer px-2 md:px-3 py-1.5 md:py-2 text-[10px] md:text-xs font-bold uppercase tracking-wide border-2 transition-all duration-200 shrink-0
          ${t?"bg-amber-100 border-amber-300 text-amber-800":"bg-white text-neutral-400 border-neutral-300 hover:text-neutral-600 hover:border-black dark:bg-neutral-800 dark:border-neutral-700"}
        `,title:"Toggle Dev Tools Panel",children:r?"Close":"Dev"}),r&&l.jsx("div",{className:"fixed top-20 right-[260px] w-80 md:w-96 z-[100] shadow-2xl pointer-events-none",children:l.jsxs("div",{className:"relative pointer-events-auto",children:[l.jsx("button",{onClick:()=>n(!1),className:"cursor-pointer absolute -top-2 -right-2 w-8 h-8 flex items-center justify-center bg-neutral-800 text-white rounded-full border-2 border-white shadow-lg hover:bg-black transition-colors z-[110]",children:""}),l.jsx(O4,{})]})})]})};function I4(){j4();const{unlockedTabs:t,activeTab:r,setActiveTab:n,isFighting:i,darkMode:u,showProtocolSidebar:d,showDevTools:m,offlineModalData:f,clearOfflineModalData:g,redrawCount:x}=le(ft(N=>({unlockedTabs:N.unlockedTabs,activeTab:N.activeTab,setActiveTab:N.setActiveTab,isFighting:N.combatState.isFighting,darkMode:N.darkMode,showProtocolSidebar:N.showProtocolSidebar,showDevTools:N.showDevTools,offlineModalData:N.offlineModalData,clearOfflineModalData:N.clearOfflineModalData,redrawCount:N.redrawCount}))),[y,b]=B.useState(!0),[w,v]=B.useState(!0),[k,M]=B.useState(!1),[T,E]=B.useState(!1);B.useEffect(()=>{u?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[u]);const R=()=>{switch(r){case"Gallery":return l.jsx(Ax,{},x);case"Shop":return l.jsx(Ov,{},x);case"Archive":return l.jsx(e4,{},x);case"Ink War":return l.jsx(m4,{},x);case"Settings":return l.jsx(p4,{},x);default:return l.jsx(Ax,{},x)}};return l.jsxs("div",{className:`flex h-screen bg-neutral-100 dark:bg-neutral-950 font-sans text-neutral-900 dark:text-neutral-100 overflow-hidden select-none transition-colors ${u?"dark":""}`,children:[l.jsx(v4,{}),l.jsx(E4,{}),l.jsx(_4,{}),f&&l.jsx(A4,{gains:f.gains,conceptGains:f.conceptGains,elapsedSeconds:f.elapsedSeconds,onClose:g}),l.jsx(w4,{}),l.jsx(k4,{}),l.jsx(C4,{}),l.jsx(R4,{}),k&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>M(!1)}),l.jsxs("aside",{className:`transition-[width,transform] duration-300 ease-out h-full shadow-[4px_0_24px_rgba(0,0,0,0.1)] z-50 fixed inset-y-0 left-0 md:relative bg-white dark:bg-neutral-950 border-r border-neutral-300 dark:border-neutral-800 group/sidebar overflow-hidden shrink-0 
        ${k?"translate-x-0":"-translate-x-full md:translate-x-0"} 
        ${y?"w-[320px]":"w-12 md:hover:w-[320px]"}
        ${r==="Ink War"?"hidden md:block":""}
      `,children:[!y&&l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-12 hidden md:flex flex-col items-center justify-center pointer-events-none group-hover/sidebar:opacity-0 transition-opacity duration-200",children:l.jsx("div",{className:"uppercase font-black text-neutral-400 tracking-widest text-xs whitespace-nowrap rotate-[-90deg]",children:"Rejected Draft"})}),l.jsxs("div",{className:`w-[320px] h-full transition-all duration-300 ${y?"opacity-100 visible":"opacity-0 invisible md:group-hover/sidebar:opacity-100 md:group-hover/sidebar:visible"}`,children:[l.jsx("div",{className:"absolute right-2 top-2 z-50 md:hidden",children:l.jsx("button",{onClick:()=>M(!1),className:"w-8 h-8 flex items-center justify-center bg-neutral-200 dark:bg-neutral-800 rounded-full font-bold",children:""})}),l.jsx(_v,{isLocked:y,onToggleLock:()=>b(!y)})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-neutral-50 dark:bg-neutral-950",children:[l.jsx("header",{className:`bg-white dark:bg-neutral-900 border-b-2 border-neutral-800 dark:border-neutral-900 shadow-sm shrink-0 z-20 transition-all ${r==="Ink War"?"hidden md:block":""}`,children:l.jsx(N4,{tips:l.jsx(S4,{}),navigation:l.jsxs("nav",{className:"flex gap-1 md:gap-2 items-center overflow-x-auto no-scrollbar py-0.5 justify-start md:justify-end w-full",children:[l.jsxs("div",{className:"flex md:hidden gap-1 mr-2 shrink-0",children:[l.jsx("button",{onClick:()=>M(!0),className:"cursor-pointer h-6 px-1 text-[10px] font-bold uppercase tracking-wide border-2 bg-neutral-100 text-neutral-600 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-700",children:" Player"}),d&&l.jsx("button",{onClick:()=>E(!0),className:"cursor-pointer h-6 px-1 text-[10px] font-bold uppercase tracking-wide border-2 bg-neutral-100 text-neutral-600 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-700",children:"Protocols "})]}),i&&l.jsx("button",{onClick:()=>n("Ink War"),className:`cursor-pointer h-6 md:h-9 flex items-center justify-center px-1.5 md:px-4 text-[9px] md:text-sm font-bold uppercase tracking-wide border-2 transition-all duration-200 shrink-0 ${r==="Ink War"?"bg-red-600 text-white border-red-800 dark:bg-neutral-100 dark:text-red-600 dark:border-neutral-100":"bg-white text-red-600 border-red-600 hover:bg-red-50 hover:shadow-[2px_2px_0px_0px_rgba(185,28,28,0.2)] dark:bg-red-600 dark:text-white dark:border-red-600 dark:hover:bg-red-700"}`,children:" Battle"}),["Gallery","Shop","Archive","Settings"].filter(N=>t.includes(N)).map(N=>l.jsxs("button",{id:`tutorial-tab-${N.toLowerCase().replace(/\s+/g,"-")}`,onClick:()=>n(N),className:`cursor-pointer h-6 md:h-9 flex items-center justify-center px-1.5 md:px-4 text-[9px] md:text-sm font-bold uppercase tracking-wide border-2 transition-all duration-200 relative shrink-0 ${r===N?"bg-black text-white border-black dark:bg-neutral-100 dark:text-neutral-900 dark:border-neutral-100":"bg-white text-black border-neutral-400 hover:border-black hover:text-black hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,0.1)] dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-700 dark:hover:border-neutral-500"}`,children:[N,N==="Archive"&&l.jsx(L4,{}),N==="Shop"&&l.jsx(D4,{})]},N)),m&&l.jsx(P4,{})]})})}),l.jsx("main",{className:`flex-1 ${r==="Ink War"?"p-0":"p-2 md:p-4"} bg-neutral-100 dark:bg-neutral-950 transition-colors flex flex-col min-h-0`,children:l.jsx("div",{className:`flex-1 w-full bg-white dark:bg-neutral-950 ${r==="Ink War"?"border-0 rounded-none":"border-2 border-neutral-200 dark:border-neutral-800 rounded-xl shadow-sm"} overflow-hidden relative transition-colors flex flex-col min-h-0`,children:R()})})]}),d&&T&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>E(!1)}),d&&l.jsxs("aside",{className:`transition-[width,transform] duration-300 ease-out h-full shadow-[-4px_0_24px_rgba(0,0,0,0.1)] z-50 fixed inset-y-0 right-0 md:relative bg-white dark:bg-neutral-950 border-l border-neutral-300 dark:border-neutral-800 group/sidebar overflow-hidden shrink-0 
          ${T?"translate-x-0":"translate-x-full md:translate-x-0"}
          ${w?"w-[210px]":"w-12 md:hover:w-[210px]"}
          ${r==="Ink War"?"hidden md:block":""}
        `,children:[!w&&l.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-12 hidden md:flex flex-col items-center justify-center pointer-events-none group-hover/sidebar:opacity-0 transition-opacity duration-200",children:l.jsx("div",{className:"uppercase font-black text-neutral-400 tracking-widest text-[10px] whitespace-nowrap rotate-[90deg]",children:"Active Protocols"})}),l.jsxs("div",{className:`w-[210px] h-full transition-all duration-300 ml-auto ${w?"opacity-100 visible":"opacity-0 invisible md:group-hover/sidebar:opacity-100 md:group-hover/sidebar:visible"}`,children:[l.jsx("div",{className:"absolute left-2 top-2 z-50 md:hidden",children:l.jsx("button",{onClick:()=>E(!1),className:"w-8 h-8 flex items-center justify-center bg-neutral-200 dark:bg-neutral-800 rounded-full font-bold",children:""})}),l.jsx(Rv,{isLocked:w,onToggleLock:()=>v(!w)})]})]})]})}Ww.createRoot(document.getElementById("root")).render(l.jsx(I4,{}));
